"use strict";(self.webpackChunkangularlight=self.webpackChunkangularlight||[]).push([[266],{10266:(Q,b,s)=>{s.r(b),s.d(b,{StokAlatModule:()=>j});var T=s(69808),y=s(8202),c=s(50072),h=s(64035),u=s(65415),A=s(2454),U=s.n(A),g=s(15439),w=s(25900),t=s(5e3),f=s(44151),Z=s(23560),v=s(94554),m=s(65620),k=s(33399);const D=function(){return[]};let _=(()=>{class i{constructor(e,a,n,o,r,l){this.modalService=e,this.ModulStokService=a,this.router=n,this.spinner=o,this.MoneyService=r,this.store=l,this.datatableElement=u.G,this.dtOptions={},this.dataAlat=new w.U,this.btnDetail=!1,this.btnDelete=!1,this.btnEdit=!1,this.btnSetting=!1,this.btnAdd=!1,this.view=!1,this.getState=this.store.select("stok_alat")}ngOnInit(){this.spinner.show("spinner1");let e=JSON.parse(localStorage.getItem("currentUser"));e=e.menu_right,this.btnDetail=-1!=e.findIndex(a=>"IVISAK2"==a.kode),this.view=-1!=e.findIndex(a=>"IVISAK1"==a.kode),this.view||U().fire("Warning","Anda tidak mempunyai akses halaman ini","warning").then(()=>{window.location.href="/"}),this.dtOptions=this.showDataTables(this.btnDetail),this.getState.subscribe(a=>{this.reloadTable=a.reloadTable,!0===this.reloadTable&&this.reLoadData()}),setTimeout(()=>{this.spinner.hide("spinner1")},400)}detail(e){const a=encodeURIComponent(e.nama_alat_kesehatan);this.router.navigate(["barang/stok/detail/"+e.id_alat_kesehatan+"/"+a])}reLoadData(){this.datatableElement.dtInstance.then(e=>{e.ajax.reload()})}money(e){return this.MoneyService.formatRupiah(e)}showDataTables(e){let a=this;return{pageLength:10,serverSide:!0,processing:!0,order:[],ajax:(n,o)=>{this.ModulStokService.listDatatables(n).subscribe(r=>{o({draw:r.response.draw,recordsTotal:r.response.recordsTotal,recordsFiltered:r.response.recordsFiltered,data:r.response.data})})},columns:[{orderable:!1,searchable:!1,render:(n,o,r,l)=>l.row+1+l.settings._iDisplayStart},{data:"nama_alat_kesehatan"},{data:"stok"},{data:"ed_terdekat_unix",render:(n,o,r,l)=>null!=n?g(new Date(n)).format("DD-MM-YYYY"):"Expired"},{data:"harga_jual",render:(n,o,r,l)=>a.MoneyService.formatRupiah(n)},{orderable:!1,searchable:!1,render:(n,o,r,l)=>e?'<button class="btn btn-sm btn-info detail">Detail</button>':""}],rowCallback:(n,o,r)=>{const l=this;return $("td .detail",n).on("click",()=>{l.detail(o)}),n}}}ngOnDestroy(){document.body.classList.remove("jw-modal-open")}btnOpenModal(){this.modalService.open("modalFormContent")}modalClose(){this.modalService.close("modalFormContent")}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(f.Z),t.Y36(Z.O),t.Y36(h.F0),t.Y36(c.t2),t.Y36(v.r),t.Y36(m.yh))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-view"]],viewQuery:function(e,a){if(1&e&&t.Gf(u.G,5),2&e){let n;t.iGM(n=t.CRH())&&(a.datatableElement=n.first)}},decls:30,vars:7,consts:[[1,"content"],[1,"content-block"],[1,"block-header"],[3,"title","items","active_item"],[1,"text-center","mb-4"],[1,"row","clearfix"],[1,"col-xs-12","col-sm-12","col-md-12","col-lg-12"],[1,"card"],[1,"header"],[1,"body"],["width","100%","datatable","",1,"table","tabl-sm","table-striped","table-bordered","table-sm",3,"dtOptions"],["bdColor","rgba(0, 0, 0, 0.8)","size","medium","color","#fff","type","ball-clip-rotate-multiple",3,"name","fullScreen"],[2,"color","white"]],template:function(e,a){1&e&&(t.TgZ(0,"section",0)(1,"div",1)(2,"div",2),t._UZ(3,"app-breadcrumb",3),t.qZA(),t.TgZ(4,"h3",4),t._uU(5,"Stok Alat Kesehatan"),t.qZA(),t.TgZ(6,"div",5)(7,"div",6)(8,"div",7),t._UZ(9,"div",8),t.TgZ(10,"div",9)(11,"table",10)(12,"thead")(13,"tr")(14,"th"),t._uU(15,"No"),t.qZA(),t.TgZ(16,"th"),t._uU(17,"Barang"),t.qZA(),t.TgZ(18,"th"),t._uU(19,"Stok"),t.qZA(),t.TgZ(20,"th"),t._uU(21,"ED Terdekat"),t.qZA(),t.TgZ(22,"th"),t._uU(23,"Harga Jual(per @)"),t.qZA(),t.TgZ(24,"td"),t._uU(25,"Aksi"),t.qZA()()(),t._UZ(26,"tbody"),t.qZA()()()()()(),t.TgZ(27,"ngx-spinner",11)(28,"p",12),t._uU(29," Loading... "),t.qZA()()()),2&e&&(t.xp6(3),t.Q6J("title","Stok Alat Kesehatan")("items",t.DdM(6,D))("active_item","View Stok Alat Kesehatan"),t.xp6(8),t.Q6J("dtOptions",a.dtOptions),t.xp6(16),t.Q6J("name","spinner1")("fullScreen",!0))},directives:[k.L,u.G,c.Ro],styles:[""]}),i})();var S=s(15861),p=s(93075);const M=function(){return[]},C=function(){return["../../../view"]},Y=[{path:"",redirectTo:"view",pathMatch:"full"},{path:"view",component:_},{path:"detail/:id/:alat",component:(()=>{class i{constructor(e,a,n,o,r,l,I,K){this.fb=e,this.modalService=a,this.MoneyService=n,this.spinner=o,this.ModulStokService=r,this.store=l,this.activatedRoute=I,this.router=K,this.datatableElement=u.G,this.dtOptions={},this.dtOptionsRiwayat={},this.dataStok=[],this.listBatch=[],this.listRiwayat=[],this.alat="",this.id_alat=null,this.getState=this.store.select("stok_alat")}ngOnInit(){var e=this;this.activatedRoute.params.subscribe(function(){var a=(0,S.Z)(function*(n){n&&(e.spinner.show("spinner1"),e.loadData(n.id),e.id_alat=n.id,e.alat=decodeURIComponent(n.alat),e.dtOptions=e.showDataTables(n.id),e.dtOptionsRiwayat=e.showDataTablesRiwayat(n.id),setTimeout(()=>{e.spinner.hide("spinner1")},600))});return function(n){return a.apply(this,arguments)}}())}money(e){return this.MoneyService.formatRupiah(parseInt(e))}showDataTables(e){let a=this;return{pageLength:10,serverSide:!0,processing:!0,order:[],ajax:(n,o)=>{this.ModulStokService.getRiwayatBatch(e,n).subscribe(r=>{o({draw:r.response.draw,recordsTotal:r.response.recordsTotal,recordsFiltered:r.response.recordsFiltered,data:r.response.data})})},columns:[{orderable:!1,searchable:!1,render:(n,o,r,l)=>l.row+1+l.settings._iDisplayStart},{data:"tgl_faktur_unix",render:(n,o,r,l)=>null!=n?g(new Date(n)).format("DD-MM-YYYY"):"-"},{data:"harga_beli",render:(n,o,r,l)=>a.money(n)},{data:"no_batch"},{data:"tanggal_ed_unix",render:(n,o,r,l)=>null!=n?g(new Date(n)).format("DD-MM-YYYY"):"-"},{data:"stok_terkini"}],rowCallback:(n,o,r)=>{(new Date).getTime()>=new Date(o.tanggal_ed_unix).getTime()&&$(n).children().css("background-color","#ff8c8c")}}}showDataTablesRiwayat(e){return{pageLength:10,serverSide:!0,processing:!0,order:[],ajax:(a,n)=>{this.ModulStokService.getRiwayat(e,a).subscribe(o=>{console.log(o),n({draw:o.response.draw,recordsTotal:o.response.recordsTotal,recordsFiltered:o.response.recordsFiltered,data:o.response.data})})},columns:[{orderable:!1,searchable:!1,render:(a,n,o,r)=>r.row+1+r.settings._iDisplayStart},{data:"tanggal_invoice_unix",render:(a,n,o,r)=>null!=a?g(new Date(a)).format("DD-MM-YYYY"):"-"},{data:"kegiatan"},{data:"nama_lengkap"},{data:"no_batch"},{data:"stok_masuk"},{data:"stok_keluar"},{data:"stok_akhir"}]}}loadData(e){var a=this;return(0,S.Z)(function*(){yield a.ModulStokService.show(e).subscribe(n=>{n.response&&(a.dataStok=n.response)})})()}editKatalog(e){this.router.navigate(["barang","katalog","edit-buat-baru",this.id_alat,"stok_detail"])}toInt(e){return parseInt(e)}toString(e){return JSON.stringify(e)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(p.qu),t.Y36(f.Z),t.Y36(v.r),t.Y36(c.t2),t.Y36(Z.O),t.Y36(m.yh),t.Y36(h.gz),t.Y36(h.F0))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-detail"]],viewQuery:function(e,a){if(1&e&&t.Gf(u.G,5),2&e){let n;t.iGM(n=t.CRH())&&(a.datatableElement=n.first)}},decls:115,vars:19,consts:[[1,"content"],[1,"content-block"],[1,"block-header"],[3,"title","items","active_item"],[1,"text-center","mb-4"],[1,"row","clearfix"],[1,"col-xs-12","col-sm-12","col-md-12","col-lg-12"],[1,"row"],[1,"col-6"],["type","button",1,"btn","btn-kembali","btn-lg","mb-3",3,"routerLink"],[1,"fas","fa-arrow-left"],[1,"col-6","text-end"],[1,"btn","btn-info",3,"click"],[1,"card"],[1,"header"],[1,"text-center","w100"],[1,"body"],["width","100%",1,"table","tabl-sm","table-striped","table-bordered","table-sm","mb-3"],[1,"table","tabl-sm","table-striped","table-bordered","table-sm","mb-3"],["width","100%","datatable","",1,"table","tabl-sm","table-striped","table-bordered","table-sm",3,"dtOptions"],[1,"text-center"],["rowspan","2"],["colspan","2"],["bdColor","rgba(0, 0, 0, 0.8)","size","medium","color","#fff","type","ball-clip-rotate-multiple",3,"name","fullScreen"],[2,"color","white"]],template:function(e,a){1&e&&(t.TgZ(0,"section",0)(1,"div",1)(2,"div",2),t._UZ(3,"app-breadcrumb",3),t.qZA(),t.TgZ(4,"h3",4),t._uU(5,"Detail Alat Kesehatan"),t._UZ(6,"br"),t._uU(7),t.qZA(),t.TgZ(8,"div",5)(9,"div",6)(10,"div",7)(11,"div",8)(12,"button",9),t._UZ(13,"i",10),t._uU(14," Kembali"),t.qZA()(),t.TgZ(15,"div",11)(16,"button",12),t.NdJ("click",function(){return a.editKatalog(a.dataStok.id_alat_kesehatan)}),t._uU(17,"Update Harga"),t.qZA()()(),t.TgZ(18,"div",13)(19,"div",14),t._UZ(20,"h4",15),t.qZA(),t.TgZ(21,"div",16)(22,"table",17)(23,"tbody")(24,"tr")(25,"th"),t._uU(26," Stock Total "),t._UZ(27,"br"),t.TgZ(28,"h4")(29,"strong"),t._uU(30),t.qZA()()(),t.TgZ(31,"th"),t._uU(32," Stock Minimun "),t._UZ(33,"br"),t.TgZ(34,"h4")(35,"strong"),t._uU(36),t.qZA()()(),t.TgZ(37,"th"),t._uU(38," Rata-rata Jual "),t.TgZ(39,"h4")(40,"strong"),t._uU(41),t.qZA()()()()()(),t.TgZ(42,"h3"),t._uU(43,"Detail harga"),t.qZA(),t.TgZ(44,"table",18)(45,"tbody")(46,"tr")(47,"td"),t._uU(48," Harga Jual "),t._UZ(49,"br"),t._uU(50),t.qZA(),t.TgZ(51,"td"),t._uU(52," Harga Pokok "),t._UZ(53,"br"),t._uU(54),t.qZA(),t.TgZ(55,"td"),t._uU(56," Margin "),t._UZ(57,"br"),t._uU(58),t.qZA()()()()()(),t.TgZ(59,"div",13)(60,"div",16)(61,"h4")(62,"strong"),t._uU(63,"Batch Pada Stock"),t.qZA()(),t.TgZ(64,"p"),t._uU(65,"Dalam Tablet"),t.qZA(),t.TgZ(66,"table",19)(67,"thead")(68,"tr")(69,"th"),t._uU(70,"No"),t.qZA(),t.TgZ(71,"th"),t._uU(72,"Tanggal Beli"),t.qZA(),t.TgZ(73,"th"),t._uU(74,"Harga Pokok"),t.qZA(),t.TgZ(75,"th"),t._uU(76,"No. Batch"),t.qZA(),t.TgZ(77,"th"),t._uU(78,"ED"),t.qZA(),t.TgZ(79,"th"),t._uU(80,"Stok"),t.qZA()()(),t._UZ(81,"tbody"),t.qZA()()(),t.TgZ(82,"div",13)(83,"div",16)(84,"h4")(85,"strong"),t._uU(86,"Riwayat Stock"),t.qZA()(),t.TgZ(87,"p"),t._uU(88,"Dalam Tablet"),t.qZA(),t.TgZ(89,"table",19)(90,"thead")(91,"tr",20)(92,"th",21),t._uU(93,"No"),t.qZA(),t.TgZ(94,"th",21),t._uU(95,"Waktu"),t.qZA(),t.TgZ(96,"th",21),t._uU(97,"Kegiatan"),t.qZA(),t.TgZ(98,"th",21),t._uU(99,"Oleh"),t.qZA(),t.TgZ(100,"th",21),t._uU(101,"Batch"),t.qZA(),t.TgZ(102,"th",22),t._uU(103,"Jumlah"),t.qZA(),t.TgZ(104,"th",21),t._uU(105,"Stock"),t.qZA()(),t.TgZ(106,"tr",20)(107,"td"),t._uU(108,"Masuk"),t.qZA(),t.TgZ(109,"td"),t._uU(110,"Keluar"),t.qZA()()(),t._UZ(111,"tbody"),t.qZA()()()()()(),t.TgZ(112,"ngx-spinner",23)(113,"p",24),t._uU(114," Loading... "),t.qZA()()()),2&e&&(t.xp6(3),t.Q6J("title","Stock Alat Kesehatan")("items",t.DdM(17,M))("active_item","Detail Alat Kesehatan"),t.xp6(4),t.Oqu(a.alat),t.xp6(5),t.Q6J("routerLink",t.DdM(18,C)),t.xp6(18),t.hij(" ",a.dataStok.stok+" "+a.dataStok.kemasan_singkatan," "),t.xp6(6),t.AsE("",null!=a.dataStok.stok_minimum?a.dataStok.stok_minimum:"0"," ",a.dataStok.kemasan_singkatan," "),t.xp6(5),t.AsE(" ",null!=a.dataStok.rata_rata_jual?a.dataStok.rata_rata_jual:"0"," ",a.dataStok.kemasan_singkatan+"/mgg"," "),t.xp6(9),t.hij(" ",a.money(a.dataStok.harga_jual)+"/"+a.dataStok.kemasan," "),t.xp6(4),t.hij(" ",a.money(a.dataStok.harga_pokok_terkini)+"/"+a.dataStok.kemasan," "),t.xp6(4),t.hij(" ",a.dataStok.margin+"%"," "),t.xp6(8),t.Q6J("dtOptions",a.dtOptions),t.xp6(23),t.Q6J("dtOptions",a.dtOptionsRiwayat),t.xp6(23),t.Q6J("name","spinner1")("fullScreen",!0))},directives:[k.L,h.rH,u.G,c.Ro],styles:["table.table-header-info[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > th[_ngcontent-%COMP%]{text-align:center;padding:2px;width:10%}"]}),i})()}];let O=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[h.Bz.forChild(Y)],h.Bz]}),i})();var x=s(60795),R=s(16270),q=s(36642),J=s(34841),F=s(21023);let j=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[T.ez,O,x.K,c.ef,u.T,p.u5,p.UX,R.z,y.Ud,m.Aw.forFeature("stok_alat",J.o),q.sQ.forFeature([F.l])]]}),i})()}}]);