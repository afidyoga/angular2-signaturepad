"use strict";(self.webpackChunkangularlight=self.webpackChunkangularlight||[]).push([[3562],{63562:(Ja,P,p)=>{p.r(P),p.d(P,{KatalogModule:()=>Sa});var k=p(69808),f=p(64035),v=p(65415),tt=p(2454),b=p.n(tt),u=p(65620);const x=(0,u.PH)("[ALAT KESEHATAN] add initial",(0,u.Ky)()),E=(0,u.PH)("[ALAT KESEHATAN] add success",(0,u.Ky)()),w=(0,u.PH)("[ALAT KESEHATAN] add failure ",(0,u.Ky)()),S=(0,u.PH)("[ALAT KESEHATAN] update initial",(0,u.Ky)()),N=(0,u.PH)("[ALAT KESEHATAN] update success",(0,u.Ky)()),J=(0,u.PH)("[ALAT KESEHATAN] update failure",(0,u.Ky)()),L=(0,u.PH)("[ALAT KESEHATAN] get byid initial",(0,u.Ky)()),G=(0,u.PH)("[ALAT KESEHATAN] get byid success",(0,u.Ky)()),O=(0,u.PH)("[ALAT KESEHATAN] get byid failure",(0,u.Ky)()),M=(0,u.PH)("[ALAT KESEHATAN] delete initial",(0,u.Ky)()),j=(0,u.PH)("[ALAT KESEHATAN] delete success",(0,u.Ky)()),Q=(0,u.PH)("[ALAT KESEHATAN] delete failure",(0,u.Ky)()),ht=(0,u.PH)("[ALAT KESEHATAN] clear data "),B=(0,u.PH)("[ALAT KESEHATAN] table data");class Z{}var t=p(5e3),F=p(44151),R=p(22346),T=p(50072),U=p(33399),Y=p(51693);function gt(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"button",28),t.NdJ("click",function(){return t.CHM(e),t.oxw().btnOpenModal()}),t._UZ(1,"i",29),t._uU(2," Tambah Barang"),t.qZA()}}const bt=function(){return["../import-csv"]};function ft(n,s){1&n&&(t.TgZ(0,"div",8)(1,"a",18)(2,"div",19),t._UZ(3,"i",30),t.TgZ(4,"label",21),t._uU(5,"Import CSV"),t.qZA(),t.TgZ(6,"p")(7,"i"),t._uU(8," Pindahkan data barang dari sistem lama ke Cloudcare"),t.qZA()()()()()),2&n&&(t.xp6(1),t.Q6J("routerLink",t.DdM(1,bt)))}const kt=function(){return[]},Zt=function(){return["../katalog-barang-bpom"]},Tt=function(){return["../buat-baru"]};let vt=(()=>{class n{constructor(e,a,i,o,r){this.modalService=e,this.ModulAlatKesehatanService=a,this.router=i,this.spinner=o,this.store=r,this.datatableElement=v.G,this.dtOptions={},this.dataObat=new Z,this.btnDetail=!1,this.btnDelete=!1,this.btnEdit=!1,this.btnSetting=!1,this.btnAdd=!1,this.btnImport=!1,this.view=!1,this.getState=this.store.select("alat_kesehatan")}ngOnInit(){this.spinner.show("spinner1");let e=JSON.parse(localStorage.getItem("currentUser"));e=e.menu_right,this.btnAdd=-1!=e.findIndex(a=>"IVKLAK2"==a.kode),this.btnEdit=-1!=e.findIndex(a=>"IVKLAK3"==a.kode),this.btnDelete=-1!=e.findIndex(a=>"IVKLAK4"==a.kode),this.btnImport=-1!=e.findIndex(a=>"IVKLAK5"==a.kode),this.btnDetail=this.view=-1!=e.findIndex(a=>"IVKLAK1"==a.kode),this.view||b().fire("Warning","Anda tidak mempunyai akses halaman ini","warning").then(()=>{window.location.href="/"}),this.dtOptions=this.showDataTables(this.btnEdit,this.btnDelete),this.getState.subscribe(a=>{this.reloadTable=a.reloadTable,!0===this.reloadTable&&this.reLoadData()}),setTimeout(()=>{this.spinner.hide("spinner1")},400)}editData(e){this.router.navigate(["barang/katalog/edit-buat-baru/"+e.id_alat_kesehatan])}nonAktif(e){b().fire({title:"Apakah anda yakin akan menghapus data ini ?",icon:"warning",showCancelButton:!0,allowOutsideClick:!1,confirmButtonText:"Ya, hapus saja!",cancelButtonText:"Tidak, Batalkan"}).then(a=>{a.value&&(this.spinner.show("spinner1"),this.store.dispatch(M({payload:{id:e.id_alat_kesehatan}})),setTimeout(()=>{this.spinner.hide("spinner1")},400))})}reLoadData(){this.datatableElement.dtInstance.then(e=>{e.ajax.reload()})}showDataTables(e,a){return{pageLength:10,serverSide:!0,processing:!0,order:[],ajax:(i,o)=>{this.ModulAlatKesehatanService.listDatatables(i).subscribe(r=>{o({draw:r.response.draw,recordsTotal:r.response.recordsTotal,recordsFiltered:r.response.recordsFiltered,data:r.response.data})})},columns:[{orderable:!1,searchable:!1,render:(i,o,r,d)=>d.row+1+d.settings._iDisplayStart},{data:"nama_alat_kesehatan"},{data:"nama_alat_kesehatan",render(i,o,r,d){let c="";return r.alat_kesehatan_kemasan=r.alat_kesehatan_kemasan.sort((m,g)=>g.kemasan_level-m.kemasan_level),r.alat_kesehatan_kemasan.map((m,g)=>{c+=0==g?m.nama_kemasan+", ":" "+m.target_qty+" "+m.nama_kemasan+" @"}),c=c.substring(0,c.length-1),c}},{orderable:!1,searchable:!1,render(i,o,r,d){let c="";return c+=e?'<button class="btn btn-sm btn-ubah update-data">Edit</button>':"",c+=a?'<button class="btn nonaktif-data btn-hapus btn-sm">Hapus</button>':"",c}}],rowCallback:(i,o,r)=>{const d=this;return $("td .update-data",i).on("click",()=>{d.editData(o)}),$("td .nonaktif-data",i).on("click",()=>{d.nonAktif(o)}),i}}}ngOnDestroy(){document.body.classList.remove("jw-modal-open")}btnOpenModal(){this.modalService.open("modalFormContent")}modalClose(){this.modalService.close("modalFormContent")}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(F.Z),t.Y36(R.W),t.Y36(f.F0),t.Y36(T.t2),t.Y36(u.yh))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-view"]],viewQuery:function(e,a){if(1&e&&t.Gf(v.G,5),2&e){let i;t.iGM(i=t.CRH())&&(a.datatableElement=i.first)}},decls:51,vars:13,consts:[[1,"content"],[1,"content-block"],[1,"block-header"],[3,"title","items","active_item"],[1,"text-center"],[1,"row","clearfix"],[1,"col-xs-12","col-sm-12","col-md-12","col-lg-12"],["type","button","class","btn btn-tambah btn-lg mb-3",3,"click",4,"ngIf"],[1,"card"],[1,"header"],[1,"body"],["width","100%","datatable","",1,"table","tabl-sm","table-striped","table-bordered","table-sm",3,"dtOptions"],["width","30"],["width","100"],["id","modalFormContent"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],[1,"modal-body"],[2,"color","black",3,"routerLink"],[1,"p-3"],[1,"fas","fa-splotch","pe-2"],[1,"fw-bold"],["class","card ",4,"ngIf"],[1,"far","fa-plus-square","pe-2"],[1,"modal-footer"],["type","button",1,"btn","btn-kembali",3,"click"],["bdColor","rgba(0, 0, 0, 0.8)","size","medium","color","#fff","type","ball-clip-rotate-multiple",3,"name","fullScreen"],[2,"color","white"],["type","button",1,"btn","btn-tambah","btn-lg","mb-3",3,"click"],[1,"fas","fa-plus"],[1,"fas","fa-file-import","pe-2"]],template:function(e,a){1&e&&(t.TgZ(0,"section",0)(1,"div",1)(2,"div",2),t._UZ(3,"app-breadcrumb",3),t.qZA(),t.TgZ(4,"h3",4),t._uU(5,"Katalog"),t.qZA(),t.TgZ(6,"div",5)(7,"div",6),t.YNc(8,gt,3,0,"button",7),t.TgZ(9,"div",8),t._UZ(10,"div",9),t.TgZ(11,"div",10)(12,"table",11)(13,"thead")(14,"tr")(15,"th",12),t._uU(16,"No"),t.qZA(),t.TgZ(17,"th"),t._uU(18,"Nama Alat Kesehatan"),t.qZA(),t.TgZ(19,"th"),t._uU(20,"Kemasan"),t.qZA(),t.TgZ(21,"th",13),t._uU(22,"Aksi"),t.qZA()()(),t._UZ(23,"tbody"),t.qZA(),t.TgZ(24,"jw-modal",14)(25,"div",15)(26,"h4",16),t._uU(27,"Tambah barang dari..."),t.qZA()(),t.TgZ(28,"div",17)(29,"div",8)(30,"a",18)(31,"div",19),t._UZ(32,"i",20),t.TgZ(33,"label",21),t._uU(34,"Katalog Barang BPOM"),t.qZA(),t.TgZ(35,"p")(36,"i"),t._uU(37," Cara termudah untuk menambah barang ke katalog apotekmu"),t.qZA()()()()(),t.YNc(38,ft,9,2,"div",22),t.TgZ(39,"div",8)(40,"a",18)(41,"div",19),t._UZ(42,"i",23),t.TgZ(43,"label",21),t._uU(44,"Buat barang baru"),t.qZA()()()()(),t.TgZ(45,"div",24)(46,"button",25),t.NdJ("click",function(){return a.modalClose()}),t._uU(47,"Batal"),t.qZA()()()()()()()(),t.TgZ(48,"ngx-spinner",26)(49,"p",27),t._uU(50," Loading... "),t.qZA()()()),2&e&&(t.xp6(3),t.Q6J("title","Katalog Alat Kesehatan")("items",t.DdM(10,kt))("active_item","Katalog"),t.xp6(5),t.Q6J("ngIf",a.btnAdd),t.xp6(4),t.Q6J("dtOptions",a.dtOptions),t.xp6(18),t.Q6J("routerLink",t.DdM(11,Zt)),t.xp6(8),t.Q6J("ngIf",a.btnImport),t.xp6(2),t.Q6J("routerLink",t.DdM(12,Tt)),t.xp6(8),t.Q6J("name","spinner1")("fullScreen",!0))},directives:[U.L,k.O5,v.G,Y.z,f.yS,T.Ro],styles:[""]}),n})();var l=p(93075),V=p(94554),W=p(88544),K=p(8202),D=p(67236);function At(n,s){1&n&&(t.TgZ(0,"div",55),t._uU(1," Nama barang tidak boleh kosong "),t.qZA())}function qt(n,s){1&n&&(t.TgZ(0,"div",55),t._uU(1," Satuan terkecil tidak boleh kosong "),t.qZA())}function Ut(n,s){1&n&&(t.TgZ(0,"div",55),t._uU(1," Singkatan tidak boleh kosong "),t.qZA())}function Kt(n,s){1&n&&(t.TgZ(0,"div",55),t._uU(1," Spesifikasi tidak boleh kosong "),t.qZA())}function Bt(n,s){1&n&&(t.TgZ(0,"div",55),t._uU(1," Harga jual harus lebih dari 0 "),t.qZA())}function yt(n,s){1&n&&(t.TgZ(0,"div",56)(1,"h3")(2,"strong"),t._uU(3,"Tips"),t.qZA()(),t.TgZ(4,"p"),t._uU(5,"Untuk memudahkan, buat kemasan dari kecil (contoh: strip isi 8 tablet) ke besar (contoh: box isi 10 strip)"),t.qZA()())}function It(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"tr",57),t.ynx(1,58),t.TgZ(2,"td"),t._uU(3),t.qZA(),t.TgZ(4,"td"),t._uU(5),t.qZA(),t.TgZ(6,"td"),t._uU(7),t.qZA(),t.TgZ(8,"td")(9,"button",59),t.NdJ("click",function(){const o=t.CHM(e).index;return t.oxw().editListKemasan(o)}),t._uU(10,"Edit"),t.qZA(),t.TgZ(11,"button",60),t.NdJ("click",function(){const o=t.CHM(e).index;return t.oxw().hapusListKemasaan(o)}),t._uU(12,"Hapus"),t.qZA()(),t.BQk(),t.qZA()}if(2&n){const e=s.$implicit,a=s.index;t.xp6(1),t.Q6J("formGroupName",a),t.xp6(2),t.Oqu(e.value.nama_kemasan),t.xp6(2),t.Oqu(e.value.nama_kemasan_singkatan),t.xp6(2),t.Oqu(e.value.target_qty+"/"+e.value.target_kemasan)}}function Ct(n,s){1&n&&(t.TgZ(0,"div",55),t._uU(1," Stok Awal harus lebih dari 0 tidak boleh kosong "),t.qZA())}function xt(n,s){1&n&&(t.TgZ(0,"div",55),t._uU(1," Tanggal ED tidak boleh kosong "),t.qZA())}function Et(n,s){1&n&&(t.TgZ(0,"div",55),t._uU(1," Harga Beli harus lebih dari 0 "),t.qZA())}function wt(n,s){1&n&&(t.TgZ(0,"div",55),t._uU(1," No Batch tidak boleh kosong "),t.qZA())}const St=function(){return{adaptivePosition:!0,dateInputFormat:"DD-MM-YYYY",returnFocusToInput:!0}};function Nt(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div",61),t.ynx(1,58),t.TgZ(2,"div",62)(3,"b"),t._uU(4,"Stok Awal"),t.qZA(),t.TgZ(5,"span",15)(6,"b"),t._uU(7,"*"),t.qZA()(),t.TgZ(8,"input",63),t.NdJ("keypress",function(i){return t.CHM(e),t.oxw().isNumber(i)}),t.qZA(),t.YNc(9,Ct,2,0,"div",18),t.qZA(),t.TgZ(10,"div",62)(11,"b"),t._uU(12,"Tanggal ED"),t.qZA(),t.TgZ(13,"span",15)(14,"b"),t._uU(15,"*"),t.qZA()(),t.TgZ(16,"div",64),t._UZ(17,"input",65),t.TgZ(18,"span",66),t.NdJ("click",function(){const o=t.CHM(e).index;return t.oxw().onFocus("ed"+o)}),t._UZ(19,"i",67),t.qZA()(),t.YNc(20,xt,2,0,"div",18),t.qZA(),t.TgZ(21,"div",62)(22,"b"),t._uU(23,"Harga Beli"),t.qZA(),t.TgZ(24,"span",15)(25,"b"),t._uU(26,"*"),t.qZA()(),t._UZ(27,"input",68),t.YNc(28,Et,2,0,"div",18),t.qZA(),t.TgZ(29,"div",62)(30,"b"),t._uU(31,"No Batch"),t.qZA(),t.TgZ(32,"span",15)(33,"b"),t._uU(34,"*"),t.qZA()(),t._UZ(35,"input",69),t.YNc(36,wt,2,0,"div",18),t.qZA(),t.TgZ(37,"div",70)(38,"button",71),t.NdJ("click",function(){const o=t.CHM(e).index;return t.oxw().removeBatch(o)}),t._UZ(39,"i",72),t.qZA()(),t.BQk(),t.qZA()}if(2&n){const e=s.index,a=t.oxw();t.xp6(1),t.Q6J("formGroupName",e),t.xp6(8),t.Q6J("ngIf",(""==a.formInput.value.listBatch[e].stok_awal||a.formInput.value.listBatch[e].stok_awal<=0)&&a.submitted),t.xp6(8),t.Q6J("bsConfig",t.DdM(9,St))("outsideClick",!0)("id","ed"+e),t.xp6(3),t.Q6J("ngIf",""==a.formInput.value.listBatch[e].ed_batch&&a.submitted),t.xp6(7),t.Q6J("options",a.optionsCur),t.xp6(1),t.Q6J("ngIf",(""==a.formInput.value.listBatch[e].harga_beli||a.formInput.value.listBatch[e].harga_beli<=0)&&a.submitted),t.xp6(8),t.Q6J("ngIf",""==a.formInput.value.listBatch[e].no_batch&&a.submitted)}}function Jt(n,s){1&n&&(t.TgZ(0,"table",73)(1,"tr")(2,"td",74)(3,"b"),t._uU(4,"Informasi stock masih kosong"),t.qZA()()()())}function Lt(n,s){if(1&n&&(t.TgZ(0,"ul")(1,"li"),t._uU(2),t.qZA()()),2&n){const e=s.$implicit;t.xp6(2),t.AsE("",e.field," : ",e.message,"")}}function Ot(n,s){if(1&n&&(t.TgZ(0,"div",75),t._uU(1),t.YNc(2,Lt,3,2,"ul",48),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.hij(" ",e.errorMessage.metaData.message," "),t.xp6(1),t.Q6J("ngForOf",e.errorMessage.response)}}function Mt(n,s){1&n&&(t.TgZ(0,"div",55),t._uU(1," Nama kemasan tidak boleh kosong "),t.qZA())}function jt(n,s){1&n&&(t.TgZ(0,"div",55),t._uU(1," Singkatan tidak boleh kosong "),t.qZA())}function Qt(n,s){1&n&&(t.TgZ(0,"div",55),t._uU(1," Isi tidak boleh kosong "),t.qZA())}function Ft(n,s){if(1&n&&(t.TgZ(0,"option",47),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.s9C("value",e.nama_kemasan_singkatan),t.xp6(1),t.Oqu(e.nama_kemasan)}}function Yt(n,s){if(1&n&&(t.ynx(0),t.YNc(1,Ft,2,2,"option",76),t.BQk()),2&n){const e=s.index,a=t.oxw();t.xp6(1),t.Q6J("ngIf",!("update"==a.aksiModalKemasan&&a.indexListKemasan==e))}}const Dt=function(){return[]},Ht=function(){return["../view"]},Pt=function(n,s){return{"fa-spin fa-spinner pulse":n,"fa-check":s}};let Gt=(()=>{class n{constructor(e,a,i,o,r,d){this.fb=e,this.modalService=a,this.spinner=i,this.money=o,this.validate=r,this.store=d,this.submitted=!1,this.submittedKemasan=!1,this.AlatKesehatanPayload=new Z,this.batchRequire=!1,this.listBatch=[],this.add=!1,this.optionsCur=this.money.currency(),this.getState=this.store.select("alat_kesehatan")}ngOnInit(){this.getState.subscribe(e=>{if(this.AlatKesehatanPayload=e.AlatKesehatan,this.errorMessage=e.errorMessage,this.submitButton=e.submitButton,this.isLoadingButton=e.isLoadingButton,null!=this.errorMessage){let a="";this.errorMessage.response.map(i=>{a+=i.field+" "+i.message+"\n"}),b().fire("Error",a,"error")}}),this.formInput=this.fb.group({nama_alat_kesehatan:[null,[l.kI.required]],kemasan_terkecil:[null,[l.kI.required]],kemasan_terkecil_singkatan:[null,[l.kI.required]],komposisi:"",stok:"",harga_jual:0,harga_beli:"",listBatch:this.fb.array([]),alat_kesehatan_kemasan:this.fb.array([])}),this.formKemasan=this.fb.group({nama_kemasan:[null,[l.kI.required]],nama_kemasan_singkatan:[null,[l.kI.required]],target_kemasan:[null,[l.kI.required]],target_qty:[null,[l.kI.required]]})}onFocus(e){document.getElementById(e).click()}setBatch(e,a,i){this.listBatch[e][a]=i.target.value}isNumber(e){return this.validate.Number(e)}addBatch(){this.formInput.controls.listBatch.push(this.fb.group({stok_awal:0,ed_batch:"",no_batch:"",harga_beli:0}))}removeBatch(e){this.formInput.get("listBatch").removeAt(e)}submitInput(){if(this.submitted=!1,setTimeout(()=>{this.submitted=!0},300),this.formInput.invalid)return;this.spinner.show("spinner1");let e=this.formInput.value,a=[],o=new Z;o.stok=0;let r=0,d=[];e.listBatch.map(m=>{""==m.no_batch||""==m.ed_batch||m.stok_awal<=0||m.harga_beli<=0||(d.push({no_batch:m.no_batch,tanggal_ed:new Date(m.ed_batch).getTime(),stok_batch:m.stok_awal,harga_beli:m.harga_beli}),r+=Number(m.harga_beli),o.stok+=m.stok_awal)}),a.push({nama_kemasan:e.kemasan_terkecil,nama_kemasan_singkatan:e.kemasan_terkecil_singkatan,target_kemasan:e.kemasan_terkecil_singkatan,target_qty:1,kemasan_level:1});let c=1;e.alat_kesehatan_kemasan.forEach((m,g)=>{a.push({nama_kemasan:m.nama_kemasan,nama_kemasan_singkatan:m.nama_kemasan_singkatan,target_kemasan:m.target_kemasan,target_qty:m.target_qty,kemasan_level:c+1}),c++}),o.harga_beli=r,o.nama_alat_kesehatan=e.nama_alat_kesehatan,o.kemasan_terkecil=e.kemasan_terkecil,o.kemasan_terkecil_singkatan=e.kemasan_terkecil_singkatan,o.komposisi=e.komposisi,o.harga_jual=e.harga_jual,o.alat_kesehatan_kemasan=a,o.batch=d,this.store.dispatch(x({payload:o})),setTimeout(()=>{this.spinner.hide("spinner1")},400)}ambilSingkatan(e,a){let i=e.substr(0,3);"parent"==a?this.formInput.patchValue({kemasan_terkecil_singkatan:i}):this.formKemasan.patchValue({nama_kemasan_singkatan:i})}submitKemasan(){this.submittedKemasan=!1,setTimeout(()=>{this.submittedKemasan=!0},300),!this.formKemasan.invalid&&("add"==this.aksiModalKemasan?(this.formInput.value.alat_kesehatan_kemasan.length>0?this.formInput.value.alat_kesehatan_kemasan.findIndex(a=>a.nama_kemasan==this.formInput.value.satuan_terkecil):-1)<0&&this.formInput.value.kemasan_terkecil!=this.formKemasan.value.nama?this.insertKemasanToAray():b().fire("Error","Duplicated data","error"):this.updateKemasanArray())}insertKemasanToAray(){this.formInput.controls.alat_kesehatan_kemasan.push(this.fb.group({nama_kemasan:this.formKemasan.value.nama_kemasan,target_qty:this.formKemasan.value.target_qty,nama_kemasan_singkatan:this.formKemasan.value.nama_kemasan_singkatan,target_kemasan:this.formKemasan.value.target_kemasan})),this.closeBtnTambahKemasan()}updateKemasanArray(){let e=this.indexListKemasan,a=!1;this.formInput.value.alat_kesehatan_kemasan.map((i,o)=>{i.nama_kemasan==this.formKemasan.value.nama_kemasan&&o!=e&&(a=!0)}),a?b().fire("Error","Duplicated data","error"):(this.formInput.controls.alat_kesehatan_kemasan.at(e).patchValue({nama_kemasan:this.formKemasan.value.nama_kemasan,target_qty:this.formKemasan.value.target_qty,nama_kemasan_singkatan:this.formKemasan.value.nama_kemasan_singkatan,target_kemasan:this.formKemasan.value.target_kemasan}),this.closeBtnTambahKemasan())}hapusListKemasaan(e){this.formInput.get("alat_kesehatan_kemasan").removeAt(e)}editListKemasan(e){let a=this.formInput.value.alat_kesehatan_kemasan[e];this.formKemasanTitle="Edit kemasan",this.indexListKemasan=e,this.aksiModalKemasan="update",this.formKemasan.reset(),this.formKemasan.patchValue({nama_kemasan:a.nama_kemasan,target_qty:a.target_qty,nama_kemasan_singkatan:a.nama_kemasan_singkatan,target_kemasan:a.target_kemasan}),this.submittedKemasan=!1,this.modalService.open("modalFormContent")}btnTambahKemasan(){this.submitted=!1,setTimeout(()=>{this.submitted=!0},300),!this.formInput.invalid&&(this.formKemasanTitle="Tambah kemasan",this.submittedKemasan=!1,this.formKemasan.reset(),this.formKemasan.patchValue({target_kemasan:this.formInput.value.kemasan_terkecil_singkatan}),this.aksiModalKemasan="add",this.submittedKemasan=!1,this.modalService.open("modalFormContent"))}closeBtnTambahKemasan(){this.modalService.close("modalFormContent")}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(l.qu),t.Y36(F.Z),t.Y36(T.t2),t.Y36(V.r),t.Y36(W.p),t.Y36(u.yh))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-buat-baru"]],decls:159,vars:53,consts:[[1,"content"],[1,"content-block"],[1,"block-header"],[3,"title","items","active_item"],[1,"text-center","mb-3"],["type","button",1,"btn","btn-kembali","mb-3","btn-lg",3,"routerLink"],[1,"fas","fa-arrow-left"],[1,"row","clearfix"],[1,"col-xs-12","col-sm-12","col-md-12","col-lg-12"],[1,"card"],[3,"formGroup","submit"],[1,"header"],[1,"body"],[1,"row","mb-3"],[1,"col-sm-2","col-form-label","fw-bold"],[1,"text-danger"],[1,"col-sm-4"],["type","text","formControlName","nama_alat_kesehatan",1,"form-control"],["class","form-text text-danger",4,"ngIf"],["type","text","formControlName","kemasan_terkecil","placeholder","Contoh: pcs, box, dus",1,"form-control",3,"keyup"],[1,"col-sm-2"],["type","text","formControlName","kemasan_terkecil_singkatan","placeholder","3 huruf",1,"form-control"],["formControlName","komposisi","cols","5","rows","5",1,"form-control"],["currencyMask","","formControlName","harga_jual",1,"form-control",3,"options"],[1,"judul-kemasan","mb-3"],["class","alert alert-warning",4,"ngIf"],[1,"row","mx-5"],["width","100%",1,"table","table-striped","table-bordered","table-sm"],["formArrayName","alat_kesehatan_kemasan",4,"ngFor","ngForOf"],["type","button",1,"btn","btn-primary",3,"click"],["type","button",1,"btn","btn-info","btn-md",3,"click"],["class","row mb-2","formArrayName","listBatch",4,"ngFor","ngForOf"],["class","table table-bordered table-striped","style","width: 100%;",4,"ngIf"],["class","alert alert-danger","role","alert",4,"ngIf"],[1,"footer","text-center","my-3"],["type","submit",1,"btn","btn-simpan","btn-lg"],["id","modalFormContent"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],[1,"modal-body"],[1,"mb-3","row"],[1,"col-sm-3","col-form-label","fw-bold"],[1,"col-sm-7"],["type","text","formControlName","nama_kemasan","placeholder","Contoh: pcs, box, dus",1,"form-control",3,"keyup"],["type","text","formControlName","nama_kemasan_singkatan","placeholder","3 huruf",1,"form-control"],["type","text","formControlName","target_qty",1,"form-control",3,"keypress"],["formControlName","target_kemasan",1,"form-select"],[3,"value"],[4,"ngFor","ngForOf"],[1,"modal-footer"],["type","button",1,"btn","btn-kembali",3,"disabled","click"],["type","submit","color","primary",1,"btn","btn-simpan","btn-lg",3,"disabled"],[1,"fa",3,"ngClass"],["bdColor","rgba(0, 0, 0, 0.8)","size","medium","color","#fff","type","ball-clip-rotate-multiple",3,"name","fullScreen"],[2,"color","white"],[1,"form-text","text-danger"],[1,"alert","alert-warning"],["formArrayName","alat_kesehatan_kemasan"],[3,"formGroupName"],["type","button",1,"btn","btn-sm","btn-ubah",3,"click"],["type","button",1,"btn","btn-sm","btn-hapus",3,"click"],["formArrayName","listBatch",1,"row","mb-2"],[1,"col-2"],["type","text","formControlName","stok_awal",1,"form-control",3,"keypress"],[1,"input-group"],["type","text","bsDatepicker","","formControlName","ed_batch",1,"form-control",3,"bsConfig","outsideClick","id"],[1,"input-group-text",2,"cursor","pointer","background","white","border-left","0px",3,"click"],[1,"fa","fa-calendar"],["formControlName","harga_beli","currencyMask","",1,"form-control",3,"options"],["type","text","formControlName","no_batch",1,"form-control"],[1,"col-2","pt-4","mt-1"],["type","button",1,"btn","btn-danger","btn-sm",3,"click"],[1,"fa","fa-trash"],[1,"table","table-bordered","table-striped",2,"width","100%"],[1,"text-center",2,"background-color","rgb(237, 234, 234)"],["role","alert",1,"alert","alert-danger"],[3,"value",4,"ngIf"]],template:function(e,a){1&e&&(t.TgZ(0,"section",0)(1,"div",1)(2,"div",2),t._UZ(3,"app-breadcrumb",3),t.qZA(),t.TgZ(4,"h3",4),t._uU(5,"Buat Baru"),t.qZA(),t.TgZ(6,"button",5),t._UZ(7,"i",6),t._uU(8," Kembali"),t.qZA(),t.TgZ(9,"div",7)(10,"div",8)(11,"div",9)(12,"form",10),t.NdJ("submit",function(){return a.submitInput()}),t.TgZ(13,"div",11)(14,"h4")(15,"strong"),t._uU(16,"Katalog"),t.qZA()()(),t.TgZ(17,"div",12)(18,"div",13)(19,"label",14),t._uU(20,"Nama Barang "),t.TgZ(21,"span",15)(22,"b"),t._uU(23,"*"),t.qZA()()(),t.TgZ(24,"div",16),t._UZ(25,"input",17),t.YNc(26,At,2,0,"div",18),t.qZA()(),t.TgZ(27,"div",13)(28,"label",14),t._uU(29,"Satuan Terkecil "),t.TgZ(30,"span",15)(31,"b"),t._uU(32,"*"),t.qZA()()(),t.TgZ(33,"div",16)(34,"input",19),t.NdJ("keyup",function(o){return a.ambilSingkatan(o.target.value,"parent")}),t.qZA(),t.YNc(35,qt,2,0,"div",18),t.qZA(),t.TgZ(36,"label",14),t._uU(37,"Singkatan "),t.TgZ(38,"span",15)(39,"b"),t._uU(40,"*"),t.qZA()()(),t.TgZ(41,"div",20),t._UZ(42,"input",21),t.YNc(43,Ut,2,0,"div",18),t.qZA()(),t.TgZ(44,"div",13)(45,"label",14),t._uU(46,"Spesifikasi"),t.qZA(),t.TgZ(47,"div",16),t._UZ(48,"textarea",22),t.YNc(49,Kt,2,0,"div",18),t.qZA()(),t.TgZ(50,"div",13)(51,"label",14),t._uU(52,"Harga Jual "),t.TgZ(53,"span",15)(54,"b"),t._uU(55,"*"),t.qZA()()(),t.TgZ(56,"div",16),t._UZ(57,"input",23),t.YNc(58,Bt,2,0,"div",18),t.qZA()(),t.TgZ(59,"h5",24)(60,"strong"),t._uU(61,"Satuan & Kemasan"),t.qZA()(),t.YNc(62,yt,6,0,"div",25),t.TgZ(63,"div",26)(64,"table",27)(65,"thead")(66,"tr")(67,"th"),t._uU(68,"Nama"),t.qZA(),t.TgZ(69,"th"),t._uU(70,"Singkatan"),t.qZA(),t.TgZ(71,"th"),t._uU(72,"Isi"),t.qZA(),t.TgZ(73,"th"),t._uU(74,"Aksi"),t.qZA()()(),t.TgZ(75,"tbody")(76,"tr")(77,"td"),t._uU(78),t.qZA(),t.TgZ(79,"td"),t._uU(80),t.qZA(),t.TgZ(81,"td"),t._uU(82),t.qZA(),t._UZ(83,"td"),t.qZA(),t.YNc(84,It,13,4,"tr",28),t.qZA()()(),t.TgZ(85,"button",29),t.NdJ("click",function(){return a.btnTambahKemasan()}),t._uU(86,"Tambah satuan/kemasan"),t.qZA(),t._UZ(87,"br")(88,"br")(89,"br")(90,"br"),t.TgZ(91,"h5",24)(92,"strong"),t._uU(93,"Informasi Stock"),t.qZA()(),t.TgZ(94,"div")(95,"button",30),t.NdJ("click",function(){return a.addBatch()}),t._uU(96,"Tambah Stock"),t.qZA(),t.YNc(97,Nt,40,10,"div",31),t._UZ(98,"br")(99,"br"),t.YNc(100,Jt,5,0,"table",32),t._UZ(101,"br"),t.qZA(),t._UZ(102,"br")(103,"br")(104,"br"),t.YNc(105,Ot,3,2,"div",33),t.qZA(),t.TgZ(106,"div",34)(107,"button",35),t._uU(108,"Simpan"),t.qZA()()()()()()()(),t.TgZ(109,"jw-modal",36)(110,"form",10),t.NdJ("submit",function(){return a.submitKemasan()}),t.TgZ(111,"div",37)(112,"h4",38),t._uU(113),t.qZA()(),t.TgZ(114,"div",39)(115,"div",40)(116,"label",41),t._uU(117,"Nama kemasan"),t.TgZ(118,"span",15)(119,"b"),t._uU(120,"*"),t.qZA()()(),t.TgZ(121,"div",42)(122,"input",43),t.NdJ("keyup",function(o){return a.ambilSingkatan(o.target.value,"child")}),t.qZA(),t.YNc(123,Mt,2,0,"div",18),t.qZA()(),t.TgZ(124,"div",40)(125,"label",41),t._uU(126,"Singkatan"),t.TgZ(127,"span",15)(128,"b"),t._uU(129,"*"),t.qZA()()(),t.TgZ(130,"div",20),t._UZ(131,"input",44),t.YNc(132,jt,2,0,"div",18),t.qZA()(),t.TgZ(133,"div",40)(134,"label",41),t._uU(135,"Isi"),t.TgZ(136,"span",15)(137,"b"),t._uU(138,"*"),t.qZA()()(),t.TgZ(139,"div",20)(140,"input",45),t.NdJ("keypress",function(o){return a.isNumber(o)}),t.qZA(),t.YNc(141,Qt,2,0,"div",18),t.qZA()(),t.TgZ(142,"div",40)(143,"label",41),t._uU(144,"Satuan"),t.qZA(),t.TgZ(145,"div",16)(146,"select",46)(147,"option",47),t._uU(148),t.qZA(),t.YNc(149,Yt,2,1,"ng-container",48),t.qZA()()()(),t.TgZ(150,"div",49)(151,"button",50),t.NdJ("click",function(){return a.closeBtnTambahKemasan()}),t._uU(152,"Batal"),t.qZA(),t.TgZ(153,"button",51),t._UZ(154,"i",52),t._uU(155," Simpan "),t.qZA()()()(),t.TgZ(156,"ngx-spinner",53)(157,"p",54),t._uU(158," Loading... "),t.qZA()()),2&e&&(t.xp6(3),t.Q6J("title","Katalog Alat kesehatan")("items",t.DdM(48,Dt))("active_item","Buat Baru"),t.xp6(3),t.Q6J("routerLink",t.DdM(49,Ht)),t.xp6(6),t.Q6J("formGroup",a.formInput),t.xp6(13),t.ekj("border-danger",a.formInput.controls.nama_alat_kesehatan.hasError("required")&&a.submitted),t.xp6(1),t.Q6J("ngIf",a.formInput.controls.nama_alat_kesehatan.hasError("required")&&a.submitted),t.xp6(8),t.ekj("border-danger",a.formInput.controls.kemasan_terkecil.hasError("required")&&a.submitted),t.xp6(1),t.Q6J("ngIf",a.formInput.controls.kemasan_terkecil.hasError("required")&&a.submitted),t.xp6(7),t.ekj("border-danger",a.formInput.controls.kemasan_terkecil_singkatan.hasError("required")&&a.submitted),t.xp6(1),t.Q6J("ngIf",a.formInput.controls.kemasan_terkecil_singkatan.hasError("required")&&a.submitted),t.xp6(5),t.ekj("border-danger",a.formInput.controls.komposisi.hasError("required")&&a.submitted),t.xp6(1),t.Q6J("ngIf",a.formInput.controls.komposisi.hasError("required")&&a.submitted),t.xp6(8),t.ekj("border-danger",a.formInput.controls.harga_jual.hasError("required")&&a.submitted),t.Q6J("options",a.optionsCur),t.xp6(1),t.Q6J("ngIf",(a.formInput.controls.harga_jual.hasError("required")||a.formInput.value.harga_jual<=0)&&a.submitted),t.xp6(4),t.Q6J("ngIf",0==a.formInput.value.alat_kesehatan_kemasan.length),t.xp6(16),t.Oqu(a.formInput.value.kemasan_terkecil),t.xp6(2),t.Oqu(a.formInput.value.kemasan_terkecil_singkatan),t.xp6(2),t.hij("1/",a.formInput.value.kemasan_terkecil_singkatan,""),t.xp6(2),t.Q6J("ngForOf",a.formInput.get("alat_kesehatan_kemasan").controls),t.xp6(13),t.Q6J("ngForOf",a.formInput.get("listBatch").controls),t.xp6(3),t.Q6J("ngIf",a.formInput.value.listBatch.length<=0),t.xp6(5),t.Q6J("ngIf",null!=a.errorMessage),t.xp6(5),t.Q6J("formGroup",a.formKemasan),t.xp6(3),t.Oqu(a.formKemasanTitle),t.xp6(9),t.ekj("border-danger",a.formKemasan.controls.nama_kemasan.hasError("required")&&a.submittedKemasan),t.xp6(1),t.Q6J("ngIf",a.formKemasan.controls.nama_kemasan.hasError("required")&&a.submittedKemasan),t.xp6(8),t.ekj("border-danger",a.formKemasan.controls.nama_kemasan_singkatan.hasError("required")&&a.submittedKemasan),t.xp6(1),t.Q6J("ngIf",a.formKemasan.controls.nama_kemasan_singkatan.hasError("required")&&a.submittedKemasan),t.xp6(8),t.ekj("border-danger",a.formKemasan.controls.target_qty.hasError("required")&&a.submittedKemasan),t.xp6(1),t.Q6J("ngIf",a.formKemasan.controls.target_qty.hasError("required")&&a.submittedKemasan),t.xp6(6),t.s9C("value",a.formInput.value.kemasan_terkecil_singkatan),t.xp6(1),t.hij("",a.formInput.value.kemasan_terkecil," "),t.xp6(1),t.Q6J("ngForOf",a.formInput.value.alat_kesehatan_kemasan),t.xp6(2),t.Q6J("disabled",a.isLoadingButton),t.xp6(2),t.Q6J("disabled",a.isLoadingButton),t.xp6(1),t.Q6J("ngClass",t.WLB(50,Pt,a.isLoadingButton,!a.isLoadingButton)),t.xp6(2),t.Q6J("name","spinner1")("fullScreen",!0))},directives:[U.L,f.rH,l._Y,l.JL,l.sg,l.Fj,l.JJ,l.u,k.O5,K.g1,k.sg,l.CE,l.x0,D.Y5,D.Np,Y.z,l.EJ,l.YN,l.Kr,k.mk,T.Ro],styles:['h5.judul-kemasan[_ngcontent-%COMP%]{display:flex;align-items:center}h5.judul-kemasan[_ngcontent-%COMP%]:after{content:"";flex:1;margin-left:1rem;height:1px;background-color:#919191}']}),n})();var A=p(80574),Rt=p(36374);function Vt(n,s){if(1&n&&(t.TgZ(0,"table",1)(1,"thead")(2,"tr")(3,"td"),t._uU(4," NAMA BARANG "),t.qZA(),t.TgZ(5,"td"),t._uU(6," SPESIFIKASI "),t.qZA(),t.TgZ(7,"td"),t._uU(8,"STOK AWAL"),t.qZA(),t.TgZ(9,"td"),t._uU(10,"HARGA JUAL"),t.qZA(),t.TgZ(11,"td"),t._uU(12,"HARGA BELI"),t.qZA()()(),t._UZ(13,"tbody"),t.qZA()),2&n){const e=t.oxw();t.Q6J("dtOptions",e.dtOptions)}}let $t=(()=>{class n{constructor(e){this.elementRef=e,this.header=[],this.dataTable=[],this.data=[],this.datatableElement=v.G,this.dtOptions={},this.wopts={bookType:"xlsx",type:"array"},this.fileName="SheetJS.xlsx",this.file=null}ngOnInit(){this.onFileChange(this.fileUpload)}onFileChange(e){this.dataTable=[],this.data=[],this.header=[];const i=e.target;if(1!==i.files.length)throw new Error("Cannot use multiple files");const o=new FileReader;o.onload=r=>{const c=A.read(r.target.result,{type:"binary"});this.data=A.utils.sheet_to_json(c.Sheets[c.SheetNames[0]],{header:1}),this.data.map((z,h)=>{h<=1&&this.data[0].map((H,Na)=>{null!=this.col[Na]&&this.header.push(H)}),h>=this.rowStart&&this.data[h].length>0&&this.dataTable.push({nama_barang:null!=this.data[h][this.col[0]]?this.data[h][this.col[0]]:"",spesifikasi:null!=this.data[h][this.col[1]]?this.data[h][this.col[1]]:"",stok_awal:null!=this.data[h][this.col[2]]?this.data[h][this.col[2]]:"",harga_jual:null!=this.data[h][this.col[3]]?this.data[h][this.col[3]]:"",harga_beli:null!=this.data[h][this.col[4]]?this.data[h][this.col[4]]:""})}),this.setTable()},o.readAsBinaryString(i.files[0])}export(){const e=A.utils.aoa_to_sheet(this.data),a=A.utils.book_new();A.utils.book_append_sheet(a,e,"Sheet1"),A.writeFile(a,this.fileName)}setTable(){this.dtOptions=this.showDataTables()}showDataTables(){return{pageLength:10,ajax:(e,a)=>{a({draw:1,recordsTotal:this.dataTable.length,recordsFiltered:this.dataTable.length,data:this.dataTable})},columns:[{data:"nama_barang"},{data:"spesifikasi"},{data:"stok_awal"},{data:"harga_jual"},{data:"harga_beli"}]}}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(t.SBq))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-sheet"]],viewQuery:function(e,a){if(1&e&&t.Gf(v.G,5),2&e){let i;t.iGM(i=t.CRH())&&(a.datatableElement=i.first)}},inputs:{col:"col",key:"key",rowStart:"rowStart",fileUpload:"fileUpload"},decls:1,vars:1,consts:[["class","table tabl-sm table-striped table-bordered mt-3","width","100%","datatable","",3,"dtOptions",4,"ngIf"],["width","100%","datatable","",1,"table","tabl-sm","table-striped","table-bordered","mt-3",3,"dtOptions"]],template:function(e,a){1&e&&t.YNc(0,Vt,14,1,"table",0),2&e&&t.Q6J("ngIf",a.dataTable.length>0)},directives:[k.O5,v.G],encapsulation:2}),n})();const Wt=["inputFile"],Xt=function(){return{nama_barang:0,spesifikasi:1,stok_awal:4,harga_jual:6,harga_beli:5}},zt=function(n){return[n]},ta=function(){return["0","1","4","6","5"]};function aa(n,s){if(1&n&&t._UZ(0,"app-sheet",24),2&n){const e=t.oxw();t.Q6J("key",t.VKq(4,zt,t.DdM(3,Xt)))("col",t.DdM(6,ta))("fileUpload",e.file)}}const ea=function(){return[]},na=function(){return["../view"]};let sa=(()=>{class n{constructor(e,a){this.spinner=e,this.ModulImportKatalogService=a,this.file=null,this.fileBase64=null}ngOnInit(){}reset(){this.myInputVariable.nativeElement.value="",this.file=null}incomingfile(e){this.file=e;var a=e.target.files[0];const i=new FileReader;i.onload=o=>{this.fileBase64=o.target.result},i.readAsBinaryString(a)}Upload(){this.spinner.show("spinner1"),this.ModulImportKatalogService.importAlat(this.file.target.files[0]).subscribe(e=>{"0000"==e.metaData.response_code?b().fire("Success","Data berhasil disimpan","success").then(a=>{location.reload()}):b().fire("Error",e.metaData.message,"error"),this.spinner.hide("spinner1")},e=>{b().fire("Error",e.metaData.message,"error")})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(T.t2),t.Y36(Rt.s))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-import-csv"]],viewQuery:function(e,a){if(1&e&&t.Gf(Wt,5),2&e){let i;t.iGM(i=t.CRH())&&(a.myInputVariable=i.first)}},decls:40,vars:9,consts:[[1,"content"],[1,"content-block"],[1,"block-header"],[3,"title","items","active_item"],[1,"text-center","mb-3"],["type","button",1,"btn","btn-kembali","mb-3","btn-lg",3,"routerLink"],[1,"fas","fa-arrow-left"],[1,"row","clearfix"],[1,"col-xs-12","col-sm-12","col-md-12","col-lg-12"],[1,"card"],[1,"body"],["href","assets/other/Format-Katalog-Alat.xlsx","download","",1,"btn","btn-lg","btn-primary"],[1,"header"],[1,"row","mb-2"],[1,"col-md-3"],["type","file","accept",".xlsx",1,"form-control","mb-2",3,"change"],["inputFile",""],[1,"col-md-1"],[1,"btn","btn-danger","mx-2","mb-2",3,"click"],["rowStart","2",3,"key","col","fileUpload",4,"ngIf"],[1,"footer"],[1,"btn","btn-lg","btn-simpan",3,"click"],["bdColor","rgba(0, 0, 0, 0.8)","size","medium","color","#fff","type","ball-clip-rotate-multiple",3,"name","fullScreen"],[2,"color","white"],["rowStart","2",3,"key","col","fileUpload"]],template:function(e,a){1&e&&(t.TgZ(0,"section",0)(1,"div",1)(2,"div",2),t._UZ(3,"app-breadcrumb",3),t.qZA(),t.TgZ(4,"h3",4),t._uU(5,"Import CSV"),t.qZA(),t.TgZ(6,"button",5),t._UZ(7,"i",6),t._uU(8," Kembali"),t.qZA(),t.TgZ(9,"div",7)(10,"div",8)(11,"div",9)(12,"div",10)(13,"p"),t._uU(14,"Download format dokument XLSX yang perlu disini"),t.qZA(),t.TgZ(15,"a",11),t._uU(16,"Download XLSX"),t.qZA()()()()(),t.TgZ(17,"div",7)(18,"div",8)(19,"div",9)(20,"div",12)(21,"h4")(22,"strong"),t._uU(23,"Upload daftar barang via XLSX"),t.qZA()()(),t.TgZ(24,"div",10)(25,"div",13)(26,"div",14)(27,"input",15,16),t.NdJ("change",function(o){return a.incomingfile(o)}),t.qZA()(),t.TgZ(29,"div",17)(30,"button",18),t.NdJ("click",function(){return a.reset()}),t._uU(31,"Reset"),t.qZA()()(),t.YNc(32,aa,1,7,"app-sheet",19),t.qZA(),t.TgZ(33,"div",20)(34,"div",4)(35,"button",21),t.NdJ("click",function(){return a.Upload()}),t._uU(36,"Upload dan lanjutkan"),t.qZA()()()()()()(),t.TgZ(37,"ngx-spinner",22)(38,"p",23),t._uU(39," Loading... "),t.qZA()()()),2&e&&(t.xp6(3),t.Q6J("title","Katalog Alat")("items",t.DdM(7,ea))("active_item","Import CSV"),t.xp6(3),t.Q6J("routerLink",t.DdM(8,na)),t.xp6(26),t.Q6J("ngIf",null!=a.file),t.xp6(5),t.Q6J("name","spinner1")("fullScreen",!0))},directives:[U.L,f.rH,k.O5,$t,T.Ro],styles:[""]}),n})();function ia(n,s){if(1&n&&(t.TgZ(0,"div",29)(1,"label",30),t._uU(2,"Harga Pajak beli"),t.qZA(),t.TgZ(3,"div",31)(4,"div",12)(5,"label",36),t._uU(6,"RP"),t.qZA(),t._UZ(7,"input",37),t.qZA()()()),2&n){const e=t.oxw();t.xp6(7),t.Q6J("options",e.optionsCur)}}const oa=function(){return[]},ra=function(){return["../view"]};let la=(()=>{class n{constructor(e){this.fb=e,this.optionsCur={prefix:"",align:"left",thousands:".",precision:"0",inputMode:K.fF.NATURAL}}ngOnInit(){this.formInput=this.fb.group({checkbox_harga_pajak_beli:[1,[]]})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(l.qu))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-barang-bpom"]],decls:170,vars:10,consts:[[1,"content"],[1,"content-block"],[1,"block-header"],[3,"title","items","active_item"],[1,"text-center","mb-3"],["type","button",1,"btn","btn-kembali","mb-3","btn-lg",3,"routerLink"],[1,"fas","fa-arrow-left"],[1,"row","clearfix"],[1,"col-xs-12","col-sm-12","col-md-12","col-lg-12"],[1,"card"],[1,"body"],[1,"col-xs-12","col-sm-12","col-md-8","offset-md-2"],[1,"input-group"],[1,"input-group-text"],[1,"fas","fa-search"],["type","text","placeholder","Cari",1,"form-control"],[1,"btn","btn-secondary"],[1,"table","table-sm","table-striped","table-bordered","table-sm","table-striped"],[1,"btn","btn-primary","btn-sm"],[1,"badge","col-green"],[1,"row"],[1,"col-sm-12","col-md-6"],["width","100%",1,"table-tipis"],[1,"fw-bold"],["width","100%",1,"table-satuan"],[1,"col-sm-12","col-md-12"],[1,""],[1,"mb-3",2,"border-bottom","1px solid rgba(83, 83, 83, 0.568)"],[3,"formGroup"],[1,"mb-3","row"],[1,"col-sm-1","col-form-label","fw-bold"],[1,"col-sm-4"],["type","number",1,"form-control","me-3"],[1,"col-sm-3"],["name","","id","",1,"form-select"],["value",""],[1,"me-2",2,"margin","auto"],["type","text","currencyMask","",1,"form-control",3,"options"],["type","checkbox","formControlName","checkbox_harga_pajak_beli"],[1,"mx-2",2,"margin","auto"],["class","mb-3 row",4,"ngIf"],["type","number",1,"form-control"],[1,"mb-3","col-sm-12","text-center"],[1,"btn","btn-lg","btn-simpan"]],template:function(e,a){1&e&&(t.TgZ(0,"section",0)(1,"div",1)(2,"div",2),t._UZ(3,"app-breadcrumb",3),t.qZA(),t.TgZ(4,"h3",4),t._uU(5,"Katalog Barang BPOM"),t.qZA(),t.TgZ(6,"button",5),t._UZ(7,"i",6),t._uU(8," Kembali"),t.qZA(),t.TgZ(9,"div",7)(10,"div",8)(11,"div",9)(12,"div",10)(13,"div",11)(14,"div",12)(15,"span",13),t._UZ(16,"i",14),t.qZA(),t._UZ(17,"input",15),t.TgZ(18,"button",16),t._uU(19,"Cari"),t.qZA()()(),t.TgZ(20,"table",17)(21,"thead")(22,"tr")(23,"th"),t._uU(24,"Barang"),t.qZA(),t.TgZ(25,"th"),t._uU(26,"Aksi"),t.qZA()()(),t.TgZ(27,"tbody")(28,"tr")(29,"td"),t._uU(30," CATAFLAM "),t.qZA(),t.TgZ(31,"td")(32,"button",18),t._uU(33,"Pilih"),t.qZA()()(),t.TgZ(34,"tr")(35,"td"),t._uU(36,"BETAMETHASONE DIPROPIONATE"),t.qZA(),t.TgZ(37,"td")(38,"div",19),t._uU(39,"Sudah ada di katalogmu"),t.qZA()()()()()()()()(),t.TgZ(40,"div",7)(41,"div",8)(42,"div",9)(43,"div",10)(44,"div",20)(45,"div",21)(46,"h5")(47,"strong"),t._uU(48,"Info Barang"),t.qZA()(),t.TgZ(49,"table",22)(50,"tr")(51,"td",23),t._uU(52,"Nama"),t.qZA(),t.TgZ(53,"td"),t._uU(54,"CEFADROXIL MONOHYDRATE"),t.qZA()(),t.TgZ(55,"tr")(56,"td",23),t._uU(57,"Komposisi"),t.qZA(),t.TgZ(58,"td"),t._uU(59,"CEFADROXIL MONOHYDRATE"),t.qZA()(),t.TgZ(60,"tr")(61,"td",23),t._uU(62,"Principal"),t.qZA(),t.TgZ(63,"td"),t._uU(64,"MULIA FARMA SUCI - Indonesia - -"),t.qZA()(),t.TgZ(65,"tr")(66,"td",23),t._uU(67,"Kelas Barang"),t.qZA(),t.TgZ(68,"td"),t._uU(69,"Obat"),t.qZA()(),t.TgZ(70,"tr")(71,"td",23),t._uU(72,"No. Registrasi"),t.qZA(),t.TgZ(73,"td"),t._uU(74,"GKL1616705038A1"),t.qZA()(),t.TgZ(75,"tr")(76,"td",23),t._uU(77,"Berlaku s/d"),t.qZA(),t.TgZ(78,"td"),t._uU(79,"26-04-2027"),t.qZA()()()(),t.TgZ(80,"div",21)(81,"h5")(82,"strong"),t._uU(83,"Satuan & Kemasan"),t.qZA()(),t.TgZ(84,"table",24)(85,"thead")(86,"tr")(87,"th"),t._uU(88,"Nama"),t.qZA(),t.TgZ(89,"th"),t._uU(90,"Singkatan"),t.qZA()()(),t.TgZ(91,"tbody")(92,"tr")(93,"th"),t._uU(94,"Kaplet"),t.qZA(),t.TgZ(95,"td"),t._uU(96,"kpt"),t.qZA()(),t.TgZ(97,"tr")(98,"th"),t._uU(99,"Strip isi 10 kpt"),t.qZA(),t.TgZ(100,"td"),t._uU(101,"stp (10s)"),t.qZA()(),t.TgZ(102,"tr")(103,"th"),t._uU(104,"Dus isi 10 stp (10s)"),t.qZA(),t.TgZ(105,"td"),t._uU(106,"dus 10x10"),t.qZA()()()()()()()()()(),t.TgZ(107,"div",7)(108,"div",25)(109,"div",9)(110,"div",10),t._UZ(111,"div",26),t.TgZ(112,"h5",27)(113,"strong"),t._uU(114,"Data Stokmu"),t.qZA()(),t.TgZ(115,"form",28)(116,"div",29)(117,"label",30),t._uU(118,"Stok"),t.qZA(),t.TgZ(119,"div",31),t._UZ(120,"input",32),t.qZA(),t.TgZ(121,"div",33)(122,"select",34)(123,"option",35),t._uU(124,"dus 10x10"),t.qZA()()()(),t.TgZ(125,"div",29)(126,"label",30),t._uU(127,"Harga beli"),t.qZA(),t.TgZ(128,"div",31)(129,"div",12)(130,"label",36),t._uU(131,"RP"),t.qZA(),t._UZ(132,"input",37),t.qZA(),t.TgZ(133,"label"),t._UZ(134,"input",38),t._uU(135," Harga beli sudah termasuk pajak "),t.qZA()(),t.TgZ(136,"div",33)(137,"div",12)(138,"div",39),t._uU(139,"/"),t.qZA(),t.TgZ(140,"select",34)(141,"option",35),t._uU(142,"kpt"),t.qZA()()()()(),t.YNc(143,ia,8,1,"div",40),t.TgZ(144,"div",20)(145,"label",30),t._uU(146,"Harga jual"),t.qZA(),t.TgZ(147,"div",31)(148,"div",12)(149,"label",36),t._uU(150,"RP"),t.qZA(),t._UZ(151,"input",37),t.qZA()(),t.TgZ(152,"div",33)(153,"div",12)(154,"div",39),t._uU(155,"/"),t.qZA(),t.TgZ(156,"select",34)(157,"option",35),t._uU(158,"kpt"),t.qZA()()()()(),t.TgZ(159,"div",29)(160,"label",30),t._uU(161,"Margin"),t.qZA(),t.TgZ(162,"div",31)(163,"div",12),t._UZ(164,"input",41),t.TgZ(165,"label",39),t._uU(166,"%"),t.qZA()()()(),t.TgZ(167,"div",42)(168,"button",43),t._uU(169,"Simpan"),t.qZA()()()()()()()()()),2&e&&(t.xp6(3),t.Q6J("title","Katalog Obat")("items",t.DdM(8,oa))("active_item","Katalog Barang BPOM"),t.xp6(3),t.Q6J("routerLink",t.DdM(9,ra)),t.xp6(109),t.Q6J("formGroup",a.formInput),t.xp6(17),t.Q6J("options",a.optionsCur),t.xp6(11),t.Q6J("ngIf",1!=a.formInput.value.checkbox_harga_pajak_beli),t.xp6(8),t.Q6J("options",a.optionsCur))},directives:[U.L,f.rH,l._Y,l.JL,l.sg,l.YN,l.Kr,K.g1,l.Wl,l.JJ,l.u,k.O5],styles:[".table-tipis[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%]{border-bottom:1px solid #a3a3a3}.loss-margin-bottom[_ngcontent-%COMP%]{margin-bottom:1px!important}table.table-satuan[_ngcontent-%COMP%] > thead[_ngcontent-%COMP%]{border-bottom:1px solid #a3a3a3}"]}),n})();function ua(n,s){1&n&&(t.TgZ(0,"div",54),t._uU(1," Nama barang tidak boleh kosong "),t.qZA())}function ma(n,s){1&n&&(t.TgZ(0,"div",54),t._uU(1," Satuan terkecil tidak boleh kosong "),t.qZA())}function da(n,s){1&n&&(t.TgZ(0,"div",54),t._uU(1," Singkatan tidak boleh kosong "),t.qZA())}function pa(n,s){1&n&&(t.TgZ(0,"div",54),t._uU(1," Spesifikasi tidak boleh kosong "),t.qZA())}function ca(n,s){1&n&&(t.TgZ(0,"div",54),t._uU(1," Harga jual harus lebih dari 0 "),t.qZA())}function _a(n,s){1&n&&(t.TgZ(0,"div",55)(1,"h3")(2,"strong"),t._uU(3,"Tips"),t.qZA()(),t.TgZ(4,"p"),t._uU(5,"Untuk memudahkan, buat kemasan dari kecil (contoh: strip isi 8 tablet) ke besar (contoh: box isi 10 strip)"),t.qZA()())}function ha(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"button",60),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().index;return t.oxw().editListKemasan(i)}),t._uU(1,"Edit"),t.qZA()}}function ga(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"button",61),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().index;return t.oxw().hapusListKemasaan(i)}),t._uU(1,"Hapus"),t.qZA()}}function ba(n,s){if(1&n&&(t.TgZ(0,"tr",56),t.ynx(1,57),t.TgZ(2,"td"),t._uU(3),t.qZA(),t.TgZ(4,"td"),t._uU(5),t.qZA(),t.TgZ(6,"td"),t._uU(7),t.qZA(),t.TgZ(8,"td"),t.YNc(9,ha,2,0,"button",58),t.YNc(10,ga,2,0,"button",59),t.qZA(),t.BQk(),t.qZA()),2&n){const e=s.$implicit,a=s.index;t.xp6(1),t.Q6J("formGroupName",a),t.xp6(2),t.Oqu(e.value.nama),t.xp6(2),t.Oqu(e.value.singkatan),t.xp6(2),t.Oqu(e.value.isi+"/"+e.value.satuan),t.xp6(2),t.Q6J("ngIf",a>0),t.xp6(1),t.Q6J("ngIf",a>0)}}function fa(n,s){1&n&&(t.TgZ(0,"div",54),t._uU(1," Nama kemasan tidak boleh kosong "),t.qZA())}function ka(n,s){1&n&&(t.TgZ(0,"div",54),t._uU(1," Singkatan tidak boleh kosong "),t.qZA())}function Za(n,s){1&n&&(t.TgZ(0,"div",54),t._uU(1," Isi tidak boleh kosong "),t.qZA())}function Ta(n,s){if(1&n&&(t.TgZ(0,"option",63),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.s9C("value",e.singkatan),t.xp6(1),t.Oqu(e.nama)}}function va(n,s){if(1&n&&(t.TgZ(0,"option",63),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.s9C("value",e.singkatan),t.xp6(1),t.Oqu(e.nama)}}function Aa(n,s){if(1&n&&(t.ynx(0),t.YNc(1,Ta,2,2,"option",62),t.YNc(2,va,2,2,"option",62),t.BQk()),2&n){const e=s.index,a=t.oxw();t.xp6(1),t.Q6J("ngIf","update"==a.aksiModalKemasan&&a.indexListKemasan!=e),t.xp6(1),t.Q6J("ngIf","add"==a.aksiModalKemasan)}}const qa=function(){return[]},Ua=function(n){return[n]};let X=(()=>{class n{constructor(e,a,i,o,r,d,c,m){this.fb=e,this.validate=a,this.spinner=i,this.modalService=o,this.router=r,this.store=d,this.activatedRoute=c,this.money=m,this.submitted=!1,this.submittedKemasan=!1,this.listBatch=[],this.AlatKesehatan=new Z,this.optionsCur=this.money.currency(),this.lastPage="",this.last="",this.id="",this.getState=this.store.select("alat_kesehatan")}ngOnInit(){this.activatedRoute.params.subscribe(e=>{e&&(this.spinner.show("spinner1"),this.lastPage=e.page,this.id=e.id,this.store.dispatch(L({payload:{id:e.id}})))}),this.getState.subscribe(e=>{var a,i,o,r,d,c;if(this.AlatKesehatan=e.AlatKesehatan,this.errorMessage=e.errorMessage,this.submitButton=e.submitButton,this.isLoadingButton=e.isLoadingButton,this.isEdit=e.isEdit,null!=this.AlatKesehatan.nama_alat_kesehatan&&this.AlatKesehatan.alat_kesehatan_kemasan.length>0){let m=this.formInput.controls.kemasan;this.AlatKesehatan.alat_kesehatan_kemasan.map(g=>{m.push(this.fb.group({nama:g.nama_kemasan,isi:g.target_qty,singkatan:g.nama_kemasan_singkatan,satuan:g.nama_kemasan,kemasan_leverl:g.kemasan_level}))})}if(!0===this.isEdit){if(this.AlatKesehatan){this.AlatKesehatan.alat_kesehatan_kemasan.findIndex(h=>1==h.kemasan_level)>=0&&this.formInput.patchValue({satuan_terkecil:this.AlatKesehatan.kemasan_terkecil,singkatan:this.AlatKesehatan.kemasan_terkecil_singkatan});let g=this.formInput.controls.kemasan;g.clear();let z=this.AlatKesehatan.alat_kesehatan_kemasan.length;for(let h=0;h<z;h++)g.push(this.fb.group({id_alat_kesehatan_kemasan:null===(a=this.AlatKesehatan.alat_kesehatan_kemasan[h])||void 0===a?void 0:a.id_alat_kesehatan_kemasan,nama:null===(i=this.AlatKesehatan.alat_kesehatan_kemasan[h])||void 0===i?void 0:i.nama_kemasan,isi:null===(o=this.AlatKesehatan.alat_kesehatan_kemasan[h])||void 0===o?void 0:o.target_qty,singkatan:null===(r=this.AlatKesehatan.alat_kesehatan_kemasan[h])||void 0===r?void 0:r.nama_kemasan_singkatan,satuan:null===(d=this.AlatKesehatan.alat_kesehatan_kemasan[h])||void 0===d?void 0:d.target_kemasan,kemasan_level:null===(c=this.AlatKesehatan.alat_kesehatan_kemasan[h])||void 0===c?void 0:c.kemasan_level}))}this.formInput.patchValue({nama_barang:this.AlatKesehatan.nama_alat_kesehatan,stok:this.AlatKesehatan.stok,komposisi:this.AlatKesehatan.komposisi,harga_jual:this.AlatKesehatan.harga_jual}),this.last=null==this.lastPage?"/barang/katalog/view":"/barang/stok/detail/"+this.id+"/"+this.AlatKesehatan.nama_alat_kesehatan,this.spinner.hide("spinner1")}else!1===this.isEdit&&null!=this.AlatKesehatan.nama_alat_kesehatan&&setTimeout(()=>{if(null!=this.errorMessage){let m="";this.errorMessage.response.map(g=>{m+=g.field+" "+g.message+"\n"}),b().fire("Error",m,"error")}else this.last=null==this.lastPage?"/barang/katalog/view":"/barang/stok/detail/"+this.id+"/"+this.formInput.value.nama_barang,this.spinner.hide("spinner1"),this.router.navigate([this.last])},600)}),this.formInput=this.fb.group({nama_barang:[null,[l.kI.required]],satuan_terkecil:[null,[l.kI.required]],singkatan:[null,[l.kI.required]],komposisi:"",stok:"",harga_jual:"",harga_beli:"",kemasan:this.fb.array([])}),this.formKemasan=this.fb.group({nama:[null,[l.kI.required]],isi:[null,[l.kI.required]],singkatan:[null,[l.kI.required]],satuan:[]})}isNumber(e){return this.validate.Number(e)}setBatch(e,a,i){this.listBatch[e][a]=i.target.value}addBatch(){this.listBatch.push({stok_batch:"",ed_batch:"",no_batch:"",harga_beli:""})}removeBatch(e){this.listBatch.splice(e,1)}submitInput(){if(this.submitted=!1,setTimeout(()=>{this.submitted=!0},300),this.formInput.invalid||this.formInput.value.harga_jual<=0)return;this.spinner.show("spinner1");let e=this.formInput.value,i=[],r=1;e.kemasan.forEach((c,m)=>{i.push({id_alat_kesehatan_kemasan:c.id_alat_kesehatan_kemasan,nama_kemasan:c.nama,nama_kemasan_singkatan:c.singkatan,target_kemasan:c.satuan,target_qty:c.isi,kemasan_level:r+1}),r++});let d=new Z;d.id_alat_kesehatan=this.AlatKesehatan.id_alat_kesehatan,d.nama_alat_kesehatan=e.nama_barang,d.kemasan_terkecil=e.satuan_terkecil,d.kemasan_terkecil_singkatan=e.singkatan,d.komposisi=e.komposisi,d.harga_jual=parseInt(e.harga_jual),d.alat_kesehatan_kemasan=i,this.store.dispatch(S({payload:d}))}ambilSingkatan(e,a){let i=e.substr(0,3);"parent"==a?(this.formInput.controls.kemasan.value[0].nama=e,this.formInput.controls.kemasan.value[0].singkatan=i,this.formInput.controls.kemasan.value[0].satuan=i,this.formInput.patchValue({singkatan:i})):this.formKemasan.patchValue({singkatan:i})}submitKemasan(){this.submittedKemasan=!1,setTimeout(()=>{this.submittedKemasan=!0},300),!this.formKemasan.invalid&&("add"==this.aksiModalKemasan?(this.formInput.value.kemasan.length>0?this.formInput.value.kemasan.findIndex(a=>a.nama==this.formKemasan.value.nama):-1)<0?this.insertKemasanToAray():b().fire("Error","Duplicated data","error"):this.updateKemasanArray())}insertKemasanToAray(){this.formInput.controls.kemasan.push(this.fb.group({nama:this.formKemasan.value.nama,isi:this.formKemasan.value.isi,singkatan:this.formKemasan.value.singkatan,satuan:this.formKemasan.value.satuan})),this.closeBtnTambahKemasan()}updateKemasanArray(){let e=this.indexListKemasan,a=!1;this.formInput.value.kemasan.map((i,o)=>{i.nama==this.formKemasan.value.nama&&o!=e&&(a=!0)}),a?b().fire("Error","Duplicated data","error"):(this.formInput.controls.kemasan.at(e).patchValue({nama:this.formKemasan.value.nama,isi:this.formKemasan.value.isi,singkatan:this.formKemasan.value.singkatan,satuan:this.formKemasan.value.satuan}),this.closeBtnTambahKemasan())}hapusListKemasaan(e){this.formInput.get("kemasan").removeAt(e)}editListKemasan(e){let a=this.formInput.value.kemasan[e];this.formKemasanTitle="Edit kemasan",this.indexListKemasan=e,this.aksiModalKemasan="update",this.formKemasan.reset(),this.formKemasan.patchValue({nama:a.nama,isi:a.isi,singkatan:a.singkatan,satuan:a.satuan}),this.submittedKemasan=!1,this.modalService.open("modalFormContent")}btnTambahKemasan(){this.submitted=!1,setTimeout(()=>{this.submitted=!0},300),!this.formInput.invalid&&(this.formKemasanTitle="Tambah kemasan",this.submittedKemasan=!1,this.formKemasan.reset(),this.aksiModalKemasan="add",this.submittedKemasan=!1,this.modalService.open("modalFormContent"))}closeBtnTambahKemasan(){this.modalService.close("modalFormContent")}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(l.qu),t.Y36(W.p),t.Y36(T.t2),t.Y36(F.Z),t.Y36(f.F0),t.Y36(u.yh),t.Y36(f.gz),t.Y36(V.r))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-edit-buat-baru"]],decls:130,vars:40,consts:[[1,"content"],[1,"content-block"],[1,"block-header"],[3,"title","items","active_item"],[1,"text-center","mb-3"],["type","button",1,"btn","btn-kembali","mb-3","btn-lg",3,"routerLink"],[1,"fas","fa-arrow-left"],[1,"row","clearfix"],[1,"col-xs-12","col-sm-12","col-md-12","col-lg-12"],[1,"card"],[3,"formGroup","submit"],[1,"header"],[1,"body"],[1,"row","mb-3"],[1,"col-sm-2","col-form-label","fw-bold"],[1,"col-red"],[1,"col-sm-4"],["type","text","formControlName","nama_barang",1,"form-control"],["class","form-text text-danger",4,"ngIf"],["type","text","formControlName","satuan_terkecil","placeholder","Contoh: pcs, box, dus",1,"form-control",3,"keyup"],[1,"col-sm-2"],["type","text","formControlName","singkatan","placeholder","3 huruf",1,"form-control"],["formControlName","komposisi","cols","5","rows","5",1,"form-control"],[1,"row"],[1,"col-md-6"],[1,"alert","alert-info"],["currencyMask","","formControlName","harga_jual",1,"form-control",3,"options"],[1,"judul-kemasan","mb-3"],["class","alert alert-warning",4,"ngIf"],[1,"row","mx-5"],["width","100%",1,"table","tabl-sm","table-striped","table-bordered","table-sm"],["formArrayName","kemasan",4,"ngFor","ngForOf"],["type","button",1,"btn","btn-primary",3,"click"],[1,"footer","text-center","my-3"],["type","submit",1,"btn","btn-simpan","btn-lg"],["id","modalFormContent"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],[1,"modal-body"],[1,"mb-3","row"],[1,"col-sm-3","col-form-label","fw-bold"],[1,"text-danger"],[1,"col-sm-7"],["type","text","formControlName","nama","placeholder","Contoh: pcs, box, dus",1,"form-control",3,"keyup"],["type","text","formControlName","isi",1,"form-control",3,"keypress"],["formControlName","satuan",1,"form-select"],["value","","hidden",""],[4,"ngFor","ngForOf"],[1,"modal-footer"],["type","button",1,"btn","btn-kembali",3,"click"],["type","submit","color","primary",1,"btn","btn-simpan"],[1,"fa","fa-check"],["bdColor","rgba(0, 0, 0, 0.8)","size","medium","color","#fff","type","ball-clip-rotate-multiple",3,"name","fullScreen"],[2,"color","white"],[1,"form-text","text-danger"],[1,"alert","alert-warning"],["formArrayName","kemasan"],[3,"formGroupName"],["class","btn btn-sm btn-ubah","type","button",3,"click",4,"ngIf"],["class","btn btn-sm btn-hapus","type","button",3,"click",4,"ngIf"],["type","button",1,"btn","btn-sm","btn-ubah",3,"click"],["type","button",1,"btn","btn-sm","btn-hapus",3,"click"],[3,"value",4,"ngIf"],[3,"value"]],template:function(e,a){1&e&&(t.TgZ(0,"section",0)(1,"div",1)(2,"div",2),t._UZ(3,"app-breadcrumb",3),t.qZA(),t.TgZ(4,"h3",4),t._uU(5,"Edit Katalog"),t.qZA(),t.TgZ(6,"button",5),t._UZ(7,"i",6),t._uU(8," Kembali"),t.qZA(),t.TgZ(9,"div",7)(10,"div",8)(11,"div",9)(12,"form",10),t.NdJ("submit",function(){return a.submitInput()}),t.TgZ(13,"div",11)(14,"h4")(15,"strong"),t._uU(16,"Edit Katalog"),t.qZA()()(),t.TgZ(17,"div",12)(18,"div",13)(19,"label",14),t._uU(20,"Nama Barang "),t.TgZ(21,"span",15),t._uU(22,"*"),t.qZA()(),t.TgZ(23,"div",16),t._UZ(24,"input",17),t.YNc(25,ua,2,0,"div",18),t.qZA()(),t.TgZ(26,"div",13)(27,"label",14),t._uU(28,"Satuan Terkecil "),t.TgZ(29,"span",15),t._uU(30,"*"),t.qZA()(),t.TgZ(31,"div",16)(32,"input",19),t.NdJ("keyup",function(o){return a.ambilSingkatan(o.target.value,"parent")}),t.qZA(),t.YNc(33,ma,2,0,"div",18),t.qZA(),t.TgZ(34,"label",14),t._uU(35,"Singkatan "),t.TgZ(36,"span",15),t._uU(37,"*"),t.qZA()(),t.TgZ(38,"div",20),t._UZ(39,"input",21),t.YNc(40,da,2,0,"div",18),t.qZA()(),t.TgZ(41,"div",13)(42,"label",14),t._uU(43,"Spesifikasi"),t.qZA(),t.TgZ(44,"div",16),t._UZ(45,"textarea",22),t.YNc(46,pa,2,0,"div",18),t.qZA()(),t.TgZ(47,"div",23)(48,"div",24)(49,"div",25)(50,"strong"),t._uU(51,"Info: Untuk edit stok dapat dilakukan di stokopname"),t.qZA()()()(),t.TgZ(52,"div",13)(53,"label",14),t._uU(54,"Harga Jual "),t.TgZ(55,"span",15),t._uU(56,"*"),t.qZA()(),t.TgZ(57,"div",16),t._UZ(58,"input",26),t.YNc(59,ca,2,0,"div",18),t.qZA()(),t.TgZ(60,"h5",27)(61,"strong"),t._uU(62,"Satuan & Kemasan"),t.qZA()(),t.YNc(63,_a,6,0,"div",28),t.TgZ(64,"div",29)(65,"table",30)(66,"thead")(67,"tr")(68,"th"),t._uU(69,"Nama"),t.qZA(),t.TgZ(70,"th"),t._uU(71,"Singkatan"),t.qZA(),t.TgZ(72,"th"),t._uU(73,"Isi"),t.qZA(),t.TgZ(74,"th"),t._uU(75,"Aksi"),t.qZA()()(),t.TgZ(76,"tbody"),t.YNc(77,ba,11,6,"tr",31),t.qZA()()(),t.TgZ(78,"button",32),t.NdJ("click",function(){return a.btnTambahKemasan()}),t._uU(79,"Tambah satuan/kemasan"),t.qZA()(),t.TgZ(80,"div",33)(81,"button",34),t._uU(82,"Simpan"),t.qZA()()()()()()()(),t.TgZ(83,"jw-modal",35)(84,"form",10),t.NdJ("submit",function(){return a.submitKemasan()}),t.TgZ(85,"div",36)(86,"h4",37),t._uU(87),t.qZA()(),t.TgZ(88,"div",38)(89,"div",39)(90,"label",40),t._uU(91,"Nama kemasan"),t.TgZ(92,"span",41),t._uU(93,"*"),t.qZA()(),t.TgZ(94,"div",42)(95,"input",43),t.NdJ("keyup",function(o){return a.ambilSingkatan(o.target.value,"child")}),t.qZA(),t.YNc(96,fa,2,0,"div",18),t.qZA()(),t.TgZ(97,"div",39)(98,"label",40),t._uU(99,"Singkatan"),t.TgZ(100,"span",41),t._uU(101,"*"),t.qZA()(),t.TgZ(102,"div",20),t._UZ(103,"input",21),t.YNc(104,ka,2,0,"div",18),t.qZA()(),t.TgZ(105,"div",39)(106,"label",40),t._uU(107,"Isi"),t.TgZ(108,"span",41),t._uU(109,"*"),t.qZA()(),t.TgZ(110,"div",20)(111,"input",44),t.NdJ("keypress",function(o){return a.isNumber(o)}),t.qZA(),t.YNc(112,Za,2,0,"div",18),t.qZA()(),t.TgZ(113,"div",39)(114,"label",40),t._uU(115,"Satuan"),t.qZA(),t.TgZ(116,"div",16)(117,"select",45)(118,"option",46),t._uU(119,"---Pilih Satuan---"),t.qZA(),t.YNc(120,Aa,3,2,"ng-container",47),t.qZA()()()(),t.TgZ(121,"div",48)(122,"button",49),t.NdJ("click",function(){return a.closeBtnTambahKemasan()}),t._uU(123,"Batal"),t.qZA(),t.TgZ(124,"button",50),t._UZ(125,"i",51),t._uU(126," Simpan "),t.qZA()()()(),t.TgZ(127,"ngx-spinner",52)(128,"p",53),t._uU(129," Loading... "),t.qZA()()),2&e&&(t.xp6(3),t.Q6J("title","Katalog Alat Kesehatan")("items",t.DdM(37,qa))("active_item","Edit Katalog"),t.xp6(3),t.Q6J("routerLink",t.VKq(38,Ua,a.last)),t.xp6(6),t.Q6J("formGroup",a.formInput),t.xp6(12),t.ekj("border-danger",a.formInput.controls.nama_barang.hasError("required")&&a.submitted),t.xp6(1),t.Q6J("ngIf",a.formInput.controls.nama_barang.hasError("required")&&a.submitted),t.xp6(7),t.ekj("border-danger",a.formInput.controls.satuan_terkecil.hasError("required")&&a.submitted),t.xp6(1),t.Q6J("ngIf",a.formInput.controls.satuan_terkecil.hasError("required")&&a.submitted),t.xp6(6),t.ekj("border-danger",a.formInput.controls.singkatan.hasError("required")&&a.submitted),t.xp6(1),t.Q6J("ngIf",a.formInput.controls.singkatan.hasError("required")&&a.submitted),t.xp6(5),t.ekj("border-danger",a.formInput.controls.komposisi.hasError("required")&&a.submitted),t.xp6(1),t.Q6J("ngIf",a.formInput.controls.komposisi.hasError("required")&&a.submitted),t.xp6(12),t.ekj("border-danger",a.formInput.controls.harga_jual.hasError("required")&&a.submitted),t.Q6J("options",a.optionsCur),t.xp6(1),t.Q6J("ngIf",(a.formInput.controls.harga_jual.hasError("required")||a.formInput.value.harga_jual<=0)&&a.submitted),t.xp6(4),t.Q6J("ngIf",0==a.formInput.value.kemasan.length),t.xp6(14),t.Q6J("ngForOf",a.formInput.get("kemasan").controls),t.xp6(7),t.Q6J("formGroup",a.formKemasan),t.xp6(3),t.Oqu(a.formKemasanTitle),t.xp6(8),t.ekj("border-danger",a.formKemasan.controls.nama.hasError("required")&&a.submittedKemasan),t.xp6(1),t.Q6J("ngIf",a.formKemasan.controls.nama.hasError("required")&&a.submittedKemasan),t.xp6(7),t.ekj("border-danger",a.formKemasan.controls.singkatan.hasError("required")&&a.submittedKemasan),t.xp6(1),t.Q6J("ngIf",a.formKemasan.controls.singkatan.hasError("required")&&a.submittedKemasan),t.xp6(7),t.ekj("border-danger",a.formKemasan.controls.isi.hasError("required")&&a.submittedKemasan),t.xp6(1),t.Q6J("ngIf",a.formKemasan.controls.isi.hasError("required")&&a.submittedKemasan),t.xp6(8),t.Q6J("ngForOf",a.formInput.value.kemasan),t.xp6(7),t.Q6J("name","spinner1")("fullScreen",!0))},directives:[U.L,f.rH,l._Y,l.JL,l.sg,l.Fj,l.JJ,l.u,k.O5,K.g1,k.sg,l.CE,l.x0,Y.z,l.EJ,l.YN,l.Kr,T.Ro],styles:[""]}),n})();const Ka=[{path:"",redirectTo:"view",pathMatch:"full"},{path:"view",component:vt},{path:"buat-baru",component:Gt},{path:"edit-buat-baru/:id",component:X},{path:"edit-buat-baru/:id/:page",component:X},{path:"katalog-barang-bpom",component:la},{path:"import-csv",component:sa}];let Ba=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[f.Bz.forChild(Ka)],f.Bz]}),n})();var ya=p(60795),Ia=p(16270),_=p(36642);const xa=(0,u.Lq)({AlatKesehatan:null,isLoadingButton:!1,errorMessage:null,reloadTable:!1,submitButton:!1,isEdit:!1},(0,u.on)(x,(n,s)=>Object.assign(Object.assign({},n),{isLoadingButton:!0,errorMessage:null,reloadTable:!1,isEdit:!1})),(0,u.on)(E,(n,s)=>Object.assign(Object.assign({},n),{isLoadingButton:!1,reloadTable:!1,errorMessage:null})),(0,u.on)(w,(n,s)=>Object.assign(Object.assign({},n),{errorMessage:s.message,reloadTable:!1,isLoadingButton:!1})),(0,u.on)(S,(n,s)=>Object.assign(Object.assign({},n),{isLoadingButton:!0,errorMessage:null,reloadTable:!1,isEdit:!1})),(0,u.on)(N,(n,s)=>Object.assign(Object.assign({},n),{reloadTable:!1,isLoadingButton:!1,errorMessage:null})),(0,u.on)(J,(n,s)=>Object.assign(Object.assign({},n),{errorMessage:s.message,reloadTable:!1,isLoadingButton:!1})),(0,u.on)(L,(n,s)=>Object.assign(Object.assign({},n),{AlatKesehatan:new Z,errorMessage:null,isEdit:!1,reloadTable:!1})),(0,u.on)(G,(n,s)=>Object.assign(Object.assign({},n),{AlatKesehatan:s.payload,isEdit:!0,reloadTable:!1,errorMessage:null})),(0,u.on)(O,(n,s)=>Object.assign(Object.assign({},n),{errorMessage:s.message,reloadTable:!1,isLoadingButton:!1})),(0,u.on)(M,(n,s)=>Object.assign(Object.assign({},n),{AlatKesehatan:new Z,errorMessage:null,isEdit:!1,reloadTable:!1})),(0,u.on)(j,(n,s)=>Object.assign(Object.assign({},n),{reloadTable:!1,errorMessage:null,isEdit:!1})),(0,u.on)(Q,(n,s)=>Object.assign(Object.assign({},n),{errorMessage:s.message,reloadTable:!1,isLoadingButton:!1})),(0,u.on)(B,(n,s)=>Object.assign(Object.assign({},n),{AlatKesehatan:new Z,reloadTable:!0})),(0,u.on)(ht,(n,s)=>Object.assign(Object.assign({},n),{AlatKesehatan:new Z,isLoadingButton:!1,errorMessage:null,reloadTable:!1,submitButton:!1,isEdit:!1})));function Ea(n,s){return xa(n,s)}var y=p(63900),q=p(54004),I=p(70262),C=p(39646);let wa=(()=>{class n{constructor(e,a,i){this.actions$=e,this.ModulAlatKesehatanService=a,this.router=i,this.urlBacktoView=["barang","katalog","view"],this.Toast=b().mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:o=>{o.addEventListener("mouseenter",b().stopTimer),o.addEventListener("mouseleave",b().resumeTimer)}}),this.addAlatKesehatan$=(0,_.GW)(()=>this.actions$.pipe((0,_.l4)(x),(0,y.w)(o=>this.ModulAlatKesehatanService.add(o.payload).pipe((0,q.U)(r=>E({payload:r.response})),(0,I.K)(r=>(0,C.of)(w({message:r}))))))),this.addAlatKesehatanSuccess$=(0,_.GW)(()=>this.actions$.pipe((0,_.l4)(E),(0,q.U)(o=>(b().fire({title:"Data berhasil disimpan",icon:"success",showCancelButton:!1,allowOutsideClick:!1,confirmButtonText:"Ya, lanjutkan!"}).then(r=>{this.router.navigate(this.urlBacktoView)}),B())))),this.addAlatKesehatanFailure$=(0,_.GW)(()=>this.actions$.pipe((0,_.l4)(w)),{dispatch:!1}),this.updateAlatKesehatan$=(0,_.GW)(()=>this.actions$.pipe((0,_.l4)(S),(0,y.w)(o=>this.ModulAlatKesehatanService.update(o.payload.id_alat_kesehatan,o.payload).pipe((0,q.U)(r=>N({payload:r.response})),(0,I.K)(r=>(0,C.of)(J({message:r}))))))),this.updateAlatKesehatanSuccess$=(0,_.GW)(()=>this.actions$.pipe((0,_.l4)(N),(0,q.U)(o=>(b().fire({title:"Data berhasil disimpan",icon:"success",showCancelButton:!1,allowOutsideClick:!1,confirmButtonText:"Ya, lanjutkan!"}).then(r=>{}),B())))),this.updateAlatKesehatanFailure$=(0,_.GW)(()=>this.actions$.pipe((0,_.l4)(J)),{dispatch:!1}),this.getByIdAlatKesehatan$=(0,_.GW)(()=>this.actions$.pipe((0,_.l4)(L),(0,y.w)(o=>this.ModulAlatKesehatanService.show(o.payload.id).pipe((0,q.U)(r=>G({payload:r.response})),(0,I.K)(r=>(0,C.of)(O({message:r}))))))),this.getByIdAlatKesehatanFailure$=(0,_.GW)(()=>this.actions$.pipe((0,_.l4)(O)),{dispatch:!1}),this.deleteAlatKesehatan$=(0,_.GW)(()=>this.actions$.pipe((0,_.l4)(M),(0,y.w)(o=>this.ModulAlatKesehatanService.delete(o.payload.id).pipe((0,q.U)(r=>j({payload:r.response})),(0,I.K)(r=>(0,C.of)(Q({message:r}))))))),this.deleteAlatKesehatanSuccess$=(0,_.GW)(()=>this.actions$.pipe((0,_.l4)(j),(0,q.U)(o=>(this.Toast.fire({icon:"success",title:"Data berhasil dihapus"}),B())))),this.deleteAlatKesehatanFailure$=(0,_.GW)(()=>this.actions$.pipe((0,_.l4)(Q)),{dispatch:!1})}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(_.eX),t.LFG(R.W),t.LFG(f.F0))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac}),n})(),Sa=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[k.ez,Ba,ya.K,v.T,T.ef,l.u5,D.kn,l.UX,Ia.z,K.Ud,u.Aw.forFeature("alat_kesehatan",Ea),_.sQ.forFeature([wa])]]}),n})()}}]);