"use strict";(self.webpackChunkangularlight=self.webpackChunkangularlight||[]).push([[8556],{54767:(G,R,h)=>{h.r(R),h.d(R,{InformasiKlinikModule:()=>Ae});var x=h(69808),b=h(64035),T=h(2454),f=h.n(T),t=h(5e3),u=h(4833),C=h(50072),w=h(33399);const y=function(o){return[o]};function z(o,s){if(1&o&&(t.TgZ(0,"button",19),t._uU(1,"Edit"),t.qZA()),2&o){const e=t.oxw(2);t.Q6J("routerLink",t.VKq(1,y,"../../edit/"+e.id))}}const U=function(){return["../edit/"]};function k(o,s){1&o&&(t.TgZ(0,"button",19),t._uU(1,"Edit"),t.qZA()),2&o&&t.Q6J("routerLink",t.DdM(1,U))}function ft(o,s){if(1&o&&(t.TgZ(0,"div",17),t.YNc(1,z,2,3,"button",18),t.YNc(2,k,2,2,"button",18),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",null!=e.id),t.xp6(1),t.Q6J("ngIf",null==e.id)}}const _t=function(){return[""]};let $=(()=>{class o{constructor(e,i,n){this.informasiKlinikService=e,this.activatedRoute=i,this.spinner=n,this.id=null,this.btnDetail=!1,this.btnDelete=!1,this.btnEdit=!1,this.btnAdd=!1,this.view=!1}ngOnInit(){let e=JSON.parse(localStorage.getItem("currentUser"));e=e.menu_right,this.btnEdit=-1!=e.findIndex(i=>"MGMKDK3"==i.kode),this.view=-1!=e.findIndex(i=>"MGMKDK1"==i.kode),this.view||f().fire("Warning","Anda tidak mempunyai akses halaman ini","warning").then(()=>{window.location.href="/"}),this.activatedRoute.params.subscribe(i=>{null!=i.id?(this.id=i.id,this.getByID(i.id)):this.loadInfo()})}loadInfo(){this.spinner.show("spinner1"),this.informasiKlinikService.show().subscribe(e=>{this.infoKlinik=e.response,this.id=this.infoKlinik.id_klinik,this.spinner.hide("spinner1")})}getByID(e){this.spinner.show("spinner1"),this.informasiKlinikService.getById(e).subscribe(i=>{this.infoKlinik=i.response,this.spinner.hide("spinner1")})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(u.X),t.Y36(b.gz),t.Y36(C.t2))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-view"]],decls:52,vars:16,consts:[[1,"content"],[1,"content-block"],[1,"block-header"],[3,"title","items","active_item"],[1,"text-center","mb-3"],[1,"row","clearfix"],[1,"col-xs-12","col-sm-12","col-md-12","col-lg-8"],[1,"card"],[1,"header"],[1,"body","px-4"],[1,"table"],[2,"vertical-align","top"],["width","15%",2,"vertical-align","top"],["alt","",1,"img","img-responsive",2,"max-width","100%",3,"src"],["class","footer text-center mb-3",4,"ngIf"],["bdColor","rgba(0, 0, 0, 0.8)","size","medium","color","#fff","type","ball-clip-rotate-multiple",3,"name","fullScreen"],[2,"color","white"],[1,"footer","text-center","mb-3"],["class","btn btn-ubah btn-lg",3,"routerLink",4,"ngIf"],[1,"btn","btn-ubah","btn-lg",3,"routerLink"]],template:function(e,i){1&e&&(t.TgZ(0,"section",0)(1,"div",1)(2,"div",2),t._UZ(3,"app-breadcrumb",3),t.qZA(),t.TgZ(4,"h3",4),t._uU(5,"Informasi Klinik"),t.qZA(),t.TgZ(6,"div",5)(7,"div",6)(8,"div",7),t._UZ(9,"div",8),t.TgZ(10,"div",9)(11,"table",10)(12,"tbody")(13,"tr")(14,"th",11),t._uU(15,"Nama Pemimpin"),t.qZA(),t.TgZ(16,"td",11),t._uU(17,":"),t.qZA(),t.TgZ(18,"td",11),t._uU(19),t.qZA()(),t.TgZ(20,"tr")(21,"th",11),t._uU(22,"PPN"),t.qZA(),t.TgZ(23,"td",11),t._uU(24,":"),t.qZA(),t.TgZ(25,"td",11),t._uU(26),t.qZA()(),t.TgZ(27,"tr")(28,"th",12),t._uU(29,"Alamat Klinik"),t.qZA(),t.TgZ(30,"td",11),t._uU(31,":"),t.qZA(),t.TgZ(32,"td",11),t._uU(33),t.qZA()(),t.TgZ(34,"tr")(35,"th",11),t._uU(36,"Header Kop Surat"),t.qZA(),t.TgZ(37,"td",11),t._uU(38,":"),t.qZA(),t.TgZ(39,"td",11),t._UZ(40,"img",13),t.qZA()(),t.TgZ(41,"tr")(42,"th",11),t._uU(43,"Image TTD"),t.qZA(),t.TgZ(44,"td",11),t._uU(45,":"),t.qZA(),t.TgZ(46,"td",11),t._UZ(47,"img",13),t.qZA()()()()(),t.YNc(48,ft,3,2,"div",14),t.qZA()()()(),t.TgZ(49,"ngx-spinner",15)(50,"p",16),t._uU(51," Loading... "),t.qZA()()()),2&e&&(t.xp6(3),t.Q6J("title","Manajemen Klinik")("items",t.DdM(15,_t))("active_item","Informasi Klinik"),t.xp6(16),t.hij(" ",null==i.infoKlinik?null:i.infoKlinik.config_nama_pimpinan," "),t.xp6(7),t.hij(" ",null==i.infoKlinik?null:i.infoKlinik.config_ppn," "),t.xp6(7),t.xDo(" ",null==i.infoKlinik?null:i.infoKlinik.alamat_klinik," ",null==i.infoKlinik?null:i.infoKlinik.desa," ",null==i.infoKlinik?null:i.infoKlinik.kecamatan," ",null==i.infoKlinik?null:i.infoKlinik.kabupaten," ",null==i.infoKlinik?null:i.infoKlinik.provinsi," "),t.xp6(7),t.s9C("src",null==i.infoKlinik?null:i.infoKlinik.image_header_url,t.LSH),t.xp6(7),t.s9C("src",null==i.infoKlinik?null:i.infoKlinik.image_ttd_url,t.LSH),t.xp6(1),t.Q6J("ngIf",i.btnEdit),t.xp6(1),t.Q6J("name","spinner1")("fullScreen",!0))},directives:[w.L,x.O5,b.rH,C.Ro],styles:[""]}),o})();class B{}var g=h(65620);const N=(0,g.PH)("[INFO_KLINIK] update initial",(0,g.Ky)()),J=(0,g.PH)("[INFO_KLINIK] update success",(0,g.Ky)()),q=(0,g.PH)("[INFO_KLINIK] update failure",(0,g.Ky)()),Y=(0,g.PH)("[INFO_KLINIK] get byid initial"),tt=(0,g.PH)("[INFO_KLINIK] get byid success",(0,g.Ky)()),j=(0,g.PH)("[INFO_KLINIK] get byid failure",(0,g.Ky)()),It=(0,g.PH)("[INFO_KLINIK] clear data "),yt=(0,g.PH)("[INFO_KLINIK] table data");var St=h(49892),I=h(93075),Kt=h(88544),et=h(24376),it=h(97582),Et=h(22313);const Rt=["wrapper"],kt=["sourceImage"];function Zt(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"img",4,5),t.NdJ("load",function(){return t.CHM(e),t.oxw().imageLoadedInView()})("mousedown",function(n){t.CHM(e);const a=t.oxw();return a.startMove(n,a.moveTypes.Drag)})("touchstart",function(n){t.CHM(e);const a=t.oxw();return a.startMove(n,a.moveTypes.Drag)})("error",function(n){return t.CHM(e),t.oxw().loadImageError(n)}),t.qZA()}if(2&o){const e=t.oxw();t.Udp("visibility",e.imageVisible?"visible":"hidden")("transform",e.safeTransformStyle),t.ekj("ngx-ic-draggable",!e.disabled&&e.allowMoveImage),t.Q6J("src",e.safeImgDataUrl,t.LSH),t.uIk("alt",e.imageAltText)}}function Ht(o,s){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"span",9),t.NdJ("mousedown",function(n){t.CHM(e);const a=t.oxw(2);return a.startMove(n,a.moveTypes.Resize,"topleft")})("touchstart",function(n){t.CHM(e);const a=t.oxw(2);return a.startMove(n,a.moveTypes.Resize,"topleft")}),t._UZ(2,"span",10),t.qZA(),t.TgZ(3,"span",11),t._UZ(4,"span",10),t.qZA(),t.TgZ(5,"span",12),t.NdJ("mousedown",function(n){t.CHM(e);const a=t.oxw(2);return a.startMove(n,a.moveTypes.Resize,"topright")})("touchstart",function(n){t.CHM(e);const a=t.oxw(2);return a.startMove(n,a.moveTypes.Resize,"topright")}),t._UZ(6,"span",10),t.qZA(),t.TgZ(7,"span",13),t._UZ(8,"span",10),t.qZA(),t.TgZ(9,"span",14),t.NdJ("mousedown",function(n){t.CHM(e);const a=t.oxw(2);return a.startMove(n,a.moveTypes.Resize,"bottomright")})("touchstart",function(n){t.CHM(e);const a=t.oxw(2);return a.startMove(n,a.moveTypes.Resize,"bottomright")}),t._UZ(10,"span",10),t.qZA(),t.TgZ(11,"span",15),t._UZ(12,"span",10),t.qZA(),t.TgZ(13,"span",16),t.NdJ("mousedown",function(n){t.CHM(e);const a=t.oxw(2);return a.startMove(n,a.moveTypes.Resize,"bottomleft")})("touchstart",function(n){t.CHM(e);const a=t.oxw(2);return a.startMove(n,a.moveTypes.Resize,"bottomleft")}),t._UZ(14,"span",10),t.qZA(),t.TgZ(15,"span",17),t._UZ(16,"span",10),t.qZA(),t.TgZ(17,"span",18),t.NdJ("mousedown",function(n){t.CHM(e);const a=t.oxw(2);return a.startMove(n,a.moveTypes.Resize,"top")})("touchstart",function(n){t.CHM(e);const a=t.oxw(2);return a.startMove(n,a.moveTypes.Resize,"top")}),t.qZA(),t.TgZ(18,"span",19),t.NdJ("mousedown",function(n){t.CHM(e);const a=t.oxw(2);return a.startMove(n,a.moveTypes.Resize,"right")})("touchstart",function(n){t.CHM(e);const a=t.oxw(2);return a.startMove(n,a.moveTypes.Resize,"right")}),t.qZA(),t.TgZ(19,"span",20),t.NdJ("mousedown",function(n){t.CHM(e);const a=t.oxw(2);return a.startMove(n,a.moveTypes.Resize,"bottom")})("touchstart",function(n){t.CHM(e);const a=t.oxw(2);return a.startMove(n,a.moveTypes.Resize,"bottom")}),t.qZA(),t.TgZ(20,"span",21),t.NdJ("mousedown",function(n){t.CHM(e);const a=t.oxw(2);return a.startMove(n,a.moveTypes.Resize,"left")})("touchstart",function(n){t.CHM(e);const a=t.oxw(2);return a.startMove(n,a.moveTypes.Resize,"left")}),t.qZA(),t.BQk()}}function Ot(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",6),t.NdJ("keydown",function(n){return t.CHM(e),t.oxw().keyboardAccess(n)}),t.TgZ(1,"div",7),t.NdJ("mousedown",function(n){t.CHM(e);const a=t.oxw();return a.startMove(n,a.moveTypes.Move)})("touchstart",function(n){t.CHM(e);const a=t.oxw();return a.startMove(n,a.moveTypes.Move)}),t.qZA(),t.YNc(2,Ht,21,0,"ng-container",8),t.qZA()}if(2&o){const e=t.oxw();t.Udp("top",e.cropper.y1,"px")("left",e.cropper.x1,"px")("width",e.cropper.x2-e.cropper.x1,"px")("height",e.cropper.y2-e.cropper.y1,"px")("margin-left","center"===e.alignImage?e.marginLeft:null)("visibility",e.imageVisible?"visible":"hidden"),t.ekj("ngx-ic-round",e.roundCropper),t.xp6(2),t.Q6J("ngIf",!e.hideResizeSquares)}}class zt{constructor(){this.format="png",this.maintainAspectRatio=!0,this.transform={},this.aspectRatio=1,this.resetCropOnAspectRatioChange=!0,this.resizeToWidth=0,this.resizeToHeight=0,this.cropperMinWidth=0,this.cropperMinHeight=0,this.cropperMaxHeight=0,this.cropperMaxWidth=0,this.cropperStaticWidth=0,this.cropperStaticHeight=0,this.canvasRotation=0,this.initialStepSize=3,this.roundCropper=!1,this.onlyScaleDown=!1,this.imageQuality=92,this.autoCrop=!0,this.backgroundColor=null,this.containWithinAspectRatio=!1,this.hideResizeSquares=!1,this.alignImage="center",this.cropperScaledMinWidth=20,this.cropperScaledMinHeight=20,this.cropperScaledMaxWidth=20,this.cropperScaledMaxHeight=20,this.stepSize=this.initialStepSize}setOptions(s){Object.keys(s).filter(e=>e in this).forEach(e=>this[e]=s[e]),this.validateOptions()}setOptionsFromChanges(s){Object.keys(s).filter(e=>e in this).forEach(e=>this[e]=s[e].currentValue),this.validateOptions()}validateOptions(){if(this.maintainAspectRatio&&!this.aspectRatio)throw new Error("`aspectRatio` should > 0 when `maintainAspectRatio` is enabled")}}var _=(()=>{return(o=_||(_={})).Drag="drag",o.Move="move",o.Resize="resize",o.Pinch="pinch",_;var o})();function nt(o,s){return o/100*s}let Wt=(()=>{class o{crop(e,i,n,a){const r=this.getImagePosition(e,i,n,a),l=r.x2-r.x1,c=r.y2-r.y1,p=document.createElement("canvas");p.width=l,p.height=c;const d=p.getContext("2d");if(!d)return null;null!=a.backgroundColor&&(d.fillStyle=a.backgroundColor,d.fillRect(0,0,l,c));const m=(a.transform.scale||1)*(a.transform.flipH?-1:1),S=(a.transform.scale||1)*(a.transform.flipV?-1:1),{translateH:Z,translateV:E}=this.getCanvasTranslate(e,i,a),A=i.transformed;d.setTransform(m,0,0,S,A.size.width/2+Z,A.size.height/2+E),d.translate(-r.x1/m,-r.y1/S),d.rotate((a.transform.rotate||0)*Math.PI/180),d.drawImage(A.image,-A.size.width/2,-A.size.height/2);const v={width:l,height:c,imagePosition:r,cropperPosition:Object.assign({},n)};a.containWithinAspectRatio&&(v.offsetImagePosition=this.getOffsetImagePosition(e,i,n,a));const D=this.getResizeRatio(l,c,a);return 1!==D&&(v.width=Math.round(l*D),v.height=a.maintainAspectRatio?Math.round(v.width/a.aspectRatio):Math.round(c*D),function Bt(o,s,e){const i=o.width,n=o.height,a=i/(s=Math.round(s)),r=n/(e=Math.round(e)),l=Math.ceil(a/2),c=Math.ceil(r/2),p=o.getContext("2d");if(p){const d=p.getImageData(0,0,i,n),m=p.createImageData(s,e),S=d.data,Z=m.data;for(let E=0;E<e;E++)for(let A=0;A<s;A++){const v=4*(A+E*s),D=E*r;let K=0,F=0,ct=0,ht=0,pt=0,dt=0,gt=0;const be=Math.floor(A*a),Te=Math.floor(E*r);let V=Math.ceil((A+1)*a),X=Math.ceil((E+1)*r);V=Math.min(V,i),X=Math.min(X,n);for(let P=Te;P<X;P++){const mt=Math.abs(D-P)/c,we=A*a,Ie=mt*mt;for(let Q=be;Q<V;Q++){const ut=Math.abs(we-Q)/l,H=Math.sqrt(Ie+ut*ut);if(H>=1)continue;K=2*H*H*H-3*H*H+1;const O=4*(Q+P*i);gt+=K*S[O+3],ct+=K,S[O+3]<255&&(K=K*S[O+3]/250),ht+=K*S[O],pt+=K*S[O+1],dt+=K*S[O+2],F+=K}}Z[v]=ht/F,Z[v+1]=pt/F,Z[v+2]=dt/F,Z[v+3]=gt/ct}o.width=s,o.height=e,p.putImageData(m,0,0)}}(p,v.width,v.height)),v.base64=p.toDataURL("image/"+a.format,this.getQuality(a)),v}getCanvasTranslate(e,i,n){if("px"===n.transform.translateUnit){const a=this.getRatio(e,i);return{translateH:(n.transform.translateH||0)*a,translateV:(n.transform.translateV||0)*a}}return{translateH:n.transform.translateH?nt(n.transform.translateH,i.transformed.size.width):0,translateV:n.transform.translateV?nt(n.transform.translateV,i.transformed.size.height):0}}getRatio(e,i){return i.transformed.size.width/e.nativeElement.offsetWidth}getImagePosition(e,i,n,a){const r=this.getRatio(e,i),l={x1:Math.round(n.x1*r),y1:Math.round(n.y1*r),x2:Math.round(n.x2*r),y2:Math.round(n.y2*r)};return a.containWithinAspectRatio||(l.x1=Math.max(l.x1,0),l.y1=Math.max(l.y1,0),l.x2=Math.min(l.x2,i.transformed.size.width),l.y2=Math.min(l.y2,i.transformed.size.height)),l}getOffsetImagePosition(e,i,n,a){const c=i.transformed.size.width/e.nativeElement.offsetWidth;let p,d;(a.canvasRotation+i.exifTransform.rotate)%2?(p=(i.transformed.size.width-i.original.size.height)/2,d=(i.transformed.size.height-i.original.size.width)/2):(p=(i.transformed.size.width-i.original.size.width)/2,d=(i.transformed.size.height-i.original.size.height)/2);const m={x1:Math.round(n.x1*c)-p,y1:Math.round(n.y1*c)-d,x2:Math.round(n.x2*c)-p,y2:Math.round(n.y2*c)-d};return a.containWithinAspectRatio||(m.x1=Math.max(m.x1,0),m.y1=Math.max(m.y1,0),m.x2=Math.min(m.x2,i.transformed.size.width),m.y2=Math.min(m.y2,i.transformed.size.height)),m}getResizeRatio(e,i,n){const a=n.resizeToWidth/e,r=n.resizeToHeight/i,l=new Array;n.resizeToWidth>0&&l.push(a),n.resizeToHeight>0&&l.push(r);const c=0===l.length?1:Math.min(...l);return c>1&&!n.onlyScaleDown?c:Math.min(c,1)}getQuality(e){return Math.min(1,Math.max(0,e.imageQuality/100))}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})(),Ft=(()=>{class o{resetCropperPosition(e,i,n){if(!(null==e?void 0:e.nativeElement))return;const a=e.nativeElement;if(n.cropperStaticHeight&&n.cropperStaticWidth)i.x1=0,i.x2=a.offsetWidth>n.cropperStaticWidth?n.cropperStaticWidth:a.offsetWidth,i.y1=0,i.y2=a.offsetHeight>n.cropperStaticHeight?n.cropperStaticHeight:a.offsetHeight;else{const r=Math.min(n.cropperScaledMaxWidth,a.offsetWidth),l=Math.min(n.cropperScaledMaxHeight,a.offsetHeight);if(n.maintainAspectRatio)if(a.offsetWidth/n.aspectRatio<a.offsetHeight){i.x1=0,i.x2=r;const c=r/n.aspectRatio;i.y1=(a.offsetHeight-c)/2,i.y2=i.y1+c}else{i.y1=0,i.y2=l;const c=l*n.aspectRatio;i.x1=(a.offsetWidth-c)/2,i.x2=i.x1+c}else i.x1=0,i.x2=r,i.y1=0,i.y2=l}}move(e,i,n){const a=this.getClientX(e)-i.clientX,r=this.getClientY(e)-i.clientY;n.x1=i.x1+a,n.y1=i.y1+r,n.x2=i.x2+a,n.y2=i.y2+r}resize(e,i,n,a,r){const l=this.getClientX(e)-i.clientX,c=this.getClientY(e)-i.clientY;switch(i.position){case"left":n.x1=Math.min(Math.max(i.x1+l,n.x2-r.cropperScaledMaxWidth),n.x2-r.cropperScaledMinWidth);break;case"topleft":n.x1=Math.min(Math.max(i.x1+l,n.x2-r.cropperScaledMaxWidth),n.x2-r.cropperScaledMinWidth),n.y1=Math.min(Math.max(i.y1+c,n.y2-r.cropperScaledMaxHeight),n.y2-r.cropperScaledMinHeight);break;case"top":n.y1=Math.min(Math.max(i.y1+c,n.y2-r.cropperScaledMaxHeight),n.y2-r.cropperScaledMinHeight);break;case"topright":n.x2=Math.max(Math.min(i.x2+l,n.x1+r.cropperScaledMaxWidth),n.x1+r.cropperScaledMinWidth),n.y1=Math.min(Math.max(i.y1+c,n.y2-r.cropperScaledMaxHeight),n.y2-r.cropperScaledMinHeight);break;case"right":n.x2=Math.max(Math.min(i.x2+l,n.x1+r.cropperScaledMaxWidth),n.x1+r.cropperScaledMinWidth);break;case"bottomright":n.x2=Math.max(Math.min(i.x2+l,n.x1+r.cropperScaledMaxWidth),n.x1+r.cropperScaledMinWidth),n.y2=Math.max(Math.min(i.y2+c,n.y1+r.cropperScaledMaxHeight),n.y1+r.cropperScaledMinHeight);break;case"bottom":n.y2=Math.max(Math.min(i.y2+c,n.y1+r.cropperScaledMaxHeight),n.y1+r.cropperScaledMinHeight);break;case"bottomleft":n.x1=Math.min(Math.max(i.x1+l,n.x2-r.cropperScaledMaxWidth),n.x2-r.cropperScaledMinWidth),n.y2=Math.max(Math.min(i.y2+c,n.y1+r.cropperScaledMaxHeight),n.y1+r.cropperScaledMinHeight);break;case"center":const p=e.scale,d=Math.min(Math.max(r.cropperScaledMinWidth,Math.abs(i.x2-i.x1)*p),r.cropperScaledMaxWidth),m=Math.min(Math.max(r.cropperScaledMinHeight,Math.abs(i.y2-i.y1)*p),r.cropperScaledMaxHeight);n.x1=i.clientX-d/2,n.x2=i.clientX+d/2,n.y1=i.clientY-m/2,n.y2=i.clientY+m/2,n.x1<0?(n.x2-=n.x1,n.x1=0):n.x2>a.width&&(n.x1-=n.x2-a.width,n.x2=a.width),n.y1<0?(n.y2-=n.y1,n.y1=0):n.y2>a.height&&(n.y1-=n.y2-a.height,n.y2=a.height)}r.maintainAspectRatio&&this.checkAspectRatio(i.position,n,a,r)}checkAspectRatio(e,i,n,a){let r=0,l=0;switch(e){case"top":i.x2=i.x1+(i.y2-i.y1)*a.aspectRatio,r=Math.max(i.x2-n.width,0),l=Math.max(0-i.y1,0),(r>0||l>0)&&(i.x2-=l*a.aspectRatio>r?l*a.aspectRatio:r,i.y1+=l*a.aspectRatio>r?l:r/a.aspectRatio);break;case"bottom":i.x2=i.x1+(i.y2-i.y1)*a.aspectRatio,r=Math.max(i.x2-n.width,0),l=Math.max(i.y2-n.height,0),(r>0||l>0)&&(i.x2-=l*a.aspectRatio>r?l*a.aspectRatio:r,i.y2-=l*a.aspectRatio>r?l:r/a.aspectRatio);break;case"topleft":i.y1=i.y2-(i.x2-i.x1)/a.aspectRatio,r=Math.max(0-i.x1,0),l=Math.max(0-i.y1,0),(r>0||l>0)&&(i.x1+=l*a.aspectRatio>r?l*a.aspectRatio:r,i.y1+=l*a.aspectRatio>r?l:r/a.aspectRatio);break;case"topright":i.y1=i.y2-(i.x2-i.x1)/a.aspectRatio,r=Math.max(i.x2-n.width,0),l=Math.max(0-i.y1,0),(r>0||l>0)&&(i.x2-=l*a.aspectRatio>r?l*a.aspectRatio:r,i.y1+=l*a.aspectRatio>r?l:r/a.aspectRatio);break;case"right":case"bottomright":i.y2=i.y1+(i.x2-i.x1)/a.aspectRatio,r=Math.max(i.x2-n.width,0),l=Math.max(i.y2-n.height,0),(r>0||l>0)&&(i.x2-=l*a.aspectRatio>r?l*a.aspectRatio:r,i.y2-=l*a.aspectRatio>r?l:r/a.aspectRatio);break;case"left":case"bottomleft":i.y2=i.y1+(i.x2-i.x1)/a.aspectRatio,r=Math.max(0-i.x1,0),l=Math.max(i.y2-n.height,0),(r>0||l>0)&&(i.x1+=l*a.aspectRatio>r?l*a.aspectRatio:r,i.y2-=l*a.aspectRatio>r?l:r/a.aspectRatio);break;case"center":i.x2=i.x1+(i.y2-i.y1)*a.aspectRatio,i.y2=i.y1+(i.x2-i.x1)/a.aspectRatio;const c=Math.max(0-i.x1,0),p=Math.max(i.x2-n.width,0),d=Math.max(i.y2-n.height,0),m=Math.max(0-i.y1,0);(c>0||p>0||d>0||m>0)&&(i.x1+=d*a.aspectRatio>c?d*a.aspectRatio:c,i.x2-=m*a.aspectRatio>p?m*a.aspectRatio:p,i.y1+=m*a.aspectRatio>p?m:p/a.aspectRatio,i.y2-=d*a.aspectRatio>c?d:c/a.aspectRatio)}}getClientX(e){var i;return(null===(i=e.touches)||void 0===i?void 0:i[0].clientX)||e.clientX||0}getClientY(e){var i;return(null===(i=e.touches)||void 0===i?void 0:i[0].clientY)||e.clientY||0}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();let Yt=(()=>{class o{constructor(){this.autoRotateSupported=function Qt(){return new Promise(o=>{const s=new Image;s.onload=()=>{o(1===s.width&&2===s.height)},s.src="data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q=="})}()}loadImageFile(e,i){return new Promise((n,a)=>{const r=new FileReader;r.onload=l=>{this.loadImage(l.target.result,e.type,i).then(n).catch(a)},r.readAsDataURL(e)})}loadImage(e,i,n){return this.isValidImageType(i)?this.loadBase64Image(e,n):Promise.reject(new Error("Invalid image type"))}isValidImageType(e){return/image\/(png|jpg|jpeg|bmp|gif|tiff|webp|x-icon|vnd.microsoft.icon)/.test(e)}loadImageFromURL(e,i){return new Promise((n,a)=>{const r=new Image;r.onerror=()=>a,r.onload=()=>{const l=document.createElement("canvas"),c=l.getContext("2d");l.width=r.width,l.height=r.height,null==c||c.drawImage(r,0,0),this.loadBase64Image(l.toDataURL(),i).then(n)},r.crossOrigin="anonymous",r.src=e})}loadBase64Image(e,i){return new Promise((n,a)=>{const r=new Image;r.onload=()=>n({originalImage:r,originalBase64:e}),r.onerror=a,r.src=e}).then(n=>this.transformImageBase64(n,i))}transformImageBase64(e,i){return(0,it.mG)(this,void 0,void 0,function*(){const n=yield this.autoRotateSupported,a=yield function Nt(o){switch("string"==typeof o&&(o=function Jt(o){const s=new DataView(function qt(o){o=o.replace(/^data\:([^\;]+)\;base64,/gim,"");const s=atob(o),e=s.length,i=new Uint8Array(e);for(let n=0;n<e;n++)i[n]=s.charCodeAt(n);return i.buffer}(o));if(65496!==s.getUint16(0,!1))return-2;const e=s.byteLength;let i=2;for(;i<e;){if(s.getUint16(i+2,!1)<=8)return-1;const n=s.getUint16(i,!1);if(i+=2,65505==n){if(1165519206!==s.getUint32(i+=2,!1))return-1;const a=18761==s.getUint16(i+=6,!1);i+=s.getUint32(i+4,a);const r=s.getUint16(i,a);i+=2;for(let l=0;l<r;l++)if(274==s.getUint16(i+12*l,a))return s.getUint16(i+12*l+8,a)}else{if(65280!=(65280&n))break;i+=s.getUint16(i,!1)}}return-1}(o)),o){case 2:return{rotate:0,flip:!0};case 3:return{rotate:2,flip:!1};case 4:return{rotate:2,flip:!0};case 5:return{rotate:1,flip:!0};case 6:return{rotate:1,flip:!1};case 7:return{rotate:3,flip:!0};case 8:return{rotate:3,flip:!1};default:return{rotate:0,flip:!1}}}(n?-1:e.originalBase64);return e.originalImage&&e.originalImage.complete?this.transformLoadedImage({original:{base64:e.originalBase64,image:e.originalImage,size:{width:e.originalImage.naturalWidth,height:e.originalImage.naturalHeight}},exifTransform:a},i):Promise.reject(new Error("No image loaded"))})}transformLoadedImage(e,i){return(0,it.mG)(this,void 0,void 0,function*(){const n=i.canvasRotation+e.exifTransform.rotate,a={width:e.original.image.naturalWidth,height:e.original.image.naturalHeight};if(0===n&&!e.exifTransform.flip&&!i.containWithinAspectRatio)return{original:{base64:e.original.base64,image:e.original.image,size:Object.assign({},a)},transformed:{base64:e.original.base64,image:e.original.image,size:Object.assign({},a)},exifTransform:e.exifTransform};const r=this.getTransformedSize(a,e.exifTransform,i),l=document.createElement("canvas");l.width=r.width,l.height=r.height;const c=l.getContext("2d");null==c||c.setTransform(e.exifTransform.flip?-1:1,0,0,1,l.width/2,l.height/2),null==c||c.rotate(Math.PI*(n/2)),null==c||c.drawImage(e.original.image,-a.width/2,-a.height/2);const p=l.toDataURL(),d=yield this.loadImageFromBase64(p);return{original:{base64:e.original.base64,image:e.original.image,size:Object.assign({},a)},transformed:{base64:p,image:d,size:{width:d.width,height:d.height}},exifTransform:e.exifTransform}})}loadImageFromBase64(e){return new Promise((i,n)=>{const a=new Image;a.onload=()=>i(a),a.onerror=n,a.src=e})}getTransformedSize(e,i,n){const a=n.canvasRotation+i.rotate;if(n.containWithinAspectRatio){if(a%2){const l=e.height/n.aspectRatio;return{width:Math.max(e.height,e.width*n.aspectRatio),height:Math.max(e.width,l)}}{const l=e.width/n.aspectRatio;return{width:Math.max(e.width,e.height*n.aspectRatio),height:Math.max(e.height,l)}}}return a%2?{height:e.width,width:e.height}:{width:e.width,height:e.height}}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})(),jt=(()=>{class o{constructor(e,i,n,a,r){this.cropService=e,this.cropperPositionService=i,this.loadImageService=n,this.sanitizer=a,this.cd=r,this.Hammer=(null==window?void 0:window.Hammer)||null,this.settings=new zt,this.setImageMaxSizeRetries=0,this.resizedWhileHidden=!1,this.marginLeft="0px",this.maxSize={width:0,height:0},this.moveTypes=_,this.imageVisible=!1,this.format=this.settings.format,this.transform={},this.maintainAspectRatio=this.settings.maintainAspectRatio,this.aspectRatio=this.settings.aspectRatio,this.resetCropOnAspectRatioChange=this.settings.resetCropOnAspectRatioChange,this.resizeToWidth=this.settings.resizeToWidth,this.resizeToHeight=this.settings.resizeToHeight,this.cropperMinWidth=this.settings.cropperMinWidth,this.cropperMinHeight=this.settings.cropperMinHeight,this.cropperMaxHeight=this.settings.cropperMaxHeight,this.cropperMaxWidth=this.settings.cropperMaxWidth,this.cropperStaticWidth=this.settings.cropperStaticWidth,this.cropperStaticHeight=this.settings.cropperStaticHeight,this.canvasRotation=this.settings.canvasRotation,this.initialStepSize=this.settings.initialStepSize,this.roundCropper=this.settings.roundCropper,this.onlyScaleDown=this.settings.onlyScaleDown,this.imageQuality=this.settings.imageQuality,this.autoCrop=this.settings.autoCrop,this.backgroundColor=this.settings.backgroundColor,this.containWithinAspectRatio=this.settings.containWithinAspectRatio,this.hideResizeSquares=this.settings.hideResizeSquares,this.allowMoveImage=!1,this.cropper={x1:-100,y1:-100,x2:1e4,y2:1e4},this.alignImage=this.settings.alignImage,this.disabled=!1,this.hidden=!1,this.imageCropped=new t.vpe,this.startCropImage=new t.vpe,this.imageLoaded=new t.vpe,this.cropperReady=new t.vpe,this.loadImageFailed=new t.vpe,this.transformChange=new t.vpe,this.reset()}ngOnChanges(e){var i;this.onChangesUpdateSettings(e),this.onChangesInputImage(e),(null===(i=this.loadedImage)||void 0===i?void 0:i.original.image.complete)&&(e.containWithinAspectRatio||e.canvasRotation)&&this.loadImageService.transformLoadedImage(this.loadedImage,this.settings).then(n=>this.setLoadedImage(n)).catch(n=>this.loadImageError(n)),(e.cropper||e.maintainAspectRatio||e.aspectRatio)&&(this.setMaxSize(),this.setCropperScaledMinSize(),this.setCropperScaledMaxSize(),!this.maintainAspectRatio||!this.resetCropOnAspectRatioChange&&this.aspectRatioIsCorrect()||!e.maintainAspectRatio&&!e.aspectRatio?e.cropper&&(this.checkCropperPosition(!1),this.doAutoCrop()):this.resetCropperPosition(),this.cd.markForCheck()),e.transform&&(this.transform=this.transform||{},this.setCssTransform(),this.doAutoCrop(),this.cd.markForCheck()),e.hidden&&this.resizedWhileHidden&&!this.hidden&&setTimeout(()=>{this.onResize(),this.resizedWhileHidden=!1})}onChangesUpdateSettings(e){this.settings.setOptionsFromChanges(e),this.settings.cropperStaticHeight&&this.settings.cropperStaticWidth&&this.settings.setOptions({hideResizeSquares:!0,cropperMinWidth:this.settings.cropperStaticWidth,cropperMinHeight:this.settings.cropperStaticHeight,cropperMaxHeight:this.settings.cropperStaticHeight,cropperMaxWidth:this.settings.cropperStaticWidth,maintainAspectRatio:!1})}onChangesInputImage(e){(e.imageChangedEvent||e.imageURL||e.imageBase64||e.imageFile)&&this.reset(),e.imageChangedEvent&&this.isValidImageChangedEvent()&&this.loadImageFile(this.imageChangedEvent.target.files[0]),e.imageURL&&this.imageURL&&this.loadImageFromURL(this.imageURL),e.imageBase64&&this.imageBase64&&this.loadBase64Image(this.imageBase64),e.imageFile&&this.imageFile&&this.loadImageFile(this.imageFile)}isValidImageChangedEvent(){var e,i,n;return(null===(n=null===(i=null===(e=this.imageChangedEvent)||void 0===e?void 0:e.target)||void 0===i?void 0:i.files)||void 0===n?void 0:n.length)>0}setCssTransform(){var e;const i=(null===(e=this.transform)||void 0===e?void 0:e.translateUnit)||"%";this.safeTransformStyle=this.sanitizer.bypassSecurityTrustStyle(`translate(${this.transform.translateH||0}${i}, ${this.transform.translateV||0}${i}) scaleX(`+(this.transform.scale||1)*(this.transform.flipH?-1:1)+") scaleY("+(this.transform.scale||1)*(this.transform.flipV?-1:1)+") rotate("+(this.transform.rotate||0)+"deg)")}ngOnInit(){this.settings.stepSize=this.initialStepSize,this.activatePinchGesture()}reset(){this.imageVisible=!1,this.loadedImage=void 0,this.safeImgDataUrl="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=",this.moveStart={active:!1,type:null,position:null,x1:0,y1:0,x2:0,y2:0,clientX:0,clientY:0},this.maxSize={width:0,height:0},this.cropper.x1=-100,this.cropper.y1=-100,this.cropper.x2=1e4,this.cropper.y2=1e4}loadImageFile(e){this.loadImageService.loadImageFile(e,this.settings).then(i=>this.setLoadedImage(i)).catch(i=>this.loadImageError(i))}loadBase64Image(e){this.loadImageService.loadBase64Image(e,this.settings).then(i=>this.setLoadedImage(i)).catch(i=>this.loadImageError(i))}loadImageFromURL(e){this.loadImageService.loadImageFromURL(e,this.settings).then(i=>this.setLoadedImage(i)).catch(i=>this.loadImageError(i))}setLoadedImage(e){this.loadedImage=e,this.safeImgDataUrl=this.sanitizer.bypassSecurityTrustResourceUrl(e.transformed.base64),this.cd.markForCheck()}loadImageError(e){console.error(e),this.loadImageFailed.emit()}imageLoadedInView(){null!=this.loadedImage&&(this.imageLoaded.emit(this.loadedImage),this.setImageMaxSizeRetries=0,setTimeout(()=>this.checkImageMaxSizeRecursively()))}checkImageMaxSizeRecursively(){this.setImageMaxSizeRetries>40?this.loadImageFailed.emit():this.sourceImageLoaded()?(this.setMaxSize(),this.setCropperScaledMinSize(),this.setCropperScaledMaxSize(),this.resetCropperPosition(),this.cropperReady.emit(Object.assign({},this.maxSize)),this.cd.markForCheck()):(this.setImageMaxSizeRetries++,setTimeout(()=>this.checkImageMaxSizeRecursively(),50))}sourceImageLoaded(){var e,i;return(null===(i=null===(e=this.sourceImage)||void 0===e?void 0:e.nativeElement)||void 0===i?void 0:i.offsetWidth)>0}onResize(){!this.loadedImage||(this.hidden?this.resizedWhileHidden=!0:(this.resizeCropperPosition(),this.setMaxSize(),this.setCropperScaledMinSize(),this.setCropperScaledMaxSize()))}activatePinchGesture(){if(this.Hammer){const e=new this.Hammer(this.wrapper.nativeElement);e.get("pinch").set({enable:!0}),e.on("pinchmove",this.onPinch.bind(this)),e.on("pinchend",this.pinchStop.bind(this)),e.on("pinchstart",this.startPinch.bind(this))}else(0,t.X6Q)()&&console.warn("[NgxImageCropper] Could not find HammerJS - Pinch Gesture won't work")}resizeCropperPosition(){const e=this.sourceImage.nativeElement;(this.maxSize.width!==e.offsetWidth||this.maxSize.height!==e.offsetHeight)&&(this.cropper.x1=this.cropper.x1*e.offsetWidth/this.maxSize.width,this.cropper.x2=this.cropper.x2*e.offsetWidth/this.maxSize.width,this.cropper.y1=this.cropper.y1*e.offsetHeight/this.maxSize.height,this.cropper.y2=this.cropper.y2*e.offsetHeight/this.maxSize.height)}resetCropperPosition(){this.cropperPositionService.resetCropperPosition(this.sourceImage,this.cropper,this.settings),this.doAutoCrop(),this.imageVisible=!0}keyboardAccess(e){this.changeKeyboardStepSize(e),this.keyboardMoveCropper(e)}changeKeyboardStepSize(e){const i=+e.key;i>=1&&i<=9&&(this.settings.stepSize=i)}keyboardMoveCropper(e){if(!["ArrowUp","ArrowDown","ArrowRight","ArrowLeft"].includes(e.key))return;const n=e.shiftKey?_.Resize:_.Move,a=e.altKey?function Lt(o){switch(o){case"ArrowUp":return"bottom";case"ArrowRight":return"left";case"ArrowDown":return"top";default:return"right"}}(e.key):function Ut(o){switch(o){case"ArrowUp":return"top";case"ArrowRight":return"right";case"ArrowDown":return"bottom";default:return"left"}}(e.key),r=function Dt(o,s){switch(o){case"ArrowUp":return{clientX:0,clientY:-1*s};case"ArrowRight":return{clientX:s,clientY:0};case"ArrowDown":return{clientX:0,clientY:s};default:return{clientX:-1*s,clientY:0}}}(e.key,this.settings.stepSize);e.preventDefault(),e.stopPropagation(),this.startMove({clientX:0,clientY:0},n,a),this.moveImg(r),this.moveStop()}startMove(e,i,n=null){var a,r;this.disabled||(null===(a=this.moveStart)||void 0===a?void 0:a.active)&&(null===(r=this.moveStart)||void 0===r?void 0:r.type)===_.Pinch||i===_.Drag&&!this.allowMoveImage||(e.preventDefault&&e.preventDefault(),this.moveStart=Object.assign({active:!0,type:i,position:n,transform:Object.assign({},this.transform),clientX:this.cropperPositionService.getClientX(e),clientY:this.cropperPositionService.getClientY(e)},this.cropper))}startPinch(e){!this.safeImgDataUrl||(e.preventDefault&&e.preventDefault(),this.moveStart=Object.assign({active:!0,type:_.Pinch,position:"center",clientX:this.cropper.x1+(this.cropper.x2-this.cropper.x1)/2,clientY:this.cropper.y1+(this.cropper.y2-this.cropper.y1)/2},this.cropper))}moveImg(e){var i,n;if(this.moveStart.active){if(e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault(),this.moveStart.type===_.Move)this.cropperPositionService.move(e,this.moveStart,this.cropper),this.checkCropperPosition(!0);else if(this.moveStart.type===_.Resize)!this.cropperStaticWidth&&!this.cropperStaticHeight&&this.cropperPositionService.resize(e,this.moveStart,this.cropper,this.maxSize,this.settings),this.checkCropperPosition(!1);else if(this.moveStart.type===_.Drag){const a=this.cropperPositionService.getClientX(e)-this.moveStart.clientX,r=this.cropperPositionService.getClientY(e)-this.moveStart.clientY;this.transform=Object.assign(Object.assign({},this.transform),{translateH:((null===(i=this.moveStart.transform)||void 0===i?void 0:i.translateH)||0)+a,translateV:((null===(n=this.moveStart.transform)||void 0===n?void 0:n.translateV)||0)+r}),this.setCssTransform()}this.cd.detectChanges()}}onPinch(e){this.moveStart.active&&(e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault(),this.moveStart.type===_.Pinch&&(this.cropperPositionService.resize(e,this.moveStart,this.cropper,this.maxSize,this.settings),this.checkCropperPosition(!1)),this.cd.detectChanges())}setMaxSize(){if(this.sourceImage){const e=this.sourceImage.nativeElement;this.maxSize.width=e.offsetWidth,this.maxSize.height=e.offsetHeight,this.marginLeft=this.sanitizer.bypassSecurityTrustStyle("calc(50% - "+this.maxSize.width/2+"px)")}}setCropperScaledMinSize(){var e,i;(null===(i=null===(e=this.loadedImage)||void 0===e?void 0:e.transformed)||void 0===i?void 0:i.image)?(this.setCropperScaledMinWidth(),this.setCropperScaledMinHeight()):(this.settings.cropperScaledMinWidth=20,this.settings.cropperScaledMinHeight=20)}setCropperScaledMinWidth(){this.settings.cropperScaledMinWidth=this.cropperMinWidth>0?Math.max(20,this.cropperMinWidth/this.loadedImage.transformed.image.width*this.maxSize.width):20}setCropperScaledMinHeight(){this.settings.cropperScaledMinHeight=this.maintainAspectRatio?Math.max(20,this.settings.cropperScaledMinWidth/this.aspectRatio):this.cropperMinHeight>0?Math.max(20,this.cropperMinHeight/this.loadedImage.transformed.image.height*this.maxSize.height):20}setCropperScaledMaxSize(){var e,i;if(null===(i=null===(e=this.loadedImage)||void 0===e?void 0:e.transformed)||void 0===i?void 0:i.image){const n=this.loadedImage.transformed.size.width/this.maxSize.width;this.settings.cropperScaledMaxWidth=this.cropperMaxWidth>20?this.cropperMaxWidth/n:this.maxSize.width,this.settings.cropperScaledMaxHeight=this.cropperMaxHeight>20?this.cropperMaxHeight/n:this.maxSize.height,this.maintainAspectRatio&&(this.settings.cropperScaledMaxWidth>this.settings.cropperScaledMaxHeight*this.aspectRatio?this.settings.cropperScaledMaxWidth=this.settings.cropperScaledMaxHeight*this.aspectRatio:this.settings.cropperScaledMaxWidth<this.settings.cropperScaledMaxHeight*this.aspectRatio&&(this.settings.cropperScaledMaxHeight=this.settings.cropperScaledMaxWidth/this.aspectRatio))}else this.settings.cropperScaledMaxWidth=this.maxSize.width,this.settings.cropperScaledMaxHeight=this.maxSize.height}checkCropperPosition(e=!1){this.cropper.x1<0&&(this.cropper.x2-=e?this.cropper.x1:0,this.cropper.x1=0),this.cropper.y1<0&&(this.cropper.y2-=e?this.cropper.y1:0,this.cropper.y1=0),this.cropper.x2>this.maxSize.width&&(this.cropper.x1-=e?this.cropper.x2-this.maxSize.width:0,this.cropper.x2=this.maxSize.width),this.cropper.y2>this.maxSize.height&&(this.cropper.y1-=e?this.cropper.y2-this.maxSize.height:0,this.cropper.y2=this.maxSize.height)}moveStop(){var e;this.moveStart.active&&(this.moveStart.active=!1,(null===(e=this.moveStart)||void 0===e?void 0:e.type)===_.Drag?this.transformChange.emit(this.transform):this.doAutoCrop())}pinchStop(){this.moveStart.active&&(this.moveStart.active=!1,this.doAutoCrop())}doAutoCrop(){this.autoCrop&&this.crop()}crop(){var e,i;if(null!=(null===(i=null===(e=this.loadedImage)||void 0===e?void 0:e.transformed)||void 0===i?void 0:i.image)){this.startCropImage.emit();const n=this.cropService.crop(this.sourceImage,this.loadedImage,this.cropper,this.settings);return null!=n&&this.imageCropped.emit(n),n}return null}aspectRatioIsCorrect(){return(this.cropper.x2-this.cropper.x1)/(this.cropper.y2-this.cropper.y1)===this.aspectRatio}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(Wt),t.Y36(Ft),t.Y36(Yt),t.Y36(Et.H7),t.Y36(t.sBO))},o.\u0275cmp=t.Xpm({type:o,selectors:[["image-cropper"]],viewQuery:function(e,i){if(1&e&&(t.Gf(Rt,7),t.Gf(kt,5)),2&e){let n;t.iGM(n=t.CRH())&&(i.wrapper=n.first),t.iGM(n=t.CRH())&&(i.sourceImage=n.first)}},hostVars:6,hostBindings:function(e,i){1&e&&t.NdJ("resize",function(){return i.onResize()},!1,t.Jf7)("mousemove",function(a){return i.moveImg(a)},!1,t.evT)("touchmove",function(a){return i.moveImg(a)},!1,t.evT)("mouseup",function(){return i.moveStop()},!1,t.evT)("touchend",function(){return i.moveStop()},!1,t.evT),2&e&&(t.Udp("text-align",i.alignImage),t.ekj("disabled",i.disabled)("ngx-ix-hidden",i.hidden))},inputs:{imageChangedEvent:"imageChangedEvent",imageURL:"imageURL",imageBase64:"imageBase64",imageFile:"imageFile",imageAltText:"imageAltText",format:"format",transform:"transform",maintainAspectRatio:"maintainAspectRatio",aspectRatio:"aspectRatio",resetCropOnAspectRatioChange:"resetCropOnAspectRatioChange",resizeToWidth:"resizeToWidth",resizeToHeight:"resizeToHeight",cropperMinWidth:"cropperMinWidth",cropperMinHeight:"cropperMinHeight",cropperMaxHeight:"cropperMaxHeight",cropperMaxWidth:"cropperMaxWidth",cropperStaticWidth:"cropperStaticWidth",cropperStaticHeight:"cropperStaticHeight",canvasRotation:"canvasRotation",initialStepSize:"initialStepSize",roundCropper:"roundCropper",onlyScaleDown:"onlyScaleDown",imageQuality:"imageQuality",autoCrop:"autoCrop",backgroundColor:"backgroundColor",containWithinAspectRatio:"containWithinAspectRatio",hideResizeSquares:"hideResizeSquares",allowMoveImage:"allowMoveImage",cropper:"cropper",alignImage:"alignImage",disabled:"disabled",hidden:"hidden"},outputs:{imageCropped:"imageCropped",startCropImage:"startCropImage",imageLoaded:"imageLoaded",cropperReady:"cropperReady",loadImageFailed:"loadImageFailed",transformChange:"transformChange"},features:[t.TTD],decls:5,vars:10,consts:[["wrapper",""],["class","ngx-ic-source-image",3,"src","visibility","transform","ngx-ic-draggable","load","mousedown","touchstart","error",4,"ngIf"],[1,"ngx-ic-overlay"],["class","ngx-ic-cropper","tabindex","0",3,"ngx-ic-round","top","left","width","height","margin-left","visibility","keydown",4,"ngIf"],[1,"ngx-ic-source-image",3,"src","load","mousedown","touchstart","error"],["sourceImage",""],["tabindex","0",1,"ngx-ic-cropper",3,"keydown"],[1,"ngx-ic-move",3,"mousedown","touchstart"],[4,"ngIf"],[1,"ngx-ic-resize","ngx-ic-topleft",3,"mousedown","touchstart"],[1,"ngx-ic-square"],[1,"ngx-ic-resize","ngx-ic-top"],[1,"ngx-ic-resize","ngx-ic-topright",3,"mousedown","touchstart"],[1,"ngx-ic-resize","ngx-ic-right"],[1,"ngx-ic-resize","ngx-ic-bottomright",3,"mousedown","touchstart"],[1,"ngx-ic-resize","ngx-ic-bottom"],[1,"ngx-ic-resize","ngx-ic-bottomleft",3,"mousedown","touchstart"],[1,"ngx-ic-resize","ngx-ic-left"],[1,"ngx-ic-resize-bar","ngx-ic-top",3,"mousedown","touchstart"],[1,"ngx-ic-resize-bar","ngx-ic-right",3,"mousedown","touchstart"],[1,"ngx-ic-resize-bar","ngx-ic-bottom",3,"mousedown","touchstart"],[1,"ngx-ic-resize-bar","ngx-ic-left",3,"mousedown","touchstart"]],template:function(e,i){1&e&&(t.TgZ(0,"div",null,0),t.YNc(2,Zt,2,8,"img",1),t._UZ(3,"div",2),t.YNc(4,Ot,3,15,"div",3),t.qZA()),2&e&&(t.Udp("background",i.imageVisible&&i.backgroundColor),t.xp6(2),t.Q6J("ngIf",i.safeImgDataUrl),t.xp6(1),t.Udp("width",i.maxSize.width,"px")("height",i.maxSize.height,"px")("margin-left","center"===i.alignImage?i.marginLeft:null),t.xp6(1),t.Q6J("ngIf",i.imageVisible))},directives:[x.O5],styles:['[_nghost-%COMP%]{display:flex;position:relative;width:100%;max-width:100%;max-height:100%;overflow:hidden;padding:5px;text-align:center}[_nghost-%COMP%] > div[_ngcontent-%COMP%]{width:100%;position:relative}[_nghost-%COMP%] > div[_ngcontent-%COMP%]   img.ngx-ic-source-image[_ngcontent-%COMP%]{max-width:100%;max-height:100%;transform-origin:center}[_nghost-%COMP%] > div[_ngcontent-%COMP%]   img.ngx-ic-source-image.ngx-ic-draggable[_ngcontent-%COMP%]{user-drag:none;-webkit-user-drag:none;user-select:none;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;cursor:grab}[_nghost-%COMP%]   .ngx-ic-overlay[_ngcontent-%COMP%]{position:absolute;pointer-events:none;touch-action:none;outline:var(--cropper-overlay-color, white) solid 100vw;top:0;left:0}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]{position:absolute;display:flex;color:#53535c;background:transparent;outline:rgba(255,255,255,.3) solid 100vw;outline:var(--cropper-outline-color, rgba(255, 255, 255, .3)) solid 100vw;touch-action:none}@media (orientation: portrait){[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]{outline-width:100vh}}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]:after{position:absolute;content:"";inset:0;pointer-events:none;border:dashed 1px;opacity:.75;color:inherit;z-index:1}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-move[_ngcontent-%COMP%]{width:100%;cursor:move;border:1px solid rgba(255,255,255,.5)}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]:focus   .ngx-ic-move[_ngcontent-%COMP%]{border-color:#1e90ff;border-width:2px}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize[_ngcontent-%COMP%]{position:absolute;display:inline-block;line-height:6px;padding:8px;opacity:.85;z-index:1}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize[_ngcontent-%COMP%]   .ngx-ic-square[_ngcontent-%COMP%]{display:inline-block;background:#53535C;width:6px;height:6px;border:1px solid rgba(255,255,255,.5);box-sizing:content-box}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-topleft[_ngcontent-%COMP%]{top:-12px;left:-12px;cursor:nwse-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-top[_ngcontent-%COMP%]{top:-12px;left:calc(50% - 12px);cursor:ns-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-topright[_ngcontent-%COMP%]{top:-12px;right:-12px;cursor:nesw-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-right[_ngcontent-%COMP%]{top:calc(50% - 12px);right:-12px;cursor:ew-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-bottomright[_ngcontent-%COMP%]{bottom:-12px;right:-12px;cursor:nwse-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-bottom[_ngcontent-%COMP%]{bottom:-12px;left:calc(50% - 12px);cursor:ns-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-bottomleft[_ngcontent-%COMP%]{bottom:-12px;left:-12px;cursor:nesw-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-left[_ngcontent-%COMP%]{top:calc(50% - 12px);left:-12px;cursor:ew-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize-bar[_ngcontent-%COMP%]{position:absolute;z-index:1}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize-bar.ngx-ic-top[_ngcontent-%COMP%]{top:-11px;left:11px;width:calc(100% - 22px);height:22px;cursor:ns-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize-bar.ngx-ic-right[_ngcontent-%COMP%]{top:11px;right:-11px;height:calc(100% - 22px);width:22px;cursor:ew-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize-bar.ngx-ic-bottom[_ngcontent-%COMP%]{bottom:-11px;left:11px;width:calc(100% - 22px);height:22px;cursor:ns-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize-bar.ngx-ic-left[_ngcontent-%COMP%]{top:11px;left:-11px;height:calc(100% - 22px);width:22px;cursor:ew-resize}[_nghost-%COMP%]   .ngx-ic-cropper.ngx-ic-round[_ngcontent-%COMP%]{outline-color:transparent}[_nghost-%COMP%]   .ngx-ic-cropper.ngx-ic-round[_ngcontent-%COMP%]:after{border-radius:100%;box-shadow:0 0 0 100vw #ffffff4d;box-shadow:0 0 0 100vw var(--cropper-outline-color, rgba(255, 255, 255, .3))}@media (orientation: portrait){[_nghost-%COMP%]   .ngx-ic-cropper.ngx-ic-round[_ngcontent-%COMP%]:after{box-shadow:0 0 0 100vh #ffffff4d;box-shadow:0 0 0 100vh var(--cropper-outline-color, rgba(255, 255, 255, .3))}}[_nghost-%COMP%]   .ngx-ic-cropper.ngx-ic-round[_ngcontent-%COMP%]   .ngx-ic-move[_ngcontent-%COMP%]{border-radius:100%}.disabled[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize[_ngcontent-%COMP%], .disabled[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize-bar[_ngcontent-%COMP%], .disabled[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-move[_ngcontent-%COMP%]{display:none}.ngx-ix-hidden[_nghost-%COMP%]{display:none}'],changeDetection:0}),o})(),Vt=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[x.ez]]}),o})();const Xt=function(o){return[o]};function Gt(o,s){if(1&o&&(t.TgZ(0,"button",37),t._UZ(1,"i",38),t._uU(2," Kembali"),t.qZA()),2&o){const e=t.oxw();t.Q6J("routerLink",t.VKq(1,Xt,"../../view/"+e.id_klinik))}}const $t=function(){return["../view"]};function te(o,s){1&o&&(t.TgZ(0,"button",37),t._UZ(1,"i",38),t._uU(2," Kembali"),t.qZA()),2&o&&t.Q6J("routerLink",t.DdM(1,$t))}function ee(o,s){if(1&o&&(t.TgZ(0,"div",39),t._UZ(1,"img",40),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("src",e.imageUrl,t.LSH)}}function ie(o,s){1&o&&(t.TgZ(0,"div",50),t._uU(1," *Anda belum melakukan crop image "),t.qZA())}function ne(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",41)(1,"div",42)(2,"button",43),t.NdJ("click",function(){return t.CHM(e),t.oxw().zoomIn()}),t._UZ(3,"i",44),t.qZA(),t.TgZ(4,"button",43),t.NdJ("click",function(){return t.CHM(e),t.oxw().zoomOut()}),t._UZ(5,"i",45),t.qZA(),t.TgZ(6,"button",46),t.NdJ("click",function(){return t.CHM(e),t.oxw().doneHeader()}),t._UZ(7,"i",47),t.qZA()(),t.TgZ(8,"image-cropper",48),t.NdJ("transformChange",function(n){return t.CHM(e),t.oxw().transform=n})("imageCropped",function(n){return t.CHM(e),t.oxw().cropImgHeader(n)})("imageLoaded",function(){return t.CHM(e),t.oxw().imgLoadHeader()})("cropperReady",function(){return t.CHM(e),t.oxw().initCropperHeader()})("loadImageFailed",function(){return t.CHM(e),t.oxw().imgFailedHeader()}),t.qZA(),t.YNc(9,ie,2,0,"div",49),t.qZA()}if(2&o){const e=t.oxw();t.xp6(8),t.Q6J("imageChangedEvent",e.imgChangeEvtHeader)("maintainAspectRatio",!0)("aspectRatio",1)("resizeToWidth",100)("cropperStaticWidth",1064)("cropperStaticHeight",289)("canvasRotation",e.canvasRotation)("transform",e.transform)("alignImage","center")("allowMoveImage",e.allowMoveImage),t.xp6(1),t.Q6J("ngIf",e.submitted&&""==e.imageUrl&&""!=e.imgChangeEvtHeader)}}function ae(o,s){if(1&o&&(t.TgZ(0,"div",39),t._UZ(1,"img",40),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("src",e.imageUrlTTD,t.LSH)}}function oe(o,s){1&o&&(t.TgZ(0,"div",50),t._uU(1," *Anda belum melakukan crop image "),t.qZA())}function re(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",41)(1,"div",42)(2,"button",43),t.NdJ("click",function(){return t.CHM(e),t.oxw().zoomIn()}),t._UZ(3,"i",44),t.qZA(),t.TgZ(4,"button",43),t.NdJ("click",function(){return t.CHM(e),t.oxw().zoomOut()}),t._UZ(5,"i",45),t.qZA(),t.TgZ(6,"button",46),t.NdJ("click",function(){return t.CHM(e),t.oxw().doneTTD()}),t._UZ(7,"i",47),t.qZA()(),t.TgZ(8,"image-cropper",48),t.NdJ("transformChange",function(n){return t.CHM(e),t.oxw().transform=n})("imageCropped",function(n){return t.CHM(e),t.oxw().cropImgTTD(n)})("imageLoaded",function(){return t.CHM(e),t.oxw().imgLoadTTD()})("cropperReady",function(){return t.CHM(e),t.oxw().initCropperTTD()})("loadImageFailed",function(){return t.CHM(e),t.oxw().imgFailedTTD()}),t.qZA(),t.YNc(9,oe,2,0,"div",49),t.qZA()}if(2&o){const e=t.oxw();t.xp6(8),t.Q6J("imageChangedEvent",e.imgChangeEvtTTD)("maintainAspectRatio",!0)("aspectRatio",1)("resizeToWidth",100)("cropperStaticWidth",100)("cropperStaticHeight",100)("canvasRotation",e.canvasRotation)("transform",e.transform)("alignImage","center")("allowMoveImage",e.allowMoveImage),t.xp6(1),t.Q6J("ngIf",e.submitted&&""==e.imageUrlTTD&&""!=e.imgChangeEvtTTD)}}function se(o,s){if(1&o&&(t.TgZ(0,"div",39),t._UZ(1,"img",40),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("src",e.imageUrlLogo,t.LSH)}}function le(o,s){1&o&&(t.TgZ(0,"div",50),t._uU(1," *Anda belum melakukan crop image "),t.qZA())}function ce(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",41)(1,"div",42)(2,"button",43),t.NdJ("click",function(){return t.CHM(e),t.oxw().zoomIn()}),t._UZ(3,"i",44),t.qZA(),t.TgZ(4,"button",43),t.NdJ("click",function(){return t.CHM(e),t.oxw().zoomOut()}),t._UZ(5,"i",45),t.qZA(),t.TgZ(6,"button",46),t.NdJ("click",function(){return t.CHM(e),t.oxw().doneLogo()}),t._UZ(7,"i",47),t.qZA()(),t.TgZ(8,"image-cropper",48),t.NdJ("transformChange",function(n){return t.CHM(e),t.oxw().transform=n})("imageCropped",function(n){return t.CHM(e),t.oxw().cropImgLogo(n)})("imageLoaded",function(){return t.CHM(e),t.oxw().imgLoadLogo()})("cropperReady",function(){return t.CHM(e),t.oxw().initCropperLogo()})("loadImageFailed",function(){return t.CHM(e),t.oxw().imgFailedLogo()}),t.qZA(),t.YNc(9,le,2,0,"div",49),t.qZA()}if(2&o){const e=t.oxw();t.xp6(8),t.Q6J("imageChangedEvent",e.imgChangeEvtLogo)("maintainAspectRatio",!0)("aspectRatio",1)("resizeToWidth",100)("cropperStaticWidth",100)("cropperStaticHeight",100)("canvasRotation",e.canvasRotation)("transform",e.transform)("alignImage","center")("allowMoveImage",e.allowMoveImage),t.xp6(1),t.Q6J("ngIf",e.submitted&&""==e.imageUrlLogo&&""!=e.imgChangeEvtLogo)}}function he(o,s){if(1&o&&(t.TgZ(0,"ul")(1,"li"),t._uU(2),t.qZA()()),2&o){const e=s.$implicit;t.xp6(2),t.AsE("",null==e?null:e.field," : ",e.message,"")}}function pe(o,s){if(1&o&&(t.TgZ(0,"div",51),t._uU(1),t.YNc(2,he,3,2,"ul",52),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.hij(" ",null==e.errorMessage||null==e.errorMessage.metaData?null:e.errorMessage.metaData.message," "),t.xp6(1),t.Q6J("ngForOf",e.errorMessage.response)}}const de=function(){return[]},L=function(){return{standalone:!0}},ge=function(o,s){return{"fa-spin fa-spinner pulse":o,"fa-check":s}};var W=(()=>{return(o=W||(W={})).KTP="ktp",o.DOMISILI="domisili",W;var o})();let at=(()=>{class o{constructor(e,i,n,a,r,l,c){this.wilayahService=e,this.fb=i,this.infoKlinikService=n,this.store=a,this.activatedRoute=r,this.spinner=l,this.validate=c,this.paramProvinsiKtp={last_data:0,get_data:10,search:""},this.paramKabupatenKtp={last_data:0,get_data:10,search:""},this.paramKecamatanKtp={last_data:0,get_data:10,search:""},this.paramDesaKtp={last_data:0,get_data:10,search:""},this.paramZone={last_data:0,get_data:10,search:""},this.listProvinsiKtp=[],this.listKabupatenKtp=[],this.listKecamatanKtp=[],this.listDesaKtp=[],this.listZone=[],this.idProvinsiKtp=null,this.idKabupatenKtp=null,this.idKecamatanKtp=null,this.idDesaKtp=null,this.timeZone=null,this.loadingSelectProv=!1,this.loadingSelectKab=!1,this.loadingSelectKec=!1,this.loadingSelectDes=!1,this.loadingSelectZone=!1,this.tipeAlamat=W,this.submitted=!1,this.infoKlinik=new B,this.imgChangeEvtHeader="",this.cropImgPreviewHeader="",this.imgChangeEvtTTD="",this.cropImgPreviewTTD="",this.imgChangeEvtLogo="",this.cropImgPreviewLogo="",this.canvasRotation=0,this.translateH=0,this.translateV=0,this.scale=1,this.aspectRatio=4/3,this.showCropper=!1,this.containWithinAspectRatio=!1,this.transform={translateUnit:"px"},this.loading=!1,this.allowMoveImage=!1,this.id_klinik=null,this.getState=this.store.select("manajemenKlinik_informasiKlinik")}ngOnInit(){this.getDetailKlinik(),this.formInput=this.fb.group({alamat_klinik:[null,[]],nama_pimpinan:[null,[]],ppn:[null,[]]}),this.activatedRoute.params.subscribe(e=>{e&&(this.id_klinik=e.id)}),this.getState.subscribe(e=>{this.errorMessage=e.errorMessage,this.submitButton=e.submitButton,this.isLoadingButton=e.isLoadingButton,this.isEdit=e.isEdit,this.infoKlinik=e.infoKlinik,this.isEdit&&(this.formInput.patchValue({alamat_klinik:this.infoKlinik.alamat_klinik,nama_pimpinan:this.infoKlinik.config_nama_pimpinan,ppn:this.infoKlinik.config_ppn}),this.listProvinsiKtp=[{id:this.infoKlinik.id_province,name:this.infoKlinik.provinsi}],this.idProvinsiKtp=this.infoKlinik.id_province,this.listKabupatenKtp=[{id:this.infoKlinik.id_regency,name:this.infoKlinik.kabupaten}],this.idKabupatenKtp=this.infoKlinik.id_regency,this.listKecamatanKtp=[{id:this.infoKlinik.id_district,name:this.infoKlinik.kecamatan}],this.idKecamatanKtp=this.infoKlinik.id_district,this.listDesaKtp=[{id:this.infoKlinik.id_village,name:this.infoKlinik.desa}],this.idDesaKtp=this.infoKlinik.id_village,this.spinner.hide("spinner1"),this.imageUrl=this.infoKlinik.image_header_url,this.imageUrlTTD=this.infoKlinik.image_ttd_url,this.imageUrlLogo=this.infoKlinik.image_logo_url)})}isNumber(e){return this.validate.Number(e)}onFileChangeHeader(e){0==(e.target||e.srcElement).value.length?(this.cropImgPreviewHeader="",this.imgChangeEvtHeader=""):(this.imgChangeEvtHeader=e,this.imageUrl="")}cropImgHeader(e){this.cropImgPreviewHeader=e.base64}imgLoadHeader(){}initCropperHeader(){}imgFailedHeader(){}doneHeader(){this.imageUrl=this.cropImgPreviewHeader,this.cropImgPreviewHeader="",this.imgChangeEvtHeader=""}doneTTD(){this.imageUrlTTD=this.cropImgPreviewTTD,this.cropImgPreviewTTD="",this.imgChangeEvtTTD=""}onFileChangeTTD(e){0==(e.target||e.srcElement).value.length?(this.cropImgPreviewTTD="",this.imgChangeEvtTTD=""):(this.imgChangeEvtTTD=e,this.imageUrlTTD="")}cropImgTTD(e){this.cropImgPreviewTTD=e.base64}imgLoadTTD(){}initCropperTTD(){}imgFailedTTD(){}onFileChangeLogo(e){0==(e.target||e.srcElement).value.length?(this.cropImgPreviewLogo="",this.imgChangeEvtLogo=""):(this.imgChangeEvtLogo=e,this.imageUrlLogo="")}cropImgLogo(e){this.cropImgPreviewLogo=e.base64}imgLoadLogo(){}initCropperLogo(){}imgFailedLogo(){}doneLogo(){this.imageUrlLogo=this.cropImgPreviewLogo,this.cropImgPreviewLogo="",this.imgChangeEvtLogo=""}rotateLeft(){this.loading=!0,setTimeout(()=>{this.canvasRotation--,this.flipAfterRotate()})}rotateRight(){this.loading=!0,setTimeout(()=>{this.canvasRotation++,this.flipAfterRotate()})}moveLeft(){this.transform=Object.assign(Object.assign({},this.transform),{translateH:++this.translateH})}moveRight(){this.transform=Object.assign(Object.assign({},this.transform),{translateH:--this.translateH})}moveTop(){this.transform=Object.assign(Object.assign({},this.transform),{translateV:++this.translateV})}moveBottom(){this.transform=Object.assign(Object.assign({},this.transform),{translateV:--this.translateV})}flipAfterRotate(){const e=this.transform.flipH,i=this.transform.flipV;this.transform=Object.assign(Object.assign({},this.transform),{flipH:i,flipV:e}),this.translateH=0,this.translateV=0}flipHorizontal(){this.transform=Object.assign(Object.assign({},this.transform),{flipH:!this.transform.flipH})}flipVertical(){this.transform=Object.assign(Object.assign({},this.transform),{flipV:!this.transform.flipV})}resetImage(){this.scale=1,this.rotation=0,this.canvasRotation=0,this.transform={translateUnit:"px"}}zoomOut(){this.scale-=.1,this.transform=Object.assign(Object.assign({},this.transform),{scale:this.scale})}zoomIn(){this.scale+=.1,this.transform=Object.assign(Object.assign({},this.transform),{scale:this.scale})}getDetailKlinik(){this.spinner.show("spinner1"),this.store.dispatch(Y())}submitForm(){if(this.submitted=!1,setTimeout(()=>{this.submitted=!0},200),!this.formInput.invalid&&!(""==this.imageUrl&&""!=this.imgChangeEvtHeader||""==this.imageUrlLogo&&""!=this.imgChangeEvtLogo||""==this.imageUrlTTD&&""!=this.imgChangeEvtTTD)){this.spinner.show("spinner1");let e=new B;e.id_province=String(this.idProvinsiKtp),e.id_regency=String(this.idKabupatenKtp),e.id_district=String(this.idKecamatanKtp),e.id_village=String(this.idDesaKtp),e.alamat_klinik=this.formInput.value.alamat_klinik,e.image_header=this.imageUrl,e.config_ppn=this.formInput.value.ppn,e.config_nama_pimpinan=this.formInput.value.nama_pimpinan,e.image_ttd=this.imageUrlTTD,e.image_logo=this.imageUrlLogo,e.config_time_zone=this.timeZone,this.store.dispatch(N({payload:e})),setTimeout(()=>{this.spinner.hide("spinner1")},400)}}handleFileInputHeader(e){this.imgChangeEvtHeader=e,this.imageUrl=""}handleFileInputLogo(e){this.imgChangeEvtLogo=e,this.imageUrlLogo=""}handleFileInputTTD(e){this.imgChangeEvtTTD=e,this.imageUrlTTD=""}prosesSelectZone(e,i){"search"==i&&(this.paramZone.search=e.term),this.loadingSelectZone=!0,this.infoKlinikService.getTimeZone().subscribe(n=>{this.loadingSelectZone=!1,this.listZone=n.response})}prosesSelectProvinsi(e,i,n){let a=this.paramSelectOption(e,i,n,"provinsi");this.loadingSelectProv=!0,this.wilayahService.prosesSelectOptionProvinsi(a,i).subscribe(r=>{this.loadingSelectProv=!1,n==this.tipeAlamat.KTP&&(this.listProvinsiKtp=r.response)})}prosesSelectKabupaten(e,i,n){let a;n==this.tipeAlamat.KTP&&(a=this.idProvinsiKtp);let r=this.paramSelectOption(e,i,n,"kabupaten");this.loadingSelectKab=!0,this.wilayahService.prosesSelectOptionKabupaten(r,i,a).subscribe(l=>{this.loadingSelectKab=!1,n==this.tipeAlamat.KTP&&(this.listKabupatenKtp=l.response)})}prosesSelectKecamatan(e,i,n){let a;n==this.tipeAlamat.KTP&&(a=this.idKabupatenKtp);let r=this.paramSelectOption(e,i,n,"kecamatan");this.loadingSelectKec=!0,this.wilayahService.prosesSelectOptionKecamatan(r,i,a).subscribe(l=>{this.loadingSelectKec=!1,n==this.tipeAlamat.KTP&&(this.listKecamatanKtp=l.response)})}prosesSelectDesa(e,i,n){let a;n==this.tipeAlamat.KTP&&(a=this.idKecamatanKtp);let r=this.paramSelectOption(e,i,n,"desa");this.loadingSelectDes=!0,this.wilayahService.prosesSelectOptionDesa(r,i,a).subscribe(l=>{this.loadingSelectDes=!1,n==this.tipeAlamat.KTP&&(this.listDesaKtp=l.response)})}changeProvinsi(e){e==this.tipeAlamat.KTP&&(this.idKabupatenKtp=null,this.idKecamatanKtp=null,this.idDesaKtp=null)}changeKabupaten(e){e==this.tipeAlamat.KTP&&(this.idKecamatanKtp=null,this.idDesaKtp=null)}changeKecamatan(e){e==this.tipeAlamat.KTP&&(this.idDesaKtp=null)}paramSelectOption(e,i,n,a){let r;return"provinsi"==a&&n==this.tipeAlamat.KTP?r=this.paramProvinsiKtp:"kabupaten"==a&&n==this.tipeAlamat.KTP?r=this.paramKabupatenKtp:"kecamatan"==a&&n==this.tipeAlamat.KTP?r=this.paramKecamatanKtp:"desa"==a&&n==this.tipeAlamat.KTP&&(r=this.paramDesaKtp),"search"==i&&(r.search=e.term),r}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(St.F),t.Y36(I.qu),t.Y36(u.X),t.Y36(g.yh),t.Y36(b.gz),t.Y36(C.t2),t.Y36(Kt.p))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-edit"]],decls:90,vars:61,consts:[[1,"content"],[1,"content-block"],[1,"block-header"],[3,"title","items","active_item"],[1,"text-center","mb-3"],["type","button","class","btn btn-kembali btn-lg mb-3",3,"routerLink",4,"ngIf"],[1,"row","clearfix"],[1,"col-xs-12","col-sm-12","col-md-12"],[1,"card"],[3,"formGroup","submit"],[1,"header"],[1,"body"],[1,"mb-3","col-sm-12"],[1,"form-label","fw-bold"],[1,"input-group"],["type","text","formControlName","nama_pimpinan","placeholder","Nama Pimpinan Klinik",1,"form-control"],["type","text","formControlName","ppn","placeholder","PPN",1,"form-control",3,"keypress"],[1,"input-group","col-sm-12"],["bindLabel","name","bindValue","id","placeholder","Pilih Provinsi",2,"flex","1 1 auto",3,"virtualScroll","items","loading","searchable","ngModel","ngModelOptions","clearable","change","ngModelChange","search","scrollToEnd","open"],["bindLabel","name","bindValue","id","placeholder","Pilih Kabupaten",2,"flex","1 1 auto",3,"virtualScroll","items","loading","searchable","ngModel","ngModelOptions","clearable","change","ngModelChange","search","scrollToEnd","open"],["bindLabel","name","bindValue","id","placeholder","Pilih Kecamatan",2,"flex","1 1 auto",3,"virtualScroll","items","loading","searchable","ngModel","ngModelOptions","clearable","change","ngModelChange","search","scrollToEnd","open"],["bindLabel","name","bindValue","id","placeholder","Pilih Desa",2,"flex","1 1 auto",3,"virtualScroll","items","loading","searchable","ngModel","ngModelOptions","clearable","ngModelChange","search","scrollToEnd","open"],[1,"col-sm-12"],["bindLabel","nama_zone","bindValue","offset_zone","placeholder","Pilih Time Zone",2,"flex","1 1 auto",3,"virtualScroll","items","loading","searchable","ngModel","ngModelOptions","clearable","ngModelChange","search","scrollToEnd","open"],["cols","5","rows","5","formControlName","alamat_klinik","placeholder","Alamat Klinik",1,"form-control"],["type","file","placeholder","Image Header",1,"form-control",3,"change"],[1,"p-2","fw-bold"],["class","pt-3",4,"ngIf"],["class","col-md-12",4,"ngIf"],["type","file","placeholder","Image TTD",1,"form-control",3,"change"],["type","file","placeholder","Image Logo",1,"form-control",3,"change"],["class","alert alert-danger","role","alert",4,"ngIf"],[1,"footer","text-center","mb-3"],["type","submit",1,"btn","btn-simpan","btn-lg",3,"disabled"],[1,"fa",3,"ngClass"],["bdColor","rgba(0, 0, 0, 0.8)","size","medium","color","#fff","type","ball-clip-rotate-multiple",3,"name","fullScreen"],[2,"color","white"],["type","button",1,"btn","btn-kembali","btn-lg","mb-3",3,"routerLink"],[1,"fas","fa-arrow-left"],[1,"pt-3"],["width","100%",1,"image",2,"max-width","400px",3,"src"],[1,"col-md-12"],[1,"col-md-12","text-center"],["type","button",1,"btn","btn-secondary",3,"click"],[1,"fas","fa-search-plus"],[1,"fas","fa-search-minus"],["type","button","title","Crop",1,"btn","btn-info",3,"click"],[1,"fas","fa-crop"],["format","png",3,"imageChangedEvent","maintainAspectRatio","aspectRatio","resizeToWidth","cropperStaticWidth","cropperStaticHeight","canvasRotation","transform","alignImage","allowMoveImage","transformChange","imageCropped","imageLoaded","cropperReady","loadImageFailed"],["class","mt-2 text-danger",4,"ngIf"],[1,"mt-2","text-danger"],["role","alert",1,"alert","alert-danger"],[4,"ngFor","ngForOf"]],template:function(e,i){1&e&&(t.TgZ(0,"section",0)(1,"div",1)(2,"div",2),t._UZ(3,"app-breadcrumb",3),t.qZA(),t.TgZ(4,"h3",4),t._uU(5,"Informasi Klinik"),t.qZA(),t.YNc(6,Gt,3,3,"button",5),t.YNc(7,te,3,2,"button",5),t.TgZ(8,"div",6)(9,"div",7)(10,"div",8)(11,"form",9),t.NdJ("submit",function(){return i.submitForm()}),t._UZ(12,"div",10),t.TgZ(13,"div",11)(14,"div",12)(15,"label",13),t._uU(16,"Nama Pimpinan Klinik"),t.qZA(),t.TgZ(17,"div",14),t._UZ(18,"input",15),t.qZA()(),t.TgZ(19,"div",12)(20,"label",13),t._uU(21,"PPN"),t.qZA(),t.TgZ(22,"div",14)(23,"input",16),t.NdJ("keypress",function(a){return i.isNumber(a)}),t.qZA()()(),t.TgZ(24,"div",12)(25,"label",13),t._uU(26,"Provinsi"),t.qZA(),t.TgZ(27,"div",17)(28,"ng-select",18),t.NdJ("change",function(){return i.changeProvinsi(i.tipeAlamat.KTP)})("ngModelChange",function(a){return i.idProvinsiKtp=a})("search",function(a){return i.prosesSelectProvinsi(a,"search",i.tipeAlamat.KTP)})("scrollToEnd",function(a){return i.prosesSelectProvinsi(a,"last_page",i.tipeAlamat.KTP)})("open",function(a){return i.prosesSelectProvinsi(a,"open",i.tipeAlamat.KTP)}),t.qZA()()(),t.TgZ(29,"div",12)(30,"label",13),t._uU(31,"Kabupaten / Kota"),t.qZA(),t.TgZ(32,"div",14)(33,"ng-select",19),t.NdJ("change",function(){return i.changeKabupaten(i.tipeAlamat.KTP)})("ngModelChange",function(a){return i.idKabupatenKtp=a})("search",function(a){return i.prosesSelectKabupaten(a,"search",i.tipeAlamat.KTP)})("scrollToEnd",function(a){return i.prosesSelectKabupaten(a,"last_page",i.tipeAlamat.KTP)})("open",function(a){return i.prosesSelectKabupaten(a,"open",i.tipeAlamat.KTP)}),t.qZA()()(),t.TgZ(34,"div",12)(35,"label",13),t._uU(36,"Kecamatan"),t.qZA(),t.TgZ(37,"div",14)(38,"ng-select",20),t.NdJ("change",function(){return i.changeKecamatan(i.tipeAlamat.KTP)})("ngModelChange",function(a){return i.idKecamatanKtp=a})("search",function(a){return i.prosesSelectKecamatan(a,"search",i.tipeAlamat.KTP)})("scrollToEnd",function(a){return i.prosesSelectKecamatan(a,"last_page",i.tipeAlamat.KTP)})("open",function(a){return i.prosesSelectKecamatan(a,"open",i.tipeAlamat.KTP)}),t.qZA()()(),t.TgZ(39,"div",12)(40,"label",13),t._uU(41,"Desa / Kelurahan"),t.qZA(),t.TgZ(42,"div",14)(43,"ng-select",21),t.NdJ("ngModelChange",function(a){return i.idDesaKtp=a})("search",function(a){return i.prosesSelectDesa(a,"search",i.tipeAlamat.KTP)})("scrollToEnd",function(a){return i.prosesSelectDesa(a,"last_page",i.tipeAlamat.KTP)})("open",function(a){return i.prosesSelectDesa(a,"open",i.tipeAlamat.KTP)}),t.qZA()()(),t.TgZ(44,"div",12)(45,"label",13),t._uU(46,"Time Zone"),t.qZA(),t.TgZ(47,"div",22)(48,"ng-select",23),t.NdJ("ngModelChange",function(a){return i.timeZone=a})("search",function(a){return i.prosesSelectZone(a,"search")})("scrollToEnd",function(a){return i.prosesSelectZone(a,"last_page")})("open",function(a){return i.prosesSelectZone(a,"open")}),t.qZA()()(),t.TgZ(49,"div",12)(50,"label",13),t._uU(51,"Alamat Klinik"),t.qZA(),t.TgZ(52,"div",14),t._UZ(53,"textarea",24),t.qZA()(),t.TgZ(54,"div",12)(55,"label",13),t._uU(56,"Header Kop Surat"),t.qZA(),t.TgZ(57,"div",14)(58,"input",25),t.NdJ("change",function(a){return i.handleFileInputHeader(a)}),t.qZA()(),t.TgZ(59,"p",26),t._uU(60,"Ukuran foto untuk di utamakan width : 1064 , height 289 "),t.qZA(),t.YNc(61,ee,2,1,"div",27),t.qZA(),t.YNc(62,ne,10,11,"div",28),t.TgZ(63,"div",12)(64,"label",13),t._uU(65,"Image TTD"),t.qZA(),t.TgZ(66,"div",14)(67,"input",29),t.NdJ("change",function(a){return i.handleFileInputTTD(a)}),t.qZA()(),t.TgZ(68,"p",26),t._uU(69,"Ukuran foto untuk di utamakan width : 100 , height 100 "),t.qZA(),t.YNc(70,ae,2,1,"div",27),t.qZA(),t.YNc(71,re,10,11,"div",28),t.TgZ(72,"div",12)(73,"label",13),t._uU(74,"Image Logo"),t.qZA(),t.TgZ(75,"div",14)(76,"input",30),t.NdJ("change",function(a){return i.handleFileInputLogo(a)}),t.qZA()(),t.TgZ(77,"p",26),t._uU(78,"Ukuran foto untuk di utamakan width : 100 , height 100 "),t.qZA(),t.YNc(79,se,2,1,"div",27),t.qZA(),t.YNc(80,ce,10,11,"div",28),t.TgZ(81,"div",12),t.YNc(82,pe,3,2,"div",31),t.qZA()(),t.TgZ(83,"div",32)(84,"button",33),t._UZ(85,"i",34),t._uU(86," Simpan "),t.qZA()()()()()()(),t.TgZ(87,"ngx-spinner",35)(88,"p",36),t._uU(89," Loading... "),t.qZA()()()),2&e&&(t.xp6(3),t.Q6J("title","Manajemen Klinik")("items",t.DdM(52,de))("active_item","Informasi Klinik"),t.xp6(3),t.Q6J("ngIf",null!=i.id_klinik),t.xp6(1),t.Q6J("ngIf",null==i.id_klinik),t.xp6(4),t.Q6J("formGroup",i.formInput),t.xp6(17),t.Q6J("virtualScroll",!0)("items",i.listProvinsiKtp)("loading",i.loadingSelectProv)("searchable",!0)("ngModel",i.idProvinsiKtp)("ngModelOptions",t.DdM(53,L))("clearable",!0),t.xp6(5),t.Q6J("virtualScroll",!0)("items",i.listKabupatenKtp)("loading",i.loadingSelectKab)("searchable",!0)("ngModel",i.idKabupatenKtp)("ngModelOptions",t.DdM(54,L))("clearable",!0),t.xp6(5),t.Q6J("virtualScroll",!0)("items",i.listKecamatanKtp)("loading",i.loadingSelectKec)("searchable",!0)("ngModel",i.idKecamatanKtp)("ngModelOptions",t.DdM(55,L))("clearable",!0),t.xp6(5),t.Q6J("virtualScroll",!0)("items",i.listDesaKtp)("loading",i.loadingSelectDes)("searchable",!0)("ngModel",i.idDesaKtp)("ngModelOptions",t.DdM(56,L))("clearable",!0),t.xp6(5),t.Q6J("virtualScroll",!0)("items",i.listZone)("loading",i.loadingSelectZone)("searchable",!0)("ngModel",i.timeZone)("ngModelOptions",t.DdM(57,L))("clearable",!0),t.xp6(13),t.Q6J("ngIf",i.imageUrl),t.xp6(1),t.Q6J("ngIf",""!=i.imgChangeEvtHeader),t.xp6(8),t.Q6J("ngIf",i.imageUrlTTD),t.xp6(1),t.Q6J("ngIf",""!=i.imgChangeEvtTTD),t.xp6(8),t.Q6J("ngIf",i.imageUrlTTD),t.xp6(1),t.Q6J("ngIf",""!=i.imgChangeEvtLogo),t.xp6(2),t.Q6J("ngIf",null!=i.errorMessage),t.xp6(2),t.Q6J("disabled",i.isLoadingButton),t.xp6(1),t.Q6J("ngClass",t.WLB(58,ge,i.isLoadingButton,!i.isLoadingButton)),t.xp6(2),t.Q6J("name","spinner1")("fullScreen",!0))},directives:[w.L,x.O5,b.rH,I._Y,I.JL,I.sg,I.Fj,I.JJ,I.u,et.w9,I.On,jt,x.sg,x.mk,C.Ro],styles:[""]}),o})();const me=[{path:"view",component:$},{path:"view/:id",component:$},{path:"edit/:id",component:at},{path:"edit",component:at}];let ue=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[b.Bz.forChild(me)],b.Bz]}),o})();var fe=h(60795),M=h(36642);const ve=(0,g.Lq)({infoKlinik:null,isLoadingButton:!1,errorMessage:null,reloadTable:!1,submitButton:!1,isEdit:!1},(0,g.on)(N,(o,s)=>Object.assign(Object.assign({},o),{isLoadingButton:!0,errorMessage:null,isEdit:!1,reloadTable:!1})),(0,g.on)(J,(o,s)=>Object.assign(Object.assign({},o),{isLoadingButton:!1,infoKlinik:s.payload})),(0,g.on)(q,(o,s)=>Object.assign(Object.assign({},o),{isLoadingButton:!1,errorMessage:s.message,isEdit:!1,reloadTable:!1})),(0,g.on)(Y,(o,s)=>Object.assign(Object.assign({},o),{isLoadingButton:!1,errorMessage:null,isEdit:!1,infoKlinik:new B})),(0,g.on)(tt,(o,s)=>Object.assign(Object.assign({},o),{isLoadingButton:!1,errorMessage:null,isEdit:!0,infoKlinik:s.payload,reloadTable:!1})),(0,g.on)(j,(o,s)=>Object.assign(Object.assign({},o),{isLoadingButton:!1,errorMessage:s.message,isEdit:!1,reloadTable:!1})),(0,g.on)(yt,(o,s)=>Object.assign(Object.assign({},o),{reloadTable:!0})),(0,g.on)(It,(o,s)=>Object.assign(Object.assign({},o),{infoKlinik:new B,errorMessage:null,isEdit:!1,reloadTable:!1,isLoadingButton:!1})));function xe(o,s){return ve(o,s)}var ot=h(63900),rt=h(54004),st=h(70262),Ce=h(18505),lt=h(39646);let Me=(()=>{class o{constructor(e,i,n){this.actions$=e,this.informasiKlinikService=i,this.router=n,this.urlBacktoView=["manajemen-klinik","informasi-klinik","view"],this.Toast=f().mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:a=>{a.addEventListener("mouseenter",f().stopTimer),a.addEventListener("mouseleave",f().resumeTimer)}}),this.updateInitial$=(0,M.GW)(()=>this.actions$.pipe((0,M.l4)(N),(0,ot.w)(a=>this.informasiKlinikService.update(a.payload).pipe((0,rt.U)(r=>J({payload:r.response})),(0,st.K)(r=>(0,lt.of)(q({message:r}))))))),this.updateSuccess$=(0,M.GW)(()=>this.actions$.pipe((0,M.l4)(J),(0,Ce.b)(a=>{f().fire({title:"Data berhasil disimpan",icon:"success",showCancelButton:!1,allowOutsideClick:!1,confirmButtonText:"Ya, lanjutkan!"}).then(r=>{this.router.navigate(this.urlBacktoView)})})),{dispatch:!1}),this.updateFailure$=(0,M.GW)(()=>this.actions$.pipe((0,M.l4)(q)),{dispatch:!1}),this.getByIdInitial$=(0,M.GW)(()=>this.actions$.pipe((0,M.l4)(Y),(0,ot.w)(a=>this.informasiKlinikService.show().pipe((0,rt.U)(r=>tt({payload:r.response})),(0,st.K)(r=>(0,lt.of)(j({message:r}))))))),this.getByIdFailure$=(0,M.GW)(()=>this.actions$.pipe((0,M.l4)(j)),{dispatch:!1})}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(M.eX),t.LFG(u.X),t.LFG(b.F0))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac}),o})(),Ae=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[x.ez,ue,fe.K,I.u5,I.UX,et.A0,C.ef,Vt,g.Aw.forFeature("manajemenKlinik_informasiKlinik",xe),M.sQ.forFeature([Me])]]}),o})()},76334:(G,R,h)=>{h.d(R,{m:()=>T});var x=h(5e3),b=h(95305);let T=(()=>{class f{constructor(u){this.authService=u}getUrlModule(u){return this.authService.currentUserValue.repo.find(y=>y.key_repo==u).url_repo}list24Hours(u=60,C="05:00"){let w=this.generateHoursInterval(0,1440,u),y=w.findIndex(k=>k==C),z=w.slice(y,w.length-1),U=w.slice(0,y);return z.concat(U)}generateHoursInterval(u,C,w){const y=[];for(let k=0;u<1440&&!(u>C);k++){var z=Math.floor(u/60),U=u%60;y[k]=("0"+z%24).slice(-2)+":"+("0"+U).slice(-2),u+=w}return y}}return f.\u0275fac=function(u){return new(u||f)(x.LFG(b.e))},f.\u0275prov=x.Yz7({token:f,factory:f.\u0275fac,providedIn:"root"}),f})()},88544:(G,R,h)=>{h.d(R,{p:()=>b});var x=h(5e3);let b=(()=>{class T{isNumber(t){return t.match(/^[0-9]+$/)?t:t.replace(/[^0-9]/g,"")}isAlpha(t){return t.match(/^[A-Za-z]+$/)?t:t.replace(/[^A-Za-z]/g,"")}Number(t){const u=t.which?t.which:t.keyCode;return!(46!=u||t.target.value.indexOf(".")>-1)||!(u>31&&(u<48||u>57))}}return T.\u0275fac=function(t){return new(t||T)},T.\u0275prov=x.Yz7({token:T,factory:T.\u0275fac,providedIn:"root"}),T})()}}]);