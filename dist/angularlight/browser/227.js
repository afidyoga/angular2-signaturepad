"use strict";(self.webpackChunkangularlight=self.webpackChunkangularlight||[]).push([[227],{20227:(C,h,o)=>{o.r(h),o.d(h,{AlatKesehatanModule:()=>Y});var p=o(69808),u=o(65415),f=o(64035),r=o(93075),g=o(15439),t=o(5e3),v=o(94554),Z=o(58081),m=o(50072),T=o(33399),c=o(67236);function A(a,l){1&a&&(t.TgZ(0,"div",29),t._uU(1," Tanggal mulai dan selesai tidak boleh kosong "),t.qZA())}function b(a,l){1&a&&(t.TgZ(0,"div",29),t._uU(1," Status tidak boleh kosong "),t.qZA())}const D=function(){return["Stok"]},k=function(){return{dateInputFormat:"DD/MM/YYYY",rangeInputFormat:"DD/MM/YYYY"}},w=[{path:"",redirectTo:"view",pathMatch:"full"},{path:"view",component:(()=>{class a{constructor(n,e,i,s){this.money=n,this.inventory=e,this.fb=i,this.spinner=s,this.datatableElement=u.G,this.dtOptions={},this.formInput=null,this.search=!1,this.minDate=new Date,this.maxDate=new Date}ngOnInit(){var n=new Date,e=n.getFullYear(),i=n.getMonth();this.minDate=new Date(e,i,1),this.maxDate=new Date(e,i+1,0),this.formInput=this.fb.group({date_from:[[new Date(e,i,1),new Date],[r.kI.required]],status:["all",[r.kI.required]]}),this.dtOptions=this.showDataTables()}reLoadData(){this.datatableElement.dtInstance.then(n=>{n.ajax.reload()})}convertTime(n){let e=g(new Date(n)).format("YYYY-MM-DD")+" 00:00:00";return new Date(e).getTime()}searchAction(){this.reLoadData()}showDataTables(){let n=this;return this.spinner.show("spinner1"),{pageLength:10,serverSide:!0,processing:!0,order:[],ajax:(e,i)=>{e.date_from=new Date(this.convertTime(this.formInput.value.date_from[0])).getTime(),e.date_to=new Date(this.convertTime(this.formInput.value.date_from[1])).getTime(),e.transaksi_jenis=this.formInput.value.status,this.inventory.getStokAlat(e).subscribe(s=>{this.spinner.hide("spinner1"),i({draw:s.response.draw,recordsTotal:s.response.recordsTotal,recordsFiltered:s.response.recordsFiltered,data:s.response.data})})},columns:[{orderable:!1,searchable:!1,render:(e,i,s,d)=>d.row+1+d.settings._iDisplayStart},{data:"created_at_unix",render:(e,i,s,d)=>g(new Date(e)).format("DD-MM-YYYY")},{data:"nama_barang"},{data:"stok_masuk"},{data:"stok_keluar"},{data:"harga_beli",render:(e,i,s,d)=>n.money.formatRupiah("keluar"==s.transaksi_jenis?s.harga_jual:e)},{data:"stok_akhir"},{data:"no_batch"},{data:"kegiatan"}]}}}return a.\u0275fac=function(n){return new(n||a)(t.Y36(v.r),t.Y36(Z.T),t.Y36(r.qu),t.Y36(m.t2))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-view"]],viewQuery:function(n,e){if(1&n&&t.Gf(u.G,5),2&n){let i;t.iGM(i=t.CRH())&&(e.datatableElement=i.first)}},decls:70,vars:14,consts:[[1,"content"],[1,"content-block"],[1,"block-header"],[3,"title","items","active_item"],[1,"text-center","mb-4"],[1,"row","clearfix"],[1,"col-xs-12","col-sm-12","col-md-12","col-lg-12"],[1,"card"],[1,"header"],[1,"body"],[3,"formGroup"],[1,"row"],[1,"col-sm-2","col-form-label","fw-bold"],[1,"col-sm-8"],["type","text","formControlName","date_from","placeholder","Tanggal Pendaftaran","bsDaterangepicker","",1,"form-control",3,"bsConfig"],["class","form-text text-danger",4,"ngIf"],["formControlName","status",1,"form-select"],["value","all"],["value","masuk"],["value","keluar"],[1,"col-sm-9","offset-md-2"],[1,"btn","btn-md","btn-primary",3,"click"],[1,"fa","fa-search"],[1,"table-responsive"],["width","100%","datatable","",1,"table","table-striped","table-bordered","table-sm","table-sm",3,"dtOptions"],["rowspan","2"],["colspan","4",1,"text-center"],["bdColor","rgba(0, 0, 0, 0.8)","size","medium","color","#fff","type","ball-clip-rotate-multiple",3,"name","fullScreen"],[2,"color","white"],[1,"form-text","text-danger"]],template:function(n,e){1&n&&(t.TgZ(0,"section",0)(1,"div",1)(2,"div",2),t._UZ(3,"app-breadcrumb",3),t.qZA(),t.TgZ(4,"h3",4),t._uU(5,"Laporan Stok Alat"),t.qZA(),t.TgZ(6,"div",5)(7,"div",6)(8,"div",7)(9,"div",8)(10,"h2")(11,"strong"),t._uU(12,"Pencarian"),t.qZA()()(),t.TgZ(13,"div",9)(14,"form",10)(15,"div",11)(16,"label",12),t._uU(17,"Tanggal Transaksi"),t.qZA(),t.TgZ(18,"div",13),t._UZ(19,"input",14),t.YNc(20,A,2,0,"div",15),t.qZA()(),t.TgZ(21,"div",11)(22,"label",12),t._uU(23,"Status"),t.qZA(),t.TgZ(24,"div",13)(25,"select",16)(26,"option",17),t._uU(27,"Semua Status"),t.qZA(),t.TgZ(28,"option",18),t._uU(29,"Barang Masuk"),t.qZA(),t.TgZ(30,"option",19),t._uU(31,"Barang Keluar"),t.qZA()(),t.YNc(32,b,2,0,"div",15),t.qZA()(),t.TgZ(33,"div",11)(34,"div",20)(35,"button",21),t.NdJ("click",function(){return e.searchAction()}),t._UZ(36,"i",22),t._uU(37," Cari"),t.qZA()()()()()(),t.TgZ(38,"div",7),t._UZ(39,"div",8),t.TgZ(40,"div",9)(41,"div",23)(42,"table",24)(43,"thead")(44,"tr")(45,"th",25),t._uU(46,"No"),t.qZA(),t.TgZ(47,"th",25),t._uU(48,"Tgl Transaksi"),t.qZA(),t.TgZ(49,"th",25),t._uU(50,"Nama Alat"),t.qZA(),t.TgZ(51,"th",26),t._uU(52,"Stok Produk"),t.qZA(),t.TgZ(53,"th",25),t._uU(54,"No Batch"),t.qZA(),t.TgZ(55,"th",25),t._uU(56,"Keterangan Transaksi"),t.qZA()(),t.TgZ(57,"tr")(58,"th"),t._uU(59,"Masuk"),t.qZA(),t.TgZ(60,"th"),t._uU(61,"Keluar"),t.qZA(),t.TgZ(62,"th"),t._uU(63,"Harga"),t.qZA(),t.TgZ(64,"th"),t._uU(65,"Terakhir"),t.qZA()()(),t._UZ(66,"tbody"),t.qZA()()()()()()(),t.TgZ(67,"ngx-spinner",27)(68,"p",28),t._uU(69," Loading... "),t.qZA()()()),2&n&&(t.xp6(3),t.Q6J("title","Laporan")("items",t.DdM(12,D))("active_item","Laporan Stok Alat"),t.xp6(11),t.Q6J("formGroup",e.formInput),t.xp6(5),t.ekj("border-danger",""==e.formInput.value.date_from&&e.search),t.Q6J("bsConfig",t.DdM(13,k)),t.xp6(1),t.Q6J("ngIf",""==e.formInput.value.date_from&&e.search),t.xp6(12),t.Q6J("ngIf",""==e.formInput.value.status&&e.search),t.xp6(10),t.Q6J("dtOptions",e.dtOptions),t.xp6(25),t.Q6J("name","spinner1")("fullScreen",!0))},directives:[T.L,r._Y,r.JL,r.sg,r.Fj,c.TB,r.JJ,r.u,c.FR,p.O5,r.EJ,r.YN,r.Kr,u.G,m.Ro],styles:[""]}),a})()}];let U=(()=>{class a{}return a.\u0275fac=function(n){return new(n||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({imports:[[f.Bz.forChild(w)],f.Bz]}),a})();var y=o(60795);let Y=(()=>{class a{}return a.\u0275fac=function(n){return new(n||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({imports:[[p.ez,U,y.K,m.ef,r.u5,r.UX,u.T,c.kn]]}),a})()}}]);