"use strict";(self.webpackChunkangularlight=self.webpackChunkangularlight||[]).push([[1496],{91496:(q,g,o)=>{o.r(g),o.d(g,{PengeluaranObatModule:()=>Y});var b=o(69808),u=o(50072),c=o(64035),d=o(65415),l=o(93075),m=o(15439),t=o(5e3),f=o(89159),Z=o(1909),T=o(94554),v=o(33399),h=o(67236);function w(r,s){1&r&&(t.TgZ(0,"p",26),t._uU(1,"Tanggal transaksi tidak boleh kosong"),t.qZA())}const _=function(){return["Obat"]},U=function(){return{dateInputFormat:"DD/MM/YYYY",rangeInputFormat:"DD/MM/YYYY"}},x=function(){return["Obat"]},A=function(){return["../../../../../view"]},y=[{path:"",redirectTo:"view",pathMatch:"full"},{path:"view",component:(()=>{class r{constructor(e,n,a,i,p,C){this.spinner=e,this.router=n,this.pengeluaran=a,this.pengeluaranExport=i,this.money=p,this.fb=C,this.datatableElement=d.G,this.dtOptions={},this.search=!1,this.currentUser=localStorage.getItem("currentUser"),this.minDate=new Date,this.maxDate=new Date}ngOnInit(){var e=new Date,n=e.getFullYear(),a=e.getMonth();this.minDate=new Date(n,a,1),this.maxDate=new Date(n,a+1,0),this.currentUser=null!=this.currentUser?JSON.parse(this.currentUser):null,this.params={Authorization:this.currentUser.token,x_api_key:this.currentUser.key,search:{value:"",regex:!1},transaksi_jenis:"masuk",start:"",end:"",expired_in:0},this.formInput=this.fb.group({date_from:[[new Date(n,a,1),new Date],[l.kI.required]]}),this.dtOptions=this.showDataTables()}reLoadData(){this.search=!0,!this.formInput.invalid&&this.datatableElement.dtInstance.then(e=>{e.ajax.reload(),this.search=!1})}detail(e){this.router.navigate(["laporan/obat/pengeluaran-obat/detail/"+e.id_barang+"/"+e.nama_barang+"/"+new Date(this.formInput.value.date_from[0]).getTime()+"/"+new Date(this.formInput.value.date_from[1]).getTime()])}convertTime(e){let n=m(new Date(e)).format("YYYY-MM-DD")+" 00:00:00";return new Date(n).getTime()}download(e){const n=window.URL.createObjectURL(new Blob([e],{type:"application/ms-excel"})),a=document.createElement("a");a.href=n,a.setAttribute("download","Laporan Pengeluaran Obat.xlsx"),document.body.appendChild(a),a.click()}export(){this.spinner.show("spinner1"),this.params.date_from=new Date(this.convertTime(this.formInput.value.date_from[0])).getTime(),this.params.date_to=new Date(this.convertTime(this.formInput.value.date_from[1])).getTime(),this.pengeluaranExport.exportObat(this.params).subscribe(e=>{this.download(e),this.search=!1,this.spinner.hide("spinner1")})}showDataTables(){return this.spinner.show("spinner1"),{pageLength:10,serverSide:!0,processing:!0,order:[],ajax:(e,n)=>{e.date_from=new Date(this.convertTime(this.formInput.value.date_from[0])).getTime(),e.date_to=new Date(this.convertTime(this.formInput.value.date_from[1])).getTime(),this.pengeluaran.getObat(e).subscribe(a=>{n({draw:a.response.draw,recordsTotal:a.response.recordsTotal,recordsFiltered:a.response.recordsFiltered,data:a.response.data}),this.spinner.hide("spinner1")})},columns:[{orderable:!1,searchable:!1,render:(e,n,a,i)=>i.row+1+i.settings._iDisplayStart},{data:"nama_barang"},{data:"jumlah_bpjs"},{data:"jumlah_reguler"},{data:"jumlah_langsung"},{data:"jumlah_total"},{data:"stok_akhir"},{orderable:!1,searchable:!1,render:(e,n,a,i)=>'<button class="btn btn-sm btn-info detail">Detail</button>'}],rowCallback:(e,n,a)=>{const i=this;return $("td .detail",e).on("click",()=>{i.detail(n)}),e}}}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(u.t2),t.Y36(c.F0),t.Y36(f.r),t.Y36(Z.X),t.Y36(T.r),t.Y36(l.qu))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-view"]],viewQuery:function(e,n){if(1&e&&t.Gf(d.G,5),2&e){let a;t.iGM(a=t.CRH())&&(n.datatableElement=a.first)}},decls:58,vars:11,consts:[[1,"content"],[1,"content-block"],[1,"block-header"],[3,"title","items","active_item"],[1,"text-center","mb-4"],[1,"row","clearfix"],[1,"col-xs-12","col-sm-12","col-md-12","col-lg-12"],[1,"card"],[1,"header"],[1,"body"],[3,"formGroup"],[1,"row"],[1,"col-sm-2","col-form-label","fw-bold"],[1,"col-sm-8"],["type","text","formControlName","date_from","bsDaterangepicker","",1,"form-control",3,"bsConfig"],["class","text-danger",4,"ngIf"],[1,"col-sm-9","offset-md-2"],["type","button",1,"btn","btn-md","btn-tampilkan-cari",3,"click"],[1,"fa","fa-download"],["type","button",1,"btn","btn-md","btn-primary",3,"click"],[1,"fa","fa-search"],["datatable","","width","100%",1,"table","table-striped","table-bordered","table-sm","table-sm",3,"dtOptions"],["rowspan","2"],["colspan","3",1,"text-center"],["bdColor","rgba(0, 0, 0, 0.8)","size","medium","color","#fff","type","ball-clip-rotate-multiple",3,"name","fullScreen"],[2,"color","white"],[1,"text-danger"]],template:function(e,n){1&e&&(t.TgZ(0,"section",0)(1,"div",1)(2,"div",2),t._UZ(3,"app-breadcrumb",3),t.qZA(),t.TgZ(4,"h3",4),t._uU(5,"Laporan Pengeluaran Obat"),t.qZA(),t.TgZ(6,"div",5)(7,"div",6)(8,"div",7)(9,"div",8)(10,"h2")(11,"strong"),t._uU(12,"Pencarian"),t.qZA()()(),t.TgZ(13,"div",9)(14,"form",10)(15,"div",11)(16,"label",12),t._uU(17,"Tanggal Transaksi"),t.qZA(),t.TgZ(18,"div",13),t._UZ(19,"input",14),t.YNc(20,w,2,0,"p",15),t.qZA()(),t.TgZ(21,"div",11)(22,"div",16)(23,"button",17),t.NdJ("click",function(){return n.export()}),t._UZ(24,"i",18),t._uU(25," Excel"),t.qZA(),t.TgZ(26,"button",19),t.NdJ("click",function(){return n.reLoadData()}),t._UZ(27,"i",20),t._uU(28," Cari"),t.qZA()()()()()(),t.TgZ(29,"div",7),t._UZ(30,"div",8),t.TgZ(31,"div",9)(32,"table",21)(33,"thead")(34,"tr")(35,"th",22),t._uU(36,"No"),t.qZA(),t.TgZ(37,"th",22),t._uU(38,"Nama Obat"),t.qZA(),t.TgZ(39,"th",23),t._uU(40,"Tipe Pengeluaran"),t.qZA(),t.TgZ(41,"th",22),t._uU(42,"Total Pengeluaran"),t.qZA(),t.TgZ(43,"th",22),t._uU(44,"Stok Akhir"),t.qZA(),t.TgZ(45,"th",22),t._uU(46,"Aksi"),t.qZA()(),t.TgZ(47,"tr")(48,"th"),t._uU(49,"Pasien BPJS"),t.qZA(),t.TgZ(50,"th"),t._uU(51,"Pasien Reguler"),t.qZA(),t.TgZ(52,"th"),t._uU(53,"Penjualan"),t.qZA()()(),t._UZ(54,"tbody"),t.qZA()()()()()(),t.TgZ(55,"ngx-spinner",24)(56,"p",25),t._uU(57," Loading... "),t.qZA()()()),2&e&&(t.xp6(3),t.Q6J("title","Laporan")("items",t.DdM(9,_))("active_item","Laporan Pengeluaran Obat"),t.xp6(11),t.Q6J("formGroup",n.formInput),t.xp6(5),t.Q6J("bsConfig",t.DdM(10,U)),t.xp6(1),t.Q6J("ngIf",""==n.formInput.value.date_from&&n.search),t.xp6(12),t.Q6J("dtOptions",n.dtOptions),t.xp6(23),t.Q6J("name","spinner1")("fullScreen",!0))},directives:[v.L,l._Y,l.JL,l.sg,l.Fj,h.TB,l.JJ,l.u,h.FR,b.O5,d.G,u.Ro],styles:[""]}),r})()},{path:"detail/:id/:obat/:tgl1/:tgl2",component:(()=>{class r{constructor(e,n,a,i){this.spinner=e,this.activatedRoute=n,this.pengeluaran=a,this.pengeluaranExport=i,this.datatableElement=d.G,this.dtOptions={},this.obat="",this.periode="",this.currentUser=localStorage.getItem("currentUser")}ngOnInit(){this.currentUser=null!=this.currentUser?JSON.parse(this.currentUser):null,this.params={Authorization:this.currentUser.token,x_api_key:this.currentUser.key,search:{value:"",regex:!1},id_barang:"4cd91923-70bf-43ea-a827-38668daeca63",date_from:"2023-03-01",date_to:"2023-03-21"},this.activatedRoute.params.subscribe(e=>{e&&(this.obat=e.obat,this.params.date_from=e.tgl1,this.params.date_to=e.tgl2,this.periode=m(new Date(parseInt(e.tgl1))).format("DD/MM/YYYY")+" - "+m(new Date(parseInt(e.tgl2))).format("DD/MM/YYYY"),this.params.id_barang=e.id,this.dtOptions=this.showDataTables())})}download(e){const n=window.URL.createObjectURL(new Blob([e],{type:"application/ms-excel"})),a=document.createElement("a");a.href=n,a.setAttribute("download","Detail Laporan Pengeluaran Obat.xlsx"),document.body.appendChild(a),a.click()}export(){this.spinner.show("spinner1"),this.pengeluaranExport.exportObat(this.params).subscribe(e=>{this.download(e),this.spinner.hide("spinner1")})}showDataTables(){return this.spinner.show("spinner1"),{pageLength:10,serverSide:!0,processing:!0,order:[],ajax:(e,n)=>{e.date_from=this.params.date_from,e.date_to=this.params.date_to,e.id_barang=this.params.id_barang,this.pengeluaran.getObatDetail(e).subscribe(a=>{n({draw:a.response.draw,recordsTotal:a.response.recordsTotal,recordsFiltered:a.response.recordsFiltered,data:a.response.data}),this.spinner.hide("spinner1")})},columns:[{orderable:!1,searchable:!1,render:(e,n,a,i)=>i.row+1+i.settings._iDisplayStart},{data:"formatted_date",render(e,n,a,i){let p=e.split("-");return p[2]+"-"+p[1]+"-"+p[0]}},{data:"jumlah_bpjs"},{data:"jumlah_reguler"},{data:"jumlah_langsung"},{data:"jumlah_total"},{data:"stok_akhir"}]}}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(u.t2),t.Y36(c.gz),t.Y36(f.r),t.Y36(Z.X))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-view"]],viewQuery:function(e,n){if(1&e&&t.Gf(d.G,5),2&e){let a;t.iGM(a=t.CRH())&&(n.datatableElement=a.first)}},decls:53,vars:11,consts:[[1,"content"],[1,"content-block"],[1,"block-header"],[3,"title","items","active_item"],[1,"text-center","mb-4"],[1,"row","clearfix"],[1,"col-xs-12","col-sm-12","col-md-12","col-lg-12"],["type","button",1,"btn","btn-kembali","btn-lg","mb-3",3,"routerLink"],[1,"fas","fa-arrow-left"],[1,"card"],[1,"body"],[1,"row","mb-4"],[1,"col-sm-8"],[1,"row","mb-2"],[1,"col-md-3"],[1,"col-sm-9"],[1,"col-sm-4","text-right"],[1,"btn","btn-md","btn-tampilkan-cari",3,"click"],[1,"fa","fa-download"],["width","100%","datatable","",1,"table","table-striped","table-bordered","table-sm","table-sm",3,"dtOptions"],["rowspan","2"],["colspan","3",1,"text-center"],["bdColor","rgba(0, 0, 0, 0.8)","size","medium","color","#fff","type","ball-clip-rotate-multiple",3,"name","fullScreen"],[2,"color","white"]],template:function(e,n){1&e&&(t.TgZ(0,"section",0)(1,"div",1)(2,"div",2),t._UZ(3,"app-breadcrumb",3),t.qZA(),t.TgZ(4,"h3",4),t._uU(5,"Detail Pengeluaran Obat"),t.qZA(),t.TgZ(6,"div",5)(7,"div",6)(8,"button",7),t._UZ(9,"i",8),t._uU(10," Kembali"),t.qZA(),t.TgZ(11,"div",9)(12,"div",10)(13,"div",11)(14,"div",12)(15,"div",13)(16,"div",14),t._uU(17,"Nama Obat"),t.qZA(),t.TgZ(18,"div",15),t._uU(19),t.qZA()(),t.TgZ(20,"div",13)(21,"div",14),t._uU(22,"Tanggal Transaksi"),t.qZA(),t.TgZ(23,"div",15),t._uU(24),t.qZA()()(),t.TgZ(25,"div",16)(26,"button",17),t.NdJ("click",function(){return n.export()}),t._UZ(27,"i",18),t._uU(28," Excel"),t.qZA()()(),t.TgZ(29,"table",19)(30,"thead")(31,"tr")(32,"th",20),t._uU(33,"No"),t.qZA(),t.TgZ(34,"th",20),t._uU(35,"Tanggal Transaksi"),t.qZA(),t.TgZ(36,"th",21),t._uU(37,"Tipe Pengeluaran"),t.qZA(),t.TgZ(38,"th",20),t._uU(39,"Total Pengeluaran"),t.qZA(),t.TgZ(40,"th",20),t._uU(41,"Stok Akhir"),t.qZA()(),t.TgZ(42,"tr")(43,"th"),t._uU(44,"Pasien BPJS"),t.qZA(),t.TgZ(45,"th"),t._uU(46,"Pasien Reguler"),t.qZA(),t.TgZ(47,"th"),t._uU(48,"Penjualan"),t.qZA()()(),t._UZ(49,"tbody"),t.qZA()()()()()(),t.TgZ(50,"ngx-spinner",22)(51,"p",23),t._uU(52," Loading... "),t.qZA()()()),2&e&&(t.xp6(3),t.Q6J("title","Laporan")("items",t.DdM(9,x))("active_item","Detail Pengeluaran Obat"),t.xp6(5),t.Q6J("routerLink",t.DdM(10,A)),t.xp6(11),t.hij(": ",n.obat,""),t.xp6(5),t.hij(": ",n.periode,""),t.xp6(5),t.Q6J("dtOptions",n.dtOptions),t.xp6(21),t.Q6J("name","spinner1")("fullScreen",!0))},directives:[v.L,c.rH,d.G,u.Ro],styles:[""]}),r})()}];let k=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({imports:[[c.Bz.forChild(y)],c.Bz]}),r})();var O=o(60795);let Y=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({imports:[[b.ez,d.T,u.ef,k,l.u5,l.UX,O.K,h.kn.forRoot()]]}),r})()}}]);