"use strict";(self.webpackChunkangularlight=self.webpackChunkangularlight||[]).push([[9524],{86307:(U,k,o)=>{o.d(k,{m:()=>f});var g=o(5e3),Z=o(95305);let f=(()=>{class p{constructor(r){this.authService=r}getUrlModule(r){return this.authService.currentUserValue.repo.find(_=>_.key_repo==r).url_repo}}return p.\u0275fac=function(r){return new(r||p)(g.LFG(Z.e))},p.\u0275prov=g.Yz7({token:p,factory:p.\u0275fac,providedIn:"root"}),p})()},55648:(U,k,o)=>{o.d(k,{O:()=>l});var g=o(89955),Z=o(5e3),f=o(86307),p=o(40520);let l=(()=>{class r{constructor(d,_){this.generalService=d,this.http=_,this.urlBase="stok-obat",this.urlModule=this.generalService.getUrlModule(g.s.url_module.gudangTransaksi)}show(d){return this.http.get(this.urlModule+"/"+this.urlBase+"/get-byid/"+d)}getRiwayat(d,_){return this.http.post(this.urlModule+"/"+this.urlBase+"/get-riwayat-stok/"+d,_)}listDatatables(d){return this.http.post(this.urlModule+"/"+this.urlBase+"/get-datatables",d)}add(d){return this.http.post(this.urlModule+"/"+this.urlBase+"/create",d)}update(d,_){return this.http.put(this.urlModule+"/"+this.urlBase+"/update/"+d,_)}delete(d){return this.http.delete(this.urlModule+"/"+this.urlBase+"/delete/"+d)}getRiwayatBatch(d,_){return this.http.post(this.urlModule+"/"+this.urlBase+"/get-riwayat-batch/"+d,_)}getBatch(d){return this.http.post(this.urlModule+"/"+this.urlBase+"/get-batch",d)}getBatchStockOpname(d){return this.http.post(this.urlModule+"/"+this.urlBase+"/get-batch-stok-opname",d)}getSelectBatch(d,_){return this.http.post(this.urlModule+"/"+this.urlBase+"/get-select-option-batch/"+d,_)}getSelectBatchStockOpname(d,_){return this.http.post(this.urlModule+"/"+this.urlBase+"/get-select-option-batch-stock-opname/"+d,_)}}return r.\u0275fac=function(d){return new(d||r)(Z.LFG(f.m),Z.LFG(p.eN))},r.\u0275prov=Z.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})()},40955:(U,k,o)=>{o.r(k),o.d(k,{ResepModule:()=>Et});var g=o(69808),Z=o(65620),f=o(36642),p=o(64035),l=o(65415),r=o(2454),m=o.n(r),d=o(94393),_=o(1713),b=o(15439),t=o(5e3),T=o(44151),w=o(89955),C=o(86307),q=o(40520);let Y=(()=>{class s{constructor(e,a){this.generalService=e,this.http=a,this.urlBase="riwayat-klinik",this.urlModule=this.generalService.getUrlModule(w.s.url_module.modulLaporan)}getDatatables(e){return this.http.post(this.urlModule+"/"+this.urlBase+"/list-resep-obat",e)}getByID(e){return this.http.get(this.urlModule+"/"+this.urlBase+"/get-byid-resep-obat/"+e)}}return s.\u0275fac=function(e){return new(e||s)(t.LFG(C.m),t.LFG(q.eN))},s.\u0275prov=t.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();var S=o(84368),O=o(94554),R=o(95305);let P=(()=>{class s{constructor(e,a,n){this.generalService=e,this.http=a,this.authenticationService=n,this.urlBase="export-pdf",this.currentUser=this.authenticationService.currentUserValue,this.header=new q.WM({Accept:"application/octet-stream","Content-Type":"blob",Authorization:`Bearer ${this.currentUser.token}`}),this.urlModule=this.generalService.getUrlModule(w.s.url_module.export)}exportPdf(e){return this.http.post(this.urlModule+"/"+this.urlBase+"/invoice-farmasi/"+e,{Authorization:`Bearer ${this.currentUser.token}`,x_api_key:this.currentUser.key},{responseType:"arraybuffer",headers:this.header})}}return s.\u0275fac=function(e){return new(e||s)(t.LFG(C.m),t.LFG(q.eN),t.LFG(R.e))},s.\u0275prov=t.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),F=(()=>{class s{constructor(e,a){this.generalService=e,this.http=a,this.urlBaseName="jadwal-sesi",this.URL_MODULE=this.generalService.getUrlModule(w.s.url_module.master)}getDataTables(e){return this.http.post(this.URL_MODULE+"/"+this.urlBaseName+"/get-datatables",e)}getJadwalSesi(){return this.http.get(this.URL_MODULE+"/jadwal-sesi/get-ready-byklinik")}getAll(){return this.http.get(this.URL_MODULE+"/"+this.urlBaseName+"/get-all")}getSelectOption(e){return this.http.post(this.URL_MODULE+"/"+this.urlBaseName+"/get-select-option",e)}insert(e){return this.http.post(this.URL_MODULE+"/"+this.urlBaseName,e)}update(e,a){return this.http.put(this.URL_MODULE+"/"+this.urlBaseName+"/"+e,a)}show(e){return this.http.get(this.URL_MODULE+"/"+this.urlBaseName+"/get-byid/"+e)}delete(e){return this.http.delete(this.URL_MODULE+"/"+this.urlBaseName+"/"+e)}prosesSelectJadwalSesi(e,a){return"open"==a?(e.search="",e.get_data=10):"last_page"==a?e.get_data=e.get_data+10:"search"==a&&(e.get_data=10),this.getSelectOption(e)}}return s.\u0275fac=function(e){return new(e||s)(t.LFG(C.m),t.LFG(q.eN))},s.\u0275prov=t.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),Q=(()=>{class s{constructor(e,a){this.generalService=e,this.http=a,this.urlBaseName="pasien",this.URL_MODULE=this.generalService.getUrlModule(w.s.url_module.resepsionis)}getDataTables(e){return this.http.post(this.URL_MODULE+"/"+this.urlBaseName+"/get-datatables",e)}getAll(){return this.http.get(this.URL_MODULE+"/"+this.urlBaseName+"/get-all")}getSelectOption(e){return this.http.post(this.URL_MODULE+"/"+this.urlBaseName+"/get-select-option",e)}insert(e){return this.http.post(this.URL_MODULE+"/"+this.urlBaseName+"/create",e)}update(e,a){return this.http.put(this.URL_MODULE+"/"+this.urlBaseName+"/update/"+e,a)}show(e){return this.http.get(this.URL_MODULE+"/"+this.urlBaseName+"/get-byid/"+e)}delete(e){return this.http.delete(this.URL_MODULE+"/"+this.urlBaseName+"/delete/"+e)}}return s.\u0275fac=function(e){return new(e||s)(t.LFG(C.m),t.LFG(q.eN))},s.\u0275prov=t.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();var M=o(50072),j=o(33399),x=o(67236),c=o(93075),D=o(24376);function K(s,u){if(1&s&&(t.TgZ(0,"ng-option",34),t._uU(1),t.qZA()),2&s){const e=u.$implicit;t.Q6J("value",e.id_jadwal_sesi),t.xp6(1),t.Oqu(e.nama_sesi)}}const G=function(){return["Riwayat Resep"]},z=function(){return{dateInputFormat:"DD/MM/YYYY",rangeInputFormat:"DD/MM/YYYY"}};let E=(()=>{class s{constructor(e,a,n,i,h,v,y,A,I,J,N){this.ModalService=e,this.resep=a,this.router=n,this.activatedRoute=i,this.resepService=h,this.money=v,this.invoice=y,this.sesiService=A,this.pasienService=I,this.spinner=J,this.store=N,this.datatableElement=l.G,this.dtOptions={},this.dataResep=new _.W,this.Resep=new _.x,this.btnDetail=!1,this.btnDelete=!1,this.btnEdit=!1,this.btnSetting=!1,this.btnAdd=!1,this.view=!1,this.params_get={last_data:"0",get_data:"10",search:""},this.pasien="",this.tgl=[new Date,new Date],this.sesi=null,this.optionPasien=[],this.optionSesi=[],this.minDate=new Date,this.maxDate=new Date,this.getState=this.store.select("resep")}ngOnInit(){var e,a=new Date,n=a.getFullYear(),i=a.getMonth();a.getDate(),this.minDate=new Date(n,i,1),this.maxDate=new Date(n,i+1,0);let v=JSON.parse(localStorage.getItem("currentUser"));v=v.menu_right,this.btnDetail=this.view=-1!=v.findIndex(A=>"AMATAR1"==A.kode),this.activatedRoute.params.subscribe(A=>{null==A.back&&localStorage.removeItem("search_riwayat_resep")});let y=localStorage.getItem("search_riwayat_resep");null!=y?(y=JSON.parse(y),this.tgl=[new Date(y.date_from),new Date(y.date_to)],this.sesi=null===(e=y.sesi)||void 0===e?void 0:e.id_jadwal_sesi,this.optionSesi=[y.sesi],this.pasien=y.jenis_pasien):this.tgl=[new Date(n,i,1),new Date],this.view||m().fire("Warning","Anda tidak mempunyai akses halaman ini","warning").then(()=>{window.location.href="/"}),this.dtOptions=this.showDataTables(this.btnDetail),this.getState.subscribe(A=>{this.reloadTable=A.reloadTable,!0===this.reloadTable&&this.reLoadData()})}detail(e){this.router.navigate(["resep/detail/"+e.id_penjualan_resep+"/riwayat"])}reLoadData(){this.datatableElement.dtInstance.then(e=>{e.ajax.reload()})}prosesSelectSesi(e,a){if("search"==a?(this.optionSesi=[],this.params_get.search=e.term,this.params_get.last_data="0"):this.params_get.search="","last_page"==a){let n=parseInt(this.params_get.last_data)+parseInt(this.params_get.get_data);this.params_get.last_data=n.toString()}else this.params_get.last_data="0";this.sesiService.getSelectOption(this.params_get).subscribe(n=>{n&&(0==this.optionSesi.length?this.optionSesi=n.response:n.response.map(i=>{this.optionSesi.findIndex(v=>v.id_jadwal_sesi==i.id_jadwal_sesi)<0&&this.optionSesi.push(i)}))})}download(e){const a=window.URL.createObjectURL(new Blob([e],{type:"application/ms-excel"})),n=document.createElement("a");n.href=a,n.setAttribute("download","Kwitansi Resep.pdf"),document.body.appendChild(n),n.click()}cetak(e){this.spinner.show("spinner1"),this.invoice.exportPdf(e.id_penjualan_resep).subscribe(a=>{this.spinner.hide("spinner1"),this.download(a)})}setSesi(e){this.currentSesi=e}convertTime(e){let a=b(new Date(e)).format("YYYY-MM-DD")+" 00:00:00";return new Date(a).getTime()}showDataTables(e){let a=this;return this.spinner.show("spinner1"),{pageLength:10,serverSide:!0,processing:!0,order:[],ajax:(n,i)=>{this.resep.getDatatables(n),n.date_from=new Date(this.convertTime(this.tgl[0])).getTime(),n.date_to=new Date(this.convertTime(this.tgl[1])).getTime(),n.id_jadwal_sesi=this.sesi,n.jenis_pasien=this.pasien,localStorage.setItem("search_riwayat_resep",JSON.stringify({date_from:new Date(this.convertTime(this.tgl[0])).getTime(),date_to:new Date(this.convertTime(this.tgl[1])).getTime(),sesi:this.currentSesi,jenis_pasien:this.pasien})),this.resep.getDatatables(n).subscribe(h=>{this.spinner.hide("spinner1"),i({draw:h.response.draw,recordsTotal:h.response.recordsTotal,recordsFiltered:h.response.recordsFiltered,data:h.response.data})})},columns:[{orderable:!1,searchable:!1,render:(n,i,h,v)=>v.row+1+v.settings._iDisplayStart},{data:"tgl_antrian_unix",render:(n,i,h,v)=>b(new Date(n)).format("DD-MM-YYYY")},{data:"proses_antrian"},{data:"kode_invoice_full"},{data:"nama"},{data:"tipe_pasien"},{data:"nama_sesi"},{data:"total_bayar",render:(n,i,h,v)=>a.money.formatRupiah(parseInt(n))},{orderable:!1,searchable:!1,render(n,i,h,v){let A="sudah"==h.proses_antrian?"":"hidden";return e?`<button class="btn btn-sm btn-success add mb-2" ${"sudah"==h.proses_antrian?"hidden":""}>Add Resep</button>\n\t\t\t\t\t\t<button class="btn btn-sm btn-info detail mb-2" ${A}>Detail</button>\n\t\t\t\t\t\t<button class="btn btn-sm btn-warning cetak mb-2" ${A}>Cetak</button>`:""}}],rowCallback:(n,i,h)=>{const v=this;return $("td .detail",n).on("click",()=>{v.detail(i)}),$("td .add",n).on("click",()=>{v.add(i)}),$("td .cetak",n).on("click",()=>{v.cetak(i)}),n}}}add(e){this.spinner.show("spinner1"),this.resepService.create({id_antrian:e.id_antrian}).subscribe(a=>{"0000"==a.metaData.response_code&&(this.router.navigate(["resep/add/"+a.response.id_penjualan_resep+"/"+e.id_antrian+"/"+e.id_pasien+"/riwayat"]),this.spinner.hide("spinner1"))})}hapus(e){m().fire({title:"Apakah anda yakin akan menghapus data ini ?",icon:"warning",showCancelButton:!0,allowOutsideClick:!1,confirmButtonText:"Ya, hapus saja!",cancelButtonText:"Tidak, Batalkan"}).then(a=>{a.value&&this.store.dispatch(d.QZ({payload:{id:e.id_penjualan_resep}}))})}ngOnDestroy(){document.body.classList.remove("jw-modal-open")}btnOpenModal(){this.ModalService.open("modalFormContent")}modalClose(){this.ModalService.close("modalFormContent")}}return s.\u0275fac=function(e){return new(e||s)(t.Y36(T.Z),t.Y36(Y),t.Y36(p.F0),t.Y36(p.gz),t.Y36(S.k),t.Y36(O.r),t.Y36(P),t.Y36(F),t.Y36(Q),t.Y36(M.t2),t.Y36(Z.yh))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-view"]],viewQuery:function(e,a){if(1&e&&t.Gf(l.G,5),2&e){let n;t.iGM(n=t.CRH())&&(a.datatableElement=n.first)}},decls:66,vars:14,consts:[[1,"content"],[1,"content-block"],[1,"block-header"],[3,"title","items","active_item"],[1,"text-center","mb-4"],[1,"row","clearfix"],[1,"col-xs-12","col-sm-12","col-md-12","col-lg-12"],[1,"card","mb-3"],[1,"row","mt-3","mx-2"],[1,"col-md-4"],[1,"row","mb-2"],[1,"col-md-4","mt-2"],[1,"col-md-8"],["type","text","bsDaterangepicker","",1,"form-control",3,"ngModel","bsConfig","ngModelChange"],[1,"col-md-3"],["name","pasien","placeholder","Pilih Pasien",2,"flex","1 1 auto",3,"ngModel","ngModelChange"],["value","","selected","","hidden","","disabled",""],["value","bpjs"],["value","reguler"],[1,"col-md-3","mt-2"],[1,"col-md-9"],["placeholder","Semua sesi","bindLabel","nama_sesi","bindValue","id_jadwal_sesi",2,"flex","1 1 auto",3,"searchable","clearable","ngModel","search","scrollToEnd","open","ngModelChange","change"],[3,"value",4,"ngFor","ngForOf"],[1,"col-md-2"],[1,"btn","btn-info","text-white",3,"click"],[1,"card"],[1,"header"],[1,"body"],["width","100%","datatable","",1,"table","table-striped","table-bordered","table-sm",3,"dtOptions"],["width","150"],["width","100"],["width","70"],["bdColor","rgba(0, 0, 0, 0.8)","size","medium","color","#fff","type","ball-clip-rotate-multiple",3,"name","fullScreen"],[2,"color","white"],[3,"value"]],template:function(e,a){1&e&&(t.TgZ(0,"section",0)(1,"div",1)(2,"div",2),t._UZ(3,"app-breadcrumb",3),t.qZA(),t.TgZ(4,"h3",4),t._uU(5,"Riwayat Resep"),t.qZA(),t.TgZ(6,"div",5)(7,"div",6)(8,"div",7)(9,"div",8)(10,"div",9)(11,"div",10)(12,"div",11),t._uU(13," Tgl Kunjungan "),t.qZA(),t.TgZ(14,"div",12)(15,"input",13),t.NdJ("ngModelChange",function(i){return a.tgl=i}),t.qZA()()()(),t.TgZ(16,"div",14)(17,"div",10)(18,"div",11),t._uU(19," Pasien "),t.qZA(),t.TgZ(20,"div",12)(21,"ng-select",15),t.NdJ("ngModelChange",function(i){return a.pasien=i}),t.TgZ(22,"ng-option",16),t._uU(23,"Pilih Pasien"),t.qZA(),t.TgZ(24,"ng-option",17),t._uU(25,"BPJS"),t.qZA(),t.TgZ(26,"ng-option",18),t._uU(27,"Reguler"),t.qZA()()()()(),t.TgZ(28,"div",14)(29,"div",10)(30,"div",19),t._uU(31," Sesi "),t.qZA(),t.TgZ(32,"div",20)(33,"ng-select",21),t.NdJ("search",function(i){return a.prosesSelectSesi(i,"search")})("scrollToEnd",function(i){return a.prosesSelectSesi(i,"last_page")})("open",function(i){return a.prosesSelectSesi(i,"open")})("ngModelChange",function(i){return a.sesi=i})("change",function(i){return a.setSesi(i)}),t.YNc(34,K,2,2,"ng-option",22),t.qZA()()()(),t.TgZ(35,"div",23)(36,"button",24),t.NdJ("click",function(){return a.reLoadData()}),t._uU(37,"Lihat Data"),t.qZA()()()(),t.TgZ(38,"div",25),t._UZ(39,"div",26),t.TgZ(40,"div",27)(41,"table",28)(42,"thead")(43,"tr")(44,"th"),t._uU(45,"No"),t.qZA(),t.TgZ(46,"th",29),t._uU(47,"Tanggal Kunjungan"),t.qZA(),t.TgZ(48,"th",30),t._uU(49,"Proses Antrian"),t.qZA(),t.TgZ(50,"th"),t._uU(51,"No Invoice"),t.qZA(),t.TgZ(52,"th"),t._uU(53,"Nama"),t.qZA(),t.TgZ(54,"th",31),t._uU(55,"Tipe Pasien"),t.qZA(),t.TgZ(56,"th"),t._uU(57,"Sesi"),t.qZA(),t.TgZ(58,"th"),t._uU(59,"Total Harga"),t.qZA(),t.TgZ(60,"th",30),t._uU(61,"Aksi"),t.qZA()()(),t._UZ(62,"tbody"),t.qZA()()()()()(),t.TgZ(63,"ngx-spinner",32)(64,"p",33),t._uU(65," Loading... "),t.qZA()()()),2&e&&(t.xp6(3),t.Q6J("title","Resep")("items",t.DdM(12,G)),t.xp6(12),t.Q6J("ngModel",a.tgl)("bsConfig",t.DdM(13,z)),t.xp6(6),t.Q6J("ngModel",a.pasien),t.xp6(12),t.Q6J("searchable",!0)("clearable",!0)("ngModel",a.sesi),t.xp6(1),t.Q6J("ngForOf",a.optionSesi),t.xp6(7),t.Q6J("dtOptions",a.dtOptions),t.xp6(22),t.Q6J("name","spinner1")("fullScreen",!0))},directives:[j.L,x.TB,c.Fj,x.FR,c.JJ,c.On,D.w9,D.jq,g.sg,l.G,M.Ro],styles:[""]}),s})();function H(s,u){if(1&s&&(t.TgZ(0,"div",12)(1,"div",23)(2,"div",24)(3,"div",25)(4,"div",26),t._uU(5,"Nama Pasien"),t.qZA(),t.TgZ(6,"div",27),t._uU(7),t.qZA()(),t.TgZ(8,"div",25)(9,"div",26),t._uU(10,"Tanggal Kunjungan"),t.qZA(),t.TgZ(11,"div",27),t._uU(12),t.qZA()(),t.TgZ(13,"div",25)(14,"div",26),t._uU(15,"Tipe Pasien"),t.qZA(),t.TgZ(16,"div",27),t._uU(17),t.qZA()()(),t.TgZ(18,"div",24)(19,"div",25)(20,"div",26),t._uU(21,"Sesi"),t.qZA(),t.TgZ(22,"div",27),t._uU(23),t.qZA()(),t.TgZ(24,"div",25)(25,"div",26),t._uU(26,"No Invoice"),t.qZA(),t.TgZ(27,"div",27),t._uU(28),t.qZA()()()()()),2&s){const e=t.oxw();t.xp6(7),t.hij(": ",null==e.dataDetail?null:e.dataDetail.antrian.antrian_pasien.nama,""),t.xp6(5),t.hij(": ",e.convertDate(e.dataDetail?e.dataDetail.antrian.tgl_antrian_unix:0),""),t.xp6(5),t.hij(": ",null==e.dataDetail?null:e.dataDetail.antrian.antrian_pasien.jenis_pasien,""),t.xp6(6),t.hij(": ",null==e.dataDetail||null==e.dataDetail.antrian?null:e.dataDetail.antrian.nama_sesi,""),t.xp6(5),t.hij(": ",e.dataDetail.kode_invoice_full,"")}}function V(s,u){if(1&s&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.qZA()()),2&s){const e=u.$implicit,a=u.index,n=t.oxw(2);t.xp6(2),t.Oqu(a+1),t.xp6(2),t.Oqu(e.nama_obat),t.xp6(2),t.Oqu(e.satuan_qty),t.xp6(2),t.Oqu(n.Money(e.satuan_harga)),t.xp6(2),t.Oqu(n.Money(e.diskon_rupiah)),t.xp6(2),t.Oqu(n.Money(e.total_harga))}}function W(s,u){if(1&s&&(t.TgZ(0,"tbody"),t.YNc(1,V,13,6,"tr",28),t.qZA()),2&s){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.dataDetail.penjualan_resep_detail)}}const X=function(){return["Data Resep"]},tt=function(s){return[s]};let et=(()=>{class s{constructor(e,a,n,i,h,v,y,A){this.ModalService=e,this.ModulResepService=a,this.router=n,this.money=i,this.resep=h,this.spinner=v,this.activatedRoute=y,this.store=A,this.total=0,this.urlBack="",this.totalObat=0,this.ppn=0,this.getState=this.store.select("resep")}ngOnInit(){this.activatedRoute.params.subscribe(e=>{e&&(this.urlBack="riwayat"==e.page?"../../../"+e.page+"/1":"../../../"+e.page,this.spinner.show("spinner1"),this.resep.getByID(e.id).subscribe(a=>{"0000"==a.metaData.response_code&&(this.dataDetail=a.response,this.dataDetail.penjualan_resep_detail.map(n=>{this.totalObat+=parseInt(n.total_harga)}),this.total=this.totalObat+parseInt(this.dataDetail.diagnosa_dokter_umum.jt)+parseInt(this.dataDetail.diagnosa_dokter_umum.jm)+parseInt(this.dataDetail.diagnosa_dokter_umum.biaya_dokter)+parseInt(this.dataDetail.diagnosa_dokter_umum.bhp)+parseInt(this.dataDetail.diagnosa_dokter_umum.lain_lain)+parseInt(this.dataDetail.pajak_obat_rupiah)+parseInt(this.dataDetail.tindakan_medis.total_biaya_tindakan),this.spinner.hide("spinner1"))}))})}Money(e){return this.money.formatRupiah(parseInt(e))}back(){}convertDate(e){return e?b(new Date(e)).format("DD/MM/YYYY"):b(new Date).format("DD/MM/YYYY")}}return s.\u0275fac=function(e){return new(e||s)(t.Y36(T.Z),t.Y36(S.k),t.Y36(p.F0),t.Y36(O.r),t.Y36(Y),t.Y36(M.t2),t.Y36(p.gz),t.Y36(Z.yh))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-detail"]],decls:90,vars:21,consts:[[1,"content"],[1,"content-block"],[1,"block-header"],[3,"title","items","active_item"],[1,"text-center","mb-4"],["type","button",1,"btn","btn-kembali","mb-3","btn-lg",3,"routerLink"],[1,"fas","fa-arrow-left"],[1,"row","clearfix"],[1,"col-xs-12","col-sm-12","col-md-12","col-lg-12"],[1,"card"],["class","body",4,"ngIf"],[1,"header"],[1,"body"],["width","100%",1,"table","table-striped","table-bordered","table-sm"],[4,"ngIf"],[1,"row","mt-3"],[1,"col-md-8"],[1,"col-md-4"],[2,"width","100%"],[1,"text-right"],[1,"px-2"],["bdColor","rgba(0, 0, 0, 0.8)","size","medium","color","#fff","type","ball-clip-rotate-multiple",3,"name","fullScreen"],[2,"color","white"],[1,"row"],[1,"col-md-6"],[1,"row","mb-2"],[1,"col-3"],[1,"col-6"],[4,"ngFor","ngForOf"]],template:function(e,a){1&e&&(t.TgZ(0,"section",0)(1,"div",1)(2,"div",2),t._UZ(3,"app-breadcrumb",3),t.qZA(),t.TgZ(4,"h3",4),t._uU(5,"Detail Resep"),t.qZA(),t.TgZ(6,"button",5),t._UZ(7,"i",6),t._uU(8," Kembali"),t.qZA(),t.TgZ(9,"div",7)(10,"div",8)(11,"div",9),t.YNc(12,H,29,5,"div",10),t.TgZ(13,"div",11)(14,"b"),t._uU(15,"Resep Obat"),t.qZA()(),t.TgZ(16,"div",12)(17,"table",13)(18,"thead")(19,"tr")(20,"th"),t._uU(21,"No"),t.qZA(),t.TgZ(22,"th"),t._uU(23,"Obat"),t.qZA(),t.TgZ(24,"th"),t._uU(25,"Jumlah"),t.qZA(),t.TgZ(26,"th"),t._uU(27,"Harga Satuan"),t.qZA(),t.TgZ(28,"th"),t._uU(29,"Diskon"),t.qZA(),t.TgZ(30,"th"),t._uU(31,"Sub Total"),t.qZA()()(),t.YNc(32,W,2,1,"tbody",14),t.qZA(),t.TgZ(33,"div",15),t._UZ(34,"div",16),t.TgZ(35,"div",17)(36,"table",18)(37,"tr")(38,"td",19),t._uU(39,"Total Obat"),t.qZA(),t.TgZ(40,"td",20),t._uU(41),t.qZA()(),t.TgZ(42,"tr")(43,"td",19),t._uU(44),t.qZA(),t.TgZ(45,"td",20),t._uU(46),t.qZA()(),t.TgZ(47,"tr"),t._UZ(48,"td",19)(49,"td"),t.qZA(),t.TgZ(50,"tr")(51,"td",19),t._uU(52,"JASA TINDAKAN"),t.qZA(),t.TgZ(53,"td",20),t._uU(54),t.qZA()(),t.TgZ(55,"tr")(56,"td",19),t._uU(57,"JASA MEDIS"),t.qZA(),t.TgZ(58,"td",20),t._uU(59),t.qZA()(),t.TgZ(60,"tr")(61,"td",19),t._uU(62,"BIAYA DOKTER"),t.qZA(),t.TgZ(63,"td",20),t._uU(64),t.qZA()(),t.TgZ(65,"tr")(66,"td",19),t._uU(67,"BAHAN HABIS PAKAI"),t.qZA(),t.TgZ(68,"td",20),t._uU(69),t.qZA()(),t.TgZ(70,"tr")(71,"td",19),t._uU(72,"BIAYA TINDAKAN MEDIS"),t.qZA(),t.TgZ(73,"td",20),t._uU(74),t.qZA()(),t.TgZ(75,"tr")(76,"td",19),t._uU(77,"LAIN-LAIN"),t.qZA(),t.TgZ(78,"td",20),t._uU(79),t.qZA()(),t.TgZ(80,"tr")(81,"td",19)(82,"b"),t._uU(83,"Total"),t.qZA()(),t.TgZ(84,"td",20)(85,"b"),t._uU(86),t.qZA()()()()()()()()()()(),t.TgZ(87,"ngx-spinner",21)(88,"p",22),t._uU(89," Loading... "),t.qZA()()()),2&e&&(t.xp6(3),t.Q6J("title","Detail Resep")("items",t.DdM(18,X))("active_item","Detail Resep"),t.xp6(3),t.Q6J("routerLink",t.VKq(19,tt,a.urlBack)),t.xp6(6),t.Q6J("ngIf",null!=a.dataDetail),t.xp6(20),t.Q6J("ngIf",null!=a.dataDetail),t.xp6(9),t.Oqu(a.Money(a.totalObat)),t.xp6(3),t.hij("Pajak Obat ",null==a.dataDetail?null:a.dataDetail.pajak_obat,"%"),t.xp6(2),t.Oqu(a.Money(null==a.dataDetail?null:a.dataDetail.pajak_obat_rupiah)),t.xp6(8),t.hij(": ",a.Money(null==a.dataDetail?null:a.dataDetail.diagnosa_dokter_umum.jt),""),t.xp6(5),t.hij(": ",a.Money(null==a.dataDetail?null:a.dataDetail.diagnosa_dokter_umum.jm),""),t.xp6(5),t.hij(": ",a.Money(null==a.dataDetail?null:a.dataDetail.diagnosa_dokter_umum.biaya_dokter),""),t.xp6(5),t.hij(": ",a.Money(null==a.dataDetail?null:a.dataDetail.diagnosa_dokter_umum.bhp),""),t.xp6(5),t.hij(": ",a.Money(null==a.dataDetail||null==a.dataDetail.tindakan_medis?null:a.dataDetail.tindakan_medis.total_biaya_tindakan),""),t.xp6(5),t.hij(": ",a.Money(null==a.dataDetail?null:a.dataDetail.diagnosa_dokter_umum.lain_lain),""),t.xp6(7),t.Oqu(a.Money(a.total)),t.xp6(1),t.Q6J("name","spinner1")("fullScreen",!0))},directives:[j.L,p.rH,g.O5,g.sg,M.Ro],styles:[""]}),s})();var B=o(15861),at=o(55648),nt=o(3023),it=o(45819),st=o(51531),ot=o(88388),rt=o(72566),lt=o(88544),dt=o(98711),L=o(8202),ut=o(51693);function pt(s,u){if(1&s){const e=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.TgZ(7,"p"),t._uU(8,"Diskon: "),t.TgZ(9,"span",72),t._uU(10),t.qZA()()(),t.TgZ(11,"td"),t._uU(12),t.qZA(),t.TgZ(13,"td"),t._uU(14),t.qZA(),t.TgZ(15,"td"),t._uU(16),t.qZA(),t.TgZ(17,"td"),t._uU(18),t.qZA(),t.TgZ(19,"td")(20,"button",73),t.NdJ("click",function(){const i=t.CHM(e).$implicit;return t.oxw().edit(i)}),t._UZ(21,"i",74),t.qZA(),t.TgZ(22,"button",75),t.NdJ("click",function(){const i=t.CHM(e).$implicit;return t.oxw().hapus(i.id_penjualan_resep_detail,i.subtotal)}),t._UZ(23,"i",76),t.qZA()()()}if(2&s){const e=u.$implicit,a=u.index,n=t.oxw();t.xp6(2),t.Oqu(a+1),t.xp6(2),t.Oqu(e.nama_obat),t.xp6(2),t.hij("",n.Money(e.satuan_harga)," "),t.xp6(4),t.Oqu(n.Money(e.diskon_rupiah)),t.xp6(2),t.Oqu(e.satuan_qty),t.xp6(2),t.Oqu(e.satuan),t.xp6(2),t.Oqu(n.Money(e.subtotal)),t.xp6(2),t.hij("",e.signa_jumlah+"x"+e.signa_hari," hari")}}function _t(s,u){if(1&s&&(t.TgZ(0,"ng-option",77),t._uU(1),t.qZA()),2&s){const e=u.$implicit;t.Q6J("value",e),t.xp6(1),t.Oqu(e.nama_obat)}}function ht(s,u){1&s&&(t.TgZ(0,"p",82),t._uU(1,"*Satuan Qty tidak boleh kosong"),t.qZA())}function mt(s,u){if(1&s&&(t.TgZ(0,"p",82),t._uU(1),t.qZA()),2&s){const e=t.oxw(2);t.xp6(1),t.hij("*Stok tidak mencukupi dari permintaan, maksimal stok: ",e.maxJml,"")}}function ct(s,u){if(1&s&&(t.TgZ(0,"ng-option",77),t._uU(1),t.qZA()),2&s){const e=u.$implicit;t.Q6J("value",e),t.xp6(1),t.Oqu(e.nama_kemasan+"( "+e.target_qty+" "+e.target_kemasan+" )")}}function gt(s,u){1&s&&(t.TgZ(0,"p",82),t._uU(1,"*Kemasan tida boleh kosong"),t.qZA())}function bt(s,u){1&s&&(t.TgZ(0,"p",82),t._uU(1,"*Signa jumlah tidak boleh kosong dan lebih dari 0"),t.qZA())}function vt(s,u){1&s&&(t.TgZ(0,"p",82),t._uU(1,"*Signa hari tida boleh kosong"),t.qZA())}function ft(s,u){if(1&s){const e=t.EpF();t.TgZ(0,"input",98),t.NdJ("keypress",function(n){return t.CHM(e),t.oxw(2).isNumber(n)})("ngModelChange",function(n){return t.CHM(e),t.oxw(2).diskon=n}),t.qZA()}if(2&s){const e=t.oxw(2);t.Q6J("ngModel",e.diskon)}}function Zt(s,u){if(1&s){const e=t.EpF();t.TgZ(0,"input",99),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw(2).diskon=n}),t.qZA()}if(2&s){const e=t.oxw(2);t.Q6J("options",e.optionsCur)("ngModel",e.diskon)}}function yt(s,u){1&s&&(t.TgZ(0,"p",82),t._uU(1,"*Diskon tida boleh kosong"),t.qZA())}function kt(s,u){1&s&&(t.TgZ(0,"p",82),t._uU(1,"*Jenis diskon tida boleh kosong"),t.qZA())}function At(s,u){if(1&s){const e=t.EpF();t.TgZ(0,"div",78)(1,"div",79)(2,"b"),t._UZ(3,"i",80),t._uU(4),t.qZA()(),t.TgZ(5,"label"),t._uU(6,"Harga"),t.qZA(),t.TgZ(7,"div",31)(8,"div",16)(9,"input",81),t.NdJ("keypress",function(n){return t.CHM(e),t.oxw().isNumber(n)})("ngModelChange",function(n){return t.CHM(e),t.oxw().dataObat.harga_jual=n}),t.qZA()(),t._UZ(10,"div",16),t.qZA(),t.TgZ(11,"div",31)(12,"div",16)(13,"label"),t._uU(14,"Satuan Qty "),t.TgZ(15,"span",82)(16,"b"),t._uU(17,"*"),t.qZA()()(),t.TgZ(18,"input",83),t.NdJ("keypress",function(n){return t.CHM(e),t.oxw().isNumber(n)})("change",function(){return t.CHM(e),t.oxw().getBatchObat()})("ngModelChange",function(n){return t.CHM(e),t.oxw().satuan_qty=n}),t.qZA(),t.YNc(19,ht,2,0,"p",84),t.YNc(20,mt,2,1,"p",84),t.qZA(),t.TgZ(21,"div",16)(22,"span",85),t._uU(23,"Kemasan"),t.TgZ(24,"span",82)(25,"b"),t._uU(26,"*"),t.qZA()()(),t.TgZ(27,"ng-select",86),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().kemasan=n})("change",function(n){return t.CHM(e),t.oxw().setMaxJml(n)}),t.YNc(28,ct,2,2,"ng-option",55),t.qZA(),t.YNc(29,gt,2,0,"p",84),t.qZA()(),t.TgZ(30,"label"),t._uU(31,"Signa"),t.qZA(),t.TgZ(32,"div",31)(33,"div",16)(34,"div",28)(35,"div",87)(36,"span",88),t._uU(37,"Jumlah"),t.TgZ(38,"span",82)(39,"b"),t._uU(40,"*"),t.qZA()()(),t.TgZ(41,"input",89),t.NdJ("keypress",function(n){return t.CHM(e),t.oxw().isNumber(n)})("ngModelChange",function(n){return t.CHM(e),t.oxw().signa_jml=n}),t.qZA()()(),t.YNc(42,bt,2,0,"p",84),t.qZA(),t.TgZ(43,"div",16)(44,"div",28)(45,"div",87)(46,"span",88),t._uU(47,"Hari"),t.TgZ(48,"span",82)(49,"b"),t._uU(50,"*"),t.qZA()()(),t.TgZ(51,"input",90),t.NdJ("keypress",function(n){return t.CHM(e),t.oxw().isNumber(n)})("ngModelChange",function(n){return t.CHM(e),t.oxw().signa_hari=n}),t.qZA()()(),t.YNc(52,vt,2,0,"p",84),t.qZA()(),t.TgZ(53,"div",91)(54,"div",16)(55,"label"),t._uU(56,"Diskon "),t.TgZ(57,"span",82)(58,"b"),t._uU(59,"*"),t.qZA()()(),t.YNc(60,ft,1,1,"input",92),t.YNc(61,Zt,1,2,"input",93),t.YNc(62,yt,2,0,"p",84),t.qZA(),t.TgZ(63,"div",16)(64,"span",94),t._uU(65,"Jenis Diskon "),t.TgZ(66,"span",82)(67,"b"),t._uU(68,"*"),t.qZA()()(),t.TgZ(69,"select",95),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().jenis_diskon=n}),t.ynx(70),t.TgZ(71,"option",96),t._uU(72,"%"),t.qZA(),t.TgZ(73,"option",97),t._uU(74,"Rp"),t.qZA(),t.BQk(),t.qZA(),t.YNc(75,kt,2,0,"p",84),t.qZA()()()}if(2&s){const e=t.oxw();t.xp6(4),t.AsE(" Info Stok: ",e.stok," ",e.dataObat.obat_kemasan[0].nama_kemasan,""),t.xp6(5),t.Q6J("ngModel",e.dataObat.harga_jual),t.xp6(9),t.Q6J("ngModel",e.satuan_qty),t.xp6(1),t.Q6J("ngIf","NaN"==e.getNumber(e.satuan_qty)),t.xp6(1),t.Q6J("ngIf",e.totalStok>e.maxJml),t.xp6(7),t.Q6J("ngModel",e.kemasan)("clearable",!0),t.xp6(1),t.Q6J("ngForOf",e.dataObat.obat_kemasan),t.xp6(1),t.Q6J("ngIf",e.submitted&&null==e.kemasan),t.xp6(12),t.Q6J("ngModel",e.signa_jml),t.xp6(1),t.Q6J("ngIf",e.submitted&&(null==e.signa_jml||e.signa_jml<=0)),t.xp6(9),t.Q6J("ngModel",e.signa_hari),t.xp6(1),t.Q6J("ngIf",e.submitted&&(null==e.signa_hari||e.signa_hari<=0)),t.xp6(8),t.Q6J("ngIf","persen"==e.jenis_diskon),t.xp6(1),t.Q6J("ngIf","rupiah"==e.jenis_diskon),t.xp6(1),t.Q6J("ngIf",e.submitted&&(null==e.diskon||e.diskon<0)),t.xp6(7),t.Q6J("ngModel",e.jenis_diskon),t.xp6(6),t.Q6J("ngIf",e.submitted&&""==e.jenis_diskon)}}function Tt(s,u){if(1&s){const e=t.EpF();t.TgZ(0,"button",100),t.NdJ("click",function(){return t.CHM(e),t.oxw().simpanResep()}),t._uU(1,"Simpan"),t.qZA()}}function Ut(s,u){1&s&&(t.TgZ(0,"div",101),t._uU(1," Jenis Pembayaran tidak boleh kosong "),t.qZA())}function Mt(s,u){1&s&&(t.TgZ(0,"div",101),t._uU(1," Metode Pembayaran tidak boleh kosong "),t.qZA())}function qt(s,u){if(1&s){const e=t.EpF();t.TgZ(0,"div",31)(1,"label",63),t._uU(2,"Metode Pembayaran"),t.qZA(),t.TgZ(3,"div",64)(4,"ng-select",102),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().id_metode_bayar=n}),t.qZA(),t.YNc(5,Mt,2,0,"div",68),t.qZA()()}if(2&s){const e=t.oxw();t.xp6(4),t.Q6J("ngModel",e.id_metode_bayar)("virtualScroll",!0)("items",e.optionMetodeBayar)("searchable",!0)("clearable",!0),t.xp6(1),t.Q6J("ngIf",""==e.id_metode_bayar&&e.submitted)}}const Dt=function(){return["Add"]},wt=function(s){return[s]};let Ct=(()=>{class s{constructor(e,a,n,i,h,v,y,A,I,J,N,Lt,Pt,Ft,Qt,Kt,Gt){this.ModalService=e,this.ModulResepService=a,this.router=n,this.StokObat=i,this.spinner=h,this.ModulBiayaService=v,this.activatedRoute=y,this.ModulMetodeBayarService=A,this.ModulObatService=I,this.DataPasienService=J,this.antreanDokterUmumService=N,this.fb=Lt,this.validate=Pt,this.money=Ft,this.auth=Qt,this.aes=Kt,this.store=Gt,this.datatableElement=l.G,this.dtOptions={},this.dtOptionsBiaya={},this.dataResep=new _.W,this.totalStok=0,this.dataAdd=[],this.dataObat=[],this.signa_jml=0,this.signa_hari=0,this.diskon=0,this.jenis_diskon="persen",this.satuan_qty=0,this.submitted=!1,this.id_resep="",this.id_obat=null,this.optionObat=[],this.title="",this.isEdit=!1,this.jenis_pembayaran="tunai",this.id_metode_bayar="",this.jumlah_pembayaran=0,this.params_get={last_data:"0",get_data:"10",search:""},this.maxJml=0,this.stok=0,this.params_listtable={draw:1,columns:[{data:0,name:"",searchable:!0,orderable:!1,search:{value:"",regex:!1}},{data:"nameuser",name:"",searchable:!0,orderable:!0,search:{value:"",regex:!1}},{data:"nama",name:"",searchable:!0,orderable:!0,search:{value:"",regex:!1}},{data:"jk",name:"",searchable:!1,orderable:!1,search:{value:"",regex:!1}},{data:4,name:"",searchable:!0,orderable:!0,search:{value:"",regex:!1}}],order:[],start:0,length:10,search:{value:"",regex:!1},nama:""},this.biayaLain={},this.biaya="",this.listBiaya=[],this.optionBiaya=[],this.tabPane={pane1:!0,pane2:!1},this.totalObat=0,this.totalAll=0,this.totalPajak=0,this.biaya_tindakan=0,this.urlBack="",this.kemasan_level=0,this.getState=this.store.select("resep")}ngOnInit(){this.keyGen=this.aes.getKeyLogin(this.auth.currentUserValue),this.optionsCur=this.money.currency(),this.formTambah=this.fb.group({no_rm:["",[]],jenis_kelamin:["",[c.kI.required]],nik:["",[c.kI.required]],tgl_lahir:["",[c.kI.required]],nama:["",[c.kI.required]],no_bpjs:["",[]],golongan_darah:["",[]],no_hp:["",[c.kI.required]],kode_phone:[""],nama_panggilan:["SDR",[]],tempat_lahir:["",[]],agama:["",[]],status_perkawinan:["",[]],pekerjaan:["",[]],kewarganegaraan:["",[]],status_bpjs:["0",[]],jenis_alamat:["ktp",[]],kecamatan:["",[]],desa:["",[]],provinsi:["",[]],kabupaten:["",[]],alamat:["",[]],alamat_ktp:["",[c.kI.required]],alamat_domisili:["",[]]}),this.formDiagnosa=this.fb.group({keluhan:["",[c.kI.required]],sistole:["",[c.kI.required]],diastole:["",[c.kI.required]],suhu:["",[c.kI.required]],hr:["",[c.kI.required]],status_hr:["tidak_teratur",[c.kI.required]],rr:["",[c.kI.required]],keterangan_rr:["",[c.kI.required]],tb:["",[c.kI.required]],bb:["",[c.kI.required]],alergi:["",[]],catatan_khusus:["",[]],obyektif_dokter:["",[c.kI.required]],hambatan:["",[]],pxfisik:["",[]],planning:["",[c.kI.required]],tindakan:["",[c.kI.required]],resep_obat:["R/",[c.kI.required]],biaya_dokter:["",[]],tindakan_medis:this.fb.array([])}),this.formDiagnosaBiaya=this.fb.group({jm:["0",[]],jt:["0",[]],bhp:["0",[]],biaya_tindakan:["0",[]],lain_lain:["0",[]],biaya_dokter:["0",[]],pajak:["11",[]]}),this.activatedRoute.params.subscribe(e=>{e&&(this.urlBack="../../../../../"+e.page,this.id_resep=e.id,this.spinner.show("spinner1"),this.getPasien(e.id_pasien),this.getAntrian(e.id_antrian),this.showObat(e.id))}),this.ModulMetodeBayarService.get(this.params_get).subscribe(e=>{this.optionMetodeBayar=e.response}),this.getState.subscribe(e=>{e&&null!=e.ObatPayload&&(this.spinner.show("spinner1"),this.showObat(this.id_resep),this.modalClose(),this.submitted=!1)})}convertDate(e){return b(e).format("DD-MM-YYYY")}Money(e){return this.money.formatRupiah(e)}setNull(e){e.target.value=""==e.target.value?0:e.target.value}isNumber(e){return this.validate.Number(e)}dekryp(e){try{return this.aes.decrypt(e,this.keyGen.key,this.keyGen.iv,256)}catch(a){return e}}inputChange(){this.totalAll=parseInt(this.formDiagnosaBiaya.value.jt)+parseInt(this.formDiagnosaBiaya.value.bhp)+parseInt(this.formDiagnosaBiaya.value.biaya_dokter)+parseInt(this.formDiagnosaBiaya.value.jm)+parseInt(this.formDiagnosaBiaya.value.lain_lain)+parseInt(this.formDiagnosaBiaya.value.biaya_tindakan),this.totalPajak=this.totalObat*(this.formDiagnosaBiaya.value.pajak/100),this.totalAll+=this.totalPajak+this.totalObat}getNumber(e){return parseInt(e).toString()}getPasien(e){this.spinner.show("spinner1"),this.DataPasienService.show(e).subscribe(a=>{"0000"==a.metaData.response_code&&(this.formTambah.patchValue({no_rm:a.response.full_rm,jenis_kelamin:a.response.jenis_kelamin,no_bpjs:a.response.no_bpjs,golongan_darah:a.response.golongan_darah?a.response.golongan_darah:"",nik:a.response.nik,no_hp:a.response.no_hp,kode_phone:a.response.kode_phone,nama_panggilan:a.response.nama_panggilan,tempat_lahir:a.response.tempat_lahir,tgl_lahir:a.response.tgl_lahir?b(this.dekryp(a.response.tgl_lahir)).format("MM/DD/YYYY"):null,agama:a.response.agama?a.response.agama:"",status_perkawinan:a.response.status_perkawinan?a.response.status_perkawinan:"",pekerjaan:a.response.pekerjaan?a.response.pekerjaan:"",kewarganegaraan:a.response.kewarganegaraan?a.response.kewarganegaraan:"",nama:a.response.nama,status_bpjs:a.response.status_bpjs?a.response.status_bpjs:"0",jenis_alamat:a.response.jenis_alamat,kecamatan:"ktp"==a.response.jenis_alamat?a.response.alamat.ktp.district:a.response.alamat.domisili.district,desa:"ktp"==a.response.jenis_alamat?a.response.alamat.ktp.village:a.response.alamat.domisili.village,provinsi:"ktp"==a.response.jenis_alamat?a.response.alamat.ktp.province:a.response.alamat.domisili.province,kabupaten:"ktp"==a.response.jenis_alamat?a.response.alamat.ktp.regency:a.response.alamat.domisili.regency,alamat:"ktp"==a.response.jenis_alamat?a.response.alamat.ktp.alamat:a.response.alamat.domisili.alamat}),this.spinner.hide("spinner1"))})}getAntrian(e){this.spinner.show("spinner1"),this.antreanDokterUmumService.getByIdAntrian(e).subscribe(a=>{"0000"==a.metaData.response_code&&(this.formDiagnosa.patchValue({tindakan:a.response.tindakan,alergi:a.response.alergi}),this.antreanDokterUmumService.showDiagnosa(e).subscribe(n=>{"0000"==n.metaData.response_code&&(this.formDiagnosaBiaya.patchValue({jm:n.response.jm,jt:n.response.jt,bhp:n.response.bhp,lain_lain:n.response.lain_lain,biaya_dokter:n.response.biaya_dokter}),this.formDiagnosaBiaya.patchValue({biaya_tindakan:n.response.total_biaya_tindakan}),this.totalAll=0,this.riwayat=n.response,this.totalAll=parseInt(this.riwayat.jt)+parseInt(this.riwayat.bhp)+parseInt(this.riwayat.biaya_dokter)+parseInt(this.riwayat.jm)+parseInt(this.riwayat.lain_lain)+parseInt(this.formDiagnosaBiaya.value.biaya_tindakan),this.resep_obat=n.response.resep_obat,this.totalPajak=this.totalObat*(this.formDiagnosaBiaya.value.pajak/100),this.totalAll+=this.totalPajak+this.totalObat),this.spinner.hide("spinner1")}))})}ShowTabPane(e){1==e?(this.tabPane.pane1=!0,this.tabPane.pane2=!1):(this.tabPane.pane1=!1,this.tabPane.pane2=!0)}prosesSelectObat(e,a){if("search"==a?(this.optionObat=[],this.params_get.search=e.term,this.params_get.last_data="0"):this.params_get.search="","last_page"==a){let n=parseInt(this.params_get.last_data)+parseInt(this.params_get.get_data);this.params_get.last_data=n.toString()}else this.params_get.last_data="0";this.ModulObatService.get(this.params_get).subscribe(n=>{n&&(0==this.optionObat.length?this.optionObat=n.response:n.response.map(i=>{this.optionObat.findIndex(v=>v.id_obat==i.id_obat)<0&&this.optionObat.push(i)}))})}setObat(e){if(e){let a=e.obat_kemasan.sort((n,i)=>n.kemasan_level-i.kemasan_level);e.nama_kemasan=a,this.dataObat=e,this.stok=e.stok,this.maxJml=0,this.satuan_qty=0,this.kemasan=null,this.totalStok=0}else this.maxJml=0,this.satuan_qty=0,this.kemasan=null,this.totalStok=0}setMaxJml(e){var a=this;if(e){this.kemasan_level=e.kemasan_level;let n=1;this.totalStok=0,this.dataObat.obat_kemasan.map(h=>{h.kemasan_level<=e.kemasan_level&&(n=h.total_qty)}),this.totalStok=this.satuan_qty*n;let i=0==this.totalStok?this.satuan_qty:this.totalStok;this.maxJml=0,i>0&&(this.spinner.show("spinner1"),this.StokObat.getBatch({id_obat:this.id_obat,jumlah:i}).subscribe(function(){var h=(0,B.Z)(function*(v){v.response.map(y=>{a.maxJml+=y.jumlah}),a.spinner.hide("spinner1")});return function(v){return h.apply(this,arguments)}}()))}}getBatchObat(){var e=this;return(0,B.Z)(function*(){if(e.kemasan_level>0){let n=1;e.totalStok=0,e.dataObat.obat_kemasan.map(i=>{i.kemasan_level<=e.kemasan_level&&(n=i.total_qty)}),e.totalStok=e.satuan_qty*n}let a=0==e.totalStok?e.satuan_qty:e.totalStok;e.maxJml=0,a>0&&(e.spinner.show("spinner1"),yield e.StokObat.getBatch({id_obat:e.id_obat,jumlah:a}).subscribe(function(){var n=(0,B.Z)(function*(i){i.response.map(h=>{e.maxJml+=h.jumlah}),e.spinner.hide("spinner1")});return function(i){return n.apply(this,arguments)}}()))})()}setMaxJml2(){let e=1;this.dataObat.obat_kemasan.map(a=>{a.kemasan_level<=this.kemasan_level&&(e=a.total_qty)}),this.maxJml=this.satuan_qty*e}add(){this.id_obat=null,this.satuan_qty=0,this.signa_jml=0,this.signa_hari=0,this.kemasan_level=0,this.jenis_diskon="persen",this.diskon=0,this.kemasan=null,this.isEdit=!1,this.title="Add Resep",this.maxJml=0,this.modalOpen()}edit(e){this.title="Edit Resep",e.obat.obat_kemasan=e.obat.obat_kemasan.sort((n,i)=>n.kemasan_level>i.kemasan_level?1:i.kemasan_level>n.kemasan_level?-1:0);let a=e.obat.obat_kemasan.map(n=>n.nama_kemasan).indexOf(e.satuan);this.kemasan=e.obat.obat_kemasan[a],this.dataObat={id_obat:e.id_obat,nama_obat:e.nama_obat,harga_jual:e.obat.harga_jual,obat_kemasan:e.obat.obat_kemasan,id_resep_obat_detail:e.id_penjualan_resep_detail},this.ModulObatService.show(e.id_obat).subscribe(n=>{"0000"==n.metaData.response_code&&(this.stok=n.response.stok)}),this.optionObat=[{id_obat:e.id_obat,nama_obat:e.nama_obat}],this.id_obat=e.id_obat,this.satuan_qty=e.satuan_qty,this.maxJml=this.satuan_qty*e.total_qty,this.signa_jml=e.signa_jumlah,this.signa_hari=e.signa_hari,this.jenis_diskon=e.jenis_diskon,this.diskon="persen"==e.jenis_diskon?e.diskon_persen:e.diskon_rupiah,this.isEdit=!0,this.submitted=!1,this.modalOpen()}hapus(e,a){m().fire({title:"Apakah anda yakin akan menghapus data ini ?",icon:"warning",showCancelButton:!0,allowOutsideClick:!1,confirmButtonText:"Ya, hapus saja!",cancelButtonText:"Tidak, Batalkan"}).then(n=>{n.value&&(this.spinner.show("spinner1"),this.store.dispatch(d.Fi({payload:{id:e}})),this.totalObat-=parseInt(a),this.totalAll=parseInt(this.formDiagnosaBiaya.value.jt)+parseInt(this.formDiagnosaBiaya.value.bhp)+parseInt(this.formDiagnosaBiaya.value.biaya_dokter)+parseInt(this.formDiagnosaBiaya.value.jm)+parseInt(this.formDiagnosaBiaya.value.lain_lain)+parseInt(this.formDiagnosaBiaya.value.biaya_tindakan),this.totalPajak=this.totalObat*(this.formDiagnosaBiaya.value.pajak/100),this.totalAll+=this.totalPajak+this.totalObat,setTimeout(()=>{this.showObat(this.id_resep),this.spinner.hide("spinner1")},600))})}simpanResep(){this.submitted=!1,setTimeout(()=>{this.submitted=!0},400);let e={id_obat:this.dataObat.id_obat,satuan:this.kemasan.nama_kemasan,satuan_qty:this.satuan_qty,jenis_diskon:this.jenis_diskon,diskon_value:this.diskon,signa_jumlah:this.signa_jml,signa_hari:this.signa_hari};if(null==e.satuan||null==e.satuan_qty||e.satuan_qty<=0||this.maxJml<this.totalStok||null==e.diskon_value||""==e.jenis_diskon||null==e.signa_jumlah||null==e.signa_hari)return!1;if(this.listBiaya.map(a=>{if(a.nilai_biaya<=0)return!1}),this.isEdit)this.spinner.show("spinner1"),this.store.dispatch(d.KK({payload:e,id:this.dataObat.id_resep_obat_detail}));else{let a=!1;this.dataAdd.map(n=>{n.id_obat==e.id_obat&&(a=!0)}),a?m().fire("Warning","Data sudah ada!","warning"):(this.spinner.show("spinner1"),this.store.dispatch(d.sq({payload:e,id:this.id_resep})))}}finish(){let e=0;this.dataAdd.forEach(a=>{e+=parseInt(a.total_harga)}),this.jumlah_pembayaran=this.totalAll,this.modalBayarOpen()}bayar(){if(this.submitted=!1,setTimeout(()=>{this.submitted=!0},400),this.spinner.show("spinner1"),""==this.jenis_pembayaran||0==this.jumlah_pembayaran)return 0==this.jumlah_pembayaran&&m().fire("Warning","Resep masih kosong","warning"),!1;let i={jenis_pembayaran:this.jenis_pembayaran,id_metode_bayar:this.id_metode_bayar,jumlah_pembayaran:this.jumlah_pembayaran,biaya_lain:[],total_biaya_lain:0,time_input:(new Date).getTime(),jt:this.formDiagnosaBiaya.value.jt,biaya_tindakan_medis:this.formDiagnosaBiaya.value.biaya_tindakan,jm:this.formDiagnosaBiaya.value.jm,bhp:this.formDiagnosaBiaya.value.bhp,biaya_dokter:this.formDiagnosaBiaya.value.biaya_dokter,lain_lain:this.formDiagnosaBiaya.value.lain_lain,pajak_obat:this.formDiagnosaBiaya.value.pajak};this.store.dispatch(d.Bh({payload:i,id:this.id_resep})),this.modalBayarClose()}modalClose(){this.ModalService.close("modalFormContent"),this.submitted=!1}modalOpen(){this.submitted=!1,this.ModalService.open("modalFormContent")}modalBayarClose(){this.submitted=!1,this.ModalService.close("modalBayar")}modalBayarOpen(){this.submitted=!1,this.ModalService.open("modalBayar")}showObat(e){this.ModulResepService.showObat(e).subscribe(a=>{if("0000"==a.metaData.response_code){this.dataAdd=a.response,this.totalObat=0;let n=1,i=1;this.dataAdd.length>0&&(this.dataAdd.map((h,v)=>{n=1,i=h.obat.obat_kemasan.findIndex(y=>y.nama_kemasan==h.satuan),h.obat.obat_kemasan.map(y=>{y.kemasan_level<h.obat.obat_kemasan[i].kemasan_level&&(n*=y.total_qty)}),this.dataAdd[v].subtotal=parseInt(h.satuan_harga)*(h.total_qty*n)-parseInt(h.diskon_rupiah),this.totalObat+=this.dataAdd[v].subtotal}),this.totalAll=parseInt(this.formDiagnosaBiaya.value.jt)+parseInt(this.formDiagnosaBiaya.value.bhp)+parseInt(this.formDiagnosaBiaya.value.biaya_dokter)+parseInt(this.formDiagnosaBiaya.value.jm)+parseInt(this.formDiagnosaBiaya.value.lain_lain)+parseInt(this.formDiagnosaBiaya.value.biaya_tindakan),this.totalPajak=this.totalObat*(this.formDiagnosaBiaya.value.pajak/100),this.totalAll+=this.totalPajak+this.totalObat),this.spinner.hide("spinner1")}else this.dataAdd=[],this.spinner.hide("spinner1")})}prosesSelectBiaya(e,a){this.loadingBiaya=!0;let n=this.params_listtable;if("search"==a?(this.optionBiaya=[],this.params_get.search=e.term,this.params_get.last_data="0"):this.params_get.search="","last_page"==a){let i=parseInt(this.params_get.last_data)+parseInt(this.params_get.get_data);this.params_get.last_data=i.toString()}else this.params_get.last_data="0";this.ModulBiayaService.listDatatables(n).subscribe(i=>{this.loadingBiaya=!1,i&&(0==this.listBiaya.length?this.listBiaya=i.response:i.response.map(h=>{this.listBiaya.findIndex(y=>y.id_biaya==h.id_biaya)<0&&this.listBiaya.push(h)}))})}addBiaya(){this.totalStok=0,this.maxJml=0,this.listBiaya.findIndex(a=>a.id_biaya==this.biayaLain.id_biaya)<0?this.listBiaya.push({id_biaya:this.biayaLain.id_biaya,nama_biaya:this.biayaLain.nama_biaya,nilai_biaya:0}):m().fire("Warning","Data sudah ada, coba pilih data yang lain!","warning")}onChange(e){this.biayaLain=e}}return s.\u0275fac=function(e){return new(e||s)(t.Y36(T.Z),t.Y36(S.k),t.Y36(p.F0),t.Y36(at.O),t.Y36(M.t2),t.Y36(nt.v),t.Y36(p.gz),t.Y36(it.Z),t.Y36(st.g),t.Y36(ot.H),t.Y36(rt.j),t.Y36(c.qu),t.Y36(lt.p),t.Y36(O.r),t.Y36(R.e),t.Y36(dt.g),t.Y36(Z.yh))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-add"]],viewQuery:function(e,a){if(1&e&&t.Gf(l.G,5),2&e){let n;t.iGM(n=t.CRH())&&(a.datatableElement=n.first)}},decls:317,vars:73,consts:[[1,"content"],[1,"content-block"],[1,"block-header"],[3,"title","items","active_item"],[1,"text-center","mb-4"],["type","button",1,"btn","btn-kembali","mb-3","btn-lg",3,"routerLink"],[1,"fas","fa-arrow-left"],[1,"row","clearfix"],[1,"col-xs-12","col-sm-12","col-md-12","col-lg-12"],[1,"card"],[1,"body"],["id","nav-tab","role","tablist",1,"nav","nav-tabs"],["type","button",1,"nav-link",3,"click"],[1,"tab-content"],[1,"tab-pane","fade",3,"formGroup"],[1,"row","g-3"],[1,"col"],[1,"row"],[1,"col-md-4"],[1,"col-md-8"],[1,"row","mt-3"],[1,"mt-3","col-sm-12"],["for",""],[1,"mb-3","col-sm-6"],[1,"tab-pane","fade"],[3,"formGroup"],[1,"card","mb-4","mt-2"],[1,"card-header"],[1,"card-body"],[1,"card","mb-4"],[1,"card","mb-4",3,"formGroup"],[1,"row","mb-2"],[1,"col-md-8",2,"display","inline-flex"],["currencyMask","","formControlName","jt",1,"form-control",3,"options","keyup"],["currencyMask","","formControlName","bhp",1,"form-control",3,"options","keyup"],["currencyMask","","formControlName","jm",1,"form-control",3,"options","keyup"],["currencyMask","","formControlName","biaya_dokter",1,"form-control",3,"options","keyup"],["currencyMask","","formControlName","lain_lain",1,"form-control",3,"options","keyup"],[2,"width","100%"],[1,"input-group",2,"width","90px"],["type","text","formControlName","pajak",1,"form-control",3,"keyup","change"],[1,"input-group-text"],["type","button",1,"btn","btn-info","btn-lg","mb-3","pull-right",3,"click"],[1,"fas","fa-plus"],["width","100%",1,"table","table-striped","table-bordered","table-sm"],[4,"ngFor","ngForOf"],[1,"text-center"],[1,"btn","btn-lg","btn-info",3,"click"],["bdColor","rgba(0, 0, 0, 0.8)","size","medium","color","#fff","type","ball-clip-rotate-multiple",3,"name","fullScreen"],[2,"color","white"],["id","modalFormContent"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],[1,"modal-body"],["name","id_obat","bindLabel","nama_obat","bindValue","id_obat","placeholder","Pilih Obat",2,"flex","1 1 auto",3,"ngModel","virtualScroll","searchable","clearable","ngModelChange","change","search","scrollToEnd","open"],[3,"value",4,"ngFor","ngForOf"],["class","mt-2",4,"ngIf"],[1,"row","mt-2"],[1,"col-sm-12","text-end"],["type","button",1,"btn","btn-kembali",3,"click"],["class","btn btn-simpan",3,"click",4,"ngIf"],["id","modalBayar"],[1,"mt-3",3,"submit"],[1,"col-sm-4","col-form-label","fw-bold"],[1,"col-sm-8"],["name","jenis_pembayaran",1,"form-control",3,"ngModel","ngModelChange"],["value","tunai"],["value","transfer"],["class","form-text text-danger",4,"ngIf"],["class","row mb-2",4,"ngIf"],[1,"my-2"],["type","submit",1,"btn","btn-simpan"],[1,"badge","bg-warning"],[1,"btn","btn-warning","mb-2",3,"click"],[1,"fa","fa-edit"],[1,"btn","btn-danger","mb-2",3,"click"],[1,"fa","fa-trash"],[3,"value"],[1,"mt-2"],[1,"alert","alert-info","mb-2"],[1,"fa","fa-info-circle"],["type","text","disabled","","name","harga",1,"form-control",3,"ngModel","keypress","ngModelChange"],[1,"text-danger"],["type","text","name","qty",1,"form-control",3,"ngModel","keypress","change","ngModelChange"],["class","text-danger",4,"ngIf"],[1,"px-2"],["placeholder","Pilih Kemasan",2,"flex","1 1 auto",3,"ngModel","clearable","ngModelChange","change"],[1,"input-group"],[1,"input-group-append","mx-2","mt-2"],["type","text","min","1","placeholder","signa jumlah","name","signa_jumlah",1,"form-control",3,"ngModel","keypress","ngModelChange"],["type","text","placeholder","signa hari","name","signa_hari",1,"form-control",3,"ngModel","keypress","ngModelChange"],[1,"row","mb-5"],["type","text","class","form-control","placeholder","Diskon","name","diskon",3,"ngModel","keypress","ngModelChange",4,"ngIf"],["currencyMask","","class","form-control","placeholder","Diskon Rupiah","name","diskon",3,"options","ngModel","ngModelChange",4,"ngIf"],[1,""],["name","jenis_diskon",1,"form-select",3,"ngModel","ngModelChange"],["value","persen"],["value","rupiah"],["type","text","placeholder","Diskon","name","diskon",1,"form-control",3,"ngModel","keypress","ngModelChange"],["currencyMask","","placeholder","Diskon Rupiah","name","diskon",1,"form-control",3,"options","ngModel","ngModelChange"],[1,"btn","btn-simpan",3,"click"],[1,"form-text","text-danger"],["bindLabel","nama_sesi","bindValue","id_metode_bayar","placeholder","Pilih Metode Pembayaran",2,"flex","1 1 auto",3,"ngModel","virtualScroll","items","searchable","clearable","ngModelChange"]],template:function(e,a){1&e&&(t.TgZ(0,"section",0)(1,"div",1)(2,"div",2),t._UZ(3,"app-breadcrumb",3),t.qZA(),t.TgZ(4,"h3",4),t._uU(5,"Add Resep"),t.qZA(),t.TgZ(6,"button",5),t._UZ(7,"i",6),t._uU(8," Kembali"),t.qZA(),t.TgZ(9,"div",7)(10,"div",8)(11,"div",9)(12,"div",10)(13,"nav")(14,"div",11)(15,"button",12),t.NdJ("click",function(){return a.ShowTabPane(1)}),t._uU(16," DETAIL PASIEN "),t.qZA(),t.TgZ(17,"button",12),t.NdJ("click",function(){return a.ShowTabPane(2)}),t._uU(18,"OBAT RESEP"),t.qZA()()(),t.TgZ(19,"div",13)(20,"div",14)(21,"div",15)(22,"div",16)(23,"div",17)(24,"div",18),t._uU(25,"No RM "),t.qZA(),t.TgZ(26,"div",19),t._uU(27),t.qZA()()(),t.TgZ(28,"div",16)(29,"div",17)(30,"label",18),t._uU(31,"Jenis Kelamin"),t.qZA(),t.TgZ(32,"div",19),t._uU(33),t.qZA()()()(),t.TgZ(34,"div",15)(35,"div",16)(36,"div",17)(37,"label",18),t._uU(38,"No BPJS "),t.qZA(),t.TgZ(39,"div",19),t._uU(40),t.qZA()()(),t.TgZ(41,"div",16)(42,"div",17)(43,"label",18),t._uU(44,"Golongan Darah "),t.qZA(),t.TgZ(45,"div",19),t._uU(46),t.qZA()()()(),t.TgZ(47,"div",15)(48,"div",16)(49,"div",17)(50,"label",18),t._uU(51,"Status BPJS"),t.qZA(),t.TgZ(52,"div",19),t._uU(53),t.qZA()()(),t.TgZ(54,"div",16)(55,"div",17)(56,"label",18),t._uU(57,"No Telp/HP"),t.qZA(),t.TgZ(58,"div",19),t._uU(59),t.qZA()()()(),t.TgZ(60,"div",15)(61,"div",16)(62,"div",17)(63,"label",18),t._uU(64,"NIK "),t.qZA(),t.TgZ(65,"div",19),t._uU(66),t.qZA()()(),t.TgZ(67,"div",16)(68,"div",17)(69,"label",18),t._uU(70,"Agama"),t.qZA(),t.TgZ(71,"div",19),t._uU(72),t.qZA()()()(),t.TgZ(73,"div",15)(74,"div",16)(75,"div",17)(76,"label",18),t._uU(77,"Nama Panggilan"),t.qZA(),t.TgZ(78,"div",19),t._uU(79),t.qZA()()(),t.TgZ(80,"div",16)(81,"div",17)(82,"label",18),t._uU(83,"Status Perkawinan"),t.qZA(),t.TgZ(84,"div",19),t._uU(85),t.qZA()()()(),t.TgZ(86,"div",15)(87,"div",16)(88,"div",17)(89,"label",18),t._uU(90,"Nama"),t.qZA(),t.TgZ(91,"div",19),t._uU(92),t.qZA()()(),t.TgZ(93,"div",16)(94,"div",17)(95,"label",18),t._uU(96,"Pekerjaan "),t.qZA(),t.TgZ(97,"div",19),t._uU(98),t.qZA()()()(),t.TgZ(99,"div",15)(100,"div",16)(101,"div",17)(102,"label",18),t._uU(103,"Tempat Lahir"),t.qZA(),t.TgZ(104,"div",19),t._uU(105),t.qZA()()(),t.TgZ(106,"div",16)(107,"div",17)(108,"label",18),t._uU(109,"Kewarganegaraan"),t.qZA(),t.TgZ(110,"div",19),t._uU(111),t.qZA()()()(),t.TgZ(112,"div",15)(113,"div",16)(114,"div",17)(115,"label",18),t._uU(116,"Tanggal Lahir"),t.qZA(),t.TgZ(117,"div",19),t._uU(118),t.qZA()()(),t.TgZ(119,"div",16)(120,"div",17)(121,"label",18),t._uU(122,"Jenis Alamat"),t.qZA(),t.TgZ(123,"div",19),t._uU(124),t.qZA()()()(),t.TgZ(125,"div",20)(126,"div",21)(127,"label",22),t._uU(128,"Alamat Sesuai KTP"),t.qZA(),t._UZ(129,"hr"),t.qZA(),t.TgZ(130,"div",23)(131,"div",17)(132,"label",18),t._uU(133,"Provinsi "),t.qZA(),t.TgZ(134,"div",19),t._uU(135),t.qZA()()(),t.TgZ(136,"div",23)(137,"div",17)(138,"label",18),t._uU(139,"Kabupaten / Kota"),t.qZA(),t.TgZ(140,"div",19),t._uU(141),t.qZA()()(),t.TgZ(142,"div",23)(143,"div",17)(144,"label",18),t._uU(145,"Kecamatan "),t.qZA(),t.TgZ(146,"div",19),t._uU(147),t.qZA()()(),t.TgZ(148,"div",23)(149,"div",17)(150,"label",18),t._uU(151,"Desa / Kelurahan"),t.qZA(),t.TgZ(152,"div",19),t._uU(153),t.qZA()()(),t.TgZ(154,"div",23)(155,"div",17)(156,"label",18),t._uU(157,"Alamat"),t.qZA(),t.TgZ(158,"div",19),t._uU(159),t.qZA()()()()(),t.TgZ(160,"div",24)(161,"div",20)(162,"div",18)(163,"div",25)(164,"div",26)(165,"div",27),t._uU(166,"ALERGI"),t.qZA(),t.TgZ(167,"div",28),t._uU(168),t.qZA()(),t.TgZ(169,"div",29)(170,"div",27),t._uU(171,"TINDAKAN"),t.qZA(),t.TgZ(172,"div",28),t._uU(173),t.qZA()()(),t.TgZ(174,"div",30)(175,"div",27),t._uU(176,"BIAYA"),t.qZA(),t.TgZ(177,"div",28)(178,"div",31)(179,"div",18),t._uU(180," JT "),t.qZA(),t.TgZ(181,"div",32)(182,"input",33),t.NdJ("keyup",function(i){return a.setNull(i),a.inputChange()}),t.qZA()()(),t.TgZ(183,"div",31)(184,"div",18),t._uU(185," BHP "),t.qZA(),t.TgZ(186,"div",32)(187,"input",34),t.NdJ("keyup",function(i){return a.setNull(i),a.inputChange()}),t.qZA()()(),t.TgZ(188,"div",31)(189,"div",18),t._uU(190," JM "),t.qZA(),t.TgZ(191,"div",32)(192,"input",35),t.NdJ("keyup",function(i){return a.setNull(i),a.inputChange()}),t.qZA()()(),t.TgZ(193,"div",31)(194,"div",18),t._uU(195," BIAYA DOKTER "),t.qZA(),t.TgZ(196,"div",32)(197,"input",36),t.NdJ("keyup",function(i){return a.setNull(i),a.inputChange()}),t.qZA()()(),t.TgZ(198,"div",31)(199,"div",18),t._uU(200," BIAYA TINDAKAN MEDIS "),t.qZA(),t.TgZ(201,"div",32),t._uU(202),t.qZA()(),t.TgZ(203,"div",31)(204,"div",18),t._uU(205," LAIN - LAIN "),t.qZA(),t.TgZ(206,"div",32)(207,"input",37),t.NdJ("keyup",function(i){return a.setNull(i),a.inputChange()}),t.qZA()()(),t.TgZ(208,"div",31)(209,"div",18),t._uU(210," OBAT "),t.qZA(),t.TgZ(211,"div",32)(212,"p"),t._uU(213),t.qZA()()(),t.TgZ(214,"div",31)(215,"div",18),t._uU(216," PAJAK "),t.qZA(),t.TgZ(217,"div",32)(218,"table",38)(219,"tr")(220,"td")(221,"div",39)(222,"input",40),t.NdJ("keyup",function(i){return a.setNull(i),a.inputChange()})("change",function(i){return a.setNull(i),a.inputChange()}),t.qZA(),t.TgZ(223,"span",41),t._uU(224,"%"),t.qZA()()(),t.TgZ(225,"td"),t._uU(226),t.qZA()()()()(),t.TgZ(227,"div",31)(228,"div",18),t._uU(229," TOTAL "),t.qZA(),t.TgZ(230,"div",32)(231,"p"),t._uU(232),t.qZA()()()()()(),t.TgZ(233,"div",19)(234,"div",29)(235,"div",27),t._uU(236,"RESEP DOKTER"),t.qZA(),t.TgZ(237,"div",28),t._uU(238),t.qZA()(),t.TgZ(239,"div",9)(240,"div",27),t._uU(241,"FORM RESEP"),t.qZA(),t.TgZ(242,"div",28)(243,"button",42),t.NdJ("click",function(){return a.add()}),t._UZ(244,"i",43),t._uU(245," Add Resep "),t.qZA(),t.TgZ(246,"table",44)(247,"thead")(248,"tr")(249,"th"),t._uU(250,"No"),t.qZA(),t.TgZ(251,"th"),t._uU(252,"Nama Obat"),t.qZA(),t.TgZ(253,"th"),t._uU(254,"Harga"),t.qZA(),t.TgZ(255,"th"),t._uU(256,"Jumlah"),t.qZA(),t.TgZ(257,"th"),t._uU(258,"Satuan"),t.qZA(),t.TgZ(259,"th"),t._uU(260,"Subtotal"),t.qZA(),t.TgZ(261,"th"),t._uU(262,"Signa"),t.qZA(),t.TgZ(263,"th"),t._uU(264,"Aksi"),t.qZA()()(),t.TgZ(265,"tbody"),t.YNc(266,pt,24,8,"tr",45),t.qZA()(),t._UZ(267,"br")(268,"br"),t.TgZ(269,"p",46)(270,"button",47),t.NdJ("click",function(){return a.finish()}),t._uU(271,"Simpan"),t.qZA()()()()()()()()()()()()(),t.TgZ(272,"ngx-spinner",48)(273,"p",49),t._uU(274," Loading... "),t.qZA()(),t.TgZ(275,"jw-modal",50)(276,"div",51)(277,"h4",52),t._uU(278),t.qZA()(),t.TgZ(279,"div",53)(280,"ng-select",54),t.NdJ("ngModelChange",function(i){return a.id_obat=i})("change",function(i){return a.setObat(i)})("search",function(i){return a.prosesSelectObat(i,"search")})("scrollToEnd",function(i){return a.prosesSelectObat(i,"last_page")})("open",function(i){return a.prosesSelectObat(i,"open")}),t.YNc(281,_t,2,2,"ng-option",55),t.qZA(),t.YNc(282,At,76,19,"div",56),t.TgZ(283,"div",57)(284,"div",58)(285,"button",59),t.NdJ("click",function(){return a.modalClose()}),t._uU(286,"Batal"),t.qZA(),t.YNc(287,Tt,2,0,"button",60),t.qZA()()()(),t.TgZ(288,"jw-modal",61)(289,"div",51)(290,"h4",52),t._uU(291,"Form Pembayaran"),t.qZA()(),t.TgZ(292,"form",62),t.NdJ("submit",function(){return a.bayar()}),t.TgZ(293,"div",53)(294,"div",31)(295,"label",63),t._uU(296,"Jenis Pembayaran"),t.qZA(),t.TgZ(297,"div",64)(298,"select",65),t.NdJ("ngModelChange",function(i){return a.jenis_pembayaran=i}),t.TgZ(299,"option",66),t._uU(300,"Tunai"),t.qZA(),t.TgZ(301,"option",67),t._uU(302,"Transfer"),t.qZA()(),t.YNc(303,Ut,2,0,"div",68),t.qZA()(),t.YNc(304,qt,6,6,"div",69),t.TgZ(305,"h4",70)(306,"b"),t._uU(307),t.qZA()()(),t.TgZ(308,"div",17)(309,"div",58)(310,"button",59),t.NdJ("click",function(){return a.modalBayarClose()}),t._uU(311,"Batal"),t.qZA(),t.TgZ(312,"button",71),t._uU(313,"Simpan"),t.qZA()()()()(),t.TgZ(314,"ngx-spinner",48)(315,"p",49),t._uU(316," Loading... "),t.qZA()()()),2&e&&(t.xp6(3),t.Q6J("title","Resep")("items",t.DdM(70,Dt))("active_item","Add Resep"),t.xp6(3),t.Q6J("routerLink",t.VKq(71,wt,a.urlBack)),t.xp6(9),t.ekj("active",a.tabPane.pane1),t.xp6(2),t.ekj("active",a.tabPane.pane2),t.xp6(3),t.ekj("active",a.tabPane.pane1)("show",a.tabPane.pane1),t.Q6J("formGroup",a.formTambah),t.xp6(7),t.Oqu(a.formTambah.value.no_rm),t.xp6(6),t.Oqu(a.formTambah.value.jenis_kelamin),t.xp6(7),t.Oqu(a.formTambah.value.no_bpjs),t.xp6(6),t.Oqu(a.formTambah.value.golongan_darah),t.xp6(7),t.Oqu(1==a.formTambah.value.status_bpjs?"Aktif":"Tidak Aktif"),t.xp6(6),t.AsE("( ",a.formTambah.value.kode_phone," ) ",a.dekryp(a.formTambah.value.no_hp),""),t.xp6(7),t.Oqu(a.dekryp(a.formTambah.value.nik)),t.xp6(6),t.Oqu(a.formTambah.value.agama),t.xp6(7),t.Oqu(a.formTambah.value.nama_panggilan),t.xp6(6),t.Oqu(a.formTambah.value.status_perkawinan),t.xp6(7),t.Oqu(a.formTambah.value.nama),t.xp6(6),t.Oqu(a.formTambah.value.pekerjaan),t.xp6(7),t.Oqu(a.formTambah.value.tempat_lahir),t.xp6(6),t.Oqu(a.formTambah.value.kewarganegaraan),t.xp6(7),t.Oqu(a.formTambah.value.tgl_lahir),t.xp6(6),t.Oqu(a.formTambah.value.jenis_alamat),t.xp6(11),t.Oqu(a.formTambah.value.provinsi),t.xp6(6),t.Oqu(a.formTambah.value.kabupaten),t.xp6(6),t.Oqu(a.formTambah.value.kecamatan),t.xp6(6),t.Oqu(a.formTambah.value.desa),t.xp6(6),t.Oqu(a.dekryp(a.formTambah.value.alamat)),t.xp6(1),t.ekj("active",a.tabPane.pane2)("show",a.tabPane.pane2),t.xp6(3),t.Q6J("formGroup",a.formDiagnosa),t.xp6(5),t.hij(" ",a.formDiagnosa.value.alergi," "),t.xp6(5),t.hij(" ",null==a.riwayat?null:a.riwayat.tindakan," "),t.xp6(1),t.Q6J("formGroup",a.formDiagnosaBiaya),t.xp6(8),t.Q6J("options",a.optionsCur),t.xp6(5),t.Q6J("options",a.optionsCur),t.xp6(5),t.Q6J("options",a.optionsCur),t.xp6(5),t.Q6J("options",a.optionsCur),t.xp6(5),t.hij(" ",a.Money(a.formDiagnosaBiaya.value.biaya_tindakan)," "),t.xp6(5),t.Q6J("options",a.optionsCur),t.xp6(6),t.Oqu(a.Money(a.totalObat)),t.xp6(13),t.Oqu(a.Money(a.totalPajak)),t.xp6(6),t.Oqu(a.Money(a.totalAll)),t.xp6(6),t.hij(" ",a.resep_obat," "),t.xp6(28),t.Q6J("ngForOf",a.dataAdd),t.xp6(6),t.Q6J("name","spinner1")("fullScreen",!0),t.xp6(6),t.Oqu(a.title),t.xp6(2),t.Q6J("ngModel",a.id_obat)("virtualScroll",!0)("searchable",!0)("clearable",!0),t.xp6(1),t.Q6J("ngForOf",a.optionObat),t.xp6(1),t.Q6J("ngIf",null!=a.id_obat),t.xp6(5),t.Q6J("ngIf",null!=a.id_obat),t.xp6(11),t.Q6J("ngModel",a.jenis_pembayaran),t.xp6(5),t.Q6J("ngIf",""==a.jenis_pembayaran&&a.submitted),t.xp6(1),t.Q6J("ngIf","transfer"==a.jenis_pembayaran),t.xp6(3),t.hij("TOTAL BAYAR: ",a.Money(a.jumlah_pembayaran),""),t.xp6(7),t.Q6J("name","spinner1")("fullScreen",!0))},directives:[j.L,p.rH,c.JL,c.sg,c.Fj,L.g1,c.JJ,c.u,g.sg,M.Ro,ut.z,D.w9,c.On,D.jq,g.O5,c.EJ,c.YN,c.Kr,c._Y,c.F],styles:[""]}),s})();var St=o(79267),jt=o(156);const Ot=["id_select_poliklinik"],xt=function(){return[]},Bt=[{path:"",redirectTo:"antrian",pathMatch:"full"},{path:"riwayat",component:E},{path:"riwayat/:back",component:E},{path:"antrian",component:(()=>{class s{constructor(e,a,n,i,h,v){this.AntreanPasienService=e,this.router=a,this.spinner=n,this.activatedRoute=i,this.ModulResepService=h,this.daftarPoliklinikService=v,this.dtOptions={},this.datatableElement=l.G,this.listPoliklinik=[],this.type_poli="",this.poli_name="",this.tableAktif="",this.btnDetail=!1,this.btnDelete=!1,this.btnEdit=!1,this.btnSetting=!1,this.btnAdd=!1,this.view=!1}ngOnInit(){let e=JSON.parse(localStorage.getItem("currentUser"));e=e.menu_right,this.btnDetail=this.view=-1!=e.findIndex(a=>"AMATAR1"==a.kode),this.view||m().fire("Warning","Anda tidak mempunyai akses halaman ini","warning").then(()=>{window.location.href="/"}),this.dtOptions=this.showDataTables()}capitalizeFirstLetter(e){return e.charAt(0).toUpperCase()+e.slice(1)}loadListPoliklinik(){this.daftarPoliklinikService.getByAkunKlinik().subscribe(e=>{this.listPoliklinik=e.response})}ButtonCari(){this.reLoadData()}prosesAntrean(e){this.spinner.show("spinner1"),this.ModulResepService.create({id_antrian:e.id_antrian}).subscribe(a=>{"0000"==a.metaData.response_code&&(this.router.navigate(["resep","add",a.response.id_penjualan_resep,e.id_antrian,e.id_pasien,"antrian"]),this.spinner.hide("spinner1"))})}reLoadData(){this.datatableElement.dtInstance.then(e=>{e.ajax.reload()})}showDataTables(){return this.spinner.show("spinner1"),{pageLength:10,serverSide:!0,processing:!0,order:[[0,"ASC"]],ajax:(e,a)=>{Object.assign(e,{nama:"",id_poliklinik:""}),this.AntreanPasienService.getDataTablesResep(e).subscribe(n=>{a("0000"==n.metaData.response_code?{draw:n.response.draw,recordsTotal:n.response.recordsTotal,recordsFiltered:n.response.recordsFiltered,data:n.response.data}:{draw:0,recordsTotal:0,recordsFiltered:0,data:[]}),this.spinner.hide("spinner1")})},columns:[{data:"no_antrian"},{data:"nama"},{data:"nama_sesi"},{data:"proses_antrian"},{data:"status_input_pasien",render:(e,a,n,i)=>"B"==e?"Baru":"Lama"},{data:"tgl_antrian",render:(e,a,n,i)=>b(e).format("DD-MM-YYYY H:m:s")},{orderable:!1,searchable:!1,render:(e,a,n,i)=>'<button class="btn btn-sm btn-orange proses-antrean-data mr-1 mb-2" '+("sudah"==n.proses_antrian?"hidden":"")+'>Add Resep</button>\n\t\t\t\t\t\t<button class="btn btn-sm btn-info detail mb-2 mr-1" '+("sudah"==n.proses_antrian?"":"hidden")+">Detail</button>"}],rowCallback:(e,a,n)=>{const i=this;return $("td .proses-antrean-data",e).on("click",()=>{i.prosesAntrean(a)}),$("td .detail",e).on("click",()=>{i.detail(a)}),e}}}detail(e){this.router.navigate(["resep/detail/"+e.id_penjualan_resep+"/antrian"])}}return s.\u0275fac=function(e){return new(e||s)(t.Y36(St.a),t.Y36(p.F0),t.Y36(M.t2),t.Y36(p.gz),t.Y36(S.k),t.Y36(jt.r))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-view"]],viewQuery:function(e,a){if(1&e&&(t.Gf(l.G,5),t.Gf(Ot,5)),2&e){let n;t.iGM(n=t.CRH())&&(a.datatableElement=n.first),t.iGM(n=t.CRH())&&(a.id_select_poliklinik=n.first)}},decls:32,vars:7,consts:[[1,"content"],[1,"content-block"],[1,"block-header"],[3,"title","items","active_item"],[1,"text-center","pb-3"],[1,"row","clearfix"],[1,"col-xs-12","col-sm-12","col-md-12","col-lg-12"],[1,"card"],[1,"header"],[1,"body"],["width","100%","datatable","",1,"table","table-striped","table-bordered","table-sm",3,"dtOptions"],["bdColor","rgba(0, 0, 0, 0.8)","size","medium","color","#fff","type","ball-clip-rotate-multiple",3,"name","fullScreen"],[2,"color","white"]],template:function(e,a){1&e&&(t.TgZ(0,"section",0)(1,"div",1)(2,"div",2),t._UZ(3,"app-breadcrumb",3),t.qZA(),t.TgZ(4,"h3",4),t._uU(5,"Antrean "),t.qZA(),t.TgZ(6,"div",5)(7,"div",6)(8,"div",7),t._UZ(9,"div",8),t.TgZ(10,"div",9)(11,"table",10)(12,"thead")(13,"tr")(14,"th"),t._uU(15,"No Antrean"),t.qZA(),t.TgZ(16,"th"),t._uU(17,"Nama"),t.qZA(),t.TgZ(18,"th"),t._uU(19,"Nama Sesi"),t.qZA(),t.TgZ(20,"th"),t._uU(21,"Proses Antrean"),t.qZA(),t.TgZ(22,"th"),t._uU(23,"Status Input Pasien"),t.qZA(),t.TgZ(24,"th"),t._uU(25,"Tgl.Antrean"),t.qZA(),t.TgZ(26,"th"),t._uU(27,"Aksi"),t.qZA()()(),t._UZ(28,"tbody"),t.qZA()()()()()(),t.TgZ(29,"ngx-spinner",11)(30,"p",12),t._uU(31," Loading... "),t.qZA()()()),2&e&&(t.xp6(3),t.Q6J("title","Resep")("items",t.DdM(6,xt))("active_item","Antrean"),t.xp6(8),t.Q6J("dtOptions",a.dtOptions),t.xp6(18),t.Q6J("name","spinner1")("fullScreen",!0))},directives:[j.L,l.G,M.Ro],styles:[""]}),s})()},{path:"add/:id/:id_antrian/:id_pasien/:page",component:Ct},{path:"detail/:id/:page",component:et}];let It=(()=>{class s{}return s.\u0275fac=function(e){return new(e||s)},s.\u0275mod=t.oAB({type:s}),s.\u0275inj=t.cJS({imports:[[p.Bz.forChild(Bt)],p.Bz]}),s})();var Jt=o(60795),Nt=o(16270),Yt=o(72293),Rt=o(16169);let Et=(()=>{class s{}return s.\u0275fac=function(e){return new(e||s)},s.\u0275mod=t.oAB({type:s}),s.\u0275inj=t.cJS({imports:[[g.ez,It,D.A0,M.ef,L.Ud,Jt.K,x.kn,l.T,c.u5,c.UX,Nt.z,Z.Aw.forFeature("resep",Yt.u),f.sQ.forFeature([Rt.G])]]}),s})()},76334:(U,k,o)=>{o.d(k,{m:()=>f});var g=o(5e3),Z=o(95305);let f=(()=>{class p{constructor(r){this.authService=r}getUrlModule(r){return this.authService.currentUserValue.repo.find(_=>_.key_repo==r).url_repo}list24Hours(r=60,m="05:00"){let d=this.generateHoursInterval(0,1440,r),_=d.findIndex(T=>T==m),b=d.slice(_,d.length-1),t=d.slice(0,_);return b.concat(t)}generateHoursInterval(r,m,d){const _=[];for(let T=0;r<1440&&!(r>m);T++){var b=Math.floor(r/60),t=r%60;_[T]=("0"+b%24).slice(-2)+":"+("0"+t).slice(-2),r+=d}return _}}return p.\u0275fac=function(r){return new(r||p)(g.LFG(Z.e))},p.\u0275prov=g.Yz7({token:p,factory:p.\u0275fac,providedIn:"root"}),p})()},94554:(U,k,o)=>{o.d(k,{r:()=>f});var g=o(8202),Z=o(5e3);let f=(()=>{class p{formatRupiah(r){if(""!=r&&null!=r&&null!=r&&0!=r){var d=(r=r.toString().replace(".00")).replace(/[^,\d]/g,"").toString().split(","),_=d[0].length%3,b=d[0].substr(0,_),t=d[0].substr(_).match(/\d{3}/gi);return t&&(b+=(_?".":"")+t.join(".")),(b=null!=d[1]?b+","+d[1]:b)?"Rp "+b+",00":""}return"Rp 0,00"}currency(){return{align:"left",allowNegative:!0,allowZero:!0,decimal:",",precision:2,prefix:"Rp ",suffix:"",thousands:".",nullable:!0,min:null,max:null,inputMode:g.fF.NATURAL}}}return p.\u0275fac=function(r){return new(r||p)},p.\u0275prov=Z.Yz7({token:p,factory:p.\u0275fac,providedIn:"root"}),p})()},88544:(U,k,o)=>{o.d(k,{p:()=>Z});var g=o(5e3);let Z=(()=>{class f{isNumber(l){return l.match(/^[0-9]+$/)?l:l.replace(/[^0-9]/g,"")}isAlpha(l){return l.match(/^[A-Za-z]+$/)?l:l.replace(/[^A-Za-z]/g,"")}Number(l){const r=l.which?l.which:l.keyCode;return!(46!=r||l.target.value.indexOf(".")>-1)||!(r>31&&(r<48||r>57))}}return f.\u0275fac=function(l){return new(l||f)},f.\u0275prov=g.Yz7({token:f,factory:f.\u0275fac,providedIn:"root"}),f})()},51693:(U,k,o)=>{o.d(k,{z:()=>p});var g=o(5e3),Z=o(44151);const f=["*"];let p=(()=>{class l{constructor(m,d){this.modalService=m,this.el=d,this.element=d.nativeElement}ngOnInit(){this.id?(document.body.appendChild(this.element),this.element.addEventListener("click",m=>{}),this.modalService.add(this)):console.error("modal must have an id")}ngOnDestroy(){this.modalService.remove(this.id),this.element.remove()}open(){this.element.style.display="block",document.body.classList.add("jw-modal-open")}close(){document.body.classList.remove("jw-modal-open"),this.element.classList.add("close"),setTimeout(()=>{this.element.classList.remove("close"),this.element.style.display="none"},900)}}return l.\u0275fac=function(m){return new(m||l)(g.Y36(Z.Z),g.Y36(g.SBq))},l.\u0275cmp=g.Xpm({type:l,selectors:[["jw-modal"]],inputs:{id:"id"},ngContentSelectors:f,decls:4,vars:0,consts:[[1,"jw-modal"],[1,"jw-modal-body"],[1,"jw-modal-background"]],template:function(m,d){1&m&&(g.F$t(),g.TgZ(0,"div",0)(1,"div",1),g.Hsn(2),g.qZA()(),g._UZ(3,"div",2))},styles:["jw-modal{display:none}jw-modal .open{display:none}jw-modal .jw-modal{position:fixed;inset:0;background-color:#eeeeee8e;z-index:1000;overflow:auto}jw-modal .jw-modal .jw-modal-body{animation:fadein .5s;padding:10px 20px;background:#fff;margin:30px auto;width:650px;border-radius:2%;position:relative;z-index:1050}@media (max-width: 767px){jw-modal .jw-modal .jw-modal-body{margin:30px auto;width:calc(100% - 25px)}}jw-modal .jw-modal .jw-modal-body-lg{padding:20px;background:#fff;margin:40px auto;width:900px auto}jw-modal .jw-modal-background{position:fixed;inset:0;background-color:#eeeeee8e;opacity:.75;z-index:900}jw-modal.close .jw-modal .jw-modal-body{animation:unfoldOut .5s .3s cubic-bezier(.165,.84,.44,1) forwards}body.jw-modal-open{overflow:hidden}body.jw-modal-close{overflow:hidden;animation:unfoldOut .5s .3s cubic-bezier(.165,.84,.44,1) forwards}@keyframes fadein{0%{opacity:0}to{opacity:1}}@keyframes unfoldIn{0%{transform:scaleY(.005) scaleX(0)}50%{transform:scaleY(.005) scaleX(1)}to{transform:scaleY(1) scaleX(1)}}@keyframes unfoldOut{0%{transform:scaleY(1) scaleX(1)}50%{transform:scaleY(.005) scaleX(1)}to{transform:scaleY(.005) scaleX(0)}}\n"],encapsulation:2}),l})()},16270:(U,k,o)=>{o.d(k,{z:()=>f});var g=o(69808),Z=o(5e3);let f=(()=>{class p{}return p.\u0275fac=function(r){return new(r||p)},p.\u0275mod=Z.oAB({type:p}),p.\u0275inj=Z.cJS({imports:[[g.ez]]}),p})()},44151:(U,k,o)=>{o.d(k,{Z:()=>Z});var g=o(5e3);let Z=(()=>{class f{constructor(){this.modals=[]}add(l){this.modals.push(l)}remove(l){this.modals=this.modals.filter(r=>r.id!==l)}open(l){this.modals.find(m=>m.id===l).open()}close(l){this.modals.find(m=>m.id===l).close()}}return f.\u0275fac=function(l){return new(l||f)},f.\u0275prov=g.Yz7({token:f,factory:f.\u0275fac,providedIn:"root"}),f})()},15861:(U,k,o)=>{function g(f,p,l,r,m,d,_){try{var b=f[d](_),t=b.value}catch(T){return void l(T)}b.done?p(t):Promise.resolve(t).then(r,m)}function Z(f){return function(){var p=this,l=arguments;return new Promise(function(r,m){var d=f.apply(p,l);function _(t){g(d,r,m,_,b,"next",t)}function b(t){g(d,r,m,_,b,"throw",t)}_(void 0)})}}o.d(k,{Z:()=>Z})}}]);