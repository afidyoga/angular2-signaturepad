"use strict";(self.webpackChunkangularlight=self.webpackChunkangularlight||[]).push([[1401],{86307:(A,Z,l)=>{l.d(Z,{m:()=>u});var g=l(5e3),s=l(95305);let u=(()=>{class c{constructor(p){this.authService=p}getUrlModule(p){return this.authService.currentUserValue.repo.find(v=>v.key_repo==p).url_repo}}return c.\u0275fac=function(p){return new(p||c)(g.LFG(s.e))},c.\u0275prov=g.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c})()},83155:(A,Z,l)=>{l.r(Z),l.d(Z,{FakturPembelianModule:()=>qe});var g=l(69808),s=l(65620),u=l(36642),c=l(64035),_=l(65415),p=l(2454),m=l.n(p);const S=(0,s.PH)("[RETUR PEMBELIAN] add initial",(0,s.Ky)()),P=(0,s.PH)("[RETUR PEMBELIAN] add success",(0,s.Ky)()),B=(0,s.PH)("[RETUR PEMBELIAN] add failure ",(0,s.Ky)()),V=(0,s.PH)("[RETUR PEMBELIAN] update initial",(0,s.Ky)()),j=(0,s.PH)("[RETUR PEMBELIAN] update success",(0,s.Ky)()),Y=(0,s.PH)("[RETUR PEMBELIAN] update failure",(0,s.Ky)()),W=(0,s.PH)("[RETUR PEMBELIAN] get byid initial",(0,s.Ky)()),z=(0,s.PH)("[RETUR PEMBELIAN] get byid success",(0,s.Ky)()),J=(0,s.PH)("[RETUR PEMBELIAN] get byid failure",(0,s.Ky)()),L=(0,s.PH)("[RETUR PEMBELIAN] delete initial",(0,s.Ky)()),Q=(0,s.PH)("[RETUR PEMBELIAN] delete success",(0,s.Ky)()),R=(0,s.PH)("[RETUR PEMBELIAN] delete failure",(0,s.Ky)()),ut=(0,s.PH)("[RETUR PEMBELIAN] clear data "),O=(0,s.PH)("[RETUR PEMBELIAN] table data");class U{}var y=l(15439),t=l(5e3),X=l(44151),M=l(18805),K=l(94554),x=l(50072),H=l(33399);const _t=function(){return["../add"]};function ct(n,r){1&n&&(t.TgZ(0,"button",14),t._UZ(1,"i",15),t._uU(2," Faktur"),t.qZA()),2&n&&t.Q6J("routerLink",t.DdM(1,_t))}const pt=function(){return[]};let mt=(()=>{class n{constructor(e,a,o,i,d,f){this.modalService=e,this.ModulReturPembelianService=a,this.router=o,this.money=i,this.spinner=d,this.store=f,this.datatableElement=_.G,this.dtOptions={},this.dataBarang=new U,this.btnDetail=!1,this.btnDelete=!1,this.btnEdit=!1,this.btnSetting=!1,this.btnAdd=!1,this.view=!1,this.getState=this.store.select("faktur_pembelian")}ngOnInit(){this.spinner.show("spinner1");let e=JSON.parse(localStorage.getItem("currentUser"));e=e.menu_right,this.btnAdd=this.btnDelete=this.btnEdit=-1!=e.findIndex(a=>"ATPBFB1"==a.kode),this.btnDetail=this.view=-1!=e.findIndex(a=>"ATPBFB9"==a.kode),this.view||m().fire("Warning","Anda tidak mempunyai akses halaman ini","warning").then(()=>{window.location.href="/"}),this.dtOptions=this.showDataTables(),setTimeout(()=>{this.spinner.hide("spinner1")},400),this.getState.subscribe(a=>{this.reloadTable=a.reloadTable,!0===this.reloadTable&&this.reLoadData()})}reLoadData(){this.datatableElement.dtInstance.then(e=>{e.ajax.reload()})}showDataTables(){let e=this;return{pageLength:10,serverSide:!0,processing:!0,order:[],ajax:(a,o)=>{this.ModulReturPembelianService.listDatatables(a).subscribe(i=>{o({draw:i.response.draw,recordsTotal:i.response.recordsTotal,recordsFiltered:i.response.recordsFiltered,data:i.response.data})})},columns:[{orderable:!1,searchable:!1,render:(a,o,i,d)=>d.row+1+d.settings._iDisplayStart},{data:"tgl_faktur_unix",render:(a,o,i,d)=>y(new Date(a)).format("DD-MM-YYYY")},{data:"nomor_faktur"},{data:"nama_supplier"},{data:"nama_lengkap"},{data:"pembayaran"},{data:"total_harga",render:(a,o,i,d)=>e.money.formatRupiah(parseInt(a.replace(".",",")))},{orderable:!1,searchable:!1,render:(a,o,i,d)=>'<button class="btn btn-sm btn-info detail">Detail</button>'}],rowCallback:(a,o,i)=>{const d=this;return $("td .detail",a).on("click",()=>{d.detail(o)}),a}}}detail(e){this.router.navigate(["faktur/faktur-pembelian/detail",e.id_pembelian])}nonAktif(e){m().fire({title:"Apakah anda yakin akan menghapus data ini ?",icon:"warning",showCancelButton:!0,allowOutsideClick:!1,confirmButtonText:"Ya, hapus saja!",cancelButtonText:"Tidak, Batalkan"}).then(a=>{a.value&&(this.spinner.show("spinner1"),this.store.dispatch(L({payload:{id:e.id_pembelian}})),setTimeout(()=>{this.spinner.hide("spinner1")},400),this.showDataTables())})}ngOnDestroy(){document.body.classList.remove("jw-modal-open")}btnOpenModal(){this.modalService.open("modalFormContent")}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(X.Z),t.Y36(M.V),t.Y36(c.F0),t.Y36(K.r),t.Y36(x.t2),t.Y36(s.yh))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-view"]],viewQuery:function(e,a){if(1&e&&t.Gf(_.G,5),2&e){let o;t.iGM(o=t.CRH())&&(a.datatableElement=o.first)}},decls:38,vars:8,consts:[[1,"content"],[1,"content-block"],[1,"block-header"],[3,"title","items","active_item"],[1,"text-center"],[1,"row","clearfix"],[1,"col-xs-12","col-sm-12","col-md-12","col-lg-12"],["type","button","class","btn btn-tambah btn-lg mb-3",3,"routerLink",4,"ngIf"],[1,"card"],[1,"header"],[1,"body"],["width","100%","datatable","",1,"table","tabl-sm","table-striped","table-bordered","table-sm",3,"dtOptions"],["bdColor","rgba(0, 0, 0, 0.8)","size","medium","color","#fff","type","ball-clip-rotate-multiple",3,"name","fullScreen"],[2,"color","white"],["type","button",1,"btn","btn-tambah","btn-lg","mb-3",3,"routerLink"],[1,"fas","fa-plus"]],template:function(e,a){1&e&&(t.TgZ(0,"section",0)(1,"div",1)(2,"div",2),t._UZ(3,"app-breadcrumb",3),t.qZA(),t.TgZ(4,"h3",4),t._uU(5,"Faktur Pembelian"),t.qZA(),t.TgZ(6,"div",5)(7,"div",6),t.YNc(8,ct,3,2,"button",7),t.TgZ(9,"div",8)(10,"div",9)(11,"h2")(12,"strong"),t._uU(13,"Faktur Pembelian"),t.qZA()()(),t.TgZ(14,"div",10)(15,"table",11)(16,"thead")(17,"tr")(18,"th"),t._uU(19,"No"),t.qZA(),t.TgZ(20,"th"),t._uU(21,"Tgl. Faktur"),t.qZA(),t.TgZ(22,"th"),t._uU(23,"No. Faktur"),t.qZA(),t.TgZ(24,"th"),t._uU(25,"PBF/Supplier"),t.qZA(),t.TgZ(26,"th"),t._uU(27,"Pencatat"),t.qZA(),t.TgZ(28,"th"),t._uU(29,"Pembayaran"),t.qZA(),t.TgZ(30,"th"),t._uU(31,"Total"),t.qZA(),t.TgZ(32,"th"),t._uU(33,"Action"),t.qZA()()(),t._UZ(34,"tbody"),t.qZA()()()()()(),t.TgZ(35,"ngx-spinner",12)(36,"p",13),t._uU(37," Loading... "),t.qZA()()()),2&e&&(t.xp6(3),t.Q6J("title","Faktur")("items",t.DdM(7,pt))("active_item","Faktur Pembelian"),t.xp6(5),t.Q6J("ngIf",a.btnAdd),t.xp6(7),t.Q6J("dtOptions",a.dtOptions),t.xp6(20),t.Q6J("name","spinner1")("fullScreen",!0))},directives:[H.L,g.O5,c.rH,_.G,x.Ro],styles:[""]}),n})();var gt=l(15861),h=l(93075),ht=l(88544),ft=l(60269),bt=l(51531),Zt=l(22346),C=l(24376),G=l(67236),Tt=l(51693),tt=l(8202);function vt(n,r){if(1&n&&(t.TgZ(0,"ng-option",64),t._uU(1),t.qZA()),2&n){const e=r.$implicit;t.Q6J("value",e.id_supplier),t.xp6(1),t.Oqu(e.nama_supplier)}}function kt(n,r){1&n&&(t.TgZ(0,"div",65),t._uU(1," Supplier tidak boleh kosong "),t.qZA())}function At(n,r){1&n&&(t.TgZ(0,"div",65),t._uU(1," Nomor faktur tidak boleh kosong "),t.qZA())}function xt(n,r){1&n&&(t.TgZ(0,"div",65),t._uU(1," Tanggal faktur tidak boleh kosong "),t.qZA())}function qt(n,r){1&n&&(t.TgZ(0,"div",65),t._uU(1," Tanggal trima tidak boleh kosong "),t.qZA())}function Ut(n,r){1&n&&(t.TgZ(0,"div",65),t._uU(1," Pembayaran tidak boleh kosong "),t.qZA())}function yt(n,r){1&n&&(t.TgZ(0,"div",65),t._uU(1," Jatuh tempo tidak boleh kosong "),t.qZA())}function Ct(n,r){1&n&&(t.TgZ(0,"div",65),t._uU(1," PPN tidak boleh kosong "),t.qZA())}function Et(n,r){1&n&&(t.TgZ(0,"label",66)(1,"strong"),t._uU(2,"Belum ada obat pada faktur ini"),t.qZA()())}function Ot(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.qZA(),t.TgZ(13,"td"),t._uU(14),t.qZA(),t.TgZ(15,"td"),t._uU(16),t.qZA(),t.TgZ(17,"td")(18,"button",70),t.NdJ("click",function(){const o=t.CHM(e),i=o.index,d=o.$implicit;return t.oxw(2).setEdit(i,d,1)}),t._uU(19,"Edit"),t.qZA(),t.TgZ(20,"button",71),t.NdJ("click",function(){const i=t.CHM(e).index;return t.oxw(2).deleteItem(i,1)}),t._uU(21,"Hapus"),t.qZA()()()}if(2&n){const e=r.$implicit,a=r.index,o=t.oxw(2);t.xp6(2),t.Oqu(a+1),t.xp6(2),t.Oqu(e.obat.nama_obat),t.xp6(2),t.Oqu(e.no_batch),t.xp6(2),t.Oqu(o.convertDate(e.tanggal_ed)),t.xp6(2),t.Oqu(e.satuan_qty+" "+e.satuan),t.xp6(2),t.Oqu(o.Money(e.satuan_harga)+"/"+e.satuan),t.xp6(2),t.hij(" ",e.diskon_value?"persen"==e.jenis_diskon?e.diskon_value+"%":o.Money(e.diskon_value):"-"," "),t.xp6(2),t.Oqu(o.Money(e.sub_total))}}function Mt(n,r){if(1&n&&(t.TgZ(0,"div",67)(1,"table",68)(2,"thead")(3,"tr")(4,"th"),t._uU(5,"No"),t.qZA(),t.TgZ(6,"th"),t._uU(7,"Barang"),t.qZA(),t.TgZ(8,"th"),t._uU(9,"Batch"),t.qZA(),t.TgZ(10,"th"),t._uU(11,"ED"),t.qZA(),t.TgZ(12,"th"),t._uU(13,"Jumlah Satuan"),t.qZA(),t.TgZ(14,"th"),t._uU(15,"Harga Beli"),t.qZA(),t.TgZ(16,"th"),t._uU(17,"Diskon"),t.qZA(),t.TgZ(18,"th"),t._uU(19,"Subtotal"),t.qZA(),t.TgZ(20,"td"),t._uU(21,"Action"),t.qZA()()(),t.TgZ(22,"tbody"),t.YNc(23,Ot,22,8,"tr",69),t.qZA()()()),2&n){const e=t.oxw();t.xp6(23),t.Q6J("ngForOf",e.listObat)}}function It(n,r){1&n&&(t.TgZ(0,"label",66)(1,"strong"),t._uU(2,"Belum ada barang pada faktur ini"),t.qZA()())}function Ft(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.qZA(),t.TgZ(13,"td"),t._uU(14),t.qZA(),t.TgZ(15,"td"),t._uU(16),t.qZA(),t.TgZ(17,"td")(18,"button",70),t.NdJ("click",function(){const o=t.CHM(e),i=o.index,d=o.$implicit;return t.oxw(2).setEdit(i,d,2)}),t._uU(19,"Edit"),t.qZA(),t.TgZ(20,"button",71),t.NdJ("click",function(){const i=t.CHM(e).index;return t.oxw(2).deleteItem(i,2)}),t._uU(21,"Hapus"),t.qZA()()()}if(2&n){const e=r.$implicit,a=r.index,o=t.oxw(2);t.xp6(2),t.Oqu(a+1),t.xp6(2),t.Oqu(e.alat.nama_alat_kesehatan),t.xp6(2),t.Oqu(e.no_batch),t.xp6(2),t.Oqu(o.convertDate(e.tanggal_ed)),t.xp6(2),t.Oqu(e.satuan_qty+" "+e.satuan),t.xp6(2),t.AsE("",o.Money(e.satuan_harga)," ","/"+e.satuan,""),t.xp6(2),t.hij(" ",e.diskon_value?"persen"==e.jenis_diskon?e.diskon_value+"%":o.Money(e.diskon_value):"-"," "),t.xp6(2),t.Oqu(o.Money(e.sub_total))}}function wt(n,r){if(1&n&&(t.TgZ(0,"div",67)(1,"table",68)(2,"thead")(3,"tr")(4,"th"),t._uU(5,"No"),t.qZA(),t.TgZ(6,"th"),t._uU(7,"Barang"),t.qZA(),t.TgZ(8,"th"),t._uU(9,"Batch"),t.qZA(),t.TgZ(10,"th"),t._uU(11,"ED"),t.qZA(),t.TgZ(12,"th"),t._uU(13,"Jumlah Satuan"),t.qZA(),t.TgZ(14,"th"),t._uU(15,"Harga Beli"),t.qZA(),t.TgZ(16,"th"),t._uU(17,"Diskon"),t.qZA(),t.TgZ(18,"th"),t._uU(19,"Subtotal"),t.qZA()()(),t.TgZ(20,"tbody"),t.YNc(21,Ft,22,9,"tr",69),t.qZA()()()),2&n){const e=t.oxw();t.xp6(21),t.Q6J("ngForOf",e.listBarang)}}function Dt(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"tr")(1,"td",72),t._uU(2,"PPN"),t.qZA(),t.TgZ(3,"td",73)(4,"input",74),t.NdJ("keypress",function(o){return t.CHM(e),t.oxw().isNumber(o)})("keyup",function(){return t.CHM(e),t.oxw().setTotal()}),t.qZA()(),t.TgZ(5,"td",47)(6,"span"),t._uU(7),t.qZA()()()}if(2&n){const e=t.oxw();t.xp6(7),t.Oqu(e.Money(e.ppn))}}function Nt(n,r){if(1&n&&(t.TgZ(0,"ng-option",64),t._uU(1),t.qZA()),2&n){const e=r.$implicit;t.Q6J("value",e),t.xp6(1),t.Oqu(e.nama_obat)}}function St(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"ng-select",75),t.NdJ("ngModelChange",function(o){return t.CHM(e),t.oxw().id_obat=o})("change",function(o){return t.CHM(e),t.oxw().selectData(o,1)})("search",function(o){return t.CHM(e),t.oxw().prosesSelectObat(o,"search")})("scrollToEnd",function(o){return t.CHM(e),t.oxw().prosesSelectObat(o,"last_page")})("open",function(o){return t.CHM(e),t.oxw().prosesSelectObat(o,"open")}),t.YNc(1,Nt,2,2,"ng-option",21),t.qZA()}if(2&n){const e=t.oxw();t.Q6J("virtualScroll",!0)("ngModel",e.id_obat)("searchable",!0)("clearable",!0),t.xp6(1),t.Q6J("ngForOf",e.optionObat)}}function Pt(n,r){if(1&n&&(t.TgZ(0,"ng-option",64),t._uU(1),t.qZA()),2&n){const e=r.$implicit;t.Q6J("value",e),t.xp6(1),t.Oqu(e.nama_alat_kesehatan)}}function Bt(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"ng-select",76),t.NdJ("ngModelChange",function(o){return t.CHM(e),t.oxw().id_alat_kesehatan=o})("change",function(o){return t.CHM(e),t.oxw().selectData(o,2)})("search",function(o){return t.CHM(e),t.oxw().prosesSelectAlat(o,"search")})("scrollToEnd",function(o){return t.CHM(e),t.oxw().prosesSelectAlat(o,"last_page")})("open",function(o){return t.CHM(e),t.oxw().prosesSelectAlat(o,"open")}),t.YNc(1,Pt,2,2,"ng-option",21),t.qZA()}if(2&n){const e=t.oxw();t.Q6J("ngModel",e.id_alat_kesehatan)("virtualScroll",!0)("searchable",!0)("clearable",!0),t.xp6(1),t.Q6J("ngForOf",e.optionAlatKesehatan)}}function jt(n,r){if(1&n&&(t.TgZ(0,"h3")(1,"strong"),t._uU(2),t.qZA()()),2&n){const e=t.oxw(2);t.xp6(2),t.Oqu(e.selectDataObat.nama_obat)}}function Yt(n,r){if(1&n&&(t.TgZ(0,"h3")(1,"strong"),t._uU(2),t.qZA()()),2&n){const e=t.oxw(2);t.xp6(2),t.Oqu(e.selectDataAlat.nama_alat_kesehatan)}}function Jt(n,r){1&n&&(t.TgZ(0,"div",65),t._uU(1," Jumlah tidak boleh kosong "),t.qZA())}function Lt(n,r){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&n){const e=r.item;t.xp6(1),t.Oqu(e.nama_kemasan?e.nama_kemasan+" ("+e.target_qty+" "+e.target_kemasan+")":"")}}function Qt(n,r){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&n){const e=r.item;t.xp6(1),t.Oqu(e.nama_kemasan?e.nama_kemasan+" ("+e.target_qty+" "+e.target_kemasan+")":"")}}function Rt(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"ng-select",96),t.NdJ("change",function(o){t.CHM(e);const i=t.oxw(2);return i.setKemasan(o,i.isAddObat)}),t.YNc(1,Lt,2,1,"ng-template",97),t.YNc(2,Qt,2,1,"ng-template",98),t.qZA()}if(2&n){const e=t.oxw(2);t.ekj("border-danger",e.formBarang.controls.satuan.hasError("required")&&e.submitted),t.Q6J("virtualScroll",!0)("items",e.selectDataObat.obat_kemasan)("searchable",!0)("clearable",!0)}}function Kt(n,r){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&n){const e=r.item;t.xp6(1),t.Oqu(e.nama_kemasan?e.nama_kemasan+" ("+e.target_qty+" "+e.target_kemasan+")":"")}}function Ht(n,r){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&n){const e=r.item;t.xp6(1),t.Oqu(e.nama_kemasan?e.nama_kemasan+" ("+e.target_qty+" "+e.target_kemasan+")":"")}}function Gt(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"ng-select",99),t.NdJ("change",function(o){t.CHM(e);const i=t.oxw(2);return i.setKemasan(o,i.isAddObat)}),t.YNc(1,Kt,2,1,"ng-template",97),t.YNc(2,Ht,2,1,"ng-template",98),t.qZA()}if(2&n){const e=t.oxw(2);t.ekj("border-danger",e.formBarang.controls.satuan.hasError("required")&&e.submitted),t.Q6J("virtualScroll",!0)("items",e.selectDataAlat.alat_kesehatan_kemasan)("searchable",!0)("clearable",!0)}}function $t(n,r){1&n&&(t.TgZ(0,"div",65),t._uU(1," Satuan tidak boleh kosong "),t.qZA())}function Vt(n,r){if(1&n&&(t.TgZ(0,"span",100),t._uU(1),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.hij(" /",e.formBarang.value.satuan," ")}}function Wt(n,r){1&n&&(t.TgZ(0,"div",65),t._uU(1," Harga beli tidak boleh kosong "),t.qZA())}function zt(n,r){1&n&&(t.TgZ(0,"div",65),t._uU(1," Jenis diskon tidak boleh kosong "),t.qZA())}function Xt(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"input",101),t.NdJ("keypress",function(o){return t.CHM(e),t.oxw(2).isNumber(o)}),t.qZA()}if(2&n){const e=t.oxw(2);t.ekj("border-danger",e.formBarang.controls.diskon_value.hasError("required")&&e.submitted)}}function te(n,r){if(1&n&&t._UZ(0,"input",102),2&n){const e=t.oxw(2);t.ekj("border-danger",e.formBarang.controls.diskon_value.hasError("required")&&e.submitted),t.Q6J("options",e.optionsCur)}}function ee(n,r){1&n&&(t.TgZ(0,"div",65),t._uU(1," Diskon tidak boleh kosong "),t.qZA())}function ae(n,r){1&n&&(t.TgZ(0,"div",65),t._uU(1," Tanggal ED tidak boleh kosong "),t.qZA())}function ne(n,r){1&n&&(t.TgZ(0,"div",65),t._uU(1," No batch tidak boleh kosong "),t.qZA())}const I=function(){return{adaptivePosition:!0,dateInputFormat:"DD-MM-YYYY",returnFocusToInput:!0}};function oe(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"div",77),t.YNc(1,jt,3,1,"h3",48),t.YNc(2,Yt,3,1,"h3",48),t.TgZ(3,"div",78)(4,"label",79),t._uU(5,"Jumlah"),t.TgZ(6,"span",18),t._uU(7,"*"),t.qZA()(),t.TgZ(8,"div",80)(9,"input",81),t.NdJ("keypress",function(o){return t.CHM(e),t.oxw().isNumber(o)}),t.qZA(),t.YNc(10,Jt,2,0,"div",22),t.qZA(),t.TgZ(11,"div",82),t.YNc(12,Rt,3,6,"ng-select",83),t.YNc(13,Gt,3,6,"ng-select",84),t.YNc(14,$t,2,0,"div",22),t.qZA()(),t.TgZ(15,"div",78)(16,"label",79),t._uU(17,"Harga Beli"),t.TgZ(18,"span",18),t._uU(19,"*"),t.qZA()(),t.TgZ(20,"div",80)(21,"div",85),t._UZ(22,"input",86),t.YNc(23,Vt,2,1,"span",87),t.qZA(),t.YNc(24,Wt,2,0,"div",22),t.qZA()(),t.TgZ(25,"div",78)(26,"label",79),t._uU(27,"Diskon"),t.TgZ(28,"span",18),t._uU(29,"*"),t.qZA()(),t.TgZ(30,"div",80)(31,"select",88)(32,"option",89),t._uU(33,"%"),t.qZA(),t.TgZ(34,"option",90),t._uU(35,"Rp"),t.qZA()(),t.YNc(36,zt,2,0,"div",22),t.qZA(),t.TgZ(37,"div",80),t.YNc(38,Xt,1,2,"input",91),t.YNc(39,te,1,3,"input",92),t.YNc(40,ee,2,0,"div",22),t.qZA()(),t.TgZ(41,"h5",93)(42,"strong"),t._uU(43,"Info Batch"),t.qZA()(),t.TgZ(44,"div",78)(45,"label",79),t._uU(46,"Tanggal ED"),t.TgZ(47,"span",18),t._uU(48,"*"),t.qZA()(),t.TgZ(49,"div",80)(50,"div",19),t._UZ(51,"input",94),t.TgZ(52,"span",28),t.NdJ("click",function(){return t.CHM(e),t.oxw().onFocus("tgl4")}),t._UZ(53,"i",29),t.qZA()(),t.YNc(54,ae,2,0,"div",22),t.qZA()(),t.TgZ(55,"div",78)(56,"label",79),t._uU(57,"No. Batch"),t.TgZ(58,"span",18),t._uU(59,"*"),t.qZA()(),t.TgZ(60,"div",80),t._UZ(61,"input",95),t.YNc(62,ne,2,0,"div",22),t.qZA()()()}if(2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.isAddObat),t.xp6(1),t.Q6J("ngIf",e.isAddAlatKesehatan),t.xp6(7),t.ekj("border-danger",e.formBarang.controls.satuan_qty.hasError("required")&&e.submitted),t.xp6(1),t.Q6J("ngIf",e.formBarang.controls.satuan_qty.hasError("required")&&e.submitted),t.xp6(2),t.Q6J("ngIf",e.isAddObat),t.xp6(1),t.Q6J("ngIf",e.isAddAlatKesehatan),t.xp6(1),t.Q6J("ngIf",e.formBarang.controls.satuan.hasError("required")&&e.submitted),t.xp6(8),t.ekj("border-danger",e.formBarang.controls.satuan_harga.hasError("required")&&e.submitted),t.Q6J("options",e.optionsCur),t.xp6(1),t.Q6J("ngIf",!e.formBarang.controls.satuan.hasError("required")),t.xp6(1),t.Q6J("ngIf",e.formBarang.controls.satuan_harga.hasError("required")&&e.submitted),t.xp6(7),t.ekj("border-danger",e.formBarang.controls.jenis_diskon.hasError("required")&&e.submitted),t.xp6(5),t.Q6J("ngIf",e.formBarang.controls.jenis_diskon.hasError("required")&&e.submitted),t.xp6(2),t.Q6J("ngIf","persen"==e.formBarang.value.jenis_diskon),t.xp6(1),t.Q6J("ngIf","rupiah"==e.formBarang.value.jenis_diskon),t.xp6(1),t.Q6J("ngIf",e.formBarang.controls.diskon_value.hasError("required")&&e.submitted),t.xp6(11),t.ekj("border-danger",e.formBarang.controls.tanggal_ed.hasError("required")&&e.submitted),t.Q6J("bsConfig",t.DdM(27,I))("outsideClick",!0),t.xp6(3),t.Q6J("ngIf",e.formBarang.controls.tanggal_ed.hasError("required")&&e.submitted),t.xp6(7),t.ekj("border-danger",e.formBarang.controls.no_batch.hasError("required")&&e.submitted),t.xp6(1),t.Q6J("ngIf",e.formBarang.controls.no_batch.hasError("required")&&e.submitted)}}function ie(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"div",103)(1,"div",104)(2,"button",105),t.NdJ("click",function(){return t.CHM(e),t.oxw().modalClose()}),t._uU(3,"Batal"),t.qZA(),t.TgZ(4,"button",106),t._uU(5,"Simpan"),t.qZA()()()}}function re(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"div",103)(1,"div",104)(2,"button",105),t.NdJ("click",function(){return t.CHM(e),t.oxw().modalClose()}),t._uU(3,"Batal"),t.qZA()()()}}const se=function(){return["Faktur"]},le=function(){return["../view"]};function ue(n,r){if(1&n&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.qZA(),t.TgZ(13,"td"),t._uU(14),t.qZA(),t.TgZ(15,"td"),t._uU(16),t.qZA()()),2&n){const e=r.$implicit,a=r.index,o=t.oxw(2);t.xp6(2),t.Oqu(a+1),t.xp6(2),t.Oqu(e.nama_obat),t.xp6(2),t.Oqu(e.no_batch),t.xp6(2),t.Oqu(e.tanggal_ed),t.xp6(2),t.Oqu(e.satuan_qty+" "+e.satuan),t.xp6(2),t.Oqu(o.Money(e.satuan_harga)),t.xp6(2),t.Oqu(o.Money(e.diskon_rupiah)),t.xp6(2),t.Oqu(o.subList(e.total_harga,e.diskon_rupiah))}}function _e(n,r){if(1&n&&(t.TgZ(0,"tbody"),t.YNc(1,ue,17,8,"tr",24),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.detailFaktur.pembelian_detail)}}function ce(n,r){if(1&n&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.qZA(),t.TgZ(13,"td"),t._uU(14),t.qZA(),t.TgZ(15,"td"),t._uU(16),t.qZA()()),2&n){const e=r.$implicit,a=r.index,o=t.oxw(2);t.xp6(2),t.Oqu(a+1),t.xp6(2),t.Oqu(e.nama_alat_kesehatan),t.xp6(2),t.Oqu(e.no_batch),t.xp6(2),t.Oqu(e.tanggal_ed),t.xp6(2),t.Oqu(e.satuan_qty+" "+e.satuan),t.xp6(2),t.Oqu(o.Money(e.satuan_harga)),t.xp6(2),t.Oqu(o.Money(e.diskon_rupiah)),t.xp6(2),t.Oqu(o.subList(e.total_harga,e.diskon_rupiah))}}function pe(n,r){if(1&n&&(t.TgZ(0,"tbody"),t.YNc(1,ce,17,8,"tr",24),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.detailFaktur.pembelian_alat_kesehatan)}}function me(n,r){if(1&n&&(t.TgZ(0,"tr")(1,"td",25),t._uU(2,"PPN"),t.qZA(),t.TgZ(3,"td",26),t._uU(4),t.qZA(),t.TgZ(5,"td",20)(6,"span"),t._uU(7),t.qZA()()()),2&n){const e=t.oxw();t.xp6(4),t.hij(" ",e.detailFaktur.ppn_nilai," % "),t.xp6(3),t.Oqu(e.Money(e.ppn))}}const ge=function(){return["Faktur"]},he=function(){return["../../view"]},fe=[{path:"",redirectTo:"view",pathMatch:"full"},{path:"view",component:mt},{path:"add",component:(()=>{class n{constructor(e,a,o,i,d,f,N,Ue,ye,Ce,Ee){this.modalService=e,this.ModulReturPembelianService=a,this.router=o,this.spinner=i,this.fb=d,this.validate=f,this.money=N,this.store=Ue,this.modulSupplierService=ye,this.obatService=Ce,this.alatKesehatanService=Ee,this.vbInfoObat=!1,this.vbFormInputModal=!1,this.vbNotifdataFakturObatKosong=!1,this.vbNotifdataFakturAlatKosong=!1,this.datatableElement=_.G,this.dtOptions={},this.submitted=!1,this.savefaktur=!1,this.optionSupplier=[],this.optionObat=[],this.optionAlatKesehatan=[],this.isAddObat=!1,this.isAddAlatKesehatan=!1,this.indexEdit=null,this.listBarang=[],this.listObat=[],this.sub_total=0,this.total_faktur=0,this.id_obat=null,this.id_alat_kesehatan=null,this.ppn=0,this.params_get={last_data:"0",get_data:"10",search:""},this.vbNotifdataFakturKosong=!0,this.getState=this.store.select("faktur_pembelian")}ngOnInit(){this.optionsCur=this.money.currency(),this.formBarang=this.fb.group({satuan:[null,[h.kI.required]],satuan_qty:[1,[h.kI.required]],satuan_harga:[0,[h.kI.required]],jenis_diskon:["persen",[h.kI.required]],diskon_persen:"",diskon_value:[0,[h.kI.required]],tanggal_ed:[null,[h.kI.required]],diskon_rupiah:"",no_batch:[null,[h.kI.required]]}),this.formInput=this.fb.group({id_supplier:[null,[h.kI.required]],nomor_faktur:[null,[h.kI.required]],tgl_faktur:[null,[h.kI.required]],tgl_diterima:[null,[h.kI.required]],pembayaran:[null,[h.kI.required]],jatuh_tempo:[null,[h.kI.required]],ppn:[null,[h.kI.required]],ppn_nilai:[0,[]],detail:[],alat_kesehatan:[]})}isNumber(e){return this.validate.Number(e)}onFocus(e){document.getElementById(e).click()}Money(e){return this.money.formatRupiah(e)}prosesSelectPBF(e,a){if("search"==a?(this.optionSupplier=[],this.params_get.search=e.term,this.params_get.last_data="0"):this.params_get.search="","last_page"==a){let o=parseInt(this.params_get.last_data)+parseInt(this.params_get.get_data);this.params_get.last_data=o.toString()}else this.params_get.last_data="0";this.modulSupplierService.get(this.params_get).subscribe(o=>{o&&(0==this.optionSupplier.length?this.optionSupplier=o.response:o.response.map(i=>{this.optionSupplier.findIndex(f=>f.id_supplier==i.id_supplier)<0&&this.optionSupplier.push(i)}))})}prosesSelectObat(e,a){if("search"==a?(this.optionObat=[],this.params_get.search=e.term,this.params_get.last_data="0"):this.params_get.search="","last_page"==a){let o=parseInt(this.params_get.last_data)+parseInt(this.params_get.get_data);this.params_get.last_data=o.toString()}else this.params_get.last_data="0";this.obatService.get(this.params_get).subscribe(o=>{o&&(0==this.optionObat.length?this.optionObat=o.response:o.response.map(i=>{this.optionObat.findIndex(f=>f.id_obat==i.id_obat)<0&&this.optionObat.push(i)}))})}prosesSelectAlat(e,a){if("search"==a?(this.optionAlatKesehatan=[],this.params_get.search=e.term,this.params_get.last_data="0"):this.params_get.search="","last_page"==a){let o=parseInt(this.params_get.last_data)+parseInt(this.params_get.get_data);this.params_get.last_data=o.toString()}else this.params_get.last_data="0";this.alatKesehatanService.get(this.params_get).subscribe(o=>{o&&(0==this.optionAlatKesehatan.length?this.optionAlatKesehatan=o.response:o.response.map(i=>{this.optionAlatKesehatan.findIndex(f=>f.id_alat_kesehatan==i.id_alat_kesehatan)<0&&this.optionAlatKesehatan.push(i)}))})}setEdit(e,a,o){this.indexEdit=e;let i=[];1==o?(Object.keys(this.formBarang.value).forEach(f=>{i[f]="satuan"!=f?a[f]:a.obat.nama_kemasan}),this.selectDataObat=a.obat,this.isAddObat=!0,this.isAddAlatKesehatan=!1,this.id_obat=a.obat.id_obat):(Object.keys(this.formBarang.value).forEach(f=>{i[f]="satuan"!=f?a[f]:a.alat.nama_kemasan}),this.selectDataAlat=a.alat,this.isAddObat=!1,this.isAddAlatKesehatan=!0,this.id_alat_kesehatan=a.alat.id_alat_kesehatan),this.formBarang.setValue(i),this.submitted=!1,this.vbFormInputModal=!0,this.vbInfoObat=!0,this.modalService.open("modalFormContent")}deleteItem(e,a){let o=0;1==a?(o=this.listObat[e].sub_total,this.listObat.splice(e,1)):(o=this.listBarang[e].sub_total,this.listBarang.splice(e,1)),this.sub_total-=this.formInput.value.ppn_nilai/100*Number(o),this.setTotal()}setPPN(e){this.formInput.patchValue("sudah"==e.target.value?{ppn_nilai:0}:{ppn_nilai:11}),this.setTotal()}setTotal(){if(this.formInput.value.ppn_nilai>=0){let e=Number(this.formInput.value.ppn_nilai)/100;this.ppn=e*Number(this.sub_total),this.total_faktur=this.sub_total+this.ppn}else this.ppn=0,this.sub_total=0,this.total_faktur=0}btnPilihSizeObat(){this.vbFormInputModal=!0,this.vbInfoObat=!1}convertDate(e){return y(e).format("DD-MM-YYYY")}convertDateYMD(e){return y(e).format("YYYY-MM-DD")}getSatuanTerkecil(e,a,o){return 1==e?o+" "+a.obat.nama_kemasan:2==e?o+" "+a.alat.nama_kemasan:void 0}btnSimpanFormModal(){var e=this;return(0,gt.Z)(function*(){if(e.submitted=!1,setTimeout(()=>{e.submitted=!0},300),e.formBarang.invalid)return!1;const a=e.formBarang.value;if(a.diskon_rupiah="rupiah"==a.jenis_diskon?"1":"0",a.diskon_persen="persen"==a.jenis_diskon?"0":"1",a.sub_total="persen"==a.jenis_diskon?a.satuan_harga*a.satuan_qty-a.satuan_harga*a.satuan_qty*(a.diskon_value/100):a.satuan_harga*a.satuan_qty-a.diskon_value,e.setTotal(),null==e.indexEdit)if(e.isAddObat){a.obat=e.selectDataObat;let o=-1;e.listObat.map((d,f)=>{d.obat.id_obat==a.obat.id_obat&&d.satuan==a.satuan&&d.no_batch==a.no_batch&&(o=f)}),o>=0?m().fire("Warning","Duplicated Data","warning"):(e.listObat.push(a),setTimeout(()=>{e.modalClose(),e.getSubTotalFaktur(),e.submitted=!1,e.formBarang.reset()},500))}else{a.alat=e.selectDataAlat;let o=-1;e.listBarang.map((i,d)=>{i.alat.id_alat_kesehatan==a.alat.id_alat_kesehatan&&i.satuan==a.satuan&&i.no_batch==a.no_batch&&(o=d)}),o>=0?m().fire("Warning","Duplicated Data","warning"):(e.listBarang.push(a),setTimeout(()=>{e.modalClose(),e.getSubTotalFaktur(),e.submitted=!1,e.formBarang.reset()},500))}else if(e.isAddObat){a.obat=e.selectDataObat;let o=-1;e.listObat.map((i,d)=>{d!=e.indexEdit&&i.obat.id_obat==a.obat.id_obat&&i.satuan==a.satuan&&i.no_batch==a.no_batch&&(o=d)}),o>=0?m().fire("Warning","Duplicated Data","warning"):(e.listObat[e.indexEdit]=a,setTimeout(()=>{e.modalClose(),e.getSubTotalFaktur(),e.submitted=!1,e.formBarang.reset()},500))}else{a.alat=e.selectDataAlat;let o=-1;e.listBarang.map((i,d)=>{d!=e.indexEdit&&i.alat.id_alat_kesehatan==a.alat.id_alat_kesehatan&&i.satuan==a.satuan&&i.no_batch==a.no_batch&&(o=d)}),o>=0?m().fire("Warning","Duplicated Data","warning"):(e.listBarang[e.indexEdit]=a,setTimeout(()=>{e.modalClose(),e.getSubTotalFaktur(),e.submitted=!1,e.formBarang.reset()},500))}})()}getSubTotalFaktur(){this.total_faktur=0,this.sub_total=0,this.listObat.map(e=>{this.sub_total+=Number(e.sub_total)}),this.listBarang.map(e=>{this.sub_total+=Number(e.sub_total)}),this.setTotal()}btnSave(){if(this.savefaktur=!1,setTimeout(()=>(this.savefaktur=!0,!1),300),this.formInput.invalid)return!1;this.spinner.show("spinner1");let e=this.formInput.value;e.detail=[],this.listObat.forEach(a=>{e.detail.push({id_obat:a.obat.id_obat,satuan:a.satuan,satuan_qty:a.satuan_qty,kemasan_konversi:"",satuan_harga:a.satuan_harga,jenis_diskon:a.jenis_diskon,diskon_value:a.diskon_value,tanggal_ed:new Date(a.tanggal_ed).getTime(),no_batch:a.no_batch,keterangan:""})}),e.alat_kesehatan=[],this.listBarang.forEach(a=>{e.alat_kesehatan.push({id_alat_kesehatan:a.alat.id_alat_kesehatan,kemasan_konversi:"",satuan:a.satuan,satuan_qty:a.satuan_qty,satuan_harga:a.satuan_harga,jenis_diskon:a.jenis_diskon,diskon_value:a.diskon_value,tanggal_ed:new Date(a.tanggal_ed).getTime(),no_batch:a.no_batch,keterangan:""})}),e.tgl_faktur=new Date(e.tgl_faktur).getTime(),e.tgl_diterima=new Date(e.tgl_diterima).getTime(),e.jatuh_tempo=new Date(e.jatuh_tempo).getTime(),e.ppn_nilai="sudah"==e.ppn?0:e.ppn_nilai,this.store.dispatch(S({payload:e})),setTimeout(()=>{this.spinner.hide("spinner1")},400),this.savefaktur=!1}btnKembaliCariObat(){this.vbFormInputModal=!1,this.vbInfoObat=!0}btnClickTambah(e){1==e?(this.isAddObat=!0,this.id_obat=null,this.isAddAlatKesehatan=!1):(this.isAddObat=!1,this.id_alat_kesehatan=null,this.isAddAlatKesehatan=!0),this.formBarang.patchValue({satuan:null,satuan_qty:null,satuan_harga:null,jenis_diskon:"persen",diskon_persen:"",diskon_value:0,tanggal_ed:null,diskon_rupiah:0,no_batch:""}),this.indexEdit=null,this.submitted=!1,this.vbFormInputModal=!1,this.vbInfoObat=!1,this.modalService.open("modalFormContent")}setKemasan(e,a){this.kemasan=e,a?this.selectDataObat.nama_kemasan=this.kemasan.nama_kemasan:this.selectDataAlat.nama_kemasan=this.kemasan.nama_kemasan}selectData(e,a){1==a?(this.selectDataObat=e,this.selectDataObat.obat_kemasan=this.selectDataObat.obat_kemasan.sort((o,i)=>o.kemasan_level-i.kemasan_level)):(this.selectDataAlat=e,this.selectDataAlat.alat_kesehatan_kemasan=this.selectDataAlat.alat_kesehatan_kemasan.sort((o,i)=>o.kemasan_level-i.kemasan_level)),this.vbFormInputModal=!0,this.vbInfoObat=!1}modalClose(){this.modalService.close("modalFormContent")}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(X.Z),t.Y36(M.V),t.Y36(c.F0),t.Y36(x.t2),t.Y36(h.qu),t.Y36(ht.p),t.Y36(K.r),t.Y36(s.yh),t.Y36(ft.O),t.Y36(bt.g),t.Y36(Zt.W))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-add"]],viewQuery:function(e,a){if(1&e&&t.Gf(_.G,5),2&e){let o;t.iGM(o=t.CRH())&&(a.datatableElement=o.first)}},decls:157,vars:56,consts:[[1,"content"],[1,"content-block"],[1,"block-header"],[3,"title","items","active_item"],[1,"text-center"],[1,"row","clearfix"],[1,"col-xs-12","col-sm-12","col-md-12","col-lg-12"],["type","button",1,"btn","btn-kembali","btn-lg","mb-3",3,"routerLink"],[1,"fas","fa-arrow-left"],[1,"card"],[1,"header"],[3,"formGroup"],[1,"body"],[1,"row","g-3"],[1,"col"],[1,"mb-3","col-sm-12"],[1,"col-sm-8"],[1,"form-label","fw-bold"],[1,"text-danger"],[1,"input-group"],["formControlName","id_supplier","bindLabel","nama_supplier","bindValue","id_supplier","placeholder","Pilih Supplier",2,"flex","1 1 auto",3,"virtualScroll","searchable","clearable","search","scrollToEnd","open"],[3,"value",4,"ngFor","ngForOf"],["class","form-text text-danger",4,"ngIf"],["type","text","formControlName","nomor_faktur","placeholder","Nomor Faktur",1,"form-control"],[1,"row","g-3","col-sm-8"],[1,"col","col-sm-4"],[1,"mb-3"],["type","text","bsDatepicker","","formControlName","tgl_faktur","id","tgl1",1,"form-control",3,"bsConfig","outsideClick"],[1,"input-group-text",2,"cursor","pointer","background","white","border-left","0px",3,"click"],[1,"fa","fa-calendar"],["type","text","bsDatepicker","","formControlName","tgl_diterima","id","tgl2",1,"form-control",3,"bsConfig","outsideClick"],["formControlName","pembayaran",1,"form-select"],["value","kredit"],["value","tunai"],["type","text","bsDatepicker","","formControlName","jatuh_tempo","id","tgl3",1,"form-control",3,"bsConfig","outsideClick"],["formControlName","ppn",1,"form-select",3,"change"],["value","belum"],["value","sudah"],[1,"row","px-3"],[1,"col-sm-12","card","pt-3"],[1,"mb-2"],["type","button",1,"btn","btn-tambah",3,"click"],["class","alert alert-warning text-center mt-3",4,"ngIf"],["class","table-responsive",4,"ngIf"],[1,"mb-2","mt-3"],[1,"col-sm-4","offset-sm-8"],["width","100%",1,"table","table-sm"],[1,"text-end"],[4,"ngIf"],[2,"background-color","#eee"],[1,"footer","text-center","mb-3"],[1,"btn","btn-simpan","btn-lg",3,"click"],["id","modalFormContent"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],[1,"modal-body"],[1,"mb-3","row"],["style","flex: 1 1 auto;","name","id_obat","bindLabel","nama_obat","bindValue","id_obat","placeholder","Pilih Obat",3,"virtualScroll","ngModel","searchable","clearable","ngModelChange","change","search","scrollToEnd","open",4,"ngIf"],["style","flex: 1 1 auto;","name","id_alat_kesehatan","bindLabel","nama_alat_kesehatan","bindValue","id_alat_kesehatan","placeholder","Pilih Alat Kesehatan",3,"ngModel","virtualScroll","searchable","clearable","ngModelChange","change","search","scrollToEnd","open",4,"ngIf"],[3,"formGroup","submit"],["class","",4,"ngIf"],["class","row",4,"ngIf"],["bdColor","rgba(0, 0, 0, 0.8)","size","medium","color","#fff","type","ball-clip-rotate-multiple",3,"name","fullScreen"],[2,"color","white"],[3,"value"],[1,"form-text","text-danger"],[1,"alert","alert-warning","text-center","mt-3"],[1,"table-responsive"],["width","100%",1,"table","tabl-sm","table-striped","table-bordered","table-sm"],[4,"ngFor","ngForOf"],[1,"btn","btn-warning","mb-2",3,"click"],[1,"btn","btn-danger","mb-2",3,"click"],["width","100"],["width","80",1,"text-center"],["type","text","value","11","formControlName","ppn_nilai",1,"form-control",3,"keypress","keyup"],["name","id_obat","bindLabel","nama_obat","bindValue","id_obat","placeholder","Pilih Obat",2,"flex","1 1 auto",3,"virtualScroll","ngModel","searchable","clearable","ngModelChange","change","search","scrollToEnd","open"],["name","id_alat_kesehatan","bindLabel","nama_alat_kesehatan","bindValue","id_alat_kesehatan","placeholder","Pilih Alat Kesehatan",2,"flex","1 1 auto",3,"ngModel","virtualScroll","searchable","clearable","ngModelChange","change","search","scrollToEnd","open"],[1,""],[1,"row","mb-3"],[1,"col-sm-2","col-form-label","fw-bold"],[1,"col-sm-4"],["type","text","min","1","formControlName","satuan_qty",1,"form-control",3,"keypress"],[1,"col-sm-6"],["style","flex: 1 1 auto;","formControlName","satuan","bindLabel","target_kemasan","bindValue","nama_kemasan","placeholder","Pilih Satuan",3,"border-danger","virtualScroll","items","searchable","clearable","change",4,"ngIf"],["style","flex: 1 1 auto;","name","satuan","formControlName","satuan","bindLabel","target_kemasan","bindValue","nama_kemasan","placeholder","Pilih Satuan",3,"border-danger","virtualScroll","items","searchable","clearable","change",4,"ngIf"],[1,"input-group",2,"width","100%"],["currencyMask","","formControlName","satuan_harga",1,"form-control",3,"options"],["class","input-group-text",4,"ngIf"],["formControlName","jenis_diskon",1,"form-select"],["value","persen"],["value","rupiah"],["type","text","formControlName","diskon_value","class","form-control",3,"border-danger","keypress",4,"ngIf"],["currencyMask","","formControlName","diskon_value","class","form-control",3,"options","border-danger",4,"ngIf"],[1,"judul-kemasan","mb-3"],["type","text","formControlName","tanggal_ed","bsDatepicker","","id","tgl4",1,"form-control",3,"bsConfig","outsideClick"],["type","text","formControlName","no_batch",1,"form-control"],["formControlName","satuan","bindLabel","target_kemasan","bindValue","nama_kemasan","placeholder","Pilih Satuan",2,"flex","1 1 auto",3,"virtualScroll","items","searchable","clearable","change"],["ng-label-tmp",""],["ng-option-tmp",""],["name","satuan","formControlName","satuan","bindLabel","target_kemasan","bindValue","nama_kemasan","placeholder","Pilih Satuan",2,"flex","1 1 auto",3,"virtualScroll","items","searchable","clearable","change"],[1,"input-group-text"],["type","text","formControlName","diskon_value",1,"form-control",3,"keypress"],["currencyMask","","formControlName","diskon_value",1,"form-control",3,"options"],[1,"row"],[1,"col-sm-12","text-end"],["type","button",1,"btn","btn-kembali",3,"click"],["type","submit",1,"btn","btn-simpan"]],template:function(e,a){1&e&&(t.TgZ(0,"section",0)(1,"div",1)(2,"div",2),t._UZ(3,"app-breadcrumb",3),t.qZA(),t.TgZ(4,"h3",4),t._uU(5,"Faktur Pembelian"),t.qZA(),t.TgZ(6,"div",5)(7,"div",6)(8,"button",7),t._UZ(9,"i",8),t._uU(10," Kembali"),t.qZA(),t.TgZ(11,"div",9)(12,"div",10)(13,"h4")(14,"strong"),t._uU(15,"Catat Faktur"),t.qZA()()(),t.TgZ(16,"form",11)(17,"div",12)(18,"div",13)(19,"div",14)(20,"div",15)(21,"div",16)(22,"label",17),t._uU(23,"Nama PBF "),t.TgZ(24,"span",18),t._uU(25,"*"),t.qZA()(),t.TgZ(26,"div",19)(27,"ng-select",20),t.NdJ("search",function(i){return a.prosesSelectPBF(i,"search")})("scrollToEnd",function(i){return a.prosesSelectPBF(i,"last_page")})("open",function(i){return a.prosesSelectPBF(i,"open")}),t.YNc(28,vt,2,2,"ng-option",21),t.qZA()(),t.YNc(29,kt,2,0,"div",22),t.qZA()()()(),t.TgZ(30,"div",13)(31,"div",14)(32,"div",15)(33,"div",16)(34,"label",17),t._uU(35,"Nomor Faktur "),t.TgZ(36,"span",18),t._uU(37,"*"),t.qZA()(),t.TgZ(38,"div",19),t._UZ(39,"input",23),t.qZA(),t.YNc(40,At,2,0,"div",22),t.qZA()()()(),t.TgZ(41,"div",24)(42,"div",25)(43,"div",26)(44,"label",17),t._uU(45,"Tanggal faktur "),t.TgZ(46,"span",18),t._uU(47,"*"),t.qZA()(),t.TgZ(48,"div",19)(49,"div",19),t._UZ(50,"input",27),t.TgZ(51,"span",28),t.NdJ("click",function(){return a.onFocus("tgl1")}),t._UZ(52,"i",29),t.qZA()()(),t.YNc(53,xt,2,0,"div",22),t.qZA()(),t.TgZ(54,"div",25)(55,"div",26)(56,"label",17),t._uU(57,"Tanggal diterima "),t.TgZ(58,"span",18),t._uU(59,"*"),t.qZA()(),t.TgZ(60,"div",19),t._UZ(61,"input",30),t.TgZ(62,"span",28),t.NdJ("click",function(){return a.onFocus("tgl2")}),t._UZ(63,"i",29),t.qZA()(),t.YNc(64,qt,2,0,"div",22),t.qZA()()(),t.TgZ(65,"h4")(66,"strong"),t._uU(67,"Pembayaran"),t.qZA()(),t.TgZ(68,"div",24)(69,"div",25)(70,"div",26)(71,"label",17),t._uU(72,"Metode "),t.TgZ(73,"span",18),t._uU(74,"*"),t.qZA()(),t.TgZ(75,"div",19)(76,"select",31)(77,"option",32),t._uU(78,"Kredit"),t.qZA(),t.TgZ(79,"option",33),t._uU(80,"Tunai"),t.qZA()(),t.YNc(81,Ut,2,0,"div",22),t.qZA()()(),t.TgZ(82,"div",25)(83,"div",26)(84,"label",17),t._uU(85,"Jatuh Tempo "),t.TgZ(86,"span",18),t._uU(87,"*"),t.qZA()(),t.TgZ(88,"div",19),t._UZ(89,"input",34),t.TgZ(90,"span",28),t.NdJ("click",function(){return a.onFocus("tgl3")}),t._UZ(91,"i",29),t.qZA()(),t.YNc(92,yt,2,0,"div",22),t.qZA()()(),t.TgZ(93,"h4")(94,"strong"),t._uU(95,"Penerimaan"),t.qZA()(),t.TgZ(96,"div",24)(97,"div",25)(98,"div",26)(99,"label",17),t._uU(100,"Harga sudah termasuk PPN? "),t.TgZ(101,"span",18),t._uU(102,"*"),t.qZA()(),t.TgZ(103,"div",19)(104,"select",35),t.NdJ("change",function(i){return a.setPPN(i)}),t.TgZ(105,"option",36),t._uU(106,"Belum, tambahkan PPN di akhir"),t.qZA(),t.TgZ(107,"option",37),t._uU(108,"Ya, sudah termasuk PPN"),t.qZA()()(),t.YNc(109,Ct,2,0,"div",22),t.qZA()()(),t.TgZ(110,"div",38)(111,"div",39)(112,"div",40)(113,"button",41),t.NdJ("click",function(){return a.btnClickTambah(1)}),t._uU(114,"Tambah Obat"),t.qZA()(),t.YNc(115,Et,3,0,"label",42),t.YNc(116,Mt,24,1,"div",43),t.TgZ(117,"div",44)(118,"button",41),t.NdJ("click",function(){return a.btnClickTambah(2)}),t._uU(119,"Tambah Alat Kesehatan"),t.qZA()(),t.YNc(120,It,3,0,"label",42),t.YNc(121,wt,22,1,"div",43),t.TgZ(122,"div",45)(123,"table",46)(124,"tbody")(125,"tr")(126,"td"),t._uU(127,"Subtotal"),t.qZA(),t._UZ(128,"td"),t.TgZ(129,"td",47),t._uU(130),t.qZA()(),t.YNc(131,Dt,8,1,"tr",48),t.TgZ(132,"tr",49)(133,"td")(134,"strong"),t._uU(135,"Total Faktur"),t.qZA()(),t._UZ(136,"td"),t.TgZ(137,"td",47)(138,"strong"),t._uU(139),t.qZA()()()()()()()()(),t.TgZ(140,"div",50)(141,"button",51),t.NdJ("click",function(){return a.btnSave()}),t._uU(142,"Simpan "),t.qZA()()()()()()()(),t.TgZ(143,"jw-modal",52)(144,"div",53),t._UZ(145,"h4",54),t.qZA(),t.TgZ(146,"div",55)(147,"div",56),t.YNc(148,St,2,5,"ng-select",57),t.YNc(149,Bt,2,5,"ng-select",58),t.qZA(),t.TgZ(150,"form",59),t.NdJ("submit",function(){return a.btnSimpanFormModal()}),t.YNc(151,oe,63,28,"div",60),t.YNc(152,ie,6,0,"div",61),t.YNc(153,re,4,0,"div",61),t.qZA()()(),t.TgZ(154,"ngx-spinner",62)(155,"p",63),t._uU(156," Loading... "),t.qZA()()),2&e&&(t.xp6(3),t.Q6J("title","Master Data")("items",t.DdM(51,se))("active_item","Tambah Faktur"),t.xp6(5),t.Q6J("routerLink",t.DdM(52,le)),t.xp6(8),t.Q6J("formGroup",a.formInput),t.xp6(11),t.ekj("border-danger",a.formInput.controls.id_supplier.hasError("required")&&a.savefaktur),t.Q6J("virtualScroll",!0)("searchable",!0)("clearable",!0),t.xp6(1),t.Q6J("ngForOf",a.optionSupplier),t.xp6(1),t.Q6J("ngIf",a.formInput.controls.id_supplier.hasError("required")&&a.savefaktur),t.xp6(10),t.ekj("border-danger",a.formInput.controls.nomor_faktur.hasError("required")&&a.savefaktur),t.xp6(1),t.Q6J("ngIf",a.formInput.controls.nomor_faktur.hasError("required")&&a.savefaktur),t.xp6(10),t.ekj("border-danger",a.formInput.controls.tgl_faktur.hasError("required")&&a.savefaktur),t.Q6J("bsConfig",t.DdM(53,I))("outsideClick",!0),t.xp6(3),t.Q6J("ngIf",a.formInput.controls.tgl_faktur.hasError("required")&&a.savefaktur),t.xp6(8),t.ekj("border-danger",a.formInput.controls.tgl_diterima.hasError("required")&&a.savefaktur),t.Q6J("bsConfig",t.DdM(54,I))("outsideClick",!0),t.xp6(3),t.Q6J("ngIf",a.formInput.controls.tgl_diterima.hasError("required")&&a.savefaktur),t.xp6(12),t.ekj("border-danger",a.formInput.controls.pembayaran.hasError("required")&&a.savefaktur),t.xp6(5),t.Q6J("ngIf",a.formInput.controls.pembayaran.hasError("required")&&a.savefaktur),t.xp6(8),t.ekj("border-danger",a.formInput.controls.jatuh_tempo.hasError("required")&&a.savefaktur),t.Q6J("bsConfig",t.DdM(55,I))("outsideClick",!0),t.xp6(3),t.Q6J("ngIf",a.formInput.controls.jatuh_tempo.hasError("required")&&a.savefaktur),t.xp6(12),t.ekj("border-danger",a.formInput.controls.ppn.hasError("required")&&a.savefaktur),t.xp6(5),t.Q6J("ngIf",a.formInput.controls.ppn.hasError("required")&&a.savefaktur),t.xp6(6),t.Q6J("ngIf",a.listObat.length<=0),t.xp6(1),t.Q6J("ngIf",a.listObat.length>0),t.xp6(4),t.Q6J("ngIf",a.listBarang.length<=0),t.xp6(1),t.Q6J("ngIf",a.listBarang.length>0),t.xp6(9),t.Oqu(a.Money(a.sub_total)),t.xp6(1),t.Q6J("ngIf","belum"==a.formInput.value.ppn),t.xp6(8),t.Oqu(a.Money(a.total_faktur)),t.xp6(9),t.Q6J("ngIf",a.isAddObat),t.xp6(1),t.Q6J("ngIf",a.isAddAlatKesehatan),t.xp6(1),t.Q6J("formGroup",a.formBarang),t.xp6(1),t.Q6J("ngIf",1==a.vbFormInputModal),t.xp6(1),t.Q6J("ngIf",1==a.vbFormInputModal),t.xp6(1),t.Q6J("ngIf",0==a.vbFormInputModal),t.xp6(1),t.Q6J("name","spinner1")("fullScreen",!0))},directives:[H.L,c.rH,h._Y,h.JL,h.sg,C.w9,h.JJ,h.u,g.sg,C.jq,g.O5,h.Fj,G.Y5,G.Np,h.EJ,h.YN,h.Kr,Tt.z,h.On,C.mR,C.ir,tt.g1,x.Ro],styles:['h5.judul-kemasan[_ngcontent-%COMP%]{display:flex;align-items:center}h5.judul-kemasan[_ngcontent-%COMP%]:after{content:"";flex:1;margin-left:1rem;height:1px;background-color:#919191}']}),n})()},{path:"detail/:id",component:(()=>{class n{constructor(e,a,o,i){this.ModulPembelianService=e,this.spinner=a,this.money=o,this.activatedRoute=i,this.sub_total=0,this.ppn=0,this.total=0}ngOnInit(){this.activatedRoute.params.subscribe(e=>{e&&(this.spinner.show("spinner1"),this.ModulPembelianService.show(e.id).subscribe(a=>{this.detailFaktur=a.response,this.detailFaktur.pembelian_detail&&this.detailFaktur.pembelian_detail.map(o=>{o.sub_total=o.total_harga-o.diskon_rupiah,this.sub_total=this.sub_total+o.sub_total}),this.detailFaktur.pembelian_alat_kesehatan&&this.detailFaktur.pembelian_alat_kesehatan.map(o=>{o.sub_total=o.total_harga-o.diskon_rupiah,this.sub_total=this.sub_total+o.sub_total}),this.ppn=Number(this.sub_total)*(Number(this.detailFaktur.ppn_nilai)/100),this.total=this.sub_total+this.ppn,this.spinner.hide("spinner1")}))})}Money(e){return this.money.formatRupiah(parseInt(e.toString().replace(".",",")))}subList(e,a){return this.money.formatRupiah(Number(e)-Number(a))}convertDate(e){return y(e).utc().format("DD-MM-YYYY")}convertDateYMD(e){return y(e).format("YYYY-MM-DD")}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(M.V),t.Y36(x.t2),t.Y36(K.r),t.Y36(c.gz))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-detail"]],decls:118,vars:19,consts:[[1,"content"],[1,"content-block"],[1,"block-header"],[3,"title","items","active_item"],[1,"text-center"],[1,"row","clearfix"],[1,"col-xs-12","col-sm-12","col-md-12","col-lg-12"],["type","button",1,"btn","btn-kembali","btn-lg","mb-3",3,"routerLink"],[1,"fas","fa-arrow-left"],[1,"card"],[1,"card-body"],[1,"row","mb-2"],[1,"col-md-6"],[1,"col-4"],[1,"header"],[1,"table","table-striped","table-bordered","table-sm"],[4,"ngIf"],[2,"width","100%"],[2,"float","right","width","300px","margin-right","20px"],["width","100%",1,"table","table-sm"],[1,"text-end"],[2,"background-color","#eee"],["bdColor","rgba(0, 0, 0, 0.8)","size","medium","color","#fff","type","ball-clip-rotate-multiple",3,"name","fullScreen"],[2,"color","white"],[4,"ngFor","ngForOf"],["width","100"],["width","80",1,"text-center"]],template:function(e,a){1&e&&(t.TgZ(0,"section",0)(1,"div",1)(2,"div",2),t._UZ(3,"app-breadcrumb",3),t.qZA(),t.TgZ(4,"h3",4),t._uU(5,"Detail Pembelian"),t.qZA(),t.TgZ(6,"div",5)(7,"div",6)(8,"button",7),t._UZ(9,"i",8),t._uU(10," Kembali"),t.qZA(),t.TgZ(11,"div",9)(12,"div",10)(13,"div",11)(14,"div",12)(15,"div",11)(16,"div",13),t._uU(17,"No Faktur"),t.qZA(),t.TgZ(18,"div",13),t._uU(19),t.qZA()(),t.TgZ(20,"div",11)(21,"div",13),t._uU(22,"Tanggal Faktur"),t.qZA(),t.TgZ(23,"div",13),t._uU(24),t.qZA()(),t.TgZ(25,"div",11)(26,"div",13),t._uU(27,"Tanggal Diterima"),t.qZA(),t.TgZ(28,"div",13),t._uU(29),t.qZA()()(),t.TgZ(30,"div",12)(31,"div",11)(32,"div",13),t._uU(33,"Metode Pembayaran"),t.qZA(),t.TgZ(34,"div",13),t._uU(35),t.qZA()(),t.TgZ(36,"div",11)(37,"div",13),t._uU(38,"Jatuh Tempo"),t.qZA(),t.TgZ(39,"div",13),t._uU(40),t.qZA()(),t.TgZ(41,"div",11)(42,"div",13),t._uU(43,"Dilakukan Oleh"),t.qZA(),t.TgZ(44,"div",13),t._uU(45),t.qZA()()()()(),t.TgZ(46,"div",14)(47,"h4")(48,"strong"),t._uU(49,"Pembelian Obat"),t.qZA()()(),t.TgZ(50,"div",10)(51,"table",15)(52,"thead")(53,"tr")(54,"th"),t._uU(55,"No"),t.qZA(),t.TgZ(56,"th"),t._uU(57,"Barang"),t.qZA(),t.TgZ(58,"th"),t._uU(59,"Batch"),t.qZA(),t.TgZ(60,"th"),t._uU(61,"ED"),t.qZA(),t.TgZ(62,"th"),t._uU(63,"Jumlah Satuan"),t.qZA(),t.TgZ(64,"th"),t._uU(65,"Harga Beli"),t.qZA(),t.TgZ(66,"th"),t._uU(67,"Diskon"),t.qZA(),t.TgZ(68,"th"),t._uU(69,"Sub Total"),t.qZA()()(),t.YNc(70,_e,2,1,"tbody",16),t.qZA()(),t.TgZ(71,"div",14)(72,"h4")(73,"strong"),t._uU(74,"Pembelian Alat Kesehatan"),t.qZA()()(),t.TgZ(75,"div",10)(76,"table",15)(77,"thead")(78,"tr")(79,"th"),t._uU(80,"No"),t.qZA(),t.TgZ(81,"th"),t._uU(82,"Barang"),t.qZA(),t.TgZ(83,"th"),t._uU(84,"Batch"),t.qZA(),t.TgZ(85,"th"),t._uU(86,"ED"),t.qZA(),t.TgZ(87,"th"),t._uU(88,"Jumlah Satuan"),t.qZA(),t.TgZ(89,"th"),t._uU(90,"Harga Beli"),t.qZA(),t.TgZ(91,"th"),t._uU(92,"Diskon"),t.qZA(),t.TgZ(93,"th"),t._uU(94,"Sub Total"),t.qZA()()(),t.YNc(95,pe,2,1,"tbody",16),t.qZA()(),t.TgZ(96,"div",17)(97,"div",18)(98,"table",19)(99,"tbody")(100,"tr")(101,"td"),t._uU(102,"Subtotal"),t.qZA(),t._UZ(103,"td"),t.TgZ(104,"td",20),t._uU(105),t.qZA()(),t.YNc(106,me,8,2,"tr",16),t.TgZ(107,"tr",21)(108,"td")(109,"strong"),t._uU(110,"Total"),t.qZA()(),t._UZ(111,"td"),t.TgZ(112,"td",20)(113,"strong"),t._uU(114),t.qZA()()()()()()()()()()()(),t.TgZ(115,"ngx-spinner",22)(116,"p",23),t._uU(117," Loading... "),t.qZA()()),2&e&&(t.xp6(3),t.Q6J("title","Detail Faktur Pembelian")("items",t.DdM(17,ge))("active_item","Detail Faktur"),t.xp6(5),t.Q6J("routerLink",t.DdM(18,he)),t.xp6(11),t.hij(": ",a.detailFaktur?a.detailFaktur.nomor_faktur:"",""),t.xp6(5),t.hij(": ",a.detailFaktur?a.convertDate(a.detailFaktur.tgl_faktur_unix):"",""),t.xp6(5),t.hij(": ",a.detailFaktur?a.convertDate(a.detailFaktur.tgl_diterima_unix):"",""),t.xp6(6),t.hij(": ",a.detailFaktur?a.detailFaktur.pembayaran:"",""),t.xp6(5),t.hij(": ",a.detailFaktur?a.convertDate(a.detailFaktur.jatuh_tempo_unix):"",""),t.xp6(5),t.hij(": ",a.detailFaktur?a.detailFaktur.nama_supplier:"",""),t.xp6(25),t.Q6J("ngIf",a.detailFaktur),t.xp6(25),t.Q6J("ngIf",a.detailFaktur),t.xp6(10),t.Oqu(a.Money(a.sub_total)),t.xp6(1),t.Q6J("ngIf",a.detailFaktur&&"belum"==a.detailFaktur.ppn),t.xp6(8),t.Oqu(a.Money(a.total)),t.xp6(1),t.Q6J("name","spinner1")("fullScreen",!0))},directives:[H.L,c.rH,g.O5,g.sg,x.Ro],styles:['h5.judul-kemasan[_ngcontent-%COMP%]{display:flex;align-items:center}h5.judul-kemasan[_ngcontent-%COMP%]:after{content:"";flex:1;margin-left:1rem;height:1px;background-color:#919191}']}),n})()}];let be=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[c.Bz.forChild(fe)],c.Bz]}),n})();var Ze=l(60795),Te=l(16270);const ke=(0,s.Lq)({fakturPembelian:null,isLoadingButton:!1,errorMessage:null,reloadTable:!1,submitButton:!1,isEdit:!1},(0,s.on)(S,(n,r)=>Object.assign(Object.assign({},n),{isLoadingButton:!0,errorMessage:null,reloadTable:!1,isEdit:!1})),(0,s.on)(P,(n,r)=>Object.assign(Object.assign({},n),{isLoadingButton:!1,reloadTable:!1,errorMessage:null})),(0,s.on)(B,(n,r)=>Object.assign(Object.assign({},n),{errorMessage:r.message,reloadTable:!1,isLoadingButton:!1})),(0,s.on)(V,(n,r)=>Object.assign(Object.assign({},n),{isLoadingButton:!0,errorMessage:null,reloadTable:!1,isEdit:!1})),(0,s.on)(j,(n,r)=>Object.assign(Object.assign({},n),{reloadTable:!1,isLoadingButton:!1,errorMessage:null})),(0,s.on)(Y,(n,r)=>Object.assign(Object.assign({},n),{errorMessage:r.message,reloadTable:!1,isLoadingButton:!1})),(0,s.on)(W,(n,r)=>Object.assign(Object.assign({},n),{fakturPembelian:new U,errorMessage:null,isEdit:!1,reloadTable:!1})),(0,s.on)(z,(n,r)=>Object.assign(Object.assign({},n),{fakturPembelian:r.payload,isEdit:!0,reloadTable:!1,errorMessage:null})),(0,s.on)(J,(n,r)=>Object.assign(Object.assign({},n),{errorMessage:r.message,reloadTable:!1,isLoadingButton:!1})),(0,s.on)(L,(n,r)=>Object.assign(Object.assign({},n),{fakturPembelian:new U,errorMessage:null,isEdit:!1,reloadTable:!1})),(0,s.on)(Q,(n,r)=>Object.assign(Object.assign({},n),{reloadTable:!1,errorMessage:null,isEdit:!1})),(0,s.on)(R,(n,r)=>Object.assign(Object.assign({},n),{errorMessage:r.message,reloadTable:!1,isLoadingButton:!1})),(0,s.on)(O,(n,r)=>Object.assign(Object.assign({},n),{fakturPembelian:new U,reloadTable:!0})),(0,s.on)(ut,(n,r)=>Object.assign(Object.assign({},n),{fakturPembelian:new U,isLoadingButton:!1,errorMessage:null,reloadTable:!1,submitButton:!1,isEdit:!1})));function Ae(n,r){return ke(n,r)}var F=l(63900),q=l(54004),w=l(70262),D=l(39646);let xe=(()=>{class n{constructor(e,a,o){this.actions$=e,this.ModulFakturPembelianService=a,this.router=o,this.Toast=m().mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:i=>{i.addEventListener("mouseenter",m().stopTimer),i.addEventListener("mouseleave",m().resumeTimer)}}),this.addFakturPembelian$=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(S),(0,F.w)(i=>this.ModulFakturPembelianService.add(i.payload).pipe((0,q.U)(d=>P({payload:d.response})),(0,w.K)(d=>{if("0000"!=d.metaData.response_code){let f="";d.metaData.response.map(N=>{f+=N.field+" "+N.message}),this.Toast.fire({icon:"error",title:f})}return(0,D.of)(B({message:d}))}))))),this.addFakturPembelianSuccess$=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(P),(0,q.U)(i=>(this.Toast.fire({icon:"success",title:"Data berhasil disimpan"}),this.router.navigate(["faktur/faktur-pembelian/view"]),O())))),this.addFakturPembelianFailure$=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(B)),{dispatch:!1}),this.updateFakturPembelian$=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(V),(0,F.w)(i=>this.ModulFakturPembelianService.update(i.payload.id_pembelian,i.payload).pipe((0,q.U)(d=>j({payload:d.response})),(0,w.K)(d=>(0,D.of)(Y({message:d}))))))),this.updateFakturPembelianSuccess$=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(j),(0,q.U)(i=>(this.Toast.fire({icon:"success",title:"Data berhasil disimpan"}),O())))),this.updateFakturPembelianFailure$=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(Y)),{dispatch:!1}),this.getByIdFakturPembelian$=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(W),(0,F.w)(i=>this.ModulFakturPembelianService.show(i.payload.id).pipe((0,q.U)(d=>z({payload:d.response})),(0,w.K)(d=>(0,D.of)(J({message:d}))))))),this.getByIdFakturPembelianFailure$=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(J)),{dispatch:!1}),this.deleteFakturPembelian$=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(L),(0,F.w)(i=>this.ModulFakturPembelianService.delete(i.payload.id).pipe((0,q.U)(d=>Q({payload:d.response})),(0,w.K)(d=>(0,D.of)(R({message:d}))))))),this.deleteFakturPembelianSuccess$=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(Q),(0,q.U)(i=>(this.Toast.fire({icon:"success",title:"Data berhasil dihapus"}),O())))),this.deleteFakturPembelianFailure$=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(R)),{dispatch:!1})}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(u.eX),t.LFG(M.V),t.LFG(c.F0))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac}),n})(),qe=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[g.ez,be,Ze.K,Te.z,x.ef,_.T,h.u5,h.UX,G.kn.forRoot(),tt.Ud,C.A0,s.Aw.forFeature("faktur_pembelian",Ae),u.sQ.forFeature([xe])]]}),n})()},94554:(A,Z,l)=>{l.d(Z,{r:()=>u});var g=l(8202),s=l(5e3);let u=(()=>{class c{formatRupiah(p){if(""!=p&&null!=p&&null!=p&&0!=p){var b=(p=p.toString().replace(".00")).replace(/[^,\d]/g,"").toString().split(","),v=b[0].length%3,T=b[0].substr(0,v),k=b[0].substr(v).match(/\d{3}/gi);return k&&(T+=(v?".":"")+k.join(".")),(T=null!=b[1]?T+","+b[1]:T)?"Rp "+T+",00":""}return"Rp 0,00"}currency(){return{align:"left",allowNegative:!0,allowZero:!0,decimal:",",precision:2,prefix:"Rp ",suffix:"",thousands:".",nullable:!0,min:null,max:null,inputMode:g.fF.NATURAL}}}return c.\u0275fac=function(p){return new(p||c)},c.\u0275prov=s.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c})()},88544:(A,Z,l)=>{l.d(Z,{p:()=>s});var g=l(5e3);let s=(()=>{class u{isNumber(_){return _.match(/^[0-9]+$/)?_:_.replace(/[^0-9]/g,"")}isAlpha(_){return _.match(/^[A-Za-z]+$/)?_:_.replace(/[^A-Za-z]/g,"")}Number(_){const p=_.which?_.which:_.keyCode;return!(46!=p||_.target.value.indexOf(".")>-1)||!(p>31&&(p<48||p>57))}}return u.\u0275fac=function(_){return new(_||u)},u.\u0275prov=g.Yz7({token:u,factory:u.\u0275fac,providedIn:"root"}),u})()},51693:(A,Z,l)=>{l.d(Z,{z:()=>c});var g=l(5e3),s=l(44151);const u=["*"];let c=(()=>{class _{constructor(m,b){this.modalService=m,this.el=b,this.element=b.nativeElement}ngOnInit(){this.id?(document.body.appendChild(this.element),this.element.addEventListener("click",m=>{}),this.modalService.add(this)):console.error("modal must have an id")}ngOnDestroy(){this.modalService.remove(this.id),this.element.remove()}open(){this.element.style.display="block",document.body.classList.add("jw-modal-open")}close(){document.body.classList.remove("jw-modal-open"),this.element.classList.add("close"),setTimeout(()=>{this.element.classList.remove("close"),this.element.style.display="none"},900)}}return _.\u0275fac=function(m){return new(m||_)(g.Y36(s.Z),g.Y36(g.SBq))},_.\u0275cmp=g.Xpm({type:_,selectors:[["jw-modal"]],inputs:{id:"id"},ngContentSelectors:u,decls:4,vars:0,consts:[[1,"jw-modal"],[1,"jw-modal-body"],[1,"jw-modal-background"]],template:function(m,b){1&m&&(g.F$t(),g.TgZ(0,"div",0)(1,"div",1),g.Hsn(2),g.qZA()(),g._UZ(3,"div",2))},styles:["jw-modal{display:none}jw-modal .open{display:none}jw-modal .jw-modal{position:fixed;inset:0;background-color:#eeeeee8e;z-index:1000;overflow:auto}jw-modal .jw-modal .jw-modal-body{animation:fadein .5s;padding:10px 20px;background:#fff;margin:30px auto;width:650px;border-radius:2%;position:relative;z-index:1050}@media (max-width: 767px){jw-modal .jw-modal .jw-modal-body{margin:30px auto;width:calc(100% - 25px)}}jw-modal .jw-modal .jw-modal-body-lg{padding:20px;background:#fff;margin:40px auto;width:900px auto}jw-modal .jw-modal-background{position:fixed;inset:0;background-color:#eeeeee8e;opacity:.75;z-index:900}jw-modal.close .jw-modal .jw-modal-body{animation:unfoldOut .5s .3s cubic-bezier(.165,.84,.44,1) forwards}body.jw-modal-open{overflow:hidden}body.jw-modal-close{overflow:hidden;animation:unfoldOut .5s .3s cubic-bezier(.165,.84,.44,1) forwards}@keyframes fadein{0%{opacity:0}to{opacity:1}}@keyframes unfoldIn{0%{transform:scaleY(.005) scaleX(0)}50%{transform:scaleY(.005) scaleX(1)}to{transform:scaleY(1) scaleX(1)}}@keyframes unfoldOut{0%{transform:scaleY(1) scaleX(1)}50%{transform:scaleY(.005) scaleX(1)}to{transform:scaleY(.005) scaleX(0)}}\n"],encapsulation:2}),_})()},16270:(A,Z,l)=>{l.d(Z,{z:()=>u});var g=l(69808),s=l(5e3);let u=(()=>{class c{}return c.\u0275fac=function(p){return new(p||c)},c.\u0275mod=s.oAB({type:c}),c.\u0275inj=s.cJS({imports:[[g.ez]]}),c})()},44151:(A,Z,l)=>{l.d(Z,{Z:()=>s});var g=l(5e3);let s=(()=>{class u{constructor(){this.modals=[]}add(_){this.modals.push(_)}remove(_){this.modals=this.modals.filter(p=>p.id!==_)}open(_){this.modals.find(m=>m.id===_).open()}close(_){this.modals.find(m=>m.id===_).close()}}return u.\u0275fac=function(_){return new(_||u)},u.\u0275prov=g.Yz7({token:u,factory:u.\u0275fac,providedIn:"root"}),u})()},15861:(A,Z,l)=>{function g(u,c,_,p,m,b,v){try{var T=u[b](v),k=T.value}catch(E){return void _(E)}T.done?c(k):Promise.resolve(k).then(p,m)}function s(u){return function(){var c=this,_=arguments;return new Promise(function(p,m){var b=u.apply(c,_);function v(k){g(b,p,m,v,T,"next",k)}function T(k){g(b,p,m,v,T,"throw",k)}v(void 0)})}}l.d(Z,{Z:()=>s})}}]);