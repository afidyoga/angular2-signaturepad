"use strict";(self.webpackChunkangularlight=self.webpackChunkangularlight||[]).push([[8037],{98037:(M,p,o)=>{o.r(p),o.d(p,{ObatModule:()=>y});var h=o(69808),u=o(65415),f=o(64035),r=o(93075),g=o(15439),t=o(5e3),v=o(58081),Z=o(94554),m=o(50072),b=o(33399),c=o(67236);function T(n,l){1&n&&(t.TgZ(0,"div",29),t._uU(1," Tanggal mulai dan selesai tidak boleh kosong "),t.qZA())}const D=function(){return["Stok"]},w=function(){return{dateInputFormat:"DD/MM/YYYY",rangeInputFormat:"DD/MM/YYYY"}},k=[{path:"",redirectTo:"view",pathMatch:"full"},{path:"view",component:(()=>{class n{constructor(a,e,i,s){this.inventory=a,this.money=e,this.fb=i,this.spinner=s,this.datatableElement=u.G,this.dtOptions={},this.formInput=null,this.search=!1,this.minDate=new Date,this.maxDate=new Date}ngOnInit(){var a=new Date,e=a.getFullYear(),i=a.getMonth();this.minDate=new Date(e,i,1),this.maxDate=new Date(e,i+1,0),this.formInput=this.fb.group({date_from:[[new Date(e,i,1),new Date],[r.kI.required]],status:["all",[r.kI.required]]}),this.dtOptions=this.showDataTables()}reLoadData(){this.datatableElement.dtInstance.then(a=>{a.ajax.reload()})}searchAction(){this.reLoadData()}convertTime(a){let e=g(new Date(a)).format("YYYY-MM-DD")+" 00:00:00";return new Date(e).getTime()}showDataTables(){let a=this;return this.spinner.show("spinner1"),{pageLength:10,serverSide:!0,processing:!0,order:[],ajax:(e,i)=>{e.date_from=new Date(this.convertTime(this.formInput.value.date_from[0])).getTime(),e.date_to=new Date(this.convertTime(this.formInput.value.date_from[1])).getTime(),e.transaksi_jenis=this.formInput.value.status,this.inventory.getStokObat(e).subscribe(s=>{i({draw:s.response.draw,recordsTotal:s.response.recordsTotal,recordsFiltered:s.response.recordsFiltered,data:s.response.data}),this.spinner.hide("spinner1")})},columns:[{orderable:!1,searchable:!1,render:(e,i,s,d)=>d.row+1+d.settings._iDisplayStart},{data:"created_at_unix",render:(e,i,s,d)=>g(new Date(e)).format("DD-MM-YYYY")},{data:"nama_barang"},{data:"stok_masuk"},{data:"stok_keluar"},{data:"harga_beli",render:(e,i,s,d)=>a.money.formatRupiah("keluar"==s.transaksi_jenis?s.harga_jual:e)},{data:"stok_akhir"},{data:"no_batch"},{data:"kegiatan"}]}}}return n.\u0275fac=function(a){return new(a||n)(t.Y36(v.T),t.Y36(Z.r),t.Y36(r.qu),t.Y36(m.t2))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-view"]],viewQuery:function(a,e){if(1&a&&t.Gf(u.G,5),2&a){let i;t.iGM(i=t.CRH())&&(e.datatableElement=i.first)}},decls:69,vars:13,consts:[[1,"content"],[1,"content-block"],[1,"block-header"],[3,"title","items","active_item"],[1,"text-center","mb-4"],[1,"row","clearfix"],[1,"col-xs-12","col-sm-12","col-md-12","col-lg-12"],[1,"card"],[1,"header"],[1,"body"],[3,"formGroup"],[1,"row"],[1,"col-sm-2","col-form-label","fw-bold"],[1,"col-sm-8"],["type","text","formControlName","date_from","placeholder","Tanggal Pendaftaran","bsDaterangepicker","",1,"form-control",3,"bsConfig"],["class","form-text text-danger",4,"ngIf"],["formControlName","status",1,"form-select"],["value","all"],["value","masuk"],["value","keluar"],[1,"col-sm-9","offset-md-2"],[1,"btn","btn-md","btn-primary",3,"click"],[1,"fa","fa-search"],[1,"table-responsive"],["width","100%","datatable","",1,"table","table-striped","table-bordered","table-sm","table-sm",3,"dtOptions"],["rowspan","2"],["colspan","4",1,"text-center"],["bdColor","rgba(0, 0, 0, 0.8)","size","medium","color","#fff","type","ball-clip-rotate-multiple",3,"name","fullScreen"],[2,"color","white"],[1,"form-text","text-danger"]],template:function(a,e){1&a&&(t.TgZ(0,"section",0)(1,"div",1)(2,"div",2),t._UZ(3,"app-breadcrumb",3),t.qZA(),t.TgZ(4,"h3",4),t._uU(5,"Laporan Stok Obat"),t.qZA(),t.TgZ(6,"div",5)(7,"div",6)(8,"div",7)(9,"div",8)(10,"h2")(11,"strong"),t._uU(12,"Pencarian"),t.qZA()()(),t.TgZ(13,"div",9)(14,"form",10)(15,"div",11)(16,"label",12),t._uU(17,"Tanggal Transaksi"),t.qZA(),t.TgZ(18,"div",13),t._UZ(19,"input",14),t.YNc(20,T,2,0,"div",15),t.qZA()(),t.TgZ(21,"div",11)(22,"label",12),t._uU(23,"Status"),t.qZA(),t.TgZ(24,"div",13)(25,"select",16)(26,"option",17),t._uU(27,"Semua Status"),t.qZA(),t.TgZ(28,"option",18),t._uU(29,"Barang Masuk"),t.qZA(),t.TgZ(30,"option",19),t._uU(31,"Barang Keluar"),t.qZA()()()(),t.TgZ(32,"div",11)(33,"div",20)(34,"button",21),t.NdJ("click",function(){return e.searchAction()}),t._UZ(35,"i",22),t._uU(36," Cari"),t.qZA()()()()()(),t.TgZ(37,"div",7),t._UZ(38,"div",8),t.TgZ(39,"div",9)(40,"div",23)(41,"table",24)(42,"thead")(43,"tr")(44,"th",25),t._uU(45,"No"),t.qZA(),t.TgZ(46,"th",25),t._uU(47,"Tgl Transaksi"),t.qZA(),t.TgZ(48,"th",25),t._uU(49,"Nama Obat"),t.qZA(),t.TgZ(50,"th",26),t._uU(51,"Stok Produk"),t.qZA(),t.TgZ(52,"th",25),t._uU(53,"No Batch"),t.qZA(),t.TgZ(54,"th",25),t._uU(55,"Keterangan Transaksi"),t.qZA()(),t.TgZ(56,"tr")(57,"th"),t._uU(58,"Masuk"),t.qZA(),t.TgZ(59,"th"),t._uU(60,"Keluar"),t.qZA(),t.TgZ(61,"th"),t._uU(62,"Harga"),t.qZA(),t.TgZ(63,"th"),t._uU(64,"Terakhir"),t.qZA()()(),t._UZ(65,"tbody"),t.qZA()()()()()()(),t.TgZ(66,"ngx-spinner",27)(67,"p",28),t._uU(68," Loading... "),t.qZA()()()),2&a&&(t.xp6(3),t.Q6J("title","Laporan")("items",t.DdM(11,D))("active_item","Laporan Stok Obat"),t.xp6(11),t.Q6J("formGroup",e.formInput),t.xp6(5),t.ekj("border-danger",""==e.formInput.value.date_from&&e.search),t.Q6J("bsConfig",t.DdM(12,w)),t.xp6(1),t.Q6J("ngIf",""==e.formInput.value.date_from&&e.search),t.xp6(21),t.Q6J("dtOptions",e.dtOptions),t.xp6(25),t.Q6J("name","spinner1")("fullScreen",!0))},directives:[b.L,r._Y,r.JL,r.sg,r.Fj,c.TB,r.JJ,r.u,c.FR,h.O5,r.EJ,r.YN,r.Kr,u.G,m.Ro],styles:[""]}),n})()}];let A=(()=>{class n{}return n.\u0275fac=function(a){return new(a||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[f.Bz.forChild(k)],f.Bz]}),n})();var U=o(60795);let y=(()=>{class n{}return n.\u0275fac=function(a){return new(a||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[h.ez,A,U.K,r.u5,m.ef,r.UX,u.T,c.kn.forRoot()]]}),n})()}}]);