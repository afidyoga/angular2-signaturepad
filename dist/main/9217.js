"use strict";(self.webpackChunkangularlight=self.webpackChunkangularlight||[]).push([[9217],{86307:(B,S,c)=>{c.d(S,{m:()=>b});var k=c(5e3),A=c(95305);let b=(()=>{class f{constructor(m){this.authService=m}getUrlModule(m){return this.authService.currentUserValue.repo.find(r=>r.key_repo==m).url_repo}}return f.\u0275fac=function(m){return new(m||f)(k.LFG(A.e))},f.\u0275prov=k.Yz7({token:f,factory:f.\u0275fac,providedIn:"root"}),f})()},55648:(B,S,c)=>{c.d(S,{O:()=>h});var k=c(89955),A=c(5e3),b=c(86307),f=c(40520);let h=(()=>{class m{constructor(u,r){this.generalService=u,this.http=r,this.urlBase="stok-obat",this.urlModule=this.generalService.getUrlModule(k.s.url_module.gudangTransaksi)}show(u){return this.http.get(this.urlModule+"/"+this.urlBase+"/get-byid/"+u)}getRiwayat(u,r){return this.http.post(this.urlModule+"/"+this.urlBase+"/get-riwayat-stok/"+u,r)}listDatatables(u){return this.http.post(this.urlModule+"/"+this.urlBase+"/get-datatables",u)}add(u){return this.http.post(this.urlModule+"/"+this.urlBase+"/create",u)}update(u,r){return this.http.put(this.urlModule+"/"+this.urlBase+"/update/"+u,r)}delete(u){return this.http.delete(this.urlModule+"/"+this.urlBase+"/delete/"+u)}getRiwayatBatch(u,r){return this.http.post(this.urlModule+"/"+this.urlBase+"/get-riwayat-batch/"+u,r)}getBatch(u){return this.http.post(this.urlModule+"/"+this.urlBase+"/get-batch",u)}getBatchStockOpname(u){return this.http.post(this.urlModule+"/"+this.urlBase+"/get-batch-stok-opname",u)}getSelectBatch(u,r){return this.http.post(this.urlModule+"/"+this.urlBase+"/get-select-option-batch/"+u,r)}getSelectBatchStockOpname(u,r){return this.http.post(this.urlModule+"/"+this.urlBase+"/get-select-option-batch-stock-opname/"+u,r)}}return m.\u0275fac=function(u){return new(u||m)(A.LFG(b.m),A.LFG(f.eN))},m.\u0275prov=A.Yz7({token:m,factory:m.\u0275fac,providedIn:"root"}),m})()},29217:(B,S,c)=>{c.r(S),c.d(S,{StokOpnameModule:()=>Fn});var k=c(69808),A=c(60795),b=c(65415),f=c(93075),h=c(16270),m=c(23007),T=c(2454),u=c.n(T),r=c(65620);const gt="[STOK OPNAME OBAT] clear data ",bt="[STOK OPNAME OBAT] table data",G=(0,r.PH)("[STOK OPNAME OBAT] add initial",(0,r.Ky)()),W=(0,r.PH)("[STOK OPNAME OBAT] add success",(0,r.Ky)()),z=(0,r.PH)("[STOK OPNAME OBAT] add failure ",(0,r.Ky)()),V=(0,r.PH)("[STOK OPNAME OBAT TINJAU] add tinjau initial",(0,r.Ky)()),J=(0,r.PH)("[STOK OPNAME OBATTINJAU] add tinjau success",(0,r.Ky)()),Y=(0,r.PH)("[STOK OPNAME OBAT TINJAU] add tinjau failure ",(0,r.Ky)()),X=(0,r.PH)("[STOK OPNAME OBAT] start initial"),tt=(0,r.PH)("[STOK OPNAME OBAT] start success",(0,r.Ky)()),at=(0,r.PH)("[STOK OPNAME OBAT] start failure ",(0,r.Ky)()),et=(0,r.PH)("[STOK OPNAME OBAT] update initial",(0,r.Ky)()),ft=(0,r.PH)("[STOK OPNAME OBAT] update success",(0,r.Ky)()),nt=(0,r.PH)("[STOK OPNAME OBAT] update failure",(0,r.Ky)()),Aa=(0,r.PH)("[STOK OPNAME OBAT] update initial",(0,r.Ky)()),Za=(0,r.PH)("[STOK OPNAME OBAT] update success",(0,r.Ky)()),Sa=(0,r.PH)("[STOK OPNAME OBAT] update failure",(0,r.Ky)()),kt=(0,r.PH)("[STOK OPNAME OBAT] finish initial",(0,r.Ky)()),it=(0,r.PH)("[STOK OPNAME OBAT] finish success",(0,r.Ky)()),st=(0,r.PH)("[STOK OPNAME OBAT] finish failure ",(0,r.Ky)()),Oa=(0,r.PH)("[STOK OPNAME OBAT] get byid initial",(0,r.Ky)()),va=(0,r.PH)("[STOK OPNAME OBAT] get byid success",(0,r.Ky)()),ya=(0,r.PH)("[STOK OPNAME OBAT] get byid failure",(0,r.Ky)()),wa=((0,r.PH)("[STOK OPNAME OBAT] delete initial",(0,r.Ky)()),(0,r.PH)("[STOK OPNAME OBAT] delete success",(0,r.Ky)()),(0,r.PH)("[STOK OPNAME OBAT] delete failure",(0,r.Ky)()),(0,r.PH)(gt)),U=(0,r.PH)(bt),ot=(0,r.PH)("[STOK OPNAME ALAT ] add initial",(0,r.Ky)()),lt=(0,r.PH)("[STOK OPNAME ALAT ] add success",(0,r.Ky)()),rt=(0,r.PH)("[STOK OPNAME ALAT ] add failure ",(0,r.Ky)()),_t=(0,r.PH)("[STOK OPNAME ALAT TINJAU ] add tinjau initial",(0,r.Ky)()),Tt=(0,r.PH)("[STOK OPNAME ALAT TINJAU ] add tinjau success",(0,r.Ky)()),P=(0,r.PH)("[STOK OPNAME ALAT TINJAU] add tinjau failure ",(0,r.Ky)()),Ma=(0,r.PH)("[STOK OPNAME TINJAU] start initial"),xt=(0,r.PH)("[STOK OPNAME TINJAU ] start success",(0,r.Ky)()),At=(0,r.PH)("[STOK OPNAME TINJAU ] start failure ",(0,r.Ky)()),ut=(0,r.PH)("[STOK OPNAME ALAT ] update initial",(0,r.Ky)()),dt=(0,r.PH)("[STOK OPNAME ALAT ] update success",(0,r.Ky)()),ct=(0,r.PH)("[STOK OPNAME ALAT ] update failure",(0,r.Ky)()),Ca=(0,r.PH)("[STOK OPNAME ALAT ] update initial",(0,r.Ky)()),qa=(0,r.PH)("[STOK OPNAME ALAT ] update success",(0,r.Ky)()),Ua=(0,r.PH)("[STOK OPNAME ALAT ] update failure",(0,r.Ky)()),Ba=((0,r.PH)("[STOK OPNAME ALAT ] finish initial",(0,r.Ky)()),(0,r.PH)("[STOK OPNAME ALAT ] finish success",(0,r.Ky)()),(0,r.PH)("[STOK OPNAME ALAT ] finish failure ",(0,r.Ky)()),(0,r.PH)("[STOK OPNAME ALAT ] get byid initial",(0,r.Ky)()),(0,r.PH)("[STOK OPNAME ALAT ] get byid success",(0,r.Ky)()),(0,r.PH)("[STOK OPNAME ALAT ] get byid failure",(0,r.Ky)()),(0,r.PH)("[STOK OPNAME ALAT ] delete initial",(0,r.Ky)()),(0,r.PH)("[STOK OPNAME ALAT ] delete success",(0,r.Ky)()),(0,r.PH)("[STOK OPNAME ALAT ] delete failure",(0,r.Ky)()),(0,r.PH)(gt)),N=(0,r.PH)(bt);class Zt{}class E{}var I=c(15439),t=c(5e3),F=c(44151),v=c(50072),St=c(89955),Ot=c(86307),vt=c(40520);let D=(()=>{class i{constructor(a,n){this.generalService=a,this.http=n,this.urlBase="stok-opname",this.urlModule=this.generalService.getUrlModule(St.s.url_module.gudangTransaksi)}show(a){return this.http.get(this.urlModule+"/"+this.urlBase+"/get-opname-obat/"+a)}showTinjau(a){return this.http.get(this.urlModule+"/"+this.urlBase+"/get-byid-obat/"+a)}getAll(a){return this.http.get(this.urlModule+"/"+this.urlBase+"/showall-tinjau-produk-byid-riwayat/"+a)}listRiwayat(a){return this.http.post(this.urlModule+"/"+this.urlBase+"/list-datatable-riwayat",a)}listDatatables(a,n,e){return this.http.post(this.urlModule+"/"+this.urlBase+"/get-datatable-obat/"+e+"/"+n,a)}listTinjau(a,n){return this.http.post(this.urlModule+"/"+this.urlBase+"/get-datatable-tinjau-obat/"+n,a)}add(a,n){return this.http.post(this.urlModule+"/"+this.urlBase+"/add-opname-obat/"+n,a)}addTinjau(a,n){return this.http.post(this.urlModule+"/"+this.urlBase+"/add-tinjau-obat/"+n,a)}sesuaikan(a,n){return this.http.post(this.urlModule+"/"+this.urlBase+"/proses-penyesuaian-stok-obat/"+n,a)}start(){return this.http.post(this.urlModule+"/"+this.urlBase+"/mulai-stok-opname",{})}startTinjau(){return this.http.post(this.urlModule+"/"+this.urlBase+"/mulai-tinjau-opname",{})}update(a,n){return this.http.put(this.urlModule+"/"+this.urlBase+"/update-opname-obat/"+a,n)}finish(a){return this.http.put(this.urlModule+"/"+this.urlBase+"/selesai-stok-opname/"+a,{})}}return i.\u0275fac=function(a){return new(a||i)(t.LFG(Ot.m),t.LFG(vt.eN))},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var H=c(33399);function Ia(i,l){if(1&i){const a=t.EpF();t.TgZ(0,"button",16),t.NdJ("click",function(){return t.CHM(a),t.oxw().mulai()}),t._UZ(1,"i",17),t._uU(2," Mulai Stock Opname "),t.qZA()}}const Na=function(){return["Barang"]};let Ea=(()=>{class i{constructor(a,n,e,s,o){this.modalService=a,this.spinner=n,this.modulStokOpname=e,this.router=s,this.store=o,this.datatableElement=b.G,this.dtOptions={},this.dataObat=new E,this.btnDetail=!1,this.btnDelete=!1,this.btnEdit=!1,this.btnSetting=!1,this.btnAdd=!1,this.view=!1,this.getState=this.store.select("stok_opname")}ngOnInit(){this.spinner.show("spinner1");let a=JSON.parse(localStorage.getItem("currentUser"));a=a.menu_right,this.btnAdd=this.btnDelete=this.btnEdit=-1!=a.findIndex(n=>"IVSOAS2"==n.kode),this.btnDetail=this.view=-1!=a.findIndex(n=>"IVSOAS1"==n.kode),this.view||u().fire("Warning","Anda tidak mempunyai akses halaman ini","warning").then(()=>{window.location.href="/"}),this.dtOptions=this.showDataTables(),this.getState.subscribe(n=>{this.reloadTable=n.reloadTable,!0===this.reloadTable&&this.reLoadData()})}reLoadData(){this.datatableElement.dtInstance.then(a=>{a.ajax.reload()})}showDataTables(){return{pageLength:10,serverSide:!0,processing:!0,order:[],ajax:(a,n)=>{this.modulStokOpname.listRiwayat(a).subscribe(e=>{this.spinner.hide("spinner1"),n({draw:e.response.draw,recordsTotal:e.response.recordsTotal,recordsFiltered:e.response.recordsFiltered,data:e.response.data})})},columns:[{orderable:!1,searchable:!1,render:(a,n,e,s)=>s.row+1+s.settings._iDisplayStart},{data:"waktu_mulai_unix",render:(a,n,e,s)=>I(new Date(a)).format("DD-MM-YYYY")},{data:"waktu_selesai_unix",render:(a,n,e,s)=>I(new Date(a)).format("DD-MM-YYYY")}]}}mulai(){u().fire({title:"Apa anda yakin?",icon:"warning",showCancelButton:!0,allowOutsideClick:!1,confirmButtonText:"Ya, lanjutkan!",cancelButtonText:"Batal"}).then(a=>{a.isConfirmed&&this.store.dispatch(X())})}go(a){this.router.navigate([a])}open(a){this.modalService.open(a)}modalClose(a){this.modalService.close(a)}}return i.\u0275fac=function(a){return new(a||i)(t.Y36(F.Z),t.Y36(v.t2),t.Y36(D),t.Y36(m.F0),t.Y36(r.yh))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-stok-opname"]],viewQuery:function(a,n){if(1&a&&t.Gf(b.G,5),2&a){let e;t.iGM(e=t.CRH())&&(n.datatableElement=e.first)}},decls:28,vars:8,consts:[[1,"content"],[1,"content-block"],[1,"block-header"],[3,"title","items","active_item"],[1,"text-center"],[1,"row","clearfix"],[1,"col-xs-12","col-sm-12","col-md-12","col-lg-12"],["type","button","class","btn btn-tambah btn-lg mb-3",3,"click",4,"ngIf"],[1,"card"],[1,"body"],[1,"table-responsive"],["width","100%","datatable","",1,"table","table-striped","table-bordered","table-sm",3,"dtOptions"],["width","30"],["scope","col"],["bdColor","rgba(0, 0, 0, 0.8)","size","medium","color","#fff","type","ball-clip-rotate-multiple",3,"name","fullScreen"],[2,"color","white"],["type","button",1,"btn","btn-tambah","btn-lg","mb-3",3,"click"],[1,"fas","fa-plus"]],template:function(a,n){1&a&&(t.TgZ(0,"section",0)(1,"div",1)(2,"div",2),t._UZ(3,"app-breadcrumb",3),t.qZA(),t.TgZ(4,"h3",4),t._uU(5,"Stock Opname"),t.qZA(),t.TgZ(6,"div",5)(7,"div",6),t.YNc(8,Ia,3,0,"button",7),t.TgZ(9,"div",8)(10,"div",9)(11,"div",10)(12,"h4")(13,"strong"),t._uU(14,"Riwayat Stock Opname"),t.qZA()(),t.TgZ(15,"table",11)(16,"thead")(17,"tr")(18,"th",12),t._uU(19,"No"),t.qZA(),t.TgZ(20,"th"),t._uU(21,"Mulai Stock Opname"),t.qZA(),t.TgZ(22,"th",13),t._uU(23,"Selesai Stock Opname"),t.qZA()()(),t._UZ(24,"tbody"),t.qZA()()()()()()(),t.TgZ(25,"ngx-spinner",14)(26,"p",15),t._uU(27," Loading... "),t.qZA()()()),2&a&&(t.xp6(3),t.Q6J("title","Stock Opname")("items",t.DdM(7,Na))("active_item","Stock Opname"),t.xp6(5),t.Q6J("ngIf",n.btnAdd),t.xp6(7),t.Q6J("dtOptions",n.dtOptions),t.xp6(10),t.Q6J("name","spinner1")("fullScreen",!0))},directives:[H.L,k.O5,b.G,v.Ro],styles:[""]}),i})(),Q=(()=>{class i{constructor(a,n){this.generalService=a,this.http=n,this.urlBase="stok-opname",this.urlModule=this.generalService.getUrlModule(St.s.url_module.gudangTransaksi)}show(a){return this.http.get(this.urlModule+"/"+this.urlBase+"/get-opname-alat-kesehatan/"+a)}showTinjau(a){return this.http.get(this.urlModule+"/"+this.urlBase+"/get-byid-alat-kesehatan/"+a)}getAll(a){return this.http.get(this.urlModule+"/"+this.urlBase+"/showall-tinjau-produk-byid-riwayat/"+a)}listRiwayat(a){return this.http.post(this.urlModule+"/"+this.urlBase+"/list-datatable-riwayat",a)}listDatatables(a,n,e){return this.http.post(this.urlModule+"/"+this.urlBase+"/get-datatable-alat-kesehatan/"+e+"/"+n,a)}listTinjau(a,n){return this.http.post(this.urlModule+"/"+this.urlBase+"/get-datatable-tinjau-alat-kesehatan/"+n,a)}add(a,n){return this.http.post(this.urlModule+"/"+this.urlBase+"/add-opname-alat-kesehatan/"+n,a)}addTinjau(a,n){return this.http.post(this.urlModule+"/"+this.urlBase+"/add-tinjau-alat-kesehatan/"+n,a)}sesuaikan(a,n){return this.http.post(this.urlModule+"/"+this.urlBase+"/proses-penyesuaian-stok-alat-kesehatan/"+n,a)}start(){return this.http.post(this.urlModule+"/"+this.urlBase+"/mulai-stok-opname",{})}startTinjau(){return this.http.post(this.urlModule+"/"+this.urlBase+"/mulai-tinjau-opname",{})}update(a,n){return this.http.put(this.urlModule+"/"+this.urlBase+"/update-opname-alat-kesehatan/"+a,n)}finish(a){return this.http.put(this.urlModule+"/"+this.urlBase+"/selesai-stok-opname/"+a,{})}}return i.\u0275fac=function(a){return new(a||i)(t.LFG(Ot.m),t.LFG(vt.eN))},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var pt=c(22346),ht=c(51531),yt=c(88544),Da=c(55648),ja=c(23560),O=c(83918),wt=c(51693),K=c(24376);function La(i,l){1&i&&(t.TgZ(0,"p",37)(1,"b",38),t._UZ(2,"i",39),t.qZA(),t._uU(3," Anda sudah menyelesaikan stock opname, silahkan selesaikan peninjauan stock opname "),t.qZA())}function Ja(i,l){if(1&i&&(t.YNc(0,La,4,0,"p",31),t.TgZ(1,"div",32)(2,"div",33)(3,"h4")(4,"b"),t._uU(5,"Obat Belum Dipriksa"),t.qZA()()(),t._UZ(6,"div",33),t.qZA(),t.TgZ(7,"table",34)(8,"thead")(9,"tr")(10,"th",35),t._uU(11,"No"),t.qZA(),t.TgZ(12,"th"),t._uU(13,"Nama Barang"),t.qZA(),t.TgZ(14,"th",36),t._uU(15,"Aksi"),t.qZA()()(),t._UZ(16,"tbody"),t.qZA()),2&i){const a=t.oxw();t.Q6J("ngIf",1==a.status),t.xp6(7),t.Q6J("dtOptions",a.dtOptionsBelum)}}function Ya(i,l){1&i&&(t.TgZ(0,"p",37)(1,"b",38),t._UZ(2,"i",39),t.qZA(),t._uU(3," Anda sudah menyelesaikan stock opname, silahkan selesaikan peninjauan stock opname "),t.qZA())}function Pa(i,l){if(1&i&&(t.YNc(0,Ya,4,0,"p",31),t.TgZ(1,"div",32)(2,"div",33)(3,"h4")(4,"b"),t._uU(5,"Obat Sudah Dipriksa"),t.qZA()()(),t._UZ(6,"div",33),t.qZA(),t.TgZ(7,"table",34)(8,"thead")(9,"tr")(10,"th",35),t._uU(11,"No"),t.qZA(),t.TgZ(12,"th"),t._uU(13,"Nama Barang"),t.qZA(),t.TgZ(14,"th",36),t._uU(15,"Aksi"),t.qZA()()(),t._UZ(16,"tbody"),t.qZA()),2&i){const a=t.oxw();t.Q6J("ngIf",1==a.status),t.xp6(7),t.Q6J("dtOptions",a.dtOptionsSudah)}}function Fa(i,l){1&i&&(t.TgZ(0,"p",37)(1,"b",38),t._UZ(2,"i",39),t.qZA(),t._uU(3," Anda sudah menyelesaikan stock opname, silahkan selesaikan peninjauan stock opname "),t.qZA())}function Ha(i,l){if(1&i&&(t.YNc(0,Fa,4,0,"p",31),t.TgZ(1,"div",32)(2,"div",33)(3,"h4")(4,"b"),t._uU(5,"Alat Belum Dipriksa"),t.qZA()()(),t._UZ(6,"div",33),t.qZA(),t.TgZ(7,"table",34)(8,"thead")(9,"tr")(10,"th",35),t._uU(11,"No"),t.qZA(),t.TgZ(12,"th"),t._uU(13,"Nama Barang"),t.qZA(),t.TgZ(14,"th",36),t._uU(15,"Aksi"),t.qZA()()(),t._UZ(16,"tbody"),t.qZA()),2&i){const a=t.oxw();t.Q6J("ngIf",1==a.status),t.xp6(7),t.Q6J("dtOptions",a.dtOptionsAlatBelum)}}function Qa(i,l){1&i&&(t.TgZ(0,"p",37)(1,"b",38),t._UZ(2,"i",39),t.qZA(),t._uU(3," Anda sudah menyelesaikan stock opname, silahkan selesaikan peninjauan stock opname "),t.qZA())}function Ka(i,l){if(1&i&&(t.YNc(0,Qa,4,0,"p",31),t.TgZ(1,"div",32)(2,"div",33)(3,"h4")(4,"b"),t._uU(5,"Alat Sudah Dipriksa"),t.qZA()()(),t._UZ(6,"div",33),t.qZA(),t.TgZ(7,"table",34)(8,"thead")(9,"tr")(10,"th",35),t._uU(11,"No"),t.qZA(),t.TgZ(12,"th"),t._uU(13,"Nama Barang"),t.qZA(),t.TgZ(14,"th",36),t._uU(15,"Aksi"),t.qZA()()(),t._UZ(16,"tbody"),t.qZA()),2&i){const a=t.oxw();t.Q6J("ngIf",1==a.status),t.xp6(7),t.Q6J("dtOptions",a.dtOptionsAlatSudah)}}function $a(i,l){1&i&&(t.TgZ(0,"div",50),t._uU(1," Jumlah tidak boleh kosong "),t.qZA())}function Ra(i,l){if(1&i){const a=t.EpF();t.TgZ(0,"td")(1,"div",46)(2,"span",47),t._uU(3),t.qZA(),t.TgZ(4,"input",48),t.NdJ("keypress",function(e){return t.CHM(a),t.oxw(4).isNumber(e)})("change",function(){t.CHM(a);const e=t.oxw(4);return e.tampilBatch({id_obat:e.obat.id_obat,jumlah:e.total})})("keyup",function(){return t.CHM(a),t.oxw(4).setTotalObat(1)})("ngModelChange",function(e){t.CHM(a);const s=t.oxw().index;return t.oxw(3).qty[s]=e}),t.qZA()(),t.YNc(5,$a,2,0,"div",49),t.qZA()}if(2&i){const a=t.oxw(),n=a.$implicit,e=a.index,s=t.oxw(3);t.xp6(3),t.hij("",n.target_qty," x"),t.xp6(1),t.Q6J("ngModel",s.qty[e]),t.xp6(1),t.Q6J("ngIf",""==s.qty[e])}}function Ga(i,l){1&i&&(t.TgZ(0,"div",50),t._uU(1," Jumlah tidak boleh kosong "),t.qZA())}function Wa(i,l){if(1&i){const a=t.EpF();t.TgZ(0,"td")(1,"div",46)(2,"span",47),t._uU(3),t.qZA(),t.TgZ(4,"input",48),t.NdJ("keypress",function(e){return t.CHM(a),t.oxw(4).isNumber(e)})("change",function(){t.CHM(a);const e=t.oxw(4);return e.tampilBatch({id_obat:e.obat.id_obat,jumlah:e.total})})("keyup",function(){return t.CHM(a),t.oxw(4).setTotalObat(1)})("ngModelChange",function(e){t.CHM(a);const s=t.oxw().index;return t.oxw(3).qty[s]=e}),t.qZA()(),t.YNc(5,Ga,2,0,"div",49),t.qZA()}if(2&i){const a=t.oxw(),n=a.$implicit,e=a.index,s=t.oxw(3);t.xp6(3),t.hij("",n.kemasan_konversi.substring(0,n.kemasan_konversi.length-1)," x"),t.xp6(1),t.Q6J("ngModel",s.qty[e]),t.xp6(1),t.Q6J("ngIf",""==s.qty[e])}}function za(i,l){if(1&i&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.YNc(3,Ra,6,3,"td",42),t.YNc(4,Wa,6,3,"td",42),t.TgZ(5,"td"),t._uU(6),t.qZA()()),2&i){const a=l.$implicit,n=l.index,e=t.oxw(3);t.xp6(2),t.Oqu(a.nama_kemasan),t.xp6(1),t.Q6J("ngIf",n<=1),t.xp6(1),t.Q6J("ngIf",n>1),t.xp6(2),t.Oqu(e.sub_total[n])}}function Va(i,l){if(1&i&&(t.TgZ(0,"tbody"),t.YNc(1,za,7,4,"tr",45),t.TgZ(2,"tr")(3,"td"),t._uU(4,"TOTAL"),t.qZA(),t._UZ(5,"td"),t.TgZ(6,"td"),t._uU(7),t.qZA()()()),2&i){const a=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",a.obat.obat_kemasan),t.xp6(6),t.Oqu(a.total)}}function Xa(i,l){1&i&&(t.TgZ(0,"div",50),t._uU(1," Jumlah tidak boleh kosong "),t.qZA())}function te(i,l){if(1&i){const a=t.EpF();t.TgZ(0,"td")(1,"div",46)(2,"span",47),t._uU(3),t.qZA(),t.TgZ(4,"input",48),t.NdJ("keypress",function(e){return t.CHM(a),t.oxw(4).isNumber(e)})("change",function(){t.CHM(a);const e=t.oxw(4);return e.tampilBatch({id_obat:e.obat.id_obat,jumlah:e.total})})("keyup",function(){return t.CHM(a),t.oxw(4).setTotalObat(2)})("ngModelChange",function(e){t.CHM(a);const s=t.oxw().index;return t.oxw(3).qty[s]=e}),t.qZA()(),t.YNc(5,Xa,2,0,"div",49),t.qZA()}if(2&i){const a=t.oxw(),n=a.$implicit,e=a.index,s=t.oxw(3);t.xp6(3),t.hij("",n.satuan_qty," x"),t.xp6(1),t.Q6J("ngModel",s.qty[e]),t.xp6(1),t.Q6J("ngIf",""==s.qty[e].toString())}}function ae(i,l){1&i&&(t.TgZ(0,"div",50),t._uU(1," Jumlah tidak boleh kosong "),t.qZA())}function ee(i,l){if(1&i){const a=t.EpF();t.TgZ(0,"td")(1,"div",46)(2,"span",47),t._uU(3),t.qZA(),t.TgZ(4,"input",48),t.NdJ("keypress",function(e){return t.CHM(a),t.oxw(4).isNumber(e)})("change",function(){t.CHM(a);const e=t.oxw(4);return e.tampilBatch({id_obat:e.obat.id_obat,jumlah:e.total})})("keyup",function(){return t.CHM(a),t.oxw(4).setTotalObat(2)})("ngModelChange",function(e){t.CHM(a);const s=t.oxw().index;return t.oxw(3).qty[s]=e}),t.qZA()(),t.YNc(5,ae,2,0,"div",49),t.qZA()}if(2&i){const a=t.oxw(),n=a.$implicit,e=a.index,s=t.oxw(3);t.xp6(3),t.hij("",n.satuan_konversi.substring(0,n.satuan_konversi.length-1)," x "),t.xp6(1),t.Q6J("ngModel",s.qty[e]),t.xp6(1),t.Q6J("ngIf",""==s.qty[e].toString())}}function ne(i,l){if(1&i&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.YNc(3,te,6,3,"td",42),t.YNc(4,ee,6,3,"td",42),t.TgZ(5,"td"),t._uU(6),t.qZA()()),2&i){const a=l.$implicit,n=l.index,e=t.oxw(3);t.xp6(2),t.Oqu(a.satuan),t.xp6(1),t.Q6J("ngIf",n<=1),t.xp6(1),t.Q6J("ngIf",n>1),t.xp6(2),t.Oqu(e.sub_total[n])}}function ie(i,l){if(1&i&&(t.TgZ(0,"tbody"),t.YNc(1,ne,7,4,"tr",45),t.TgZ(2,"tr")(3,"td"),t._uU(4,"TOTAL"),t.qZA(),t._UZ(5,"td"),t.TgZ(6,"td"),t._uU(7),t.qZA()()()),2&i){const a=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",a.obat.stok_opname_obat_detail),t.xp6(6),t.Oqu(a.total)}}function se(i,l){if(1&i){const a=t.EpF();t.TgZ(0,"button",51),t.NdJ("click",function(){t.CHM(a);const e=t.oxw(2);return e.tampilBatch({id_obat:e.obat.id_obat,jumlah:e.total})}),t._uU(1,"Tampilkan Batch"),t.qZA()}}function oe(i,l){1&i&&(t.TgZ(0,"p",50),t._uU(1," stok opname tidak boleh kosong "),t.qZA())}function le(i,l){if(1&i){const a=t.EpF();t.TgZ(0,"button",60),t.NdJ("click",function(){t.CHM(a);const e=t.oxw().index;return t.oxw(3).remove(e)}),t._UZ(1,"i",61),t.qZA()}}const Mt=function(i){return{background:i}};function re(i,l){if(1&i){const a=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td")(10,"input",58),t.NdJ("keypress",function(e){return t.CHM(a),t.oxw(3).isNumber(e)})("ngModelChange",function(e){const o=t.CHM(a).index;return t.oxw(3).batch[o]=e}),t.qZA(),t.YNc(11,oe,2,0,"p",49),t.qZA(),t.TgZ(12,"td"),t.YNc(13,le,2,0,"button",59),t.qZA(),t._UZ(14,"td"),t.qZA()}if(2&i){const a=l.$implicit,n=l.index,e=t.oxw(3);t.Akn(t.VKq(9,Mt,e.checkExpired(a.tanggal_ed_unix)?"#ff8c8c":"none")),t.xp6(2),t.Oqu(a.no_batch),t.xp6(2),t.Oqu(a.stok_awal),t.xp6(2),t.Oqu(a.stok),t.xp6(2),t.Oqu(e.convertDate(a.tanggal_ed_unix)),t.xp6(2),t.Q6J("ngModel",e.batch[n]),t.xp6(1),t.Q6J("ngIf",e.parseNum(e.batch[n])<0),t.xp6(2),t.Q6J("ngIf",a.search&&0==a.stok)}}function _e(i,l){if(1&i&&(t.TgZ(0,"div",62),t._uU(1),t.qZA()),2&i){const a=t.oxw(3);t.xp6(1),t.Oqu(a.warningBatch)}}function ue(i,l){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const a=l.item;t.xp6(1),t.Oqu(a.no_batch)}}function de(i,l){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const a=l.item;t.xp6(1),t.Oqu(a.no_batch)}}function ce(i,l){if(1&i){const a=t.EpF();t.TgZ(0,"div")(1,"table",52)(2,"thead")(3,"tr")(4,"th"),t._uU(5,"Batch"),t.qZA(),t.TgZ(6,"th"),t._uU(7,"Stok Awal"),t.qZA(),t.TgZ(8,"th"),t._uU(9,"Stok Terkini"),t.qZA(),t.TgZ(10,"th"),t._uU(11,"Tgl ED"),t.qZA(),t.TgZ(12,"th"),t._uU(13,"Stokopname"),t.qZA(),t._UZ(14,"th"),t.qZA()(),t.TgZ(15,"tbody"),t.YNc(16,re,15,11,"tr",53),t.qZA()(),t.YNc(17,_e,2,1,"div",54),t._UZ(18,"br"),t.TgZ(19,"ng-select",55),t.NdJ("ngModelChange",function(e){return t.CHM(a),t.oxw(2).no_batch=e})("change",function(e){return t.CHM(a),t.oxw(2).setBatch(e)})("search",function(e){return t.CHM(a),t.oxw(2).prosesSelectBatchObat(e,"search")})("scrollToEnd",function(e){return t.CHM(a),t.oxw(2).prosesSelectBatchObat(e,"last_page")})("open",function(e){return t.CHM(a),t.oxw(2).prosesSelectBatchObat(e,"open")}),t.YNc(20,ue,2,1,"ng-template",56),t.YNc(21,de,2,1,"ng-template",57),t.qZA()()}if(2&i){const a=t.oxw(2);t.xp6(16),t.Q6J("ngForOf",a.listBatch),t.xp6(1),t.Q6J("ngIf",""!=a.warningBatch),t.xp6(2),t.Q6J("ngModel",a.no_batch)("virtualScroll",!0)("items",a.dataBatchObat)("searchable",!0)("clearable",!0)}}function pe(i,l){if(1&i&&(t.TgZ(0,"div",40)(1,"table",41)(2,"thead")(3,"tr")(4,"th"),t._uU(5,"Kemasan"),t.qZA(),t.TgZ(6,"th"),t._uU(7,"Jumlah"),t.qZA(),t.TgZ(8,"th"),t._uU(9,"Stok"),t.qZA()()(),t.YNc(10,Va,8,2,"tbody",42),t.YNc(11,ie,8,2,"tbody",42),t.qZA(),t._UZ(12,"br"),t.TgZ(13,"div",43),t.YNc(14,se,2,0,"button",44),t.qZA(),t.YNc(15,ce,22,7,"div",42),t.qZA()),2&i){const a=t.oxw();t.xp6(10),t.Q6J("ngIf",a.isAdd),t.xp6(1),t.Q6J("ngIf",a.isEdit),t.xp6(3),t.Q6J("ngIf",!a.showBatch),t.xp6(1),t.Q6J("ngIf",a.showBatch)}}function he(i,l){if(1&i){const a=t.EpF();t.TgZ(0,"button",63),t.NdJ("click",function(){t.CHM(a);const e=t.oxw();return e.save(e.obat.id_obat)}),t._uU(1," Simpan "),t.qZA()}}function me(i,l){if(1&i){const a=t.EpF();t.TgZ(0,"button",63),t.NdJ("click",function(){t.CHM(a);const e=t.oxw();return e.update(e.obat.id_stok_opname_obat)}),t._uU(1," Update "),t.qZA()}}function ge(i,l){1&i&&(t.TgZ(0,"div",50),t._uU(1," Jumlah tidak boleh kosong "),t.qZA())}function be(i,l){if(1&i){const a=t.EpF();t.TgZ(0,"td")(1,"div",46)(2,"span",47),t._uU(3),t.qZA(),t.TgZ(4,"input",48),t.NdJ("keypress",function(e){return t.CHM(a),t.oxw(4).isNumber(e)})("change",function(){t.CHM(a);const e=t.oxw(4);return e.tampilBatch({id_alat_kesehatan:e.alat.id_alat_kesehatan,jumlah:e.total})})("keyup",function(){return t.CHM(a),t.oxw(4).setTotalAlat(1)})("ngModelChange",function(e){t.CHM(a);const s=t.oxw().index;return t.oxw(3).qty[s]=e}),t.qZA()(),t.YNc(5,ge,2,0,"div",49),t.qZA()}if(2&i){const a=t.oxw(),n=a.$implicit,e=a.index,s=t.oxw(3);t.xp6(3),t.hij("",n.target_qty," x"),t.xp6(1),t.Q6J("ngModel",s.qty[e]),t.xp6(1),t.Q6J("ngIf",""==s.qty[e])}}function fe(i,l){1&i&&(t.TgZ(0,"div",50),t._uU(1," Jumlah tidak boleh kosong "),t.qZA())}function ke(i,l){if(1&i){const a=t.EpF();t.TgZ(0,"td")(1,"div",46)(2,"span",47),t._uU(3),t.qZA(),t.TgZ(4,"input",48),t.NdJ("keypress",function(e){return t.CHM(a),t.oxw(4).isNumber(e)})("change",function(){t.CHM(a);const e=t.oxw(4);return e.tampilBatch({id_alat_kesehatan:e.alat.id_alat_kesehatan,jumlah:e.total})})("keyup",function(){return t.CHM(a),t.oxw(4).setTotalAlat(1)})("ngModelChange",function(e){t.CHM(a);const s=t.oxw().index;return t.oxw(3).qty[s]=e}),t.qZA()(),t.YNc(5,fe,2,0,"div",49),t.qZA()}if(2&i){const a=t.oxw(),n=a.$implicit,e=a.index,s=t.oxw(3);t.xp6(3),t.hij("",n.kemasan_konversi.substring(0,n.kemasan_konversi.length-1)," x"),t.xp6(1),t.Q6J("ngModel",s.qty[e]),t.xp6(1),t.Q6J("ngIf",""==s.qty[e])}}function Te(i,l){if(1&i&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.YNc(3,be,6,3,"td",42),t.YNc(4,ke,6,3,"td",42),t.TgZ(5,"td"),t._uU(6),t.qZA()()),2&i){const a=l.$implicit,n=l.index,e=t.oxw(3);t.xp6(2),t.Oqu(a.nama_kemasan),t.xp6(1),t.Q6J("ngIf",n<=1),t.xp6(1),t.Q6J("ngIf",n>1),t.xp6(2),t.Oqu(e.sub_total[n])}}function xe(i,l){if(1&i&&(t.TgZ(0,"tbody"),t.YNc(1,Te,7,4,"tr",45),t.TgZ(2,"tr")(3,"td"),t._uU(4,"TOTAL"),t.qZA(),t._UZ(5,"td"),t.TgZ(6,"td"),t._uU(7),t.qZA()()()),2&i){const a=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",a.alat.alat_kesehatan_kemasan),t.xp6(6),t.Oqu(a.total)}}function Ae(i,l){1&i&&(t.TgZ(0,"div",50),t._uU(1," Jumlah tidak boleh kosong "),t.qZA())}function Ze(i,l){if(1&i){const a=t.EpF();t.TgZ(0,"td")(1,"div",46)(2,"span",47),t._uU(3),t.qZA(),t.TgZ(4,"input",48),t.NdJ("keypress",function(e){return t.CHM(a),t.oxw(4).isNumber(e)})("change",function(){t.CHM(a);const e=t.oxw(4);return e.tampilBatch({id_alat_kesehatan:e.alat.id_alat_kesehatan,jumlah:e.total})})("keyup",function(){return t.CHM(a),t.oxw(4).setTotalAlat(2)})("ngModelChange",function(e){t.CHM(a);const s=t.oxw().index;return t.oxw(3).qty[s]=e}),t.qZA()(),t.YNc(5,Ae,2,0,"div",49),t.qZA()}if(2&i){const a=t.oxw(),n=a.$implicit,e=a.index,s=t.oxw(3);t.xp6(3),t.hij("",n.satuan_qty," x"),t.xp6(1),t.Q6J("ngModel",s.qty[e]),t.xp6(1),t.Q6J("ngIf",""==s.qty[e].toString())}}function Se(i,l){1&i&&(t.TgZ(0,"div",50),t._uU(1," Jumlah tidak boleh kosong "),t.qZA())}function Oe(i,l){if(1&i){const a=t.EpF();t.TgZ(0,"td")(1,"div",46)(2,"span",47),t._uU(3),t.qZA(),t.TgZ(4,"input",48),t.NdJ("keypress",function(e){return t.CHM(a),t.oxw(4).isNumber(e)})("change",function(){t.CHM(a);const e=t.oxw(4);return e.tampilBatch({id_alat_kesehatan:e.alat.id_alat_kesehatan,jumlah:e.total})})("keyup",function(){return t.CHM(a),t.oxw(4).setTotalAlat(2)})("ngModelChange",function(e){t.CHM(a);const s=t.oxw().index;return t.oxw(3).qty[s]=e}),t.qZA()(),t.YNc(5,Se,2,0,"div",49),t.qZA()}if(2&i){const a=t.oxw(),n=a.$implicit,e=a.index,s=t.oxw(3);t.xp6(3),t.hij("",n.satuan_konversi.substring(0,n.satuan_konversi.length-1)," x "),t.xp6(1),t.Q6J("ngModel",s.qty[e]),t.xp6(1),t.Q6J("ngIf",""==s.qty[e].toString())}}function ve(i,l){if(1&i&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.YNc(3,Ze,6,3,"td",42),t.YNc(4,Oe,6,3,"td",42),t.TgZ(5,"td"),t._uU(6),t.qZA()()),2&i){const a=l.$implicit,n=l.index,e=t.oxw(3);t.xp6(2),t.Oqu(a.satuan),t.xp6(1),t.Q6J("ngIf",n<=1),t.xp6(1),t.Q6J("ngIf",n>1),t.xp6(2),t.Oqu(e.sub_total[n])}}function ye(i,l){if(1&i&&(t.TgZ(0,"tbody"),t.YNc(1,ve,7,4,"tr",45),t.TgZ(2,"tr")(3,"td"),t._uU(4,"TOTAL"),t.qZA(),t._UZ(5,"td"),t.TgZ(6,"td"),t._uU(7),t.qZA()()()),2&i){const a=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",a.alat.stok_opname_alat_kesehatan_detail),t.xp6(6),t.Oqu(a.total)}}function we(i,l){if(1&i){const a=t.EpF();t.TgZ(0,"button",51),t.NdJ("click",function(){t.CHM(a);const e=t.oxw(2);return e.tampilBatch({id_alat_kesehatan:e.alat.id_alat_kesehatan,jumlah:e.total})}),t._uU(1,"Tampilkan Batch"),t.qZA()}}function Me(i,l){1&i&&(t.TgZ(0,"p",50),t._uU(1," stok opname tidak boleh kosong "),t.qZA())}function Ce(i,l){if(1&i){const a=t.EpF();t.TgZ(0,"button",60),t.NdJ("click",function(){t.CHM(a);const e=t.oxw().index;return t.oxw(3).remove(e)}),t._UZ(1,"i",61),t.qZA()}}function qe(i,l){if(1&i){const a=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td")(10,"input",58),t.NdJ("keypress",function(e){return t.CHM(a),t.oxw(3).isNumber(e)})("ngModelChange",function(e){const o=t.CHM(a).index;return t.oxw(3).batch[o]=e}),t.qZA(),t.YNc(11,Me,2,0,"p",49),t.qZA(),t.TgZ(12,"td"),t.YNc(13,Ce,2,0,"button",59),t.qZA()()}if(2&i){const a=l.$implicit,n=l.index,e=t.oxw(3);t.Akn(t.VKq(9,Mt,e.checkExpired(a.tanggal_ed_unix)?"#ff8c8c":"none")),t.xp6(2),t.Oqu(a.no_batch),t.xp6(2),t.Oqu(a.stok_awal),t.xp6(2),t.Oqu(a.stok),t.xp6(2),t.Oqu(e.convertDate(a.tanggal_ed_unix)),t.xp6(2),t.Q6J("ngModel",e.batch[n]),t.xp6(1),t.Q6J("ngIf",e.parseNum(e.batch[n])<0),t.xp6(2),t.Q6J("ngIf",a.search&&0==a.stok)}}function Ue(i,l){if(1&i&&(t.TgZ(0,"div",62),t._uU(1),t.qZA()),2&i){const a=t.oxw(3);t.xp6(1),t.Oqu(a.warningBatch)}}function Be(i,l){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const a=l.item;t.xp6(1),t.Oqu(a.no_batch)}}function Ie(i,l){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const a=l.item;t.xp6(1),t.Oqu(a.no_batch)}}function Ne(i,l){if(1&i){const a=t.EpF();t.TgZ(0,"div")(1,"table",52)(2,"thead")(3,"tr")(4,"th"),t._uU(5,"Batch"),t.qZA(),t.TgZ(6,"th"),t._uU(7,"Stok Awal"),t.qZA(),t.TgZ(8,"th"),t._uU(9,"Stok Terkini"),t.qZA(),t.TgZ(10,"th"),t._uU(11,"Tgl ED"),t.qZA(),t.TgZ(12,"th"),t._uU(13,"Stokopname"),t.qZA(),t._UZ(14,"th"),t.qZA()(),t.TgZ(15,"tbody"),t.YNc(16,qe,14,11,"tr",53),t.qZA()(),t.YNc(17,Ue,2,1,"div",54),t._UZ(18,"br"),t.TgZ(19,"ng-select",55),t.NdJ("ngModelChange",function(e){return t.CHM(a),t.oxw(2).no_batch=e})("change",function(e){return t.CHM(a),t.oxw(2).setBatchAlat(e)})("search",function(e){return t.CHM(a),t.oxw(2).prosesSelectBatchAlat(e,"search")})("scrollToEnd",function(e){return t.CHM(a),t.oxw(2).prosesSelectBatchAlat(e,"last_page")})("open",function(e){return t.CHM(a),t.oxw(2).prosesSelectBatchAlat(e,"open")}),t.YNc(20,Be,2,1,"ng-template",56),t.YNc(21,Ie,2,1,"ng-template",57),t.qZA()()}if(2&i){const a=t.oxw(2);t.xp6(16),t.Q6J("ngForOf",a.listBatch),t.xp6(1),t.Q6J("ngIf",""!=a.warningBatch),t.xp6(2),t.Q6J("ngModel",a.no_batch)("virtualScroll",!0)("items",a.dataBatchAlat)("searchable",!0)("clearable",!0)}}function Ee(i,l){if(1&i&&(t.TgZ(0,"div",40)(1,"table",41)(2,"thead")(3,"tr")(4,"th"),t._uU(5,"Kemasan"),t.qZA(),t.TgZ(6,"th"),t._uU(7,"Jumlah"),t.qZA(),t.TgZ(8,"th"),t._uU(9,"Stok"),t.qZA()()(),t.YNc(10,xe,8,2,"tbody",42),t.YNc(11,ye,8,2,"tbody",42),t.qZA(),t._UZ(12,"br"),t.TgZ(13,"div",43),t.YNc(14,we,2,0,"button",44),t.qZA(),t.YNc(15,Ne,22,7,"div",42),t.qZA()),2&i){const a=t.oxw();t.xp6(10),t.Q6J("ngIf",a.isAdd),t.xp6(1),t.Q6J("ngIf",a.isEdit),t.xp6(3),t.Q6J("ngIf",!a.showBatch),t.xp6(1),t.Q6J("ngIf",a.showBatch)}}function De(i,l){if(1&i){const a=t.EpF();t.TgZ(0,"button",63),t.NdJ("click",function(){t.CHM(a);const e=t.oxw();return e.saveAlat(e.alat.id_alat_kesehatan)}),t._uU(1," Simpan "),t.qZA()}}function je(i,l){if(1&i){const a=t.EpF();t.TgZ(0,"button",63),t.NdJ("click",function(){t.CHM(a);const e=t.oxw();return e.updateAlat(e.alat.id_stok_opname_alat_kesehatan)}),t._uU(1," Update "),t.qZA()}}const Le=function(){return["Stock Opname"]};let Je=(()=>{class i{constructor(a,n,e,s,o,_,d,g,j,L,mt,Hn,Qn){this.modalService=a,this.modulStokOpname=n,this.modulStokOpnameAlat=e,this.modulAlat=s,this.router=o,this.spinner=_,this.Modulobat=d,this.fb=g,this.validate=j,this.StokObat=L,this.StokAlat=mt,this.store=Hn,this.activatedRoute=Qn,this.datatableElement=b.G,this.dtOptionsBelum={},this.dtOptionsSudah={},this.dtOptionsAlatBelum={},this.dtOptionsAlatSudah={},this.dataAlat=new E,this.active=1,this.title="",this.isAdd=!1,this.isEdit=!1,this.kemasan=[],this.qty=[],this.total=0,this.submitted=!1,this.id_stok_opname=null,this.dataBelumLength=0,this.dataSudahLength=0,this.obat=null,this.alat=null,this.sub_total=[],this.stokTerkini=0,this.showBatch=!1,this.listBatch=[],this.batch=[],this.stokopname_batch=[],this.params_get={last_data:"0",get_data:"10",search:"",show:"all"},this.warningBatch="",this.succes=!1,this.status=0,this.getState=this.store.select("stok_opname")}ngOnInit(){this.spinner.show("spinner1"),this.activatedRoute.params.subscribe(a=>{a&&(this.id_stok_opname=a.id,this.status=a.status)}),this.dtOptionsBelum=this.showDataTables("belum"),this.dtOptionsSudah=this.showDataTablesSudah("sudah"),this.dtOptionsAlatBelum=this.showDataTablesAlatBelum("belum"),this.dtOptionsAlatSudah=this.showDataTablesAlatSudah("sudah"),this.getState.subscribe(a=>{this.reloadTable=a.reloadTable,!0===this.reloadTable&&this.reLoadData()}),this.formInput=this.fb.group({id_obat:[],satuan:[]}),setTimeout(()=>{this.spinner.hide("spinner1")},700),this.getState.subscribe(a=>{a.reloadTable&&null==a.errorMessage?null!=this.obat?(this.spinner.hide("spinner1"),this.modalClose("blmDipriksa"),this.obat=null):null!=this.alat&&(this.spinner.hide("spinner1"),this.modalClose("blmDipriksaAlat")):this.spinner.hide("spinner1")})}isNumber(a){return this.validate.Number(a)}tampilBatch(a){this.showBatch=!0,this.spinner.show("spinner1"),null!=a.id_obat?this.StokObat.getBatchStockOpname(a).subscribe(n=>{this.listBatch=n.response,this.listBatch.map((e,s)=>{this.batch[s]=e.jumlah}),this.spinner.hide("spinner1")},n=>{if(n.response.length>0){let e="";n.response.map(s=>{e+=s.field+" "+s.message+"\n"}),u().fire("Error",e,"error")}else u().fire("Error",n.metaData.message,"error")}):this.StokAlat.getBatchStockOpname(a).subscribe(n=>{this.listBatch=n.response,this.listBatch.map((e,s)=>{this.batch[s]=e.jumlah}),this.spinner.hide("spinner1")})}convertDate(a){return I(new Date(a)).format("DD-MM-YYYY")}tabSudah(){this.dtOptionsSudah=this.showDataTablesSudah("sudah")}tabBlmAlat(){this.dtOptionsAlatBelum=this.showDataTablesAlatBelum("belum")}tabSudahAlat(){this.dtOptionsAlatSudah=this.showDataTablesAlatSudah("sudah")}prosesSelectBatchAlat(a,n){if("search"==n?(this.dataBatchAlat=[],this.params_get.search=a.term,this.params_get.last_data="0"):this.params_get.search="","last_page"==n){let e=parseInt(this.params_get.last_data)+parseInt(this.params_get.get_data);this.params_get.last_data=e.toString()}else this.params_get.last_data="0";this.StokAlat.getSelectBatchStockOpname(this.alat.id_alat_kesehatan,this.params_get).subscribe(e=>{this.dataBatchAlat=e.response,this.listBatch.map(s=>{let o=this.dataBatchAlat.findIndex(_=>_.no_batch==s.no_batch);this.dataBatchAlat.splice(o,1)})})}prosesSelectBatchObat(a,n){if("search"==n?(this.dataBatchObat=[],this.params_get.search=a.term,this.params_get.last_data="0"):this.params_get.search="","last_page"==n){let e=parseInt(this.params_get.last_data)+parseInt(this.params_get.get_data);this.params_get.last_data=e.toString()}else this.params_get.last_data="0";this.StokObat.getSelectBatchStockOpname(this.obat.id_obat,this.params_get).subscribe(e=>{this.dataBatchObat=e.response,this.listBatch.map(s=>{let o=this.dataBatchObat.findIndex(_=>_.no_batch==s.no_batch);this.dataBatchObat.splice(o,1)})})}setBatch(a){a&&this.listBatch.push({id_gudang_obat:a.id_gudang_obat,no_batch:a.no_batch,stok_awal:a.stok_awal,jumlah:a.jumlah,tanggal_ed_unix:a.tanggal_ed_unix,stok:a.stok_terkini,search:!0})}setBatchAlat(a){a&&this.listBatch.push({id_gudang_alat_kesehatan:a.id_gudang_alat_kesehatan,no_batch:a.no_batch,stok_awal:a.stok_awal,jumlah:a.jumlah,tanggal_ed_unix:a.tanggal_ed_unix,stok:a.stok_terkini,search:!0})}setBatch2(a){a&&this.listBatch.push({id_gudang_obat:a.id_gudang_obat,no_batch:null==a?void 0:a.no_batch,stok_awal:null==a?void 0:a.stok_awal,jumlah:null==a?void 0:a.jumlah_stok,tanggal_ed_unix:null==a?void 0:a.tanggal_ed_unix,stok:a.stok_terkini,search:!0})}setBatchAlat2(a){a&&this.listBatch.push({id_gudang_alat_kesehatan:a.id_gudang_alat_kesehatan,no_batch:null==a?void 0:a.no_batch,stok_awal:null==a?void 0:a.stok_awal,jumlah:null==a?void 0:a.jumlah_stok,tanggal_ed_unix:null==a?void 0:a.tanggal_ed_unix,stok:a.stok_terkini,search:!0})}reLoadData(){this.datatableElement.dtInstance.then(a=>{a.ajax.reload()})}showDataTables(a){let n=this;return{pageLength:10,serverSide:!0,processing:!0,order:[],ajax:(e,s)=>{this.modulStokOpname.listDatatables(e,a,this.id_stok_opname).subscribe(o=>{"sudah"==a?this.dataSudahLength=o.response.data.length:this.dataBelumLength=o.response.data.length,s({draw:o.response.draw,recordsTotal:o.response.recordsTotal,recordsFiltered:o.response.recordsFiltered,data:o.response.data})})},columns:[{orderable:!1,searchable:!1,render:(e,s,o,_)=>_.row+1+_.settings._iDisplayStart},{data:"nama_obat"},{orderable:!1,searchable:!1,render:(e,s,o,_)=>0==n.status?'<button class="btn btn-sm btn-info add"><i class="fas fa-pen"></i> Input</button>':'<button class="btn btn-sm btn-info add" disabled><i class="fas fa-pen"></i> Input</button>'}],rowCallback:(e,s,o)=>{const _=this;return $("td .add",e).on("click",()=>{_.add(s)}),e}}}showDataTablesSudah(a){let n=this;return{pageLength:10,serverSide:!0,processing:!0,order:[],ajax:(e,s)=>{this.modulStokOpname.listDatatables(e,a,this.id_stok_opname).subscribe(o=>{this.dataSudahLength=o.response.data.length,s({draw:o.response.draw,recordsTotal:o.response.recordsTotal,recordsFiltered:o.response.recordsFiltered,data:o.response.data})})},columns:[{orderable:!1,searchable:!1,render:(e,s,o,_)=>_.row+1+_.settings._iDisplayStart},{data:"nama_obat"},{orderable:!1,searchable:!1,render:(e,s,o,_)=>0==n.status?'<button class="btn btn-sm btn-info edit"><i class="fas fa-pen"></i> Edit</button>':'<button class="btn btn-sm btn-info edit" disabled><i class="fas fa-pen"></i> Edit</button>'}],rowCallback:(e,s,o)=>{const _=this;return $("td .edit",e).on("click",()=>{_.edit(s)}),e}}}showDataTablesAlatBelum(a){let n=this;return{pageLength:10,serverSide:!0,processing:!0,order:[],ajax:(e,s)=>{this.modulStokOpnameAlat.listDatatables(e,a,this.id_stok_opname).subscribe(o=>{"sudah"==a?this.dataSudahLength=o.response.data.length:this.dataBelumLength=o.response.data.length,s({draw:o.response.draw,recordsTotal:o.response.recordsTotal,recordsFiltered:o.response.recordsFiltered,data:o.response.data})})},columns:[{orderable:!1,searchable:!1,render:(e,s,o,_)=>_.row+1+_.settings._iDisplayStart},{data:"nama_alat_kesehatan"},{orderable:!1,searchable:!1,render:(e,s,o,_)=>0==n.status?'<button class="btn btn-sm btn-info addAlat"><i class="fas fa-pen"></i> Input</button>':'<button class="btn btn-sm btn-info addAlat" disabled><i class="fas fa-pen"></i> Input</button>'}],rowCallback:(e,s,o)=>{const _=this;return $("td .addAlat",e).on("click",()=>{_.addAlat(s)}),e}}}showDataTablesAlatSudah(a){let n=this;return{pageLength:10,serverSide:!0,processing:!0,order:[],ajax:(e,s)=>{this.modulStokOpnameAlat.listDatatables(e,a,this.id_stok_opname).subscribe(o=>{this.dataSudahLength=o.response.data.length,s({draw:o.response.draw,recordsTotal:o.response.recordsTotal,recordsFiltered:o.response.recordsFiltered,data:o.response.data})})},columns:[{orderable:!1,searchable:!1,render:(e,s,o,_)=>_.row+1+_.settings._iDisplayStart},{data:"nama_alat_kesehatan"},{orderable:!1,searchable:!1,render:(e,s,o,_)=>0==n.status?'<button class="btn btn-sm btn-info editAlat"><i class="fas fa-pen"></i> Edit</button>':'<button class="btn btn-sm btn-info editAlat" disabled><i class="fas fa-pen"></i> Edit</button>'}],rowCallback:(e,s,o)=>{const _=this;return $("td .editAlat",e).on("click",()=>{_.editAlat(s)}),e}}}add(a){this.submitted=!1,this.showBatch=!1,this.spinner.show("spinner1"),this.reset(),this.Modulobat.show(a.id_obat).subscribe(n=>{"0000"!=n.metaData.response_code?u().fire("Error",n.metaData.message,"error"):(this.title=n.response.nama_obat,this.obat=n.response,this.alat=null,this.no_batch=null,this.isAdd=!0,this.isEdit=!1,this.total=0,this.qty=[],this.sub_total=[],this.obat.obat_kemasan.map(e=>{this.qty.push("0"),this.sub_total.push(0)}),this.open("blmDipriksa")),this.spinner.hide("spinner1")})}remove(a){this.listBatch.splice(a,1),this.batch.splice(a,1)}addAlat(a){this.showBatch=!1,this.submitted=!1,this.spinner.show("spinner1"),this.reset(),this.modulAlat.show(a.id_alat_kesehatan).subscribe(n=>{"0000"!=n.metaData.response_code?u().fire("Error",n.metaData.message,"error"):(this.title=n.response.nama_alat_kesehatan,this.alat=n.response,this.obat=null,this.no_batch=null,this.isAdd=!0,this.isEdit=!1,this.total=0,this.qty=[],this.sub_total=[],this.alat.alat_kesehatan_kemasan.map(e=>{this.qty.push("0"),this.sub_total.push(0)}),this.open("blmDipriksaAlat")),this.spinner.hide("spinner1")})}reset(){this.obat=null,this.alat=null,this.no_batch=null,this.isAdd=!1,this.isEdit=!1,this.total=0,this.qty=[],this.showBatch=!1,this.dataBatchAlat=[],this.dataBatchObat=[],this.listBatch=[],this.batch=[]}save(a){this.submitted=!1,setTimeout(()=>{this.submitted=!0},300);let n=!0;if(this.qty.map(e=>{""==e&&(n=!1)}),n){let e=[],s=!1;this.spinner.show("spinner1"),this.obat.obat_kemasan.map((d,g)=>{parseInt(this.qty[g])>=0?e.push({id_obat_kemasan:d.id_obat_kemasan,jumlah_stok:this.qty[g]}):s=!0}),this.warningBatch="";let o=[];if(this.listBatch.map((d,g)=>{(new Date).getTime()>new Date(d.tanggal_ed_unix).getTime()&&parseInt(this.batch[g])>0?(this.warningBatch="Stok Expired harus berisi 0",setTimeout(()=>{this.warningBatch=""},2e3),s=!0):parseInt(this.batch[g])<0?s=!0:o.push({id_gudang_obat:d.id_gudang_obat,jumlah_stok:parseInt(this.batch[g])})}),e.length<0||s)return this.spinner.hide("spinner1"),!1;this.store.dispatch(G({payload:{id_obat:a,satuan:e,batch:o},id:this.id_stok_opname}))}}saveAlat(a){this.submitted=!1,setTimeout(()=>{this.submitted=!0},300);let n=!0;if(this.qty.map(e=>{""==e&&(n=!1)}),n){this.spinner.show("spinner1");let e=!1,s=[];this.alat.alat_kesehatan_kemasan.map((d,g)=>{parseInt(this.qty[g])>=0?s.push({id_alat_kesehatan_kemasan:d.id_alat_kesehatan_kemasan,jumlah_stok:parseInt(this.qty[g])}):(console.log("err qty"),e=!0)});let o=[];if(this.warningBatch="",this.listBatch.map((d,g)=>{(new Date).getTime()>new Date(d.tanggal_ed_unix).getTime()&&parseInt(this.batch[g])>0?(this.warningBatch="Stok Expired harus berisi 0",setTimeout(()=>{this.warningBatch=""},2e3),e=!0):parseInt(this.batch[g])<0?e=!0:o.push({id_gudang_alat_kesehatan:d.id_gudang_alat_kesehatan,jumlah_stok:this.batch[g]})}),s.length<0||e)return this.spinner.hide("spinner1"),!1;this.store.dispatch(ot({payload:{id_alat_kesehatan:a,satuan:s,batch:o},id:this.id_stok_opname}))}}update(a){this.submitted=!1,setTimeout(()=>{this.submitted=!0},300);let n=!1,e=[];this.obat.stok_opname_obat_detail.map((_,d)=>{parseInt(this.qty[d])>=0?e.push({id_stok_opname_obat_detail:_.id_stok_opname_obat_detail,id_obat_kemasan:_.id_obat_kemasan,jumlah_stok:parseInt(this.qty[d])}):(console.log("error stok"),n=!0)});let o=[];this.listBatch.map((_,d)=>{(new Date).getTime()>new Date(_.tanggal_ed_unix).getTime()&&parseInt(this.batch[d])>0?(this.warningBatch="Stok Expired harus berisi 0",setTimeout(()=>{this.warningBatch=""},2e3),n=!0):parseInt(this.batch[d])<0?n=!0:parseInt(this.batch[d])>=0?o.push({id_stok_opname_obat_batch:this.stokopname_batch[d]?this.stokopname_batch[d]:"",id_gudang_obat:_.id_gudang_obat,jumlah_stok:parseInt(this.batch[d])}):(console.log("error batch"),n=!0)}),e.length>0&&!n&&(this.spinner.show("spinner1"),this.store.dispatch(et({payload:{id_obat:this.obat.id_obat,satuan:e,batch:o},id:this.obat.id_stok_opname_obat})))}parseNum(a){return parseInt(a)>=0?parseInt(a):-1}updateAlat(a){this.submitted=!1,setTimeout(()=>{this.submitted=!0},300);let n=!1,e=[];this.alat.stok_opname_alat_kesehatan_detail.map((_,d)=>{parseInt(this.qty[d])>=0?e.push({id_stok_opname_alat_kesehatan_detail:_.id_stok_opname_alat_kesehatan_detail,id_alat_kesehatan_kemasan:_.id_alat_kesehatan_kemasan,jumlah_stok:parseInt(this.qty[d])}):n=!0});let o=[];this.listBatch.map((_,d)=>{(new Date).getTime()>new Date(_.tanggal_ed_unix).getTime()&&parseInt(this.batch[d])>0?(this.warningBatch="Stok Expired harus berisi 0",setTimeout(()=>{this.warningBatch=""},2e3),n=!0):parseInt(this.batch[d])<0?n=!0:parseInt(this.batch[d])>=0?o.push({id_stok_opname_alat_kesehatan_batch:this.stokopname_batch[d]?this.stokopname_batch[d]:"",id_gudang_alat_kesehatan:_.id_gudang_alat_kesehatan,jumlah_stok:parseInt(this.batch[d])}):n=!0}),e.length>0&&!n&&(this.spinner.show("spinner1"),this.store.dispatch(ut({payload:{id_alat_kesehatan:this.alat.id_alat_kesehatan,satuan:e,batch:o},id:this.alat.id_stok_opname_alat_kesehatan})))}edit(a){this.showBatch=!1,this.submitted=!1,this.spinner.show("spinner1"),this.reset(),this.modulStokOpname.show(a.id_stok_opname_obat).subscribe(n=>{"0000"!=n.metaData.response_code?u().fire("Error",n.metaData.message,"error"):(this.title=n.response.nama_obat,this.obat=n.response,this.stokopname_batch=[],this.listBatch=[],this.sub_total=[],this.obat.stok_opname_obat_detail.map((e,s)=>{this.qty[s]=e.jumlah_stok,this.sub_total.push(e.jumlah_stok*e.satuan_qty),this.total+=this.sub_total[s]}),this.obat.stok_opname_obat_batch.map((e,s)=>{this.stokopname_batch.push(e.id_stok_opname_obat_batch),this.setBatch2(e),this.batch[s]=e.batch_qty}),this.stokopname_batch.push(),this.isEdit=!0,this.isAdd=!1,this.showBatch=!0,this.open("blmDipriksa")),this.spinner.hide("spinner1")})}json(a){return JSON.stringify(a)}checkExpired(a){return(new Date).getTime()>new Date(a).getTime()}editAlat(a){this.showBatch=!1,this.submitted=!1,this.spinner.show("spinner1"),this.reset(),this.modulStokOpnameAlat.show(a.id_stok_opname_alat_kesehatan).subscribe(n=>{"0000"!=n.metaData.response_code?u().fire("Error",n.metaData.message,"error"):(this.title=n.response.nama_alat_kesehatan,this.alat=n.response,this.sub_total=[],this.alat.stok_opname_alat_kesehatan_detail.map((e,s)=>{this.qty[s]=e.jumlah_stok,this.sub_total.push(e.jumlah_stok*e.satuan_qty),this.total+=this.sub_total[s]}),this.stokopname_batch=[],this.listBatch=[],this.alat.stok_opname_alat_kesehatan_batch.map((e,s)=>{this.stokopname_batch.push(e.id_stok_opname_alat_kesehatan_batch),this.setBatchAlat2(e),this.batch[s]=e.batch_qty}),this.showBatch=!0,this.isEdit=!0,this.isAdd=!1,this.open("blmDipriksaAlat")),this.spinner.hide("spinner1")})}finish(){u().fire({title:"Apa anda yakin?",icon:"warning",showCancelButton:!0,allowOutsideClick:!1,confirmButtonText:"Ya, lanjutkan!",cancelButtonText:"Batal"}).then(a=>{a.isConfirmed&&(this.spinner.show("spinner1"),this.modulStokOpname.finish(this.id_stok_opname).subscribe(n=>{this.spinner.hide("spinner1"),"0000"!=n.metaData.response_code?u().fire("Error",n.metaData.message,"error"):u().fire({title:"Data berhasil disimpan",icon:"success",showCancelButton:!1,allowOutsideClick:!1,confirmButtonText:"OK"}).then(e=>{this.router.navigate(["stok-opname/riwayat"])})},n=>{null!=n.metaData?"string"==typeof n.response?u().fire("Error",n.response,"error"):u().fire("Error",n.metaData.message,"error"):null!=n.response&&u().fire("Error",n.response,"error")}))})}setTotalObat(a){this.total=0,this.sub_total=[],this.showBatch=!0,(1==a?this.obat.obat_kemasan:this.obat.stok_opname_obat_detail).map((e,s)=>{let o=null!=this.qty[s]&&""!=this.qty[s]?parseInt(this.qty[s]):0;this.sub_total[s]=2==a?o*parseInt(e.satuan_qty):o*parseInt(e.total_qty),this.total+=this.sub_total[s]})}setTotalAlat(a){this.total=0,this.showBatch=!0,(1==a?this.alat.alat_kesehatan_kemasan:this.alat.stok_opname_alat_kesehatan_detail).map((e,s)=>{let o=null!=this.qty[s]&&""!=this.qty[s]?parseInt(this.qty[s]):0;this.sub_total[s]=2==a?o*parseInt(e.satuan_qty):o*parseInt(e.total_qty),this.total+=this.sub_total[s]})}open(a){this.modalService.open(a)}modalClose(a){this.modalService.close(a)}go(a){this.router.navigate([a])}}return i.\u0275fac=function(a){return new(a||i)(t.Y36(F.Z),t.Y36(D),t.Y36(Q),t.Y36(pt.W),t.Y36(m.F0),t.Y36(v.t2),t.Y36(ht.g),t.Y36(f.qu),t.Y36(yt.p),t.Y36(Da.O),t.Y36(ja.O),t.Y36(r.yh),t.Y36(m.gz))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-stokopname-mulai"]],viewQuery:function(a,n){if(1&a&&t.Gf(b.G,5),2&a){let e;t.iGM(e=t.CRH())&&(n.datatableElement=e.first)}},decls:58,vars:15,consts:[[1,"content"],[1,"content-block"],[1,"block-header"],[3,"title","items","active_item"],[1,"text-center"],[1,"btn","btn-warning","btn-lg","mb-3",3,"click"],[1,"fas","fa-arrow-left"],[1,"btn","btn-tambah","btn-lg","mb-3",3,"click"],[1,"fas","fa-file"],[1,"row","clearfix"],[1,"col-xs-12","col-sm-12","col-md-12","col-lg-12"],[1,"card"],[1,"body"],["ngbNav","",1,"nav-tabs"],["nav","ngbNav"],["ngbNavItem",""],["ngbNavLink",""],["ngbNavContent",""],["ngbNavLink","",3,"click"],[1,"mt-2",3,"ngbNavOutlet"],["id","blmDipriksa"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["class","modal-body",4,"ngIf"],[1,"modal-footer","mt-3"],["type","button",1,"btn","btn-kembali",3,"click"],["class","btn btn-simpan","type","buton","color","primary",3,"click",4,"ngIf"],["id","blmDipriksaAlat"],[1,"modal-footer","mt-2"],["bdColor","rgba(0, 0, 0, 0.8)","size","medium","color","#fff","type","ball-clip-rotate-multiple",3,"name","fullScreen"],[2,"color","white"],["class","alert alert-info",4,"ngIf"],[1,"row","mb-3"],[1,"col-6"],["datatable","",1,"table","table-striped","table-bordered","table-sm",2,"width","100%",3,"dtOptions"],["width","30"],["width","100"],[1,"alert","alert-info"],[1,"mr-2"],[1,"fa","fa-info-circle"],[1,"modal-body"],["width","100%",1,"table"],[4,"ngIf"],[1,"text-center","mb-3"],["class","btn btn-info",3,"click",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"input-group",2,"width","150px"],[1,"px-2","mt-2"],["type","text","value","0","min","0","name","qty",1,"form-control",3,"ngModel","keypress","change","keyup","ngModelChange"],["class","text-danger",4,"ngIf"],[1,"text-danger"],[1,"btn","btn-info",3,"click"],[2,"width","100%"],[3,"style",4,"ngFor","ngForOf"],["class","alert alert-danger mt-2",4,"ngIf"],["bindLabel","no_batch","bindValue","no_batch","placeholder","Pilih Batch",2,"flex","1 1 auto",3,"ngModel","virtualScroll","items","searchable","clearable","ngModelChange","change","search","scrollToEnd","open"],["ng-label-tmp",""],["ng-option-tmp",""],["type","text",1,"form-control",2,"width","80px",3,"ngModel","keypress","ngModelChange"],["class","btn btn-danger mx-2",3,"click",4,"ngIf"],[1,"btn","btn-danger","mx-2",3,"click"],[1,"fa","fa-trash"],[1,"alert","alert-danger","mt-2"],["type","buton","color","primary",1,"btn","btn-simpan",3,"click"]],template:function(a,n){if(1&a&&(t.TgZ(0,"section",0)(1,"div",1)(2,"div",2),t._UZ(3,"app-breadcrumb",3),t.qZA(),t.TgZ(4,"h3",4),t._uU(5,"Stock Opname"),t.qZA(),t.TgZ(6,"button",5),t.NdJ("click",function(){return n.go("/stok-opname")}),t._UZ(7,"i",6),t._uU(8," Kembali "),t.qZA(),t.TgZ(9,"button",7),t.NdJ("click",function(){return n.finish()}),t._UZ(10,"i",8),t._uU(11," Selesaikan Stock Opname "),t.qZA(),t.TgZ(12,"div",9)(13,"div",10)(14,"div",11)(15,"div",12)(16,"nav",13,14),t.ynx(18,15),t.TgZ(19,"a",16),t._uU(20,"Obat Belum Diperiksa "),t.qZA(),t.YNc(21,Ja,17,2,"ng-template",17),t.BQk(),t.ynx(22,15),t.TgZ(23,"a",18),t.NdJ("click",function(){return n.tabSudah()}),t._uU(24,"Obat Sudah Diperiksa"),t.qZA(),t.YNc(25,Pa,17,2,"ng-template",17),t.BQk(),t.ynx(26,15),t.TgZ(27,"a",18),t.NdJ("click",function(){return n.tabBlmAlat()}),t._uU(28,"Alat Belum diperiksa"),t.qZA(),t.YNc(29,Ha,17,2,"ng-template",17),t.BQk(),t.ynx(30,15),t.TgZ(31,"a",18),t.NdJ("click",function(){return n.tabSudahAlat()}),t._uU(32,"Alat Sudah Diperiksa"),t.qZA(),t.YNc(33,Ka,17,2,"ng-template",17),t.BQk(),t.qZA(),t._UZ(34,"div",19),t.TgZ(35,"jw-modal",20)(36,"div",21)(37,"h4",22),t._uU(38),t.qZA()(),t.YNc(39,pe,16,4,"div",23),t.TgZ(40,"div",24)(41,"button",25),t.NdJ("click",function(){return n.modalClose("blmDipriksa"),n.reset()}),t._uU(42,"Batal"),t.qZA(),t.YNc(43,he,2,0,"button",26),t.YNc(44,me,2,0,"button",26),t.qZA()(),t.TgZ(45,"jw-modal",27)(46,"div",21)(47,"h4",22),t._uU(48),t.qZA()(),t.YNc(49,Ee,16,4,"div",23),t.TgZ(50,"div",28)(51,"button",25),t.NdJ("click",function(){return n.modalClose("blmDipriksaAlat"),n.reset()}),t._uU(52,"Batal"),t.qZA(),t.YNc(53,De,2,0,"button",26),t.YNc(54,je,2,0,"button",26),t.qZA()()()()()()(),t.TgZ(55,"ngx-spinner",29)(56,"p",30),t._uU(57," Loading... "),t.qZA()()()),2&a){const e=t.MAs(17);t.xp6(3),t.Q6J("title","Stock Opname")("items",t.DdM(14,Le))("active_item","Stock Opname"),t.xp6(31),t.Q6J("ngbNavOutlet",e),t.xp6(4),t.Oqu(n.title),t.xp6(1),t.Q6J("ngIf",n.obat),t.xp6(4),t.Q6J("ngIf",n.isAdd&&n.showBatch),t.xp6(1),t.Q6J("ngIf",n.isEdit&&n.showBatch),t.xp6(4),t.Oqu(n.title),t.xp6(1),t.Q6J("ngIf",n.alat),t.xp6(4),t.Q6J("ngIf",n.isAdd&&n.showBatch),t.xp6(1),t.Q6J("ngIf",n.isEdit&&n.showBatch),t.xp6(1),t.Q6J("name","spinner1")("fullScreen",!0)}},directives:[H.L,O.Pz,O.nv,O.Vx,O.uN,k.O5,b.G,O.tO,wt.z,k.sg,f.Fj,f.JJ,f.On,K.w9,K.mR,K.ir,v.Ro],styles:["section.container[_ngcontent-%COMP%]{width:600px;margin:70px auto}body[_ngcontent-%COMP%]{background-color:#d3ae7b}h1[_ngcontent-%COMP%]{margin-bottom:20px;text-align:center;font-family:Roboto,sans-serif;font-size:40px}nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{padding:0;margin:0 0 2px;list-style-type:none}nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:inline-block;width:150px;height:40px;background-color:#262626!important;color:#f2f2f2!important;padding:10px;text-decoration:none;text-align:center;font: 18px/20px Roboto,san-serf;cursor:pointer;margin-left:-4px;transition:all .3s ease-in-out}nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:first-of-type{border-top-left-radius:5px;border-bottom-left-radius:5px}nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:last-of-type{border-top-right-radius:5px;border-bottom-right-radius:5px}nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.inactive[_ngcontent-%COMP%]{background-color:brown!important;color:#f2f2f2!important}.tab[_ngcontent-%COMP%]   .tab-item[_ngcontent-%COMP%]:focus{background-color:brown!important;color:#f2f2f2!important}.tabs[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{width:600px;height:200px;background-color:brown;color:#fff;padding:10px;border:1px solid brown;border-radius:5px;margin-left:-5px;font-family:Roboto,san-serf;line-height:1.3}.tabs[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;color:#d3ae7b}.tabs[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-align:justify;font-size:16px;margin-top:5px;font-family:Roboto;line-height:1.8;text-transform:capitalize;color:#f2f2f2!important}.tabs[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:block;font-size:18px;margin-top:8px}.tabs[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:not(:first-of-type){display:none}"]}),i})();var y=c(15861);function Ye(i,l){if(1&i){const a=t.EpF();t.TgZ(0,"div")(1,"div",7)(2,"div",8)(3,"div",9)(4,"div",10)(5,"div",11)(6,"div",12),t._UZ(7,"i",13),t.qZA(),t.TgZ(8,"div",14)(9,"h4")(10,"b"),t._uU(11,"Perhatian!"),t.qZA()(),t.TgZ(12,"b"),t._uU(13,"Jika anda memulai tinjau maka akan menghentikan seluruh proses stock opame yang berjalan"),t.qZA()()()(),t.TgZ(14,"div",15)(15,"button",16),t.NdJ("click",function(){return t.CHM(a),t.oxw().mulaiTinjau()}),t._uU(16,"Lanjutkan Peninjauan"),t.qZA()()()()()()}}function Pe(i,l){if(1&i&&(t.TgZ(0,"thead")(1,"tr")(2,"th"),t._uU(3,"Tanggal mulai"),t.qZA(),t.TgZ(4,"th"),t._uU(5),t.qZA()(),t.TgZ(6,"tr")(7,"th"),t._uU(8,"Tanggal selesai"),t.qZA(),t.TgZ(9,"th"),t._uU(10),t.qZA()()()),2&i){const a=t.oxw(2);t.xp6(5),t.hij(": ",a.getDate(a.dataMulai.waktu_mulai_unix),""),t.xp6(5),t.hij(": ",a.getDate(a.dataMulai.waktu_selesai_unix),"")}}function Fe(i,l){if(1&i&&(t.TgZ(0,"table",50)(1,"thead")(2,"tr")(3,"th",51),t._uU(4,"No"),t.qZA(),t.TgZ(5,"th"),t._uU(6,"Nama Obat"),t.qZA(),t.TgZ(7,"th"),t._uU(8,"Stock Opname"),t.qZA(),t.TgZ(9,"th"),t._uU(10,"Stock Gudang"),t.qZA(),t.TgZ(11,"th",52),t._uU(12,"Aksi"),t.qZA()()(),t._UZ(13,"tbody"),t.qZA()),2&i){const a=t.oxw(2);t.Q6J("dtOptions",a.dtOptionsBelum)}}function He(i,l){if(1&i&&(t.TgZ(0,"table",50)(1,"thead")(2,"tr")(3,"th",51),t._uU(4,"No"),t.qZA(),t.TgZ(5,"th"),t._uU(6,"Nama Barang"),t.qZA(),t.TgZ(7,"th"),t._uU(8,"Selisih"),t.qZA(),t.TgZ(9,"th"),t._uU(10,"Stock Gudang"),t.qZA()()(),t._UZ(11,"tbody"),t.qZA()),2&i){const a=t.oxw(2);t.Q6J("dtOptions",a.dtOptionsSudah)}}function Qe(i,l){if(1&i&&(t.TgZ(0,"table",50)(1,"thead")(2,"tr")(3,"th"),t._uU(4,"No"),t.qZA(),t.TgZ(5,"th"),t._uU(6,"Nama Barang"),t.qZA(),t.TgZ(7,"th"),t._uU(8,"Stock Opname"),t.qZA(),t.TgZ(9,"th"),t._uU(10,"Stock Gudang"),t.qZA(),t.TgZ(11,"th",52),t._uU(12,"Aksi"),t.qZA()()(),t._UZ(13,"tbody"),t.qZA()),2&i){const a=t.oxw(2);t.Q6J("dtOptions",a.dtOptionsAlatBelum)}}function Ke(i,l){if(1&i&&(t.TgZ(0,"table",50)(1,"thead")(2,"tr")(3,"th",51),t._uU(4,"No"),t.qZA(),t.TgZ(5,"th"),t._uU(6,"Nama Barang"),t.qZA(),t.TgZ(7,"th"),t._uU(8,"Selisih"),t.qZA(),t.TgZ(9,"th"),t._uU(10,"Stock Gudang"),t.qZA()()(),t._UZ(11,"tbody"),t.qZA()),2&i){const a=t.oxw(2);t.Q6J("dtOptions",a.dtOptionsAlatSudah)}}function $e(i,l){1&i&&(t.TgZ(0,"div",59),t._uU(1," Jumlah tidak boleh kosong "),t.qZA())}function Re(i,l){if(1&i){const a=t.EpF();t.TgZ(0,"td")(1,"div",55)(2,"span",56),t._uU(3),t.qZA(),t.TgZ(4,"input",57),t.NdJ("keypress",function(e){return t.CHM(a),t.oxw(4).isNumber(e)})("keyup",function(){return t.CHM(a),t.oxw(4).setTotal()})("ngModelChange",function(e){t.CHM(a);const s=t.oxw().index;return t.oxw(3).qty[s]=e}),t.qZA()(),t.YNc(5,$e,2,0,"div",58),t.qZA()}if(2&i){const a=t.oxw(),n=a.$implicit,e=a.index,s=t.oxw(3);t.xp6(3),t.hij("",n.satuan_qty," x"),t.xp6(1),t.Q6J("ngModel",s.qty[e]),t.xp6(1),t.Q6J("ngIf","NaN"==s.getNumber(s.qty[e]))}}function Ge(i,l){1&i&&(t.TgZ(0,"div",59),t._uU(1," Jumlah tidak boleh kosong "),t.qZA())}function We(i,l){if(1&i){const a=t.EpF();t.TgZ(0,"td")(1,"div",55)(2,"span",56),t._uU(3),t.qZA(),t.TgZ(4,"input",57),t.NdJ("keypress",function(e){return t.CHM(a),t.oxw(4).isNumber(e)})("keyup",function(){return t.CHM(a),t.oxw(4).setTotal()})("ngModelChange",function(e){t.CHM(a);const s=t.oxw().index;return t.oxw(3).qty[s]=e}),t.qZA()(),t.YNc(5,Ge,2,0,"div",58),t.qZA()}if(2&i){const a=t.oxw(),n=a.$implicit,e=a.index,s=t.oxw(3);t.xp6(3),t.hij("",null==n?null:n.satuan_konversi.substring(0,(null==n?null:n.satuan_konversi.length)-1)," x "),t.xp6(1),t.Q6J("ngModel",s.qty[e]),t.xp6(1),t.Q6J("ngIf","NaN"==s.getNumber(s.qty[e]))}}function ze(i,l){if(1&i&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.YNc(3,Re,6,3,"td",4),t.YNc(4,We,6,3,"td",4),t.TgZ(5,"td"),t._uU(6),t.qZA()()),2&i){const a=l.$implicit,n=l.index,e=t.oxw(3);t.xp6(2),t.Oqu(a.satuan),t.xp6(1),t.Q6J("ngIf",n<=1),t.xp6(1),t.Q6J("ngIf",n>1),t.xp6(2),t.Oqu(e.sub_total[n])}}function Ve(i,l){if(1&i&&(t.TgZ(0,"table",53)(1,"thead")(2,"tr")(3,"th"),t._uU(4,"Kemasan"),t.qZA(),t.TgZ(5,"th"),t._uU(6,"Jumlah"),t.qZA(),t.TgZ(7,"th"),t._uU(8,"Stok"),t.qZA()()(),t.TgZ(9,"tbody"),t.YNc(10,ze,7,4,"tr",54),t.TgZ(11,"tr")(12,"td"),t._uU(13,"TOTAL"),t.qZA(),t._UZ(14,"td"),t.TgZ(15,"td"),t._uU(16),t.qZA()()()()),2&i){const a=t.oxw(2);t.xp6(10),t.Q6J("ngForOf",a.listBarang),t.xp6(6),t.Oqu(a.total)}}function Xe(i,l){1&i&&(t.TgZ(0,"p",59),t._uU(1,"Stock Opaname tidak boleh kosong"),t.qZA())}function tn(i,l){1&i&&(t.TgZ(0,"p",59),t._uU(1,"Stok awal tidak mencukupi"),t.qZA())}const Ct=function(i){return{background:i}};function an(i,l){if(1&i){const a=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td")(10,"input",62),t.NdJ("ngModelChange",function(e){const o=t.CHM(a).index;return t.oxw(3).listBatch[o].batch_qty=e}),t.qZA(),t.YNc(11,Xe,2,0,"p",58),t.YNc(12,tn,2,0,"p",58),t.qZA()()}if(2&i){const a=l.$implicit,n=l.index,e=t.oxw(3);t.Akn(t.VKq(9,Ct,e.checkExpired(a.tanggal_ed_unix)?"#ff8c8c":"none")),t.xp6(2),t.Oqu(a.no_batch),t.xp6(2),t.Oqu(a.stok_awal),t.xp6(2),t.Oqu(a.stok_terkini),t.xp6(2),t.Oqu(e.getDate(a.tanggal_ed_unix)),t.xp6(2),t.Q6J("ngModel",e.listBatch[n].batch_qty),t.xp6(1),t.Q6J("ngIf","NaN"==e.getNumber(e.listBatch[n].batch_qty)),t.xp6(1),t.Q6J("ngIf",e.listBatch[n].batch_qty>0&&0==a.jumlah)}}function en(i,l){if(1&i&&(t.TgZ(0,"table",60)(1,"thead")(2,"tr")(3,"th"),t._uU(4,"Batch"),t.qZA(),t.TgZ(5,"th"),t._uU(6,"Stok Awal"),t.qZA(),t.TgZ(7,"th"),t._uU(8,"Stok Terkini"),t.qZA(),t.TgZ(9,"th"),t._uU(10,"ED"),t.qZA(),t.TgZ(11,"th"),t._uU(12,"Stokopname"),t.qZA()()(),t.TgZ(13,"tbody"),t.YNc(14,an,13,11,"tr",61),t.qZA()()),2&i){const a=t.oxw(2);t.xp6(14),t.Q6J("ngForOf",a.listBatch)}}function nn(i,l){if(1&i&&(t.TgZ(0,"div",63),t._uU(1),t.qZA()),2&i){const a=t.oxw(2);t.xp6(1),t.Oqu(a.warningBatch)}}function sn(i,l){if(1&i&&(t.TgZ(0,"div"),t._uU(1," Selisih "),t._UZ(2,"br"),t.TgZ(3,"h3")(4,"b")(5,"span",59),t._uU(6),t.qZA()()()()),2&i){const a=t.oxw(3);t.xp6(6),t.Oqu(a.stokopname.stok_existing?a.aktual_barang-a.stokopname.stok_existing:0)}}function on(i,l){if(1&i&&(t.TgZ(0,"div")(1,"div",11)(2,"div",69),t._uU(3," Hasil Pemeriksaan"),t._UZ(4,"br"),t.TgZ(5,"span",70),t._uU(6),t._UZ(7,"br"),t.qZA()(),t.TgZ(8,"div",71)(9,"span",68)(10,"span",72),t._uU(11),t.qZA(),t._uU(12),t.qZA()()()()),2&i){const a=l.$implicit,n=t.oxw().$implicit,e=t.oxw(4);t.xp6(6),t.AsE(" ",n.nama_lengkap_staf,", ",e.convertDate(n.waktu_mulai_unix)," "),t.xp6(5),t.hij("",a.stok_final," "),t.xp6(1),t.hij(" ",e.satuan_terkecil,"")}}function ln(i,l){if(1&i&&(t.TgZ(0,"div"),t.YNc(1,on,13,4,"div",54),t.qZA()),2&i){const a=l.$implicit;t.xp6(1),t.Q6J("ngForOf",a.stok_opname_obats)}}function rn(i,l){if(1&i&&(t.TgZ(0,"div"),t.YNc(1,ln,2,1,"div",54),t.qZA()),2&i){const a=t.oxw(3);t.xp6(1),t.Q6J("ngForOf",a.obat)}}function _n(i,l){if(1&i&&(t.TgZ(0,"div")(1,"table",22)(2,"thead")(3,"tr")(4,"th")(5,"b"),t._uU(6,"Penyesuaian dari penjualan dan Penerimaan barang"),t.qZA()(),t.TgZ(7,"th",73),t._uU(8),t.qZA()()(),t.TgZ(9,"tbody")(10,"tr")(11,"td"),t._uU(12,"Penjualan"),t.qZA(),t.TgZ(13,"td",73),t._uU(14),t.qZA()(),t.TgZ(15,"tr")(16,"td"),t._uU(17,"Pembelian Barang"),t.qZA(),t.TgZ(18,"td",73),t._uU(19),t.qZA()()()()()),2&i){const a=t.oxw(3);t.xp6(8),t.lnq("",a.stokopname.transaksi_masuk-a.stokopname.transaksi_keluar>=0?"+":""," ",a.stokopname.transaksi_masuk-a.stokopname.transaksi_keluar," ",a.satuan_terkecil,""),t.xp6(6),t.Oqu(a.stokopname.transaksi_keluar),t.xp6(5),t.Oqu(a.stokopname.transaksi_masuk)}}function un(i,l){if(1&i&&(t.TgZ(0,"div"),t.YNc(1,sn,7,1,"div",4),t.TgZ(2,"div",11)(3,"div",64),t._uU(4," Stock Barang (System) "),t.TgZ(5,"h4")(6,"b"),t._uU(7),t.qZA()()(),t.TgZ(8,"div",65),t._UZ(9,"i",66),t.qZA(),t.TgZ(10,"div",64),t._uU(11," Aktual Barang "),t.TgZ(12,"h4")(13,"b"),t._uU(14),t.qZA()()()(),t._UZ(15,"br")(16,"br"),t.TgZ(17,"h4"),t._uU(18,"Detail Pemeriksaan"),t.qZA(),t.YNc(19,rn,2,1,"div",4),t._UZ(20,"br"),t.YNc(21,_n,20,5,"div",4),t.TgZ(22,"p",67),t._uU(23," Total Hasil Stock Opname "),t.TgZ(24,"span",68),t._uU(25),t.qZA()()()),2&i){const a=t.oxw(2);t.xp6(1),t.Q6J("ngIf",a.stokopname),t.xp6(6),t.AsE("",a.stokopname.stok_existing?a.stokopname.stok_existing:0," ",a.satuan_terkecil,""),t.xp6(7),t.AsE(" ",a.aktual_barang," ",a.satuan_terkecil,""),t.xp6(5),t.Q6J("ngIf",a.stokopname.stok_opname.length>0),t.xp6(2),t.Q6J("ngIf",a.stokopname.stok_opname.length>0),t.xp6(4),t.AsE("",a.total_stok," ",a.satuan_terkecil,"")}}function dn(i,l){if(1&i){const a=t.EpF();t.TgZ(0,"button",74),t.NdJ("click",function(){t.CHM(a);const e=t.oxw(2);return e.save(e.obat.id_obat)}),t._uU(1," Simpan "),t.qZA()}}function cn(i,l){if(1&i){const a=t.EpF();t.TgZ(0,"button",74),t.NdJ("click",function(){t.CHM(a);const e=t.oxw(2);return e.update(e.alat.id_stok_opname_obat)}),t._uU(1," Update "),t.qZA()}}function pn(i,l){1&i&&(t.TgZ(0,"div",59),t._uU(1," Jumlah tidak boleh kosong "),t.qZA())}function hn(i,l){if(1&i){const a=t.EpF();t.TgZ(0,"td")(1,"div",55)(2,"span",56),t._uU(3),t.qZA(),t.TgZ(4,"input",57),t.NdJ("keypress",function(e){return t.CHM(a),t.oxw(4).isNumber(e)})("keyup",function(){return t.CHM(a),t.oxw(4).setTotal()})("ngModelChange",function(e){t.CHM(a);const s=t.oxw().index;return t.oxw(3).qty[s]=e}),t.qZA()(),t.YNc(5,pn,2,0,"div",58),t.qZA()}if(2&i){const a=t.oxw(),n=a.$implicit,e=a.index,s=t.oxw(3);t.xp6(3),t.hij("",n.satuan_qty," x"),t.xp6(1),t.Q6J("ngModel",s.qty[e]),t.xp6(1),t.Q6J("ngIf","NaN"==s.getNumber(s.qty[e]))}}function mn(i,l){1&i&&(t.TgZ(0,"div",59),t._uU(1," Jumlah tidak boleh kosong "),t.qZA())}function gn(i,l){if(1&i){const a=t.EpF();t.TgZ(0,"td")(1,"div",55)(2,"span",56),t._uU(3),t.qZA(),t.TgZ(4,"input",57),t.NdJ("keypress",function(e){return t.CHM(a),t.oxw(4).isNumber(e)})("keyup",function(){return t.CHM(a),t.oxw(4).setTotal()})("ngModelChange",function(e){t.CHM(a);const s=t.oxw().index;return t.oxw(3).qty[s]=e}),t.qZA()(),t.YNc(5,mn,2,0,"div",58),t.qZA()}if(2&i){const a=t.oxw(),n=a.$implicit,e=a.index,s=t.oxw(3);t.xp6(3),t.hij("",null==n?null:n.satuan_konversi.substring(0,(null==n?null:n.satuan_konversi.length)-1)," x "),t.xp6(1),t.Q6J("ngModel",s.qty[e]),t.xp6(1),t.Q6J("ngIf","NaN"==s.getNumber(s.qty[e]))}}function bn(i,l){if(1&i&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.YNc(3,hn,6,3,"td",4),t.YNc(4,gn,6,3,"td",4),t.TgZ(5,"td"),t._uU(6),t.qZA()()),2&i){const a=l.$implicit,n=l.index,e=t.oxw(3);t.xp6(2),t.Oqu(a.satuan),t.xp6(1),t.Q6J("ngIf",n<=1),t.xp6(1),t.Q6J("ngIf",n>1),t.xp6(2),t.Oqu(e.sub_total[n])}}function fn(i,l){if(1&i&&(t.TgZ(0,"table",53)(1,"thead")(2,"tr")(3,"th"),t._uU(4,"Kemasan"),t.qZA(),t.TgZ(5,"th"),t._uU(6,"Jumlah"),t.qZA(),t.TgZ(7,"th"),t._uU(8,"Stok"),t.qZA()()(),t.TgZ(9,"tbody"),t.YNc(10,bn,7,4,"tr",54),t.TgZ(11,"tr")(12,"td"),t._uU(13,"TOTAL"),t.qZA(),t._UZ(14,"td"),t.TgZ(15,"td"),t._uU(16),t.qZA()()()()),2&i){const a=t.oxw(2);t.xp6(10),t.Q6J("ngForOf",a.listBarang),t.xp6(6),t.Oqu(a.total)}}function kn(i,l){1&i&&(t.TgZ(0,"p",59),t._uU(1,"Stock Opaname tidak boleh kosong"),t.qZA())}function Tn(i,l){1&i&&(t.TgZ(0,"p",59),t._uU(1,"Stok awal tidak mencukupi"),t.qZA())}function xn(i,l){if(1&i){const a=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td")(10,"input",62),t.NdJ("ngModelChange",function(e){const o=t.CHM(a).index;return t.oxw(3).listBatch[o].batch_qty=e}),t.qZA(),t.YNc(11,kn,2,0,"p",58),t.YNc(12,Tn,2,0,"p",58),t.qZA()()}if(2&i){const a=l.$implicit,n=l.index,e=t.oxw(3);t.Akn(t.VKq(9,Ct,e.checkExpired(a.tanggal_ed_unix)?"#ff8c8c":"none")),t.xp6(2),t.Oqu(a.no_batch),t.xp6(2),t.Oqu(a.stok_awal),t.xp6(2),t.Oqu(a.stok_terkini),t.xp6(2),t.Oqu(e.getDate(a.tanggal_ed_unix)),t.xp6(2),t.Q6J("ngModel",e.listBatch[n].batch_qty),t.xp6(1),t.Q6J("ngIf","NaN"==e.getNumber(e.listBatch[n].batch_qty)),t.xp6(1),t.Q6J("ngIf",e.listBatch[n].batch_qty>0&&0==a.jumlah)}}function An(i,l){if(1&i&&(t.TgZ(0,"table",60)(1,"thead")(2,"tr")(3,"th"),t._uU(4,"Batch"),t.qZA(),t.TgZ(5,"th"),t._uU(6,"Stok Awal"),t.qZA(),t.TgZ(7,"th"),t._uU(8,"Stok Terkini"),t.qZA(),t.TgZ(9,"th"),t._uU(10,"ED"),t.qZA(),t.TgZ(11,"th"),t._uU(12,"Stokopname"),t.qZA()()(),t.TgZ(13,"tbody"),t.YNc(14,xn,13,11,"tr",61),t.qZA()()),2&i){const a=t.oxw(2);t.xp6(14),t.Q6J("ngForOf",a.listBatch)}}function Zn(i,l){if(1&i&&(t.TgZ(0,"div",63),t._uU(1),t.qZA()),2&i){const a=t.oxw(2);t.xp6(1),t.Oqu(a.warningBatch)}}function Sn(i,l){if(1&i&&(t.TgZ(0,"div"),t._uU(1," Selisih "),t._UZ(2,"br"),t.TgZ(3,"h3")(4,"b")(5,"span",59),t._uU(6),t.qZA()()()()),2&i){const a=t.oxw(3);t.xp6(6),t.Oqu(a.stokopname.stok_existing?a.aktual_barang-a.stokopname.stok_existing:0)}}function On(i,l){if(1&i&&(t.TgZ(0,"div")(1,"div",11)(2,"div",69),t._uU(3," Hasil Pemeriksaan"),t._UZ(4,"br"),t.TgZ(5,"span",70),t._uU(6),t._UZ(7,"br"),t.qZA()(),t.TgZ(8,"div",71)(9,"span",68)(10,"span",72),t._uU(11),t.qZA(),t._uU(12),t.qZA()()()()),2&i){const a=l.$implicit,n=t.oxw().$implicit,e=t.oxw(4);t.xp6(6),t.AsE(" ",n.nama_lengkap_staf,", ",e.convertDate(n.waktu_mulai_unix)," "),t.xp6(5),t.hij("",a.stok_final," "),t.xp6(1),t.hij(" ",e.satuan_terkecil,"")}}function vn(i,l){if(1&i&&(t.TgZ(0,"div"),t.YNc(1,On,13,4,"div",54),t.qZA()),2&i){const a=l.$implicit;t.xp6(1),t.Q6J("ngForOf",a.stok_opname_alat_kesehatan)}}function yn(i,l){if(1&i&&(t.TgZ(0,"div"),t.YNc(1,vn,2,1,"div",54),t.qZA()),2&i){const a=t.oxw(3);t.xp6(1),t.Q6J("ngForOf",a.alat)}}function wn(i,l){if(1&i&&(t.TgZ(0,"div")(1,"table",22)(2,"thead")(3,"tr")(4,"th")(5,"b"),t._uU(6,"Penyesuaian dari penjualan dan Penerimaan barang"),t.qZA()(),t.TgZ(7,"th",73),t._uU(8),t.qZA()()(),t.TgZ(9,"tbody")(10,"tr")(11,"td"),t._uU(12,"Penjualan"),t.qZA(),t.TgZ(13,"td",73),t._uU(14),t.qZA()(),t.TgZ(15,"tr")(16,"td"),t._uU(17,"Pembelian Barang"),t.qZA(),t.TgZ(18,"td",73),t._uU(19),t.qZA()()()()()),2&i){const a=t.oxw(3);t.xp6(8),t.lnq("",a.stokopname.transaksi_masuk-a.stokopname.transaksi_keluar>=0?"+":""," ",a.stokopname.transaksi_masuk-a.stokopname.transaksi_keluar," ",a.satuan_terkecil,""),t.xp6(6),t.Oqu(a.stokopname.transaksi_keluar),t.xp6(5),t.Oqu(a.stokopname.transaksi_masuk)}}function Mn(i,l){if(1&i&&(t.TgZ(0,"div"),t.YNc(1,Sn,7,1,"div",4),t.TgZ(2,"div",11)(3,"div",64),t._uU(4," Stock Barang (System) "),t.TgZ(5,"h4")(6,"b"),t._uU(7),t.qZA()()(),t.TgZ(8,"div",65),t._UZ(9,"i",66),t.qZA(),t.TgZ(10,"div",64),t._uU(11," Aktual Barang "),t.TgZ(12,"h4")(13,"b"),t._uU(14),t.qZA()()()(),t._UZ(15,"br")(16,"br"),t.TgZ(17,"h4"),t._uU(18,"Detail Pemeriksaan"),t.qZA(),t.YNc(19,yn,2,1,"div",4),t._UZ(20,"br"),t.YNc(21,wn,20,5,"div",4),t.TgZ(22,"p",67),t._uU(23," Total Hasil Stock Opname "),t.TgZ(24,"span",68),t._uU(25),t.qZA()()()),2&i){const a=t.oxw(2);t.xp6(1),t.Q6J("ngIf",a.stokopname),t.xp6(6),t.AsE("",a.stokopname.stok_existing?a.stokopname.stok_existing:0," ",a.satuan_terkecil,""),t.xp6(7),t.AsE(" ",a.aktual_barang," ",a.satuan_terkecil,""),t.xp6(5),t.Q6J("ngIf",a.stokopname.stok_opname.length>0),t.xp6(2),t.Q6J("ngIf",a.stokopname.stok_opname.length>0),t.xp6(4),t.AsE("",a.total_stok," ",a.satuan_terkecil,"")}}function Cn(i,l){if(1&i){const a=t.EpF();t.TgZ(0,"button",74),t.NdJ("click",function(){t.CHM(a);const e=t.oxw(2);return e.saveAlat(e.alat.id_alat_kesehatan)}),t._uU(1," Simpan "),t.qZA()}}function qn(i,l){if(1&i){const a=t.EpF();t.TgZ(0,"button",74),t.NdJ("click",function(){t.CHM(a);const e=t.oxw(2);return e.updateAlat(e.alat.id_stok_opname_alat_kesehatan)}),t._uU(1," Update "),t.qZA()}}function Un(i,l){if(1&i){const a=t.EpF();t.TgZ(0,"div")(1,"h3",15),t._uU(2,"Tinjau Stock Opname"),t.qZA(),t.TgZ(3,"div",7)(4,"div",8)(5,"div",17)(6,"div",18)(7,"div",19)(8,"div",20)(9,"h3")(10,"b"),t._uU(11,"Tinjau Stock Opname"),t.qZA()(),t.TgZ(12,"div",11)(13,"div",21)(14,"table",22),t.YNc(15,Pe,11,2,"thead",4),t.qZA()()()()()(),t.TgZ(16,"div",23)(17,"ngb-alert",24)(18,"h5"),t._UZ(19,"i",25),t._uU(20,"Stock belum di sesuaikan"),t.qZA(),t.TgZ(21,"p"),t._uU(22,"Hasil Stock opname diterapkan pada Stock barangmu. Pastikan hasil Stock opname benar sebelum menyesuaikan."),t.qZA(),t.TgZ(23,"div",26)(24,"button",16),t.NdJ("click",function(){return t.CHM(a),t.oxw().sesuaikan()}),t._uU(25,"Sesuaikan Stock"),t.qZA()(),t._UZ(26,"br"),t.qZA()()(),t.TgZ(27,"div",19)(28,"div",27)(29,"h2")(30,"strong"),t._uU(31,"Hasil Stock opname"),t.qZA()()(),t.TgZ(32,"div",20)(33,"nav",28,29),t.ynx(35,30),t.TgZ(36,"a",31),t._uU(37,"Obat Belum Diperiksa "),t._UZ(38,"span",32),t.qZA(),t.YNc(39,Fe,14,1,"ng-template",33),t.BQk(),t.ynx(40,30),t.TgZ(41,"a",34),t.NdJ("click",function(){return t.CHM(a),t.oxw().tabSudah()}),t._uU(42,"Obat Sudah Diperiksa"),t.qZA(),t.YNc(43,He,12,1,"ng-template",33),t.BQk(),t.ynx(44,30),t.TgZ(45,"a",34),t.NdJ("click",function(){return t.CHM(a),t.oxw().tabAlatBelum()}),t._uU(46,"Alat Belum Diperiksa"),t.qZA(),t.YNc(47,Qe,14,1,"ng-template",33),t.BQk(),t.ynx(48,30),t.TgZ(49,"a",34),t.NdJ("click",function(){return t.CHM(a),t.oxw().tabAlatSudah()}),t._uU(50,"Alat Sudah Diperiksa"),t.qZA(),t.YNc(51,Ke,12,1,"ng-template",33),t.BQk(),t.qZA(),t._UZ(52,"div",35),t.TgZ(53,"jw-modal",36)(54,"div",37)(55,"p"),t._uU(56,"Tunggu sebentar,sedang memproses...."),t.qZA(),t.TgZ(57,"p")(58,"ngb-progressbar",38)(59,"i"),t._uU(60),t.qZA()()(),t.TgZ(61,"span",39),t._uU(62),t.qZA(),t.TgZ(63,"span",39),t._uU(64),t.qZA()()(),t.TgZ(65,"jw-modal",40)(66,"div",41)(67,"h4",42),t._uU(68),t.qZA()(),t.TgZ(69,"div",37),t.YNc(70,Ve,17,2,"table",43),t._UZ(71,"hr"),t.YNc(72,en,15,1,"table",44),t.YNc(73,nn,2,1,"div",45),t._UZ(74,"br")(75,"hr"),t.YNc(76,un,26,9,"div",4),t.qZA(),t.TgZ(77,"div",46)(78,"button",47),t.NdJ("click",function(){return t.CHM(a),t.oxw().modalClose("blmDipriksa")}),t._uU(79,"Batal"),t.qZA(),t.YNc(80,dn,2,0,"button",48),t.YNc(81,cn,2,0,"button",48),t.qZA()(),t.TgZ(82,"jw-modal",49)(83,"div",41)(84,"h4",42),t._uU(85),t.qZA()(),t.TgZ(86,"div",37),t.YNc(87,fn,17,2,"table",43),t._UZ(88,"hr"),t.YNc(89,An,15,1,"table",44),t.YNc(90,Zn,2,1,"div",45),t._UZ(91,"br")(92,"hr"),t.YNc(93,Mn,26,9,"div",4),t.qZA(),t.TgZ(94,"div",46)(95,"button",47),t.NdJ("click",function(){return t.CHM(a),t.oxw().modalClose("blmDipriksaAlat")}),t._uU(96,"Batal"),t.qZA(),t.YNc(97,Cn,2,0,"button",48),t.YNc(98,qn,2,0,"button",48),t.qZA()()()()()()()}if(2&i){const a=t.MAs(34),n=t.oxw();t.xp6(15),t.Q6J("ngIf",n.detail),t.xp6(2),t.Q6J("dismissible",!1),t.xp6(35),t.Q6J("ngbNavOutlet",a),t.xp6(6),t.Q6J("value",n.progress)("striped",!0)("animated",!0),t.xp6(2),t.Oqu(n.prosesFinish+" dari "+n.totalItem),t.xp6(2),t.hij("",n.success," Berhasil"),t.xp6(2),t.hij("",n.failed," Gagal"),t.xp6(4),t.Oqu(n.title),t.xp6(2),t.Q6J("ngIf",n.obat),t.xp6(2),t.Q6J("ngIf",n.obat),t.xp6(1),t.Q6J("ngIf",""!=n.warningBatch),t.xp6(3),t.Q6J("ngIf",n.stokopname&&n.obat),t.xp6(4),t.Q6J("ngIf",n.isAdd),t.xp6(1),t.Q6J("ngIf",n.isEdit),t.xp6(4),t.Oqu(n.title),t.xp6(2),t.Q6J("ngIf",n.alat),t.xp6(2),t.Q6J("ngIf",n.alat),t.xp6(1),t.Q6J("ngIf",""!=n.warningBatch),t.xp6(3),t.Q6J("ngIf",n.stokopname&&n.alat),t.xp6(4),t.Q6J("ngIf",n.isAdd),t.xp6(1),t.Q6J("ngIf",n.isEdit)}}const Bn=function(){return["Tinjau"]},Nn=function(){return[]},En=[{path:"",redirectTo:"view",pathMatch:"full"},{path:"view",component:Ea},{path:"mulai/:id/:status",component:Je},{path:"tinjau",component:(()=>{class i{constructor(a,n,e,s,o,_,d,g,j,L,mt){this.modalService=a,this.modulStokOpname=n,this.router=e,this.Modulobat=s,this.modulStokOpnameAlat=o,this.modulAlat=_,this.fb=d,this.validate=g,this.spinner=j,this.store=L,this.activatedRoute=mt,this.datatableElement=b.G,this.dtOptionsBelum={},this.dtOptionsSudah={},this.dtOptionsAlatBelum={},this.dtOptionsAlatSudah={},this.dtOptionsRiwayat={},this.dataAlat=new E,this.active=1,this.title="",this.isAdd=!1,this.isEdit=!1,this.kemasan=[],this.qty=[],this.total=0,this.submitted=!1,this.id_riwayat_stok_opname=null,this.dataBelumLength=0,this.dataSudahLength=0,this.obat={},this.alat={},this.totalItem=0,this.progress=0,this.success=0,this.failed=0,this.prosesFinish=0,this.allItem=[],this.detail=[],this.dataSesuaikan=[],this.aktual_barang=0,this.mulai=!1,this.warningBatch="",this.btnDetail=!1,this.btnDelete=!1,this.btnEdit=!1,this.btnSetting=!1,this.btnAdd=!1,this.view=!1,this.sub_total=[],this.total_stok=0,this.satuan_terkecil=null,this.listBatch=[],this.dataObatBelumDitinjau=0,this.dataAlatBelumDitinjau=0,this.getState=this.store.select("stok_opname")}ngOnInit(){this.spinner.show("spinner1");let a=JSON.parse(localStorage.getItem("currentUser"));a=a.menu_right,this.btnDetail=this.view=-1!=a.findIndex(n=>"IVSOTS1"==n.kode),this.view||u().fire("Warning","Anda tidak mempunyai akses halaman ini","warning").then(()=>{window.location.href="/"}),this.dtOptionsBelum=this.showDataTables("belum"),this.dtOptionsSudah=this.showDataTablesSudah("sudah"),this.dtOptionsAlatBelum=this.showDataTablesAlatBelum("belum"),this.dtOptionsAlatSudah=this.showDataTablesAlatSudah("sudah"),this.getState.subscribe(n=>{this.reloadTable=n.reloadTable,!0===this.reloadTable&&this.reLoadData()}),this.formInput=this.fb.group({id_obat:[],satuan:[]}),setTimeout(()=>{this.spinner.hide("spinner1")},600)}mulaiTinjau(){u().fire({title:"Apa anda yakin?",icon:"warning",showCancelButton:!0,allowOutsideClick:!1,confirmButtonText:"Ya, lanjutkan!",cancelButtonText:"Batal"}).then(a=>{a.isConfirmed&&this.modulStokOpname.startTinjau().subscribe(n=>{if(n)if(this.id_riwayat_stok_opname=n.response.id_riwayat_stok_opname,null==this.id_riwayat_stok_opname||null===this.id_riwayat_stok_opname||""==this.id_riwayat_stok_opname){let e="";n.response.length>0&&n.response.map((s,o)=>{e+=o+1+"."+s.nama_lengkap+"\n"}),u().fire({icon:"info",title:"Info",html:n.metaData.message+':<br><br> <p class="text-left">'+e+"<p>"}).then(s=>{this.router.navigate(["stok-opname/view"])})}else this.dataMulai=n.response,this.mulai=!0},n=>{if(null==n.response)u().fire("Info",n.metaData.message,"info").then(e=>{this.router.navigate(["stok-opname/view"])});else if(null!=n.response.id_riwayat_stok_opname)""==n.response.id_riwayat_stok_opname?u().fire("Info",n.metaData.message,"info").then(e=>{this.router.navigate(["stok-opname/view"])}):(this.dataMulai=n.response,this.mulai=!0,this.id_riwayat_stok_opname=n.response.id_riwayat_stok_opname);else{let e="";n.response.length>0&&n.response.map((s,o)=>{e+=o+1+". "+s.nama_lengkap+"<br>"}),u().fire({icon:"info",title:"Info",html:n.metaData.message+':<br><br> <p class="text-left">'+e+"<p>"}).then(s=>{this.router.navigate(["stok-opname/view"])})}})})}isNumber(a){return this.validate.Number(a)}getDate(a){return I(new Date(a)).format("DD-MM-YYYY")}convertDate(a){return I(new Date(a)).format("DD-MM-YYYY H:m:s")}tabSudah(){this.dtOptionsSudah=this.showDataTablesSudah("sudah")}tabAlatBelum(){this.dtOptionsAlatBelum=this.showDataTablesAlatBelum("belum")}tabAlatSudah(){this.dtOptionsAlatSudah=this.showDataTablesAlatSudah("sudah")}reLoadData(){this.datatableElement.dtInstance.then(a=>{a.ajax.reload()})}showDataTables(a){return{pageLength:10,serverSide:!0,processing:!0,order:[],ajax:(n,e)=>{this.modulStokOpname.listTinjau(n,a).subscribe(s=>{"sudah"==a?this.dataSudahLength=s.response.data.length:this.dataObatBelumDitinjau=s.response.data.length,e({draw:s.response.draw,recordsTotal:s.response.recordsTotal,recordsFiltered:s.response.recordsFiltered,data:s.response.data})})},columns:[{orderable:!1,searchable:!1,render:(n,e,s,o)=>o.row+1+o.settings._iDisplayStart},{data:"nama_obat"},{data:"stok_opname"},{data:"stok_gudang"},{orderable:!1,searchable:!1,render:(n,e,s,o)=>'<button class="btn btn-sm btn-info add"><i class="fas fa-pen"></i> Input</button>'}],rowCallback:(n,e,s)=>{const o=this;return $("td .add",n).on("click",()=>{o.add(e)}),n}}}showDataTablesAlatBelum(a){return{pageLength:10,serverSide:!0,processing:!0,order:[],ajax:(n,e)=>{this.modulStokOpnameAlat.listTinjau(n,a).subscribe(s=>{"sudah"==a?this.dataSudahLength=s.response.data.length:this.dataAlatBelumDitinjau=s.response.data.length,e({draw:s.response.draw,recordsTotal:s.response.recordsTotal,recordsFiltered:s.response.recordsFiltered,data:s.response.data})})},columns:[{orderable:!1,searchable:!1,render:(n,e,s,o)=>o.row+1+o.settings._iDisplayStart},{data:"nama_alat_kesehatan"},{data:"stok_opname"},{data:"stok_gudang"},{orderable:!1,searchable:!1,render:(n,e,s,o)=>'<button class="btn btn-sm btn-info addAlat"><i class="fas fa-pen"></i> Input</button>'}],rowCallback:(n,e,s)=>{const o=this;return $("td .addAlat",n).on("click",()=>{o.addAlat(e)}),n}}}showDataTablesSudah(a){return{pageLength:10,serverSide:!0,processing:!0,order:[],ajax:(n,e)=>{this.modulStokOpname.listTinjau(n,a).subscribe(s=>{this.dataSudahLength=s.response.data.length,e({draw:s.response.draw,recordsTotal:s.response.recordsTotal,recordsFiltered:s.response.recordsFiltered,data:s.response.data})})},columns:[{orderable:!1,searchable:!1,render:(n,e,s,o)=>o.row+1+o.settings._iDisplayStart},{data:"nama_obat"},{data:"stok_selisih_pemeriksaan"},{data:"stok_gudang"}]}}showDataTablesAlatSudah(a){return{pageLength:10,serverSide:!0,processing:!0,order:[],ajax:(n,e)=>{this.modulStokOpnameAlat.listTinjau(n,a).subscribe(s=>{this.dataSudahLength=s.response.data.length,e({draw:s.response.draw,recordsTotal:s.response.recordsTotal,recordsFiltered:s.response.recordsFiltered,data:s.response.data})})},columns:[{orderable:!1,searchable:!1,render:(n,e,s,o)=>o.row+1+o.settings._iDisplayStart},{data:"nama_alat_kesehatan"},{data:"stok_selisih_pemeriksaan"},{data:"stok_gudang"}]}}add(a){this.title=a.nama_obat,this.spinner.show("spinner1"),this.modulStokOpname.showTinjau(a.id_obat).subscribe(n=>{"0000"!=n.metaData.response_code?u().fire("Error",n.metaData.message,"error"):(this.aktual_barang=0,this.listBarang=[],this.listBatch=[],this.stokopname=n.response,this.total_stok=0,this.stokopname.stok_opname.map(e=>{e.stok_opname_obats.map(s=>{s.stok_opname_obat_batch.map(o=>{let _=this.listBatch.findIndex(d=>d.no_batch==o.no_batch);_<0?this.listBatch.push(o):this.listBatch[_].batch_qty+=o.batch_qty}),this.aktual_barang+=s.total_stok_opname,s.stok_opname_obat_detail=s.stok_opname_obat_detail.sort((o,_)=>o.satuan_level-_.satuan_level),this.satuan_terkecil=s.stok_opname_obat_detail[0].satuan.substring(0,3),this.satuan_terkecil=this.satuan_terkecil.toLowerCase(),s.stok_opname_obat_detail.map((o,_)=>{let d=this.listBarang.findIndex(g=>g.satuan==o.satuan);d>=0?this.listBarang[d].jumlah_stok+=o.jumlah_stok:this.listBarang.push(o)})})}),this.obat=n.response.stok_opname,this.alat=null,this.isAdd=!0,this.isEdit=!1,this.total=0,this.qty=[],this.total_stok=this.aktual_barang+parseInt(this.stokopname.transaksi_masuk)-parseInt(this.stokopname.transaksi_keluar),this.listBarang.map(e=>{this.qty.push(e.jumlah_stok)}),this.setTotal(),this.open("blmDipriksa")),this.spinner.hide("spinner1")})}getNumber(a){return parseInt(a).toString()}addAlat(a){this.title=a.nama_alat_kesehatan,this.spinner.show("spinner1"),this.modulStokOpnameAlat.showTinjau(a.id_alat_kesehatan).subscribe(n=>{"0000"!=n.metaData.response_code?u().fire("Error",n.metaData.message,"error"):(this.aktual_barang=0,this.listBarang=[],this.listBatch=[],this.total_stok=0,this.stokopname=n.response,this.stokopname.stok_opname.length>0&&this.stokopname.stok_opname.map(e=>{e.stok_opname_alat_kesehatan.map(s=>{s.stok_opname_alat_kesehatan_batch.map(o=>{let _=this.listBatch.findIndex(d=>d.no_batch==o.no_batch);_<0?this.listBatch.push(o):this.listBatch[_].batch_qty+=o.batch_qty}),this.aktual_barang+=s.total_stok_opname,s.stok_opname_alat_kesehatan_detail=s.stok_opname_alat_kesehatan_detail.sort((o,_)=>o.satuan_level-_.satuan_level),this.satuan_terkecil=s.stok_opname_alat_kesehatan_detail[0].satuan.substring(0,3),this.satuan_terkecil=this.satuan_terkecil.toLowerCase(),s.stok_opname_alat_kesehatan_detail.map((o,_)=>{let d=this.listBarang.findIndex(g=>g.satuan==o.satuan);d>=0?this.listBarang[d].jumlah_stok+=o.jumlah_stok:this.listBarang.push(o)})})}),this.alat=n.response.stok_opname,this.obat=null,this.isAdd=!0,this.isEdit=!1,this.total=0,this.qty=[],this.total_stok=this.aktual_barang+parseInt(this.stokopname.transaksi_masuk)-parseInt(this.stokopname.transaksi_keluar),this.listBarang.map(e=>{this.qty.push(e.jumlah_stok)}),this.setTotal(),this.open("blmDipriksaAlat")),this.spinner.hide("spinner1")})}checkExpired(a){return console.log((new Date).getTime()>new Date(a).getTime()?1:0),(new Date).getTime()>new Date(a).getTime()}save(a){this.submitted=!1,setTimeout(()=>{this.submitted=!0},300),this.spinner.show("spinner1");let n=!0,e=[],s=[];if(this.listBatch.map((o,_)=>{(new Date).getTime()>new Date(o.tanggal_ed_unix).getTime()&&parseInt(o.batch_qty)>0?(this.warningBatch="Stok Expired harus berisi 0",setTimeout(()=>{this.warningBatch=""},2e3),n=!1):parseInt(o.batch_qty)>=0?s.push({id_gudang_obat:o.id_gudang_obat,batch_qty:parseInt(o.batch_qty)}):(console.log("eror batch"),n=!1)}),this.listBarang.map((o,_)=>{parseInt(this.qty[_])>=0?e.push({id_obat_kemasan:o.id_obat_kemasan,jumlah_stok:o.jumlah_stok,jumlah_stok_audit:parseInt(this.qty[_])}):(console.log("eror qty"),n=!1)}),!n)return this.spinner.hide("spinner1"),!1;this.store.dispatch(V({payload:{id_obat:this.obat[0]?this.obat[0].stok_opname_obats[0].id_obat:"",audit:[{id_stok_opname:this.obat[0]?this.obat[0].id_stok_opname:"",id_akun_staf:this.obat[0]?this.obat[0].id_akun_staf:"",satuan:e,batch:s}]},id:this.id_riwayat_stok_opname})),setTimeout(()=>{this.spinner.hide("spinner1")},400),this.modalClose("blmDipriksa")}saveAlat(a){this.submitted=!1,setTimeout(()=>{this.submitted=!0},300),this.spinner.show("spinner1");let n=!0,e=[],s=[];if(this.listBatch.map((o,_)=>{(new Date).getTime()>new Date(o.tanggal_ed_unix).getTime()&&parseInt(o.batch_qty)>0?(this.warningBatch="Stok Expired harus berisi 0",setTimeout(()=>{this.warningBatch=""},2e3),n=!1):parseInt(o.batch_qty)>=0?s.push({id_gudang_alat_kesehatan:o.id_gudang_alat_kesehatan,batch_qty:parseInt(o.batch_qty)}):(console.log("bacth eror",o),n=!1)}),console.log(this.qty),this.listBarang.map((o,_)=>{parseInt(this.qty[_])>=0?e.push({id_alat_kesehatan_kemasan:o.id_alat_kesehatan_kemasan,jumlah_stok:o.jumlah_stok,jumlah_stok_audit:parseInt(this.qty[_])}):(console.log("qty error"),n=!1)}),!n)return this.spinner.hide("spinner1"),!1;this.store.dispatch(_t({payload:{id_alat_kesehatan:this.alat[0]?this.alat[0].stok_opname_alat_kesehatan[0].id_alat_kesehatan:"",audit:[{id_stok_opname:this.alat[0]?this.alat[0].id_stok_opname:"",id_akun_staf:this.alat[0]?this.alat[0].id_akun_staf:"",satuan:e,batch:s}]},id:this.id_riwayat_stok_opname})),setTimeout(()=>{this.spinner.hide("spinner1")},400),this.modalClose("blmDipriksaAlat")}sesuaikan(){var a=this;return(0,y.Z)(function*(){null!=a.id_riwayat_stok_opname&&null!=a.id_riwayat_stok_opname?0==a.dataObatBelumDitinjau&&0==a.dataAlatBelumDitinjau?(yield a.modulStokOpname.getAll(a.id_riwayat_stok_opname).subscribe(function(){var n=(0,y.Z)(function*(e){if("0000"==e.metaData.response_code){if(a.modalService.open("loading"),e.response.riwayat_obat.length>0){let s=[];yield e.response.riwayat_obat.map(function(){var o=(0,y.Z)(function*(_,d){s.push({id_riwayat_stok_opname_obat:_.id_riwayat_stok_opname_obat})});return function(_,d){return o.apply(this,arguments)}}()),a.dataSesuaikan.obat=s}if(e.response.riwayat_alat_kesehatan.length>0){let s=[];yield e.response.riwayat_alat_kesehatan.map(function(){var o=(0,y.Z)(function*(_,d){s.push({id_riwayat_stok_opname_alat_kesehatan:_.id_riwayat_stok_opname_alat_kesehatan})});return function(_,d){return o.apply(this,arguments)}}()),a.dataSesuaikan.alat=s}}});return function(e){return n.apply(this,arguments)}}()),setTimeout((0,y.Z)(function*(){null!=a.dataSesuaikan.obat||null!=a.dataSesuaikan.alat?(a.dataSesuaikan.obat&&(yield a.sesuaikanObat(a.dataSesuaikan)),a.dataSesuaikan.alat&&(yield a.sesuaikanAlat(a.dataSesuaikan)),setTimeout(()=>{a.modalService.close("loading"),a.success>0&&a.router.navigate(["stok-opname/riwayat"])},3e3)):(a.modalService.close("loading"),u().fire("Warning","Belum ada data obat dan alat kesehatan yang anda inputkan","warning"))}),1e3)):u().fire("Error","Stock Opname Obat atau Alat Kesehatan belum diselesaikan","error"):u().fire("Error","Stock opname belum diselesaikan","error")})()}sesuaikanObat(a){var n=this;return(0,y.Z)(function*(){for(let e=0;e<n.dataSesuaikan.obat.length;e++)yield n.modulStokOpname.sesuaikan(a.obat[e],n.id_riwayat_stok_opname).subscribe(function(){var s=(0,y.Z)(function*(o){"0000"==o.metaData.response_code?n.success++:n.failed++,n.progress=100/a.obat.length*(e+1),n.prosesFinish++});return function(o){return s.apply(this,arguments)}}())})()}sesuaikanAlat(a){var n=this;return(0,y.Z)(function*(){for(let e=0;e<a.alat.length;e++)yield n.modulStokOpnameAlat.sesuaikan(a.alat[e],n.id_riwayat_stok_opname).subscribe(function(){var s=(0,y.Z)(function*(o){"0000"==o.metaData.response_code?n.success++:n.failed++,n.progress=100/a.alat.length*(e+1),n.prosesFinish++});return function(o){return s.apply(this,arguments)}}())})()}finish(){null!=this.id_riwayat_stok_opname&&null!=this.id_riwayat_stok_opname?(this.spinner.show("spinner1"),this.modulStokOpname.finish(this.id_riwayat_stok_opname).subscribe(a=>{"0000"!=a.metaData.response_code?u().fire("Error",a.metaData.message):u().fire({title:"Data berhasil disimpan",icon:"success",showCancelButton:!0,allowOutsideClick:!1,confirmButtonText:"Tinjau hasil",cancelButtonText:"Priksa kembali"}).then(n=>{n.value&&this.modulStokOpname.startTinjau().subscribe(e=>{this.router.navigate(["stok-opname/laporan/"+e.response.id_riwayat_stok_opname])},e=>{e.response&&this.router.navigate(["stok-opname/laporan/"+e.response.id_riwayat_stok_opname])}),setTimeout(()=>{this.spinner.hide("spinner1")},400)})})):u().fire("Error","Stock opname belum diselesaikan","error")}setTotal(){this.total=0,this.sub_total=[],this.listBarang.map((a,n)=>{let e=null!=this.qty[n]&&""!=this.qty[n]?parseInt(this.qty[n]):0;this.sub_total[n]=e*parseInt(a.satuan_qty),this.total+=this.sub_total[n]})}open(a){this.modalService.open(a)}modalClose(a){this.modalService.close(a)}go(a){this.router.navigate([a])}}return i.\u0275fac=function(a){return new(a||i)(t.Y36(F.Z),t.Y36(D),t.Y36(m.F0),t.Y36(ht.g),t.Y36(Q),t.Y36(pt.W),t.Y36(f.qu),t.Y36(yt.p),t.Y36(v.t2),t.Y36(r.yh),t.Y36(m.gz))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-stokopname-laporan"]],viewQuery:function(a,n){if(1&a&&t.Gf(b.G,5),2&a){let e;t.iGM(e=t.CRH())&&(n.datatableElement=e.first)}},decls:10,vars:7,consts:[[1,"content"],[1,"content-block"],[1,"block-header"],[3,"title","items","active_item"],[4,"ngIf"],["bdColor","rgba(0, 0, 0, 0.8)","size","medium","color","#fff","type","ball-clip-rotate-multiple",3,"name","fullScreen"],[2,"color","white"],[1,"row","clearfix"],[1,"col-xs-12","col-sm-12","col-md-12","col-lg-12"],[1,"card","text-center",2,"padding","10%"],[1,"alert","alert-warning","mb-4","text-left"],[1,"row"],[1,"col-1",2,"text-align","right"],[1,"fa","fa-info-circle",2,"font-size","35px"],[1,"col","text-left"],[1,"text-center"],[1,"btn","btn-info",3,"click"],[1,"row","mb-3"],[1,"col-md-5"],[1,"card"],[1,"body"],[1,"col-md-8"],[1,"table"],[1,"col-md-4"],[1,"pb-5",3,"dismissible"],["calss","fas fa-info"],[1,"mt-3","pull-right"],[1,"header"],["ngbNav","",1,"nav-tabs"],["nav","ngbNav"],["ngbNavItem",""],["ngbNavLink",""],[1,"badge","col-blue"],["ngbNavContent",""],["ngbNavLink","",3,"click"],[1,"mt-2",3,"ngbNavOutlet"],["id","loading"],[1,"modal-body"],["type","warning",3,"value","striped","animated"],[1,"mx-3"],["id","blmDipriksa"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["class","table table-striped table-bordered table-sm","width","100%",4,"ngIf"],["width","100%",4,"ngIf"],["class","alert alert-danger mt-2",4,"ngIf"],[1,"modal-footer"],["type","button",1,"btn","btn-kembali",3,"click"],["class","btn btn-simpan","type","buton","color","primary",3,"click",4,"ngIf"],["id","blmDipriksaAlat"],["datatable","",1,"table","table-striped","table-bordered","table-sm",2,"width","100%",3,"dtOptions"],["width","30"],["width","100"],["width","100%",1,"table","table-striped","table-bordered","table-sm"],[4,"ngFor","ngForOf"],[1,"input-group",2,"width","150px"],[1,"px-2","mt-2"],["type","text","value","0","min","0","name","qty",1,"form-control",3,"ngModel","keypress","keyup","ngModelChange"],["class","text-danger",4,"ngIf"],[1,"text-danger"],["width","100%"],[3,"style",4,"ngFor","ngForOf"],["type","text",1,"form-control",2,"width","80px",3,"ngModel","ngModelChange"],[1,"alert","alert-danger","mt-2"],[1,"col-5"],[1,"col-2"],[1,"fa","fa-arrow-right","mt-3",2,"font-size","25"],[1,"text-green"],[1,"pull-right"],[1,"col-8"],[1,"text-grey"],[1,"col-4"],[1,"text-red"],[1,"text-right"],["type","buton","color","primary",1,"btn","btn-simpan",3,"click"]],template:function(a,n){1&a&&(t.TgZ(0,"section",0)(1,"div",1)(2,"div",2),t._UZ(3,"app-breadcrumb",3),t.qZA(),t.YNc(4,Ye,17,0,"div",4),t.YNc(5,Un,99,23,"div",4),t.qZA(),t.TgZ(6,"ngx-spinner",5)(7,"p",6),t._uU(8," Loading... "),t.qZA()()(),t._uU(9,">")),2&a&&(t.xp6(3),t.Q6J("title","Stock Opname")("items",t.DdM(6,Bn)),t.xp6(1),t.Q6J("ngIf",!n.mulai),t.xp6(1),t.Q6J("ngIf",n.mulai),t.xp6(1),t.Q6J("name","spinner1")("fullScreen",!0))},directives:[H.L,k.O5,O.xm,O.Pz,O.nv,O.Vx,O.uN,b.G,O.tO,wt.z,O.Ly,k.sg,f.Fj,f.JJ,f.On,v.Ro],styles:[""]}),i})()},{path:"riwayat",component:(()=>{class i{constructor(a,n,e,s,o,_,d,g,j,L){this.modalService=a,this.modulStokOpname=n,this.router=e,this.Modulobat=s,this.modulStokOpnameAlat=o,this.modulAlat=_,this.spinner=d,this.fb=g,this.store=j,this.activatedRoute=L,this.datatableElement=b.G,this.dtOptions={},this.btnDetail=!1,this.btnDelete=!1,this.btnEdit=!1,this.btnSetting=!1,this.btnAdd=!1,this.view=!1,this.getState=this.store.select("stok_opname")}ngOnInit(){let a=JSON.parse(localStorage.getItem("currentUser"));a=a.menu_right,this.btnDetail=-1!=a.findIndex(n=>"IVSORS2"==n.kode),this.view=-1!=a.findIndex(n=>"IVSORS1"==n.kode),this.view||u().fire("Warning","Anda tidak mempunyai akses halaman ini","warning").then(()=>{window.location.href="/"}),this.dtOptions=this.showDataTables()}showDataTables(){return this.spinner.show("spinner1"),{pageLength:10,serverSide:!0,processing:!0,order:[],ajax:(a,n)=>{this.modulStokOpname.listRiwayat(a).subscribe(e=>{n({draw:e.response.draw,recordsTotal:e.response.recordsTotal,recordsFiltered:e.response.recordsFiltered,data:e.response.data}),this.spinner.hide("spinner1")})},columns:[{orderable:!1,searchable:!1,render:(a,n,e,s)=>s.row+1+s.settings._iDisplayStart},{data:"waktu_mulai_unix",render:(a,n,e,s)=>I(new Date(a)).format("DD-MM-YYYY")},{data:"waktu_selesai_unix",render:(a,n,e,s)=>I(new Date(a)).format("DD-MM-YYYY")},{data:"status_proses",render:(a,n,e,s)=>1==a?"Sudah Selesai":"Belum Selesai"}]}}}return i.\u0275fac=function(a){return new(a||i)(t.Y36(F.Z),t.Y36(D),t.Y36(m.F0),t.Y36(ht.g),t.Y36(Q),t.Y36(pt.W),t.Y36(v.t2),t.Y36(f.qu),t.Y36(r.yh),t.Y36(m.gz))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-riwayat"]],viewQuery:function(a,n){if(1&a&&t.Gf(b.G,5),2&a){let e;t.iGM(e=t.CRH())&&(n.datatableElement=e.first)}},decls:28,vars:7,consts:[[1,"content"],[1,"content-block"],[1,"block-header"],[3,"title","items","active_item"],[1,"text-center","mb-4"],[1,"row","clearfix"],[1,"col-xs-12","col-sm-12","col-md-12","col-lg-12"],[1,"card"],[1,"header"],[1,"body"],["width","100%","datatable","",1,"table","table-striped","table-bordered","table-sm",3,"dtOptions"],["width","30"],["bdColor","rgba(0, 0, 0, 0.8)","size","medium","color","#fff","type","ball-clip-rotate-multiple",3,"name","fullScreen"],[2,"color","white"]],template:function(a,n){1&a&&(t.TgZ(0,"section",0)(1,"div",1)(2,"div",2),t._UZ(3,"app-breadcrumb",3),t.qZA(),t.TgZ(4,"h3",4),t._uU(5,"Riyawat Stock Opname"),t.qZA(),t.TgZ(6,"div",5)(7,"div",6)(8,"div",7)(9,"div",8)(10,"h2"),t._UZ(11,"strong"),t.qZA()(),t.TgZ(12,"div",9)(13,"table",10)(14,"thead")(15,"tr")(16,"th",11),t._uU(17,"No"),t.qZA(),t.TgZ(18,"th"),t._uU(19,"Tgl Mulai"),t.qZA(),t.TgZ(20,"th"),t._uU(21,"Tgl Selesai"),t.qZA(),t.TgZ(22,"th"),t._uU(23,"Status"),t.qZA()()(),t._UZ(24,"tbody"),t.qZA()()()()()(),t.TgZ(25,"ngx-spinner",12)(26,"p",13),t._uU(27," Loading... "),t.qZA()()()),2&a&&(t.xp6(3),t.Q6J("title","Stock Opname")("items",t.DdM(6,Nn))("active_item","Riyawat Stock Opname"),t.xp6(10),t.Q6J("dtOptions",n.dtOptions),t.xp6(12),t.Q6J("name","spinner1")("fullScreen",!0))},directives:[H.L,b.G,v.Ro],styles:[""]}),i})()}];let Dn=(()=>{class i{}return i.\u0275fac=function(a){return new(a||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[m.Bz.forChild(En)],m.Bz]}),i})();var jn=c(8202),p=c(36642);const Jn=(0,r.Lq)({StokOpname:null,StokOpnameAlat:null,isLoadingButton:!1,errorMessage:null,reloadTable:!1,submitButton:!1,isEdit:!1},(0,r.on)(G,(i,l)=>Object.assign(Object.assign({},i),{isLoadingButton:!0,errorMessage:null,reloadTable:!1,isEdit:!1})),(0,r.on)(W,(i,l)=>Object.assign(Object.assign({},i),{isLoadingButton:!1,reloadTable:!0,errorMessage:null})),(0,r.on)(z,(i,l)=>Object.assign(Object.assign({},i),{errorMessage:l.message,reloadTable:!1,isLoadingButton:!1})),(0,r.on)(V,(i,l)=>Object.assign(Object.assign({},i),{isLoadingButton:!0,errorMessage:null,reloadTable:!1,isEdit:!1})),(0,r.on)(J,(i,l)=>Object.assign(Object.assign({},i),{isLoadingButton:!1,reloadTable:!0,errorMessage:null})),(0,r.on)(Y,(i,l)=>Object.assign(Object.assign({},i),{errorMessage:l.message,reloadTable:!1,isLoadingButton:!1})),(0,r.on)(et,(i,l)=>Object.assign(Object.assign({},i),{isLoadingButton:!0,errorMessage:null,reloadTable:!1,isEdit:!1})),(0,r.on)(ft,(i,l)=>Object.assign(Object.assign({},i),{reloadTable:!0,isLoadingButton:!1,errorMessage:null})),(0,r.on)(nt,(i,l)=>Object.assign(Object.assign({},i),{errorMessage:l.message,reloadTable:!1,isLoadingButton:!1})),(0,r.on)(Aa,(i,l)=>Object.assign(Object.assign({},i),{isLoadingButton:!0,errorMessage:null,reloadTable:!1,isEdit:!1})),(0,r.on)(Za,(i,l)=>Object.assign(Object.assign({},i),{reloadTable:!0,isLoadingButton:!1,errorMessage:null})),(0,r.on)(Sa,(i,l)=>Object.assign(Object.assign({},i),{errorMessage:l.message,reloadTable:!1,isLoadingButton:!1})),(0,r.on)(X,(i,l)=>Object.assign(Object.assign({},i),{isLoadingButton:!0,errorMessage:null,reloadTable:!1,isEdit:!1})),(0,r.on)(tt,(i,l)=>Object.assign(Object.assign({},i),{isLoadingButton:!1,reloadTable:!0,errorMessage:null})),(0,r.on)(at,(i,l)=>Object.assign(Object.assign({},i),{errorMessage:l.message,reloadTable:!1,isLoadingButton:!1})),(0,r.on)(kt,(i,l)=>Object.assign(Object.assign({},i),{isLoadingButton:!0,errorMessage:null,reloadTable:!1,isEdit:!1})),(0,r.on)(it,(i,l)=>Object.assign(Object.assign({},i),{reloadTable:!0,isLoadingButton:!1,errorMessage:null})),(0,r.on)(st,(i,l)=>Object.assign(Object.assign({},i),{errorMessage:l.message,reloadTable:!1,isLoadingButton:!1})),(0,r.on)(Oa,(i,l)=>Object.assign(Object.assign({},i),{StokOpname:new E,errorMessage:null,isEdit:!1,reloadTable:!1})),(0,r.on)(va,(i,l)=>Object.assign(Object.assign({},i),{StokOpname:l.payload,isEdit:!0,reloadTable:!0,errorMessage:null})),(0,r.on)(ya,(i,l)=>Object.assign(Object.assign({},i),{errorMessage:l.message,reloadTable:!1,isLoadingButton:!1})),(0,r.on)(U,(i,l)=>Object.assign(Object.assign({},i),{StokOpname:new E,reloadTable:!0})),(0,r.on)(wa,(i,l)=>Object.assign(Object.assign({},i),{StokOpname:new E,isLoadingButton:!1,errorMessage:null,reloadTable:!1,submitButton:!1,isEdit:!1})),(0,r.on)(ot,(i,l)=>Object.assign(Object.assign({},i),{isLoadingButton:!0,errorMessage:null,reloadTable:!1,isEdit:!1})),(0,r.on)(lt,(i,l)=>Object.assign(Object.assign({},i),{isLoadingButton:!1,reloadTable:!0,errorMessage:null})),(0,r.on)(rt,(i,l)=>Object.assign(Object.assign({},i),{errorMessage:l.message,reloadTable:!1,isLoadingButton:!1})),(0,r.on)(_t,(i,l)=>Object.assign(Object.assign({},i),{isLoadingButton:!0,errorMessage:null,reloadTable:!1,isEdit:!1})),(0,r.on)(Tt,(i,l)=>Object.assign(Object.assign({},i),{isLoadingButton:!1,reloadTable:!0,errorMessage:null})),(0,r.on)(P,(i,l)=>Object.assign(Object.assign({},i),{errorMessage:l.message,reloadTable:!1,isLoadingButton:!1})),(0,r.on)(ut,(i,l)=>Object.assign(Object.assign({},i),{isLoadingButton:!0,errorMessage:null,reloadTable:!1,isEdit:!1})),(0,r.on)(dt,(i,l)=>Object.assign(Object.assign({},i),{reloadTable:!0,isLoadingButton:!1,errorMessage:null})),(0,r.on)(ct,(i,l)=>Object.assign(Object.assign({},i),{errorMessage:l.message,reloadTable:!1,isLoadingButton:!1})),(0,r.on)(Ca,(i,l)=>Object.assign(Object.assign({},i),{isLoadingButton:!0,errorMessage:null,reloadTable:!1,isEdit:!1})),(0,r.on)(qa,(i,l)=>Object.assign(Object.assign({},i),{reloadTable:!0,isLoadingButton:!1,errorMessage:null})),(0,r.on)(Ua,(i,l)=>Object.assign(Object.assign({},i),{errorMessage:l.message,reloadTable:!1,isLoadingButton:!1})),(0,r.on)(N,(i,l)=>Object.assign(Object.assign({},i),{StokOpnameAlat:new Zt,reloadTable:!0})),(0,r.on)(Ba,(i,l)=>Object.assign(Object.assign({},i),{StokOpnameAlat:new Zt,isLoadingButton:!1,errorMessage:null,reloadTable:!1,submitButton:!1,isEdit:!1})));function Yn(i,l){return Jn(i,l)}var w=c(63900),x=c(54004),M=c(70262),C=c(39646);let Pn=(()=>{class i{constructor(a,n,e,s){this.actions$=a,this.ModulStokOpnameObat=n,this.ModulStokOpnameAlat=e,this.router=s,this.urlBacktoView=["stok-opname","view"],this.Toast=u().mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:o=>{o.addEventListener("mouseenter",u().stopTimer),o.addEventListener("mouseleave",u().resumeTimer)}}),this.addInitial$=(0,p.GW)(()=>this.actions$.pipe((0,p.l4)(G),(0,w.w)(o=>this.ModulStokOpnameObat.add(o.payload,o.id).pipe((0,x.U)(_=>W({payload:_.response})),(0,M.K)(_=>{if(_.response){let d="";_.response.map(g=>{d+=g.field+" "+g.message+"\n"}),this.Toast.fire({icon:"error",title:d})}else this.Toast.fire({icon:"error",title:_.metaData.message});return(0,C.of)(z({message:_}))}))))),this.addSuccess$=(0,p.GW)(()=>this.actions$.pipe((0,p.l4)(W),(0,x.U)(o=>(u().fire({title:"Data berhasil disimpan",icon:"success",showCancelButton:!1,allowOutsideClick:!1,confirmButtonText:"Ya, lanjutkan!"}).then(_=>{}),U())))),this.addFailure$=(0,p.GW)(()=>this.actions$.pipe((0,p.l4)(z)),{dispatch:!1}),this.addTinjauInitial$=(0,p.GW)(()=>this.actions$.pipe((0,p.l4)(V),(0,w.w)(o=>this.ModulStokOpnameObat.addTinjau(o.payload,o.id).pipe((0,x.U)(_=>"0000"==_.metaData.response_code?J({payload:_.response}):Y({message:_.metaData.message})),(0,M.K)(_=>(0,C.of)(Y({message:_}))))))),this.addTinjauSuccess$=(0,p.GW)(()=>this.actions$.pipe((0,p.l4)(J),(0,x.U)(o=>(u().fire({title:"Data berhasil disimpan",icon:"success",showCancelButton:!1,allowOutsideClick:!1,confirmButtonText:"Ya, lanjutkan!"}).then(_=>{}),U())))),this.addTinjauFailure$=(0,p.GW)(()=>this.actions$.pipe((0,p.l4)(Y),(0,x.U)(o=>(u().fire({title:"Ops, Data tidak ditemukan.",icon:"error",showCancelButton:!1,allowOutsideClick:!1,confirmButtonText:"OK"}).then(_=>{}),U()))),{dispatch:!1}),this.startInitial$=(0,p.GW)(()=>this.actions$.pipe((0,p.l4)(X),(0,w.w)(o=>this.ModulStokOpnameObat.start().pipe((0,x.U)(_=>(this.router.navigate(["stok-opname","mulai",_.response.id_stok_opname,0]),tt({payload:_.response}))),(0,M.K)(_=>(_.response&&(1==_.response.status_tinjau?u().fire("Info",_.metaData.message,"info"):this.router.navigate(["stok-opname","mulai",_.response.id_stok_opname,_.response.status_tinjau])),(0,C.of)(at({message:_})))))))),this.startSuccess$=(0,p.GW)(()=>this.actions$.pipe((0,p.l4)(tt),(0,x.U)(o=>U()))),this.startFailure$=(0,p.GW)(()=>this.actions$.pipe((0,p.l4)(at)),{dispatch:!1}),this.updateInitial$=(0,p.GW)(()=>this.actions$.pipe((0,p.l4)(et),(0,w.w)(o=>this.ModulStokOpnameObat.update(o.id,o.payload).pipe((0,x.U)(_=>("0000"!=_.metaData.response_code?u().fire("Error",_.metaData.message,"error"):u().fire({title:"Data berhasil disimpan",icon:"success",showCancelButton:!1,allowOutsideClick:!1,confirmButtonText:"Ya, lanjutkan!"}),U())),(0,M.K)(_=>{if("5505"==_.metaData.response_code&&_.response.length>0){let d="";_.response.map(g=>{d+=g.field+" "+g.message+"\n"}),u().fire("Error",d,"error")}else u().fire("Error",_.metaData.message,"error");return(0,C.of)(nt({message:_}))}))))),this.updateSuccess$=(0,p.GW)(()=>this.actions$.pipe((0,p.l4)(ft)),{dispatch:!1}),this.updateFailure$=(0,p.GW)(()=>this.actions$.pipe((0,p.l4)(nt)),{dispatch:!1}),this.finishInitial$=(0,p.GW)(()=>this.actions$.pipe((0,p.l4)(kt),(0,w.w)(o=>this.ModulStokOpnameObat.finish(o.id).pipe((0,x.U)(_=>it({payload:_.response})),(0,M.K)(_=>(0,C.of)(st({message:_}))))))),this.finishSuccess$=(0,p.GW)(()=>this.actions$.pipe((0,p.l4)(it),(0,x.U)(o=>(u().fire({title:"Finish stok opname berhasil",icon:"success",showCancelButton:!1,allowOutsideClick:!1,confirmButtonText:"Ya, lanjutkan!"}).then(_=>{this.router.navigate(this.urlBacktoView)}),U())))),this.finishFailure$=(0,p.GW)(()=>this.actions$.pipe((0,p.l4)(st)),{dispatch:!1}),this.addAlatInitial$=(0,p.GW)(()=>this.actions$.pipe((0,p.l4)(ot),(0,w.w)(o=>this.ModulStokOpnameAlat.add(o.payload,o.id).pipe((0,x.U)(_=>lt({payload:_.response})),(0,M.K)(_=>{if(_.response){let d="";_.response.map(g=>{d+=g.field+" "+g.message+"\n"}),this.Toast.fire({icon:"error",title:d})}return(0,C.of)(rt({message:_}))}))))),this.addAlatSuccess$=(0,p.GW)(()=>this.actions$.pipe((0,p.l4)(lt),(0,x.U)(o=>(u().fire({title:"Data berhasil disimpan",icon:"success",showCancelButton:!1,allowOutsideClick:!1,confirmButtonText:"Ya, lanjutkan!"}).then(_=>{}),N())))),this.addAlatFailure$=(0,p.GW)(()=>this.actions$.pipe((0,p.l4)(rt)),{dispatch:!1}),this.addAlatTinjauInitial$=(0,p.GW)(()=>this.actions$.pipe((0,p.l4)(_t),(0,w.w)(o=>this.ModulStokOpnameAlat.addTinjau(o.payload,o.id).pipe((0,x.U)(_=>"0000"==_.metaData.response_code?Tt({payload:_.response}):P({message:_.metaData.message})),(0,M.K)(_=>{let d="";return _.response.length>0?(_.response.map(g=>{d+=g.field+" "+g.message+"\n"}),u().fire({msg:d,icon:"error",title:"Error",text:d,showCancelButton:!1,allowOutsideClick:!1,confirmButtonText:"OK"}).then(g=>{})):_.metaData&&u().fire({title:_.metaData.message,icon:"error",showCancelButton:!1,allowOutsideClick:!1,confirmButtonText:"OK"}).then(g=>{}),(0,C.of)(P({message:_}))}))))),this.addTinjauSuccessAlat$=(0,p.GW)(()=>this.actions$.pipe((0,p.l4)(J),(0,x.U)(o=>(u().fire({title:"Data berhasil disimpan",icon:"success",showCancelButton:!1,allowOutsideClick:!1,confirmButtonText:"Ya, lanjutkan!"}).then(_=>{U()}),N())))),this.addTinjauFailureAlat$=(0,p.GW)(()=>this.actions$.pipe((0,p.l4)(P),(0,x.U)(o=>N())),{dispatch:!1}),this.startTinjauInitial$=(0,p.GW)(()=>this.actions$.pipe((0,p.l4)(Ma),(0,w.w)(o=>this.ModulStokOpnameAlat.startTinjau().pipe((0,x.U)(_=>(this.router.navigate(["stok-opname","mulai",_.response.id_stok_opname]),xt({payload:_.response}))),(0,M.K)(_=>(_.response&&this.router.navigate(["stok-opname","mulai",_.response.id_stok_opname]),(0,C.of)(At({message:_})))))))),this.startAlatSuccess$=(0,p.GW)(()=>this.actions$.pipe((0,p.l4)(xt),(0,x.U)(o=>N()))),this.startAlatFailure$=(0,p.GW)(()=>this.actions$.pipe((0,p.l4)(At)),{dispatch:!1}),this.updateAlatInitial$=(0,p.GW)(()=>this.actions$.pipe((0,p.l4)(ut),(0,w.w)(o=>this.ModulStokOpnameAlat.update(o.id,o.payload).pipe((0,x.U)(_=>dt({payload:_})),(0,M.K)(_=>{if("5505"==_.metaData.response_code&&_.response.length>0){let d="";_.response.map(g=>{d+=g.field+" "+g.message+"\n"}),u().fire("Error",d,"error")}else u().fire("Error",_.metaData.message,"error");return(0,C.of)(ct({message:_}))}))))),this.updateAlatSuccess$=(0,p.GW)(()=>this.actions$.pipe((0,p.l4)(dt),(0,x.U)(o=>(u().fire({title:"Data berhasil disimpan",icon:"success",showCancelButton:!1,allowOutsideClick:!1,confirmButtonText:"Ya, lanjutkan!"}).then(_=>{}),N()))),{dispatch:!1}),this.updateAlatFailure$=(0,p.GW)(()=>this.actions$.pipe((0,p.l4)(ct)),{dispatch:!1})}}return i.\u0275fac=function(a){return new(a||i)(t.LFG(p.eX),t.LFG(D),t.LFG(Q),t.LFG(m.F0))},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac}),i})(),Fn=(()=>{class i{}return i.\u0275fac=function(a){return new(a||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[k.ez,v.ef,O.IJ,K.A0,h.z,Dn,A.K,b.T,f.u5,f.UX,h.z,jn.Ud,r.Aw.forFeature("stok_opname",Yn),p.sQ.forFeature([Pn])]]}),i})()},88544:(B,S,c)=>{c.d(S,{p:()=>A});var k=c(5e3);let A=(()=>{class b{isNumber(h){return h.match(/^[0-9]+$/)?h:h.replace(/[^0-9]/g,"")}isAlpha(h){return h.match(/^[A-Za-z]+$/)?h:h.replace(/[^A-Za-z]/g,"")}Number(h){const m=h.which?h.which:h.keyCode;return!(46!=m||h.target.value.indexOf(".")>-1)||!(m>31&&(m<48||m>57))}}return b.\u0275fac=function(h){return new(h||b)},b.\u0275prov=k.Yz7({token:b,factory:b.\u0275fac,providedIn:"root"}),b})()},51693:(B,S,c)=>{c.d(S,{z:()=>f});var k=c(5e3),A=c(44151);const b=["*"];let f=(()=>{class h{constructor(T,u){this.modalService=T,this.el=u,this.element=u.nativeElement}ngOnInit(){this.id?(document.body.appendChild(this.element),this.element.addEventListener("click",T=>{}),this.modalService.add(this)):console.error("modal must have an id")}ngOnDestroy(){this.modalService.remove(this.id),this.element.remove()}open(){this.element.style.display="block",document.body.classList.add("jw-modal-open")}close(){document.body.classList.remove("jw-modal-open"),this.element.classList.add("close"),setTimeout(()=>{this.element.classList.remove("close"),this.element.style.display="none"},900)}}return h.\u0275fac=function(T){return new(T||h)(k.Y36(A.Z),k.Y36(k.SBq))},h.\u0275cmp=k.Xpm({type:h,selectors:[["jw-modal"]],inputs:{id:"id"},ngContentSelectors:b,decls:4,vars:0,consts:[[1,"jw-modal"],[1,"jw-modal-body"],[1,"jw-modal-background"]],template:function(T,u){1&T&&(k.F$t(),k.TgZ(0,"div",0)(1,"div",1),k.Hsn(2),k.qZA()(),k._UZ(3,"div",2))},styles:["jw-modal{display:none}jw-modal .open{display:none}jw-modal .jw-modal{position:fixed;inset:0;background-color:#eeeeee8e;z-index:1000;overflow:auto}jw-modal .jw-modal .jw-modal-body{animation:fadein .5s;padding:10px 20px;background:#fff;margin:30px auto;width:650px;border-radius:2%;position:relative;z-index:1050}@media (max-width: 767px){jw-modal .jw-modal .jw-modal-body{margin:30px auto;width:calc(100% - 25px)}}jw-modal .jw-modal .jw-modal-body-lg{padding:20px;background:#fff;margin:40px auto;width:900px auto}jw-modal .jw-modal-background{position:fixed;inset:0;background-color:#eeeeee8e;opacity:.75;z-index:900}jw-modal.close .jw-modal .jw-modal-body{animation:unfoldOut .5s .3s cubic-bezier(.165,.84,.44,1) forwards}body.jw-modal-open{overflow:hidden}body.jw-modal-close{overflow:hidden;animation:unfoldOut .5s .3s cubic-bezier(.165,.84,.44,1) forwards}@keyframes fadein{0%{opacity:0}to{opacity:1}}@keyframes unfoldIn{0%{transform:scaleY(.005) scaleX(0)}50%{transform:scaleY(.005) scaleX(1)}to{transform:scaleY(1) scaleX(1)}}@keyframes unfoldOut{0%{transform:scaleY(1) scaleX(1)}50%{transform:scaleY(.005) scaleX(1)}to{transform:scaleY(.005) scaleX(0)}}\n"],encapsulation:2}),h})()},16270:(B,S,c)=>{c.d(S,{z:()=>b});var k=c(69808),A=c(5e3);let b=(()=>{class f{}return f.\u0275fac=function(m){return new(m||f)},f.\u0275mod=A.oAB({type:f}),f.\u0275inj=A.cJS({imports:[[k.ez]]}),f})()},44151:(B,S,c)=>{c.d(S,{Z:()=>A});var k=c(5e3);let A=(()=>{class b{constructor(){this.modals=[]}add(h){this.modals.push(h)}remove(h){this.modals=this.modals.filter(m=>m.id!==h)}open(h){this.modals.find(T=>T.id===h).open()}close(h){this.modals.find(T=>T.id===h).close()}}return b.\u0275fac=function(h){return new(h||b)},b.\u0275prov=k.Yz7({token:b,factory:b.\u0275fac,providedIn:"root"}),b})()},15861:(B,S,c)=>{function k(b,f,h,m,T,u,r){try{var Z=b[u](r),q=Z.value}catch(R){return void h(R)}Z.done?f(q):Promise.resolve(q).then(m,T)}function A(b){return function(){var f=this,h=arguments;return new Promise(function(m,T){var u=b.apply(f,h);function r(q){k(u,m,T,r,Z,"next",q)}function Z(q){k(u,m,T,r,Z,"throw",q)}r(void 0)})}}c.d(S,{Z:()=>A})}}]);