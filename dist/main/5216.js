"use strict";(self.webpackChunkangularlight=self.webpackChunkangularlight||[]).push([[5216],{86307:(U,f,l)=>{l.d(f,{m:()=>c});var m=l(5e3),d=l(95305);let c=(()=>{class _{constructor(u){this.authService=u}getUrlModule(u){return this.authService.currentUserValue.repo.find(Z=>Z.key_repo==u).url_repo}}return _.\u0275fac=function(u){return new(u||_)(m.LFG(d.e))},_.\u0275prov=m.Yz7({token:_,factory:_.\u0275fac,providedIn:"root"}),_})()},75216:(U,f,l)=>{l.r(f),l.d(f,{ReturPbfModule:()=>we});var m=l(69808),d=l(65620),c=l(36642),_=l(50072),p=l(60795),u=l(93075),h=l(65415),b=l(83918),Z=l(67236),v=l(8202);class T{}const F=(0,d.PH)("[RETUR GUDANG] add initial",(0,d.Ky)()),S=(0,d.PH)("[RETUR GUDANG] add success",(0,d.Ky)()),I=(0,d.PH)("[RETUR GUDANG] add failure ",(0,d.Ky)()),_t=(0,d.PH)("[RETUR GUDANG] get byid initial",(0,d.Ky)()),pt=(0,d.PH)("[RETUR GUDANG] get byid success",(0,d.Ky)()),K=(0,d.PH)("[RETUR GUDANG] get byid failure",(0,d.Ky)()),P=(0,d.PH)("[RETUR GUDANG] delete initial",(0,d.Ky)()),N=(0,d.PH)("[RETUR GUDANG] delete success",(0,d.Ky)()),Y=(0,d.PH)("[RETUR GUDANG] delete failure",(0,d.Ky)()),gt=(0,d.PH)("[RETUR GUDANG] clear data "),E=(0,d.PH)("[RETUR GUDANG] table data"),mt=(0,d.Lq)({retur:null,isLoadingButton:!1,errorMessage:null,reloadTable:!1,submitButton:!1,isEdit:!1},(0,d.on)(F,(n,o)=>Object.assign(Object.assign({},n),{isLoadingButton:!0,errorMessage:null,reloadTable:!1,isEdit:!1})),(0,d.on)(S,(n,o)=>Object.assign(Object.assign({},n),{isLoadingButton:!1,reloadTable:!1,errorMessage:null})),(0,d.on)(I,(n,o)=>Object.assign(Object.assign({},n),{errorMessage:o.message,reloadTable:!1,isLoadingButton:!1})),(0,d.on)(P,(n,o)=>Object.assign(Object.assign({},n),{retur:new T,errorMessage:null,isEdit:!1,reloadTable:!1})),(0,d.on)(N,(n,o)=>Object.assign(Object.assign({},n),{reloadTable:!1,errorMessage:null,isEdit:!1})),(0,d.on)(Y,(n,o)=>Object.assign(Object.assign({},n),{errorMessage:o.message,reloadTable:!1,isLoadingButton:!1})),(0,d.on)(E,(n,o)=>Object.assign(Object.assign({},n),{retur:new T,reloadTable:!0})),(0,d.on)(gt,(n,o)=>Object.assign(Object.assign({},n),{retur:new T,isLoadingButton:!1,errorMessage:null,reloadTable:!1,submitButton:!1,isEdit:!1})));function bt(n,o){return mt(n,o)}var J=l(63900),C=l(54004),B=l(70262),j=l(39646),Zt=l(2454),q=l.n(Zt),t=l(5e3),z=l(89955),W=l(86307),V=l(40520);let M=(()=>{class n{constructor(e,a){this.generalService=e,this.http=a,this.urlBase="gudang-retur",this.urlModule=this.generalService.getUrlModule(z.s.url_module.gudangTransaksi)}show(e){return this.http.get(this.urlModule+"/"+this.urlBase+"/get-byid/"+e)}getById(e){return this.http.get(this.urlModule+"/"+this.urlBase+"/get-riwayat-byid-pembelian/"+e)}selectOption(e){return this.http.post(this.urlModule+"/"+this.urlBase+"/get-select-option-retur",e)}listDatatables(e){return this.http.post(this.urlModule+"/"+this.urlBase+"/get-datatables",e)}add(e){return this.http.post(this.urlModule+"/"+this.urlBase+"/create-retur",e)}addResep(e){return this.http.post(this.urlModule+"/"+this.urlBase+"/create-from-resep-dokter",e)}update(e,a){return this.http.put(this.urlModule+"/"+this.urlBase+"/update-retur/"+e,a)}delete(e){return this.http.delete(this.urlModule+"/"+this.urlBase+"/delete/"+e)}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(W.m),t.LFG(V.eN))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var A=l(23007);let ft=(()=>{class n{constructor(e,a,i){this.actions$=e,this.ModulReturPbfService=a,this.router=i,this.urlBacktoView=["retur","retur-pbf","view"],this.Toast=q().mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:r=>{r.addEventListener("mouseenter",q().stopTimer),r.addEventListener("mouseleave",q().resumeTimer)}}),this.addInitial$=(0,c.GW)(()=>this.actions$.pipe((0,c.l4)(F),(0,J.w)(r=>this.ModulReturPbfService.add(r.payload).pipe((0,C.U)(s=>S({payload:s.response})),(0,B.K)(s=>(this.Toast.fire({icon:"error",title:s.metaData.message}),(0,j.of)(I({message:s})))))))),this.addSuccess$=(0,c.GW)(()=>this.actions$.pipe((0,c.l4)(S),(0,C.U)(r=>(this.Toast.fire({icon:"success",title:"Data berhasil disimpan"}),this.router.navigate(this.urlBacktoView),E())))),this.addFailure$=(0,c.GW)(()=>this.actions$.pipe((0,c.l4)(I)),{dispatch:!1}),this.getByIdInitial$=(0,c.GW)(()=>this.actions$.pipe((0,c.l4)(_t),(0,J.w)(r=>this.ModulReturPbfService.show(r.payload.id).pipe((0,C.U)(s=>pt({payload:s.response})),(0,B.K)(s=>(0,j.of)(K({message:s}))))))),this.getByIdFailure$=(0,c.GW)(()=>this.actions$.pipe((0,c.l4)(K)),{dispatch:!1}),this.deleteInitial$=(0,c.GW)(()=>this.actions$.pipe((0,c.l4)(P),(0,J.w)(r=>this.ModulReturPbfService.delete(r.payload.id).pipe((0,C.U)(s=>N({payload:s.response})),(0,B.K)(s=>(0,j.of)(Y({message:s}))))))),this.deleteSuccess$=(0,c.GW)(()=>this.actions$.pipe((0,c.l4)(N),(0,C.U)(r=>(this.Toast.fire({icon:"success",title:"Data berhasil dihapus"}),E())))),this.deleteFailure$=(0,c.GW)(()=>this.actions$.pipe((0,c.l4)(Y)),{dispatch:!1})}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(c.eX),t.LFG(M),t.LFG(A.F0))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac}),n})();var L=l(24376),x=l(15439),y=l(44151),k=l(94554),R=l(33399);const Tt=function(){return["../list-pembelian"]};function At(n,o){1&n&&(t.TgZ(0,"button",13),t._UZ(1,"i",14),t._uU(2," Ajukan Retur "),t.qZA()),2&n&&t.Q6J("routerLink",t.DdM(1,Tt))}const vt=function(){return[]};let qt=(()=>{class n{constructor(e,a,i,r,s,g){this.modalService=e,this.ModulReturPbfService=a,this.router=i,this.money=r,this.spinner=s,this.store=g,this.datatableElement=h.G,this.dtOptions={},this.dataBarang=new T,this.btnDetail=!1,this.btnDelete=!1,this.btnEdit=!1,this.btnSetting=!1,this.btnAdd=!1,this.view=!1,this.getState=this.store.select("retur_gudang")}ngOnInit(){this.spinner.show("spinner1");let e=JSON.parse(localStorage.getItem("currentUser"));e=e.menu_right,this.btnAdd=this.btnDelete=this.btnEdit=-1!=e.findIndex(a=>"ATRTPS2"==a.kode),this.btnDetail=this.view=-1!=e.findIndex(a=>"ATRTPS1"==a.kode),this.view||q().fire("Warning","Anda tidak mempunyai akses halaman ini","warning").then(()=>{window.location.href="/"}),this.dtOptions=this.showDataTables(this.btnEdit),this.getState.subscribe(a=>{this.reloadTable=a.reloadTable,!0===this.reloadTable&&this.reLoadData()}),setTimeout(()=>{this.spinner.hide("spinner1")},1e3)}reLoadData(){this.datatableElement.dtInstance.then(e=>{e.ajax.reload()})}showDataTables(e){return{pageLength:10,serverSide:!0,processing:!0,order:[],ajax:(i,r)=>{this.ModulReturPbfService.listDatatables(i).subscribe(s=>{r({draw:s.response.draw,recordsTotal:s.response.recordsTotal,recordsFiltered:s.response.recordsFiltered,data:s.response.data})})},columns:[{orderable:!1,searchable:!1,render:(i,r,s,g)=>g.row+1+g.settings._iDisplayStart},{data:"created_at_unix",render:(i,r,s,g)=>x(i).format("DD-MM-YYYY")},{data:"kode_invoice_full"},{data:"pembayaran"},{orderable:!1,searchable:!1,render:(i,r,s,g)=>e?'<button class="btn btn-sm btn-ubah detail">Detail</button>\n                    <button class="btn nonaktif-data btn-hapus btn-sm">Hapus</button>':""}],rowCallback:(i,r,s)=>{const g=this;return $("td .detail",i).on("click",()=>{g.detail(r)}),$("td .nonaktif-data",i).on("click",()=>{g.nonAktif(r)}),i}}}detail(e){this.router.navigate(["retur/retur-pbf/detail/"+e.id_gudang_retur])}nonAktif(e){q().fire({title:"Apakah anda yakin akan menghapus data ini ?",icon:"warning",showCancelButton:!0,allowOutsideClick:!1,confirmButtonText:"Ya, hapus saja!",cancelButtonText:"Tidak, Batalkan"}).then(a=>{a.value&&(this.spinner.show("spinner1"),this.store.dispatch(P({payload:{id:e.id_gudang_retur}})),setTimeout(()=>{this.spinner.hide("spinner1")},400))})}ngOnDestroy(){document.body.classList.remove("jw-modal-open")}btnOpenModal(){this.modalService.open("modalFormContent")}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(y.Z),t.Y36(M),t.Y36(A.F0),t.Y36(k.r),t.Y36(_.t2),t.Y36(d.yh))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-view"]],viewQuery:function(e,a){if(1&e&&t.Gf(h.G,5),2&e){let i;t.iGM(i=t.CRH())&&(a.datatableElement=i.first)}},decls:32,vars:8,consts:[[1,"content"],[1,"content-block"],[1,"block-header"],[3,"title","items","active_item"],[1,"text-center","mb-3"],[1,"col-xs-12","col-sm-12","col-md-12","col-lg-12"],["type","button","class","btn btn-tambah btn-lg mb-3",3,"routerLink",4,"ngIf"],[1,"card"],[1,"header"],[1,"body"],["width","100%","datatable","",1,"table","table-striped","table-bordered","table-sm",3,"dtOptions"],["bdColor","rgba(0, 0, 0, 0.8)","size","medium","color","#fff","type","ball-clip-rotate-multiple",3,"name","fullScreen"],[2,"color","white"],["type","button",1,"btn","btn-tambah","btn-lg","mb-3",3,"routerLink"],[1,"fas","fa-plus"]],template:function(e,a){1&e&&(t.TgZ(0,"section",0)(1,"div",1)(2,"div",2),t._UZ(3,"app-breadcrumb",3),t.qZA(),t.TgZ(4,"h3",4),t._uU(5,"Retur Supplier"),t.qZA(),t.TgZ(6,"div",5),t.YNc(7,At,3,2,"button",6),t.TgZ(8,"div",7)(9,"div",8)(10,"h2")(11,"strong"),t._uU(12,"Pembelian yang sudah pernah diretur"),t.qZA()()(),t.TgZ(13,"div",9)(14,"table",10)(15,"thead")(16,"tr")(17,"th"),t._uU(18,"No"),t.qZA(),t.TgZ(19,"th"),t._uU(20,"Tanggal"),t.qZA(),t.TgZ(21,"th"),t._uU(22,"No Retur"),t.qZA(),t.TgZ(23,"th"),t._uU(24,"Metode Pembayaran"),t.qZA(),t.TgZ(25,"th"),t._uU(26,"Aksi"),t.qZA()()(),t.TgZ(27,"tbody"),t._UZ(28,"tr"),t.qZA()()()()()(),t.TgZ(29,"ngx-spinner",11)(30,"p",12),t._uU(31," Loading... "),t.qZA()()()),2&e&&(t.xp6(3),t.Q6J("title","Retur")("items",t.DdM(7,vt))("active_item","Retur PBF"),t.xp6(4),t.Q6J("ngIf",a.btnAdd),t.xp6(7),t.Q6J("dtOptions",a.dtOptions),t.xp6(15),t.Q6J("name","spinner1")("fullScreen",!0))},directives:[R.L,m.O5,A.rH,h.G,_.Ro],styles:["th[_ngcontent-%COMP%]{font-weight:bolder!important}"]}),n})();var Ut=l(15861),xt=l(88544),G=l(18805),yt=l(51531),kt=l(22346),X=l(51693);function Rt(n,o){if(1&n&&(t.TgZ(0,"div",54)(1,"div",42)(2,"div",31)(3,"div",38),t._uU(4,"No Faktur"),t.qZA(),t.TgZ(5,"div",55),t._uU(6),t.qZA()(),t.TgZ(7,"div",31)(8,"div",38),t._uU(9,"Tanggal Faktur"),t.qZA(),t.TgZ(10,"div",55),t._uU(11),t.qZA()(),t.TgZ(12,"div",31)(13,"div",38),t._uU(14,"Tanggal Ditrima"),t.qZA(),t.TgZ(15,"div",55),t._uU(16),t.qZA()()(),t.TgZ(17,"div",42)(18,"div",31)(19,"div",38),t._uU(20,"Metode Pembayaran"),t.qZA(),t.TgZ(21,"div",55),t._uU(22),t.qZA()(),t.TgZ(23,"div",31)(24,"div",38),t._uU(25,"Jatuh Tempo"),t.qZA(),t.TgZ(26,"div",55),t._uU(27),t.qZA()(),t.TgZ(28,"div",31)(29,"div",38),t._uU(30,"Nama PBF"),t.qZA(),t.TgZ(31,"div",55),t._uU(32),t.qZA()()()()),2&n){const e=t.oxw();t.xp6(6),t.hij(" : ",e.detail.nomor_faktur," "),t.xp6(5),t.hij(" : ",e.convertDate(e.detail.tgl_faktur_unix)," "),t.xp6(5),t.hij(" : ",e.convertDate(e.detail.tgl_diterima_unix)," "),t.xp6(6),t.hij(" : ",e.detail.pembayaran," "),t.xp6(5),t.hij(" : ",e.convertDate(e.detail.jatuh_tempo_unix)," "),t.xp6(5),t.hij(" : ",e.detail.nama_supplier," ")}}function Ct(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"button",58),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(),r=i.$implicit,s=i.index;return t.oxw().modalRetur(r,s,1)}),t._uU(1,"Pilih"),t.qZA()}}function Mt(n,o){1&n&&(t.TgZ(0,"button",59),t._uU(1,"Pilih"),t.qZA())}function Ot(n,o){if(1&n&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.qZA(),t.TgZ(13,"td"),t._uU(14),t.qZA(),t.TgZ(15,"td"),t.YNc(16,Ct,2,0,"button",56),t.YNc(17,Mt,2,0,"button",57),t.qZA()()),2&n){const e=o.$implicit,a=o.index,i=t.oxw();t.xp6(2),t.Oqu(a+1),t.xp6(2),t.Oqu(e.nama_obat),t.xp6(2),t.Oqu(e.satuan_qty),t.xp6(2),t.Oqu(e.satuan),t.xp6(2),t.Oqu(i.Money(e.satuan_harga)),t.xp6(2),t.Oqu(i.Money(e.diskon_rupiah)),t.xp6(2),t.Oqu(i.Money(e.total_harga-e.diskon_rupiah)),t.xp6(2),t.Q6J("ngIf",!e.isDisable),t.xp6(1),t.Q6J("ngIf",e.isDisable)}}function Dt(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"button",58),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(),r=i.$implicit,s=i.index;return t.oxw().modalRetur(r,s,0)}),t._uU(1,"Pilih"),t.qZA()}}function wt(n,o){1&n&&(t.TgZ(0,"button",59),t._uU(1,"Pilih"),t.qZA())}function Ft(n,o){if(1&n&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.qZA(),t.TgZ(13,"td"),t._uU(14),t.qZA(),t.TgZ(15,"td"),t.YNc(16,Dt,2,0,"button",56),t.YNc(17,wt,2,0,"button",57),t.qZA()()),2&n){const e=o.$implicit,a=o.index,i=t.oxw();t.xp6(2),t.Oqu(a+1),t.xp6(2),t.Oqu(e.nama_alat_kesehatan),t.xp6(2),t.Oqu(e.satuan_qty),t.xp6(2),t.Oqu(e.satuan),t.xp6(2),t.Oqu(i.Money(e.satuan_harga)),t.xp6(2),t.Oqu(i.Money(e.diskon_rupiah)),t.xp6(2),t.Oqu(i.Money(e.total_harga-e.diskon_rupiah)),t.xp6(2),t.Q6J("ngIf",!e.isDisable),t.xp6(1),t.Q6J("ngIf",e.isDisable)}}function St(n,o){if(1&n&&(t.TgZ(0,"tr")(1,"td"),t._uU(2,"PPN"),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA()()),2&n){const e=t.oxw(2);t.xp6(4),t.hij("",e.detail.ppn_nilai,"%"),t.xp6(2),t.Oqu(e.Money(e.ppn))}}function It(n,o){if(1&n&&(t.TgZ(0,"div",60)(1,"table",19)(2,"tbody")(3,"tr")(4,"td"),t._uU(5,"Sub Total"),t.qZA(),t._UZ(6,"td"),t.TgZ(7,"td"),t._uU(8),t.qZA()(),t.YNc(9,St,7,2,"tr",61),t.TgZ(10,"tr")(11,"td"),t._uU(12,"Total"),t.qZA(),t._UZ(13,"td"),t.TgZ(14,"td"),t._uU(15),t.qZA()()()()()),2&n){const e=t.oxw();t.xp6(8),t.Oqu(e.Money(e.totalBayar)),t.xp6(1),t.Q6J("ngIf","belum"==e.detail.ppn),t.xp6(6),t.Oqu(e.Money(e.totalRetur))}}function Pt(n,o){1&n&&(t.TgZ(0,"h5",64)(1,"b"),t._uU(2,"Belum ada mutasi"),t.qZA()())}function Nt(n,o){if(1&n&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA()()),2&n){const e=o.$implicit,a=o.index;t.xp6(2),t.Oqu(a+1),t.xp6(2),t.Oqu(e.nama_obat),t.xp6(2),t.Oqu(e.total_qty),t.xp6(2),t.Oqu(e.satuan)}}function Yt(n,o){1&n&&(t.TgZ(0,"tr")(1,"td",66)(2,"b"),t._uU(3,"Tidak ada obat yang diretur"),t.qZA()()())}function Et(n,o){if(1&n&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA()()),2&n){const e=o.$implicit,a=o.index;t.xp6(2),t.Oqu(a+1),t.xp6(2),t.Oqu(e.nama_alat_kesehatan),t.xp6(2),t.Oqu(e.total_qty),t.xp6(2),t.Oqu(e.satuan)}}function Jt(n,o){1&n&&(t.TgZ(0,"tr")(1,"td",66)(2,"b"),t._uU(3,"Tidak ada alat kesehatan yang diretur"),t.qZA()()())}function Bt(n,o){if(1&n&&(t.TgZ(0,"div")(1,"div",65)(2,"div",42)(3,"div",31)(4,"div",38),t._uU(5,"No Retur"),t.qZA(),t.TgZ(6,"div",55),t._uU(7),t.qZA()(),t.TgZ(8,"div",31)(9,"div",38),t._uU(10,"Tanggal Retur"),t.qZA(),t.TgZ(11,"div",55),t._uU(12),t.qZA()(),t.TgZ(13,"div",31)(14,"div",38),t._uU(15,"Dilakukan Oleh"),t.qZA(),t.TgZ(16,"div",55),t._uU(17),t.qZA()(),t.TgZ(18,"div",31)(19,"div",38),t._uU(20,"Status Retur"),t.qZA(),t.TgZ(21,"div",55),t._uU(22),t.qZA()()(),t.TgZ(23,"div",42)(24,"div",8)(25,"div",62)(26,"h5"),t._uU(27,"Alasan Retur"),t.qZA(),t.TgZ(28,"p"),t._uU(29),t.qZA()()()()(),t.TgZ(30,"h4"),t._uU(31,"Obat yang diretur"),t.qZA(),t.TgZ(32,"table",12)(33,"thead")(34,"tr")(35,"th"),t._uU(36,"No"),t.qZA(),t.TgZ(37,"th"),t._uU(38,"Barang"),t.qZA(),t.TgZ(39,"th"),t._uU(40,"Jumlah"),t.qZA(),t.TgZ(41,"th"),t._uU(42,"Satuan"),t.qZA()()(),t.TgZ(43,"tbody"),t.YNc(44,Nt,9,4,"tr",13),t.YNc(45,Yt,4,0,"tr",61),t.qZA()(),t.TgZ(46,"h4"),t._uU(47,"Alat kesehatan yang diretur"),t.qZA(),t.TgZ(48,"table",12)(49,"thead")(50,"tr")(51,"th"),t._uU(52,"No"),t.qZA(),t.TgZ(53,"th"),t._uU(54,"Barang"),t.qZA(),t.TgZ(55,"th"),t._uU(56,"Jumlah"),t.qZA(),t.TgZ(57,"th"),t._uU(58,"Satuan"),t.qZA()()(),t.TgZ(59,"tbody"),t.YNc(60,Et,9,4,"tr",13),t.YNc(61,Jt,4,0,"tr",61),t.qZA()(),t._UZ(62,"hr"),t.qZA()),2&n){const e=o.$implicit,a=t.oxw(2);t.xp6(7),t.hij(": ",e.kode_invoice_full,""),t.xp6(5),t.hij(": ",a.convertDate(e.created_at_unix),""),t.xp6(5),t.hij(": ",e.nama_lengkap,""),t.xp6(5),t.hij(": ",e.status_pengajuan,""),t.xp6(7),t.Oqu(e.alasan_retur),t.xp6(15),t.Q6J("ngForOf",e.gudang_retur_obat),t.xp6(1),t.Q6J("ngIf",0==e.gudang_retur_obat.length),t.xp6(15),t.Q6J("ngForOf",e.gudang_retur_alat_kesehatan),t.xp6(1),t.Q6J("ngIf",0==e.gudang_retur_alat_kesehatan.length)}}function jt(n,o){if(1&n&&(t.TgZ(0,"div",62),t.YNc(1,Pt,3,0,"h5",63),t.YNc(2,Bt,63,9,"div",13),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",0==e.mutasi.length),t.xp6(1),t.Q6J("ngForOf",e.mutasi)}}function Lt(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td")(12,"button",67),t.NdJ("click",function(){const i=t.CHM(e),r=i.index,s=i.$implicit;return t.oxw().hapusRetur(r,s,"obat")}),t._uU(13,"Hapus"),t.qZA()()()}if(2&n){const e=o.$implicit,a=o.index,i=t.oxw();t.xp6(2),t.Oqu(a+1),t.xp6(2),t.Oqu(e.nama),t.xp6(2),t.Oqu(e.stock),t.xp6(2),t.Oqu(i.satuan_qty_obat[a]),t.xp6(2),t.hij(" ",e.satuan," ")}}function Gt(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td")(12,"button",67),t.NdJ("click",function(){const i=t.CHM(e),r=i.index,s=i.$implicit;return t.oxw().hapusRetur(r,s,"alat")}),t._uU(13,"Hapus"),t.qZA()()()}if(2&n){const e=o.$implicit,a=o.index,i=t.oxw();t.xp6(2),t.Oqu(a+1),t.xp6(2),t.Oqu(e.nama),t.xp6(2),t.Oqu(e.stock),t.xp6(2),t.Oqu(i.satuan_qty_alat[a]),t.xp6(2),t.Oqu(e.satuan)}}function Qt(n,o){1&n&&(t.TgZ(0,"div",68),t._uU(1," Retur obat dan alat kesehatan masih kosong "),t.qZA())}function Ht(n,o){1&n&&(t.TgZ(0,"div",68),t._uU(1," Alasan retur tida boleh kosong "),t.qZA())}function $t(n,o){1&n&&(t.TgZ(0,"div",69),t._uU(1," Jumlah tidak boleh kosong "),t.qZA())}function Kt(n,o){1&n&&(t.TgZ(0,"div",69),t._uU(1," Jumlah tidak boleh lebih dari pembelian "),t.qZA())}function zt(n,o){if(1&n&&(t.TgZ(0,"option",70),t._uU(1),t.qZA()),2&n){const e=o.$implicit,a=t.oxw();t.Q6J("value",e.nama_kemasan)("disabled",e.kemasan_level>a.satuanJual.kemasan_level),t.xp6(1),t.Oqu(e.nama_kemasan)}}const Wt=function(){return[]},Vt=function(){return["../../list-pembelian"]},Xt=function(){return{adaptivePosition:!0,dateInputFormat:"DD-MM-YYYY",returnFocusToInput:!0}};let te=(()=>{class n{constructor(e,a,i,r,s,g,O,Q,H,Fe,Se,Ie){this.modalService=e,this.ModulReturPbfService=a,this.router=i,this.money=r,this.fb=s,this.validate=g,this.spinner=O,this.ModulFakturPembelianService=Q,this.activatedRoute=H,this.modulObat=Fe,this.modulAlat=Se,this.store=Ie,this.optionsCur={prefix:"",align:"left",thousands:".",precision:"0",inputMode:v.fF.NATURAL},this.datatableElement=h.G,this.dtOptions={},this.listPembelianObat=[],this.listPembelianAlat=[],this.totalBayar=0,this.totalRetur=0,this.detail={},this.metode="",this.returType=1,this.listReturObat=[],this.listReturAlat=[],this.satuan_qty_obat=[],this.satuan_qty_alat=[],this.alasan="",this.action="distributor",this.id_Pembelian="",this.maxRetur=0,this.returIndex=0,this.openMutasi=!1,this.ppn=0,this.satuanJual=[],this.listSatuan=[],this.submitted=!1,this.mutasi=[],this.getState=this.store.select("retur")}ngOnInit(){this.activatedRoute.params.subscribe(e=>{e&&(this.id_Pembelian=e.id,this.spinner.show("spinner1"),this.ModulFakturPembelianService.show(e.id).subscribe(a=>{this.detail=a.response,this.spinner.hide("spinner1"),setTimeout(()=>{this.metode=a.response.metode_pembayaran,this.setData(a.response.pembelian_detail,a.response.pembelian_alat_kesehatan)},400)}),this.ModulReturPbfService.getById(e.id).subscribe(a=>{a&&(this.mutasi=a.response)}))}),this.formInput=this.fb.group({tgl_terima:[null,[u.kI.required]],nama:[null,[u.kI.required]],satuan:[null,[u.kI.required]],no_batch:[null,[u.kI.required]],tanggal_ed:[null,[u.kI.required]],jml:[null,[u.kI.required]],stock:0,satuan_harga:0,id:null})}isNumber(e){return this.validate.Number(e)}onFocus(e){document.getElementById(e).click()}convertDate(e){return x(e).utc().format("DD-MM-YYYY")}Money(e){return this.money.formatRupiah(parseInt(e))}setData(e,a){this.listPembelianObat=e,this.listPembelianAlat=a,e.map((i,r)=>{this.listPembelianObat[r].isDisable=!1,this.totalBayar+=parseInt(i.total_harga)-parseInt(i.diskon_rupiah)}),a.map((i,r)=>{this.listPembelianAlat[r].isDisable=!1,this.totalBayar+=parseInt(i.total_harga)-parseInt(i.diskon_rupiah)}),this.setTotalRetur(e,a)}close(){this.modalService.close("modalRetur")}modalRetur(e,a,i){var r=this;return(0,Ut.Z)(function*(){r.modalService.open("modalRetur"),r.returType=i,r.returIndex=a,r.maxRetur=e.satuan_qty,console.log(e),r.formInput.patchValue({nama:i?e.nama_obat:e.nama_alat_kesehatan,satuan:e.satuan,tgl_terima:new Date,tanggal_ed:x(new Date(e.tanggal_ed_unix)).format("DD-MM-YYYY"),no_batch:e.no_batch,jml:e.satuan_qty,stock:e.total_qty,satuan_harga:e.satuan_harga,id:i?e.id_pembelian_detail:e.id_pembelian_alat_kesehatan}),r.listSatuan=[],i?yield r.modulObat.show(e.id_obat).subscribe(s=>{r.listSatuan=s.response.obat_kemasan,r.listSatuan.map(g=>{g.nama_kemasan==e.satuan&&(r.satuanJual=g)})}):yield r.modulAlat.show(e.id_alat_kesehatan).subscribe(s=>{r.listSatuan=s.response.alat_kesehatan_kemasan,r.listSatuan.map(g=>{g.nama_kemasan==e.satuan&&(r.satuanJual=g)})})})()}addRetur(){this.submitted=!1,setTimeout(()=>{this.submitted=!0},200),!(this.formInput.invalid||this.formInput.value.jml>this.maxRetur)&&(this.returType?(this.listPembelianObat[this.returIndex].isDisable=!0,this.listReturObat.push(this.formInput.value),this.satuan_qty_obat.push(this.formInput.value.jml)):(this.listPembelianAlat[this.returIndex].isDisable=!0,this.listReturAlat.push(this.formInput.value),this.satuan_qty_alat.push(this.formInput.value.jml)),setTimeout(()=>{this.submitted=!1},400),this.modalService.close("modalRetur"))}setTotalRetur(e,a){this.totalRetur=0,e.map((i,r)=>{this.totalRetur+=parseInt(i.total_harga)-parseInt(i.diskon_rupiah)}),a.map((i,r)=>{this.totalRetur+=parseInt(i.total_harga)-parseInt(i.diskon_rupiah)}),this.ppn=this.totalRetur*(this.detail.ppn_nilai/100),this.totalRetur=this.totalRetur+this.ppn}hapusRetur(e,a,i){if("obat"==i){this.listReturObat.splice(e,1);let r=this.listPembelianObat.indexOf(a);this.satuan_qty_obat.splice(e,1),this.listPembelianObat[r+1].isDisable=!1}else{this.listReturAlat.splice(e,1),this.satuan_qty_alat.splice(e,1);let r=this.listPembelianAlat.indexOf(a);this.listPembelianAlat[r+1].isDisable=!1}}simpan(){if(this.submitted=!1,setTimeout(()=>{this.submitted=!0},400),""==this.alasan||""==this.action||0==this.listReturObat.length&&0==this.listReturAlat.length)return!1;this.spinner.show("spinner1");let e=[],a=[];this.listReturObat.map((r,s)=>{e.push({id_pembelian_detail:r.id,satuan_qty:this.satuan_qty_obat[s],satuan:r.satuan})}),this.listReturAlat.map((r,s)=>{a.push({id_pembelian_alat_kesehatan:r.id,satuan_qty:this.satuan_qty_alat[s],satuan:r.satuan})}),this.store.dispatch(F({payload:{id_pembelian:this.id_Pembelian,retur_tujuan:this.action,alasan_retur:this.alasan,obat:e,alat_kesehatan:a}})),setTimeout(()=>{this.spinner.hide("spinner1")},400)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(y.Z),t.Y36(M),t.Y36(A.F0),t.Y36(k.r),t.Y36(u.qu),t.Y36(xt.p),t.Y36(_.t2),t.Y36(G.V),t.Y36(A.gz),t.Y36(yt.g),t.Y36(kt.W),t.Y36(d.yh))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-add"]],viewQuery:function(e,a){if(1&e&&t.Gf(h.G,5),2&e){let i;t.iGM(i=t.CRH())&&(a.datatableElement=i.first)}},decls:188,vars:28,consts:[[1,"content"],[1,"content-block"],[1,"block-header"],[3,"title","items","active_item"],[1,"text-center","mb-3"],[1,"col-xs-12","col-sm-12","col-md-12","col-lg-12"],["type","button",1,"btn","btn-kembali","btn-lg","mb-3",3,"routerLink"],[1,"fas","fa-arrow-left"],[1,"card"],[1,"header"],[1,"body"],["class","row",4,"ngIf"],[1,"table","table-sm","table-striped","table-bordered"],[4,"ngFor","ngForOf"],["class","col-sm-4 offset-sm-8",4,"ngIf"],[1,"card-header",2,"border-radius","10px","cursor","pointer","background","white","border-bottom","0px","padding","11px 15px 0px 15px",3,"click"],[2,"float","left"],[2,"float","right"],["class","card-body",4,"ngIf"],["width","100%",1,"table","table-sm","table-striped","table-bordered"],["class","form-text text-danger",4,"ngIf"],[1,"mb-3","col-sm-6"],["for","text-alasanretur",1,"form-label","fw-bold"],[1,"text-danger"],["name","alasan","id","text-alasanretur","rows","5",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-sm-12","text-center","pt-5"],[1,"btn","btn-lg","btn-simpan",3,"click"],["id","modalRetur"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],[1,"modal-body",3,"formGroup"],[1,"row","mb-2"],[1,"col-md-5"],["for",""],["type","text","readonly","","formControlName","nama",1,"form-control"],[1,"col-md-3"],["type","text","formControlName","jml",1,"form-control",3,"keypress"],["class","col-md-12 text-danger",4,"ngIf"],[1,"col-md-4"],["type","text","formControlName","satuan",1,"form-control"],["value",""],[3,"value","disabled",4,"ngFor","ngForOf"],[1,"col-md-6"],["type","text","readonly","","formControlName","no_batch",1,"form-control"],[1,"input-group"],["type","text","bsDatepicker","","disabled","","formControlName","tgl_diterima","placeholder","Pilih tanggal","formControlName","tanggal_ed","id","tgl2",1,"form-control",3,"bsConfig","outsideClick"],[1,"input-group-text",2,"cursor","pointer","background","white","border-left","0px",3,"click"],[1,"fa","fa-calendar"],[1,"footer"],[1,"text-right","mb-3"],["type","submit","color","primary",1,"btn","btn-simpan","btn-lg",3,"click"],["type","button","color","primary",1,"btn","btn-danger","btn-lg",3,"click"],["bdColor","rgba(0, 0, 0, 0.8)","size","medium","color","#fff","type","ball-clip-rotate-multiple",3,"name","fullScreen"],[2,"color","white"],[1,"row"],[1,"col-md-8"],["class","btn btn-secondary btn-sm",3,"click",4,"ngIf"],["class","btn btn-secondary btn-sm","disabled","",4,"ngIf"],[1,"btn","btn-secondary","btn-sm",3,"click"],["disabled","",1,"btn","btn-secondary","btn-sm"],[1,"col-sm-4","offset-sm-8"],[4,"ngIf"],[1,"card-body"],["class","text-center p-2","style","background-color: rgb(246, 243, 243);",4,"ngIf"],[1,"text-center","p-2",2,"background-color","rgb(246, 243, 243)"],[1,"row","mb-3"],["colspan","4",1,"text-center"],[1,"btn","btn-hapus","btn-sm",3,"click"],[1,"form-text","text-danger"],[1,"col-md-12","text-danger"],[3,"value","disabled"]],template:function(e,a){1&e&&(t.TgZ(0,"section",0)(1,"div",1)(2,"div",2),t._UZ(3,"app-breadcrumb",3),t.qZA(),t.TgZ(4,"h3",4),t._uU(5,"Tambah Retur PBF"),t.qZA(),t.TgZ(6,"div",5)(7,"button",6),t._UZ(8,"i",7),t._uU(9," Kembali"),t.qZA(),t.TgZ(10,"div",8)(11,"div",9)(12,"h2")(13,"b"),t._uU(14,"Informasi Pembelian"),t.qZA()()(),t.TgZ(15,"div",10),t.YNc(16,Rt,33,6,"div",11),t.qZA(),t.TgZ(17,"div",9)(18,"h2")(19,"strong"),t._uU(20,"Pembelian Obat"),t.qZA()()(),t.TgZ(21,"div",10)(22,"table",12)(23,"thead")(24,"tr")(25,"td"),t._uU(26,"No"),t.qZA(),t.TgZ(27,"th"),t._uU(28,"Barang"),t.qZA(),t.TgZ(29,"th"),t._uU(30,"Jumlah"),t.qZA(),t.TgZ(31,"th"),t._uU(32,"Satuan"),t.qZA(),t.TgZ(33,"th"),t._uU(34,"Harga"),t.qZA(),t.TgZ(35,"th"),t._uU(36,"Diskon"),t.qZA(),t.TgZ(37,"th"),t._uU(38,"Sub Total"),t.qZA(),t.TgZ(39,"th"),t._uU(40,"Aksi"),t.qZA()()(),t.TgZ(41,"tbody"),t.YNc(42,Ot,18,9,"tr",13),t.qZA()()(),t.TgZ(43,"div",9)(44,"h2")(45,"strong"),t._uU(46,"Pembelian Alat Kesehatan"),t.qZA()()(),t.TgZ(47,"div",10)(48,"table",12)(49,"thead")(50,"tr")(51,"td"),t._uU(52,"No"),t.qZA(),t.TgZ(53,"th"),t._uU(54,"Barang"),t.qZA(),t.TgZ(55,"th"),t._uU(56,"Jumlah"),t.qZA(),t.TgZ(57,"th"),t._uU(58,"Satuan"),t.qZA(),t.TgZ(59,"th"),t._uU(60,"Harga"),t.qZA(),t.TgZ(61,"th"),t._uU(62,"Diskon"),t.qZA(),t.TgZ(63,"th"),t._uU(64,"Sub Total"),t.qZA(),t.TgZ(65,"th"),t._uU(66,"Aksi"),t.qZA()()(),t.TgZ(67,"tbody"),t.YNc(68,Ft,18,9,"tr",13),t.qZA()(),t.YNc(69,It,16,3,"div",14),t.qZA()(),t.TgZ(70,"div",8)(71,"div",15),t.NdJ("click",function(){return a.openMutasi=!a.openMutasi}),t.TgZ(72,"h4",16),t._uU(73,"Mutasi retur"),t.qZA(),t.TgZ(74,"span",17),t._UZ(75,"i"),t.qZA()(),t.YNc(76,jt,3,2,"div",18),t.qZA(),t.TgZ(77,"div",8)(78,"div",10)(79,"h4")(80,"strong"),t._uU(81,"Aktivitas Retur"),t.qZA()()(),t.TgZ(82,"div",10)(83,"h5")(84,"strong"),t._uU(85,"Obat yang diretur"),t.qZA()(),t.TgZ(86,"table",19)(87,"thead")(88,"tr")(89,"th"),t._uU(90,"No"),t.qZA(),t.TgZ(91,"th"),t._uU(92,"Barang"),t.qZA(),t.TgZ(93,"th"),t._uU(94,"In Stock"),t.qZA(),t.TgZ(95,"th"),t._uU(96,"Jumlah "),t.qZA(),t.TgZ(97,"th"),t._uU(98,"Satuan"),t.qZA(),t.TgZ(99,"th"),t._uU(100,"Aksi"),t.qZA()()(),t.TgZ(101,"tbody"),t.YNc(102,Lt,14,5,"tr",13),t.qZA()()(),t.TgZ(103,"div",10)(104,"h5")(105,"strong"),t._uU(106,"Alat kesehatan yang diretur"),t.qZA()(),t.TgZ(107,"table",19)(108,"thead")(109,"tr")(110,"th"),t._uU(111,"No"),t.qZA(),t.TgZ(112,"th"),t._uU(113,"Barang"),t.qZA(),t.TgZ(114,"th"),t._uU(115,"In Stock"),t.qZA(),t.TgZ(116,"th"),t._uU(117,"Jumlah "),t.qZA(),t.TgZ(118,"th"),t._uU(119,"Satuan"),t.qZA(),t.TgZ(120,"th"),t._uU(121,"Aksi"),t.qZA()()(),t.TgZ(122,"tbody"),t.YNc(123,Gt,14,5,"tr",13),t.qZA()()(),t.TgZ(124,"div",10),t.YNc(125,Qt,2,0,"div",20),t.qZA(),t.TgZ(126,"div",10)(127,"div",21)(128,"label",22),t._uU(129,"Alasan retur"),t.TgZ(130,"span",23)(131,"b"),t._uU(132,"*"),t.qZA()()(),t.TgZ(133,"textarea",24),t.NdJ("ngModelChange",function(r){return a.alasan=r}),t.qZA(),t.YNc(134,Ht,2,0,"div",20),t.qZA(),t.TgZ(135,"div",25)(136,"button",26),t.NdJ("click",function(){return a.simpan()}),t._uU(137,"Simpan Retur"),t.qZA()()()()(),t.TgZ(138,"jw-modal",27)(139,"div",28)(140,"h4",29),t._uU(141,"Penyelesaian Retur"),t.qZA()(),t.TgZ(142,"div",30)(143,"div",31)(144,"div",32)(145,"label",33),t._uU(146),t.qZA(),t._UZ(147,"input",34),t.qZA(),t.TgZ(148,"div",35)(149,"label",33),t._uU(150,"Jumlah"),t.TgZ(151,"span",23)(152,"b"),t._uU(153,"*"),t.qZA()()(),t.TgZ(154,"input",36),t.NdJ("keypress",function(r){return a.isNumber(r)}),t.qZA(),t.YNc(155,$t,2,0,"div",37),t.YNc(156,Kt,2,0,"div",37),t.qZA(),t.TgZ(157,"div",38)(158,"label",33),t._uU(159,"Satuan"),t.TgZ(160,"span",23)(161,"b"),t._uU(162,"*"),t.qZA()()(),t.TgZ(163,"select",39)(164,"option",40),t._uU(165,"Pilih Satuan"),t.qZA(),t.YNc(166,zt,2,3,"option",41),t.qZA()()(),t.TgZ(167,"div",31)(168,"div",42)(169,"label",33),t._uU(170,"No Batch"),t.qZA(),t._UZ(171,"input",43),t.qZA(),t.TgZ(172,"div",42)(173,"label",33),t._uU(174,"ED"),t.qZA(),t.TgZ(175,"div",44),t._UZ(176,"input",45),t.TgZ(177,"span",46),t.NdJ("click",function(){return a.onFocus("tgl2")}),t._UZ(178,"i",47),t.qZA()()()()(),t.TgZ(179,"div",48)(180,"div",49)(181,"button",50),t.NdJ("click",function(){return a.addRetur()}),t._uU(182," Simpan "),t.qZA(),t.TgZ(183,"button",51),t.NdJ("click",function(){return a.close()}),t._uU(184," Batal "),t.qZA()()()()(),t.TgZ(185,"ngx-spinner",52)(186,"p",53),t._uU(187," Loading... "),t.qZA()()()),2&e&&(t.xp6(3),t.Q6J("title","Retur")("items",t.DdM(25,Wt))("active_item","Retur Pembelian"),t.xp6(4),t.Q6J("routerLink",t.DdM(26,Vt)),t.xp6(9),t.Q6J("ngIf",a.detail),t.xp6(26),t.Q6J("ngForOf",a.listPembelianObat),t.xp6(26),t.Q6J("ngForOf",a.listPembelianAlat),t.xp6(1),t.Q6J("ngIf",a.detail),t.xp6(6),t.Tol(a.openMutasi?"fa fa-chevron-up":"fa fa-chevron-down"),t.xp6(1),t.Q6J("ngIf",a.openMutasi),t.xp6(26),t.Q6J("ngForOf",a.listReturObat),t.xp6(21),t.Q6J("ngForOf",a.listReturAlat),t.xp6(2),t.Q6J("ngIf",0==a.listReturObat.length&&0==a.listReturAlat.length&&a.submitted),t.xp6(8),t.Q6J("ngModel",a.alasan),t.xp6(1),t.Q6J("ngIf",""==a.alasan&&a.submitted),t.xp6(8),t.Q6J("formGroup",a.formInput),t.xp6(4),t.hij("Nama ",a.returType?"Obat":"Alat Kesehatan",""),t.xp6(9),t.Q6J("ngIf",a.formInput.value.jml<=0&&a.submitted),t.xp6(1),t.Q6J("ngIf",a.formInput.value.jml>a.maxRetur&&a.submitted),t.xp6(10),t.Q6J("ngForOf",a.listSatuan),t.xp6(10),t.Q6J("bsConfig",t.DdM(27,Xt))("outsideClick",!0),t.xp6(9),t.Q6J("name","spinner1")("fullScreen",!0))},directives:[R.L,A.rH,m.O5,m.sg,u.Fj,u.JJ,u.On,X.z,u.JL,u.sg,u.u,u.EJ,u.YN,u.Kr,Z.Y5,Z.Np,_.Ro],styles:["th[_ngcontent-%COMP%]{font-weight:bolder!important}.card-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{text-decoration:none!important;color:#000!important}"]}),n})(),tt=(()=>{class n{constructor(e,a){this.generalService=e,this.http=a,this.urlBase="penggantian-gudang-retur",this.urlModule=this.generalService.getUrlModule(z.s.url_module.gudangTransaksi)}show(e){return this.http.get(this.urlModule+"/"+this.urlBase+"/get-byid/"+e)}listDatatables(e){return this.http.post(this.urlModule+"/"+this.urlBase+"/get-datatables",e)}add(e){return this.http.post(this.urlModule+"/"+this.urlBase+"/create",e)}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(W.m),t.LFG(V.eN))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function ee(n,o){if(1&n&&(t.TgZ(0,"ng-option",41),t._uU(1),t.qZA()),2&n){const e=o.$implicit;t.Q6J("value",e.id_retur),t.xp6(1),t.Oqu(e.kode_invoice_full)}}function ae(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"button",42),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return i.getPembelianById(i.detailRetur.pembelian.id_pembelian)}),t._uU(1),t.qZA()}if(2&n){const e=t.oxw();t.xp6(1),t.Oqu(e.detailRetur.pembelian.nomor_faktur)}}function ne(n,o){1&n&&(t.TgZ(0,"p",20),t._uU(1,"Tanggal Barang Kembali tidak boleh kosong"),t.qZA())}function ie(n,o){1&n&&(t.TgZ(0,"p",20),t._uU(1,"Tanggal Faktur Barang Pengganti tidak boleh kosong"),t.qZA())}function re(n,o){1&n&&(t.TgZ(0,"p",20),t._uU(1,"Nomor Faktur Barang Pengganti tidak boleh kosong"),t.qZA())}function oe(n,o){1&n&&(t.TgZ(0,"p",20),t._uU(1,"Batch tidak boleh kosong"),t.qZA())}function se(n,o){1&n&&(t.TgZ(0,"p",20),t._uU(1,"Expired date tidak boleh kosong"),t.qZA())}const D=function(){return{adaptivePosition:!0,dateInputFormat:"DD-MM-YYYY",returnFocusToInput:!0}};function le(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td")(10,"input",44),t.NdJ("ngModelChange",function(i){const s=t.CHM(e).index;return t.oxw(2).batchObat[s]=i}),t.qZA(),t.YNc(11,oe,2,0,"p",26),t.qZA(),t.TgZ(12,"td")(13,"div",22)(14,"input",45),t.NdJ("ngModelChange",function(i){const s=t.CHM(e).index;return t.oxw(2).edObat[s]=i}),t.qZA(),t.TgZ(15,"span",24),t.NdJ("click",function(){const r=t.CHM(e).index;return t.oxw(2).onFocus("edObat"+r)}),t._UZ(16,"i",25),t.qZA()(),t.YNc(17,se,2,0,"p",26),t.qZA()()}if(2&n){const e=o.$implicit,a=o.index,i=t.oxw(2);t.xp6(2),t.Oqu(a+1),t.xp6(2),t.Oqu(e.nama_obat),t.xp6(2),t.Oqu(e.satuan_qty),t.xp6(2),t.Oqu(e.satuan),t.xp6(2),t.Q6J("ngModel",i.batchObat[a]),t.xp6(1),t.Q6J("ngIf",""==i.batchObat[a]&&i.submitted),t.xp6(3),t.Q6J("bsConfig",t.DdM(11,D))("outsideClick",!0)("ngModel",i.edObat[a])("id","edObat"+a),t.xp6(3),t.Q6J("ngIf",""==i.edObat[a]&&i.submitted)}}function ue(n,o){if(1&n&&(t.TgZ(0,"tbody"),t.YNc(1,le,18,12,"tr",43),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.detailRetur.gudang_retur_obat)}}function de(n,o){1&n&&(t.TgZ(0,"tbody")(1,"tr")(2,"td",46)(3,"b"),t._uU(4,"Tidak ada barang yang diganti"),t.qZA()()()())}function ce(n,o){1&n&&(t.TgZ(0,"p",20),t._uU(1,"Batch tidak boleh kosong"),t.qZA())}function _e(n,o){1&n&&(t.TgZ(0,"p",20),t._uU(1,"Expired date tidak boleh kosong"),t.qZA())}function pe(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td")(10,"input",44),t.NdJ("ngModelChange",function(i){const s=t.CHM(e).index;return t.oxw(2).batchAlat[s]=i}),t.qZA(),t.YNc(11,ce,2,0,"p",26),t.qZA(),t.TgZ(12,"td")(13,"div",22)(14,"input",47),t.NdJ("ngModelChange",function(i){const s=t.CHM(e).index;return t.oxw(2).edAlat[s]=i}),t.qZA(),t.TgZ(15,"span",24),t.NdJ("click",function(){const r=t.CHM(e).index;return t.oxw(2).onFocus("edAlat"+r)}),t._UZ(16,"i",25),t.qZA()(),t.YNc(17,_e,2,0,"p",26),t.qZA()()}if(2&n){const e=o.$implicit,a=o.index,i=t.oxw(2);t.xp6(2),t.Oqu(a+1),t.xp6(2),t.Oqu(e.nama_alat_kesehatan),t.xp6(2),t.Oqu(e.satuan_qty),t.xp6(2),t.Oqu(e.satuan),t.xp6(2),t.Q6J("ngModel",i.batchAlat[a]),t.xp6(1),t.Q6J("ngIf",""==i.batchAlat[a]&&i.submitted),t.xp6(3),t.Q6J("bsConfig",t.DdM(11,D))("outsideClick",!0)("ngModel",i.edAlat[a])("id","edAlat"+a),t.xp6(3),t.Q6J("ngIf",""==i.edAlat[a]&&i.submitted)}}function ge(n,o){if(1&n&&(t.TgZ(0,"tbody"),t.YNc(1,pe,18,12,"tr",43),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.detailRetur.gudang_retur_alat_kesehatan)}}function he(n,o){1&n&&(t.TgZ(0,"tbody")(1,"tr")(2,"td",46)(3,"b"),t._uU(4,"Tidak ada barang yang diganti"),t.qZA()()()())}function me(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",48)(1,"button",49),t.NdJ("click",function(){return t.CHM(e),t.oxw().selesai()}),t._uU(2,"Selesai"),t.qZA()()}}function be(n,o){if(1&n&&(t.TgZ(0,"div",50)(1,"div",13)(2,"div",14)(3,"div",51)(4,"div",14),t._uU(5,"No Faktur"),t.qZA(),t.TgZ(6,"div",14),t._uU(7),t.qZA()()(),t.TgZ(8,"div",14)(9,"div",51)(10,"div",14),t._uU(11,"Metode Pembayaran"),t.qZA(),t.TgZ(12,"div",14),t._uU(13),t.qZA()()()(),t.TgZ(14,"div",13)(15,"div",14)(16,"div",51)(17,"div",14),t._uU(18,"Tanggal Faktur"),t.qZA(),t.TgZ(19,"div",14),t._uU(20),t.qZA()()(),t.TgZ(21,"div",14)(22,"div",51)(23,"div",14),t._uU(24,"Jatuh Tempo"),t.qZA(),t.TgZ(25,"div",14),t._uU(26),t.qZA()()()(),t.TgZ(27,"div",13)(28,"div",14)(29,"div",51)(30,"div",14),t._uU(31,"Tanggal Diterima"),t.qZA(),t.TgZ(32,"div",14),t._uU(33),t.qZA()()(),t.TgZ(34,"div",14)(35,"div",51)(36,"div",14),t._uU(37,"No PBF"),t.qZA(),t.TgZ(38,"div",14),t._uU(39),t.qZA()()()()()),2&n){const e=t.oxw();t.xp6(7),t.hij(": ",e.info.nomor_faktur,""),t.xp6(6),t.hij(": ",e.info.pembayaran,""),t.xp6(7),t.hij(": ",e.info.tgl_faktur,""),t.xp6(6),t.hij(": ",e.convertDate(e.info.jatuh_tempo_unix),""),t.xp6(7),t.hij(": ",e.convertDate(e.info.tgl_diterima_unix),""),t.xp6(6),t.hij(": ",e.info.kode_invoice_full,"")}}const Ze=function(){return[]};let fe=(()=>{class n{constructor(e,a,i,r,s,g,O,Q,H){this.modalService=e,this.ModulReturPbfService=a,this.MoneyService=i,this.fb=r,this.router=s,this.ModulFakturPembelianService=g,this.ModulReturPenggantianService=O,this.spinner=Q,this.store=H,this.datatableElement=h.G,this.dtOptions={},this.dataBarang=new T,this.submitted=!1,this.total_obat=0,this.total_alat=0,this.detailRetur=[],this.tglTrima="",this.tglFaktur="",this.batchObat=[],this.batchAlat=[],this.edObat=[],this.edAlat=[],this.noFaktur="",this.params_get={last_data:"0",get_data:"10",search:""},this.listRetur=[],this.id_retur=null,this.info=null,this.getState=this.store.select("retur_gudang")}ngOnInit(){}convertDate(e){return x(new Date(e)).format("DD-MM-YYYY")}prosesSelect(e,a){if(this.spinner.show("spinner1"),"search"==a?(this.listRetur=[],this.params_get.search=e.term,this.params_get.last_data="0"):this.params_get.search="","last_page"==a){let i=parseInt(this.params_get.last_data)+parseInt(this.params_get.get_data);this.params_get.last_data=i.toString()}else this.params_get.last_data="0";this.ModulReturPbfService.selectOption(this.params_get).subscribe(i=>{i&&(0==this.listRetur.length?this.listRetur=i.response:i.response.map(r=>{this.listRetur.findIndex(g=>g.id_retur==r.id_retur)<0&&this.listRetur.push(r)})),this.spinner.hide("spinner1")})}getById(e){this.spinner.show("spinner1"),this.ModulReturPbfService.show(e).subscribe(a=>{this.batchObat=[],this.edObat=[],a.response&&(this.detailRetur=a.response,this.detailRetur.gudang_retur_obat.map((i,r)=>{this.batchObat.push(""),this.edObat.push("")}),this.detailRetur.gudang_retur_alat_kesehatan.map((i,r)=>{this.batchAlat.push(""),this.edAlat.push("")}),this.spinner.hide("spinner1"))})}getPembelianById(e){this.spinner.show("spinner1"),this.ModulFakturPembelianService.show(e).subscribe(a=>{this.info=a.response,this.modalService.open("modalRetur"),this.spinner.hide("spinner1")})}close(){this.modalService.close("modalRetur")}setRetur(e){null!=e?this.getById(e.id_gudang_retur):this.detailRetur=[]}ngOnDestroy(){document.body.classList.remove("jw-modal-open")}Money(e){return this.MoneyService.formatRupiah(e)}onFocus(e){document.getElementById(e).click()}selesai(){this.submitted=!1,setTimeout(()=>{this.submitted=!0},200);let e=!1;(""==this.tglFaktur||""==this.tglTrima||""==this.noFaktur)&&(e=!0);let a={id_gudang_retur:this.detailRetur.id_gudang_retur,nomor_faktur:this.noFaktur,tgl_faktur:new Date(this.tglFaktur).getTime(),tgl_diterima:new Date(this.tglTrima).getTime(),obat:[],alat_kesehatan:[]};this.detailRetur.gudang_retur_obat.map((i,r)=>{""!=this.edObat[r]&&""!=this.batchObat[r]?a.obat.push({id_gudang_retur_obat:i.id_gudang_retur_obat,tanggal_ed:new Date(this.edObat[r]).getTime(),no_batch:this.batchObat[r]}):e=!0}),this.detailRetur.gudang_retur_alat_kesehatan.map((i,r)=>{""!=this.edObat[r]&&""!=this.batchObat[r]?a.alat_kesehatan.push({id_gudang_retur_alat_kesehatan:i.id_gudang_retur_alat_kesehatan,tanggal_ed:new Date(i.tanggal_ed).getTime(),no_batch:i.no_batch}):e=!0}),e||(this.spinner.show("spinner1"),this.ModulReturPenggantianService.add(a).subscribe(i=>{this.spinner.hide("spinner1"),"0000"!=i.metaData.response_code?q().fire("Error",i.metaData.message,"error"):(q().fire("Success","Data berhasil disimpan","success"),this.router.navigate(["retur/retur-pbf/penggantian"]))},i=>{this.spinner.hide("spinner1"),"0000"!=i.metaData.response_code&&q().fire("Error",i.metaData.message,"error")}))}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(y.Z),t.Y36(M),t.Y36(k.r),t.Y36(u.qu),t.Y36(A.F0),t.Y36(G.V),t.Y36(tt),t.Y36(_.t2),t.Y36(d.yh))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-finish"]],viewQuery:function(e,a){if(1&e&&t.Gf(h.G,5),2&e){let i;t.iGM(i=t.CRH())&&(a.datatableElement=i.first)}},decls:139,vars:33,consts:[[1,"content"],[1,"content-block"],[1,"block-header"],[3,"title","items","active_item"],[1,"text-center","mb-3"],[1,"col-xs-12","col-sm-12","col-md-12","col-lg-12"],[1,"row","mb-2","mt-5"],[1,"col-md-12"],["bindLabel","kode_invoice_full","bindValue","id_retur","placeholder","No Retur",2,"flex","1 1 auto",3,"virtualScroll","searchable","clearable","change","search","scrollToEnd","open"],[3,"value",4,"ngFor","ngForOf"],[1,"card"],[1,"header"],[1,"card-body"],[1,"row","mb-2"],[1,"col-md-6"],[1,"col-3"],[1,"col-4"],["class","btn btn-link",3,"click",4,"ngIf"],[1,"body"],["for",""],[1,"text-danger"],[1,"row","mb-3"],[1,"input-group"],["type","text","bsDatepicker","","id","tgl1","placeholder","Tanggal Barang Kembali",1,"form-control",2,"border-right","0px",3,"bsConfig","outsideClick","ngModel","ngModelChange"],[1,"input-group-text",2,"cursor","pointer","background","white","border-left","0px",3,"click"],[1,"fa","fa-calendar"],["class","text-danger",4,"ngIf"],["type","text","bsDatepicker","","id","tgl2","placeholder","Tanggal Faktur Barang Pengganti",1,"form-control",2,"border-right","0px",3,"bsConfig","outsideClick","ngModel","ngModelChange"],["type","text","placeholder","Nomor Faktur Barang Pengganti",1,"form-control",3,"ngModel","ngModelChange"],["width","100%",1,"table","table-striped","table-bordered","table-sm"],[4,"ngIf"],["class","text-center pt-5",4,"ngIf"],["id","modalRetur"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["class","modal-body",4,"ngIf"],[1,"footer"],[1,"text-right","mb-3"],["type","button","color","primary",1,"btn","btn-danger","btn-lg",3,"click"],["bdColor","rgba(0, 0, 0, 0.8)","size","medium","color","#fff","type","ball-clip-rotate-multiple",3,"name","fullScreen"],[2,"color","white"],[3,"value"],[1,"btn","btn-link",3,"click"],[4,"ngFor","ngForOf"],["type","text",1,"form-control",3,"ngModel","ngModelChange"],["type","text","bsDatepicker","",1,"form-control",2,"border-right","0px",3,"bsConfig","outsideClick","ngModel","id","ngModelChange"],["colspan","6",1,"text-center"],["type","text","bsDatepicker","",1,"form-control",3,"bsConfig","outsideClick","ngModel","id","ngModelChange"],[1,"text-center","pt-5"],[1,"btn","btn-success","btn-lg",3,"click"],[1,"modal-body"],[1,"row"]],template:function(e,a){1&e&&(t.TgZ(0,"section",0)(1,"div",1)(2,"div",2),t._UZ(3,"app-breadcrumb",3),t.qZA(),t.TgZ(4,"h3",4),t._uU(5,"Penyelesaian Retur Barang Masuk"),t.qZA(),t.TgZ(6,"div",5)(7,"div",6)(8,"div",7)(9,"ng-select",8),t.NdJ("change",function(r){return a.setRetur(r)})("search",function(r){return a.prosesSelect(r,"search")})("scrollToEnd",function(r){return a.prosesSelect(r,"last_page")})("open",function(r){return a.prosesSelect(r,"open")}),t.YNc(10,ee,2,2,"ng-option",9),t.qZA()()(),t.TgZ(11,"div",10)(12,"div",11)(13,"h4")(14,"b"),t._uU(15,"Informasi Retur"),t.qZA()()(),t.TgZ(16,"div",12)(17,"div",13)(18,"div",14)(19,"div",13)(20,"div",15),t._uU(21,"No Retur"),t.qZA(),t.TgZ(22,"div",16),t._uU(23),t.qZA()(),t.TgZ(24,"div",13)(25,"div",15),t._uU(26,"No Faktur"),t.qZA(),t.TgZ(27,"div",16),t._uU(28,":"),t.YNc(29,ae,2,1,"button",17),t.qZA()(),t.TgZ(30,"div",13)(31,"div",15),t._uU(32,"Tanggal Retur"),t.qZA(),t.TgZ(33,"div",16),t._uU(34),t.qZA()(),t.TgZ(35,"div",13)(36,"div",15),t._uU(37,"Dilakukan Oleh"),t.qZA(),t.TgZ(38,"div",16),t._uU(39),t.qZA()()(),t.TgZ(40,"div",14)(41,"div",10)(42,"div",11)(43,"h5")(44,"b"),t._uU(45,"Alasan"),t.qZA()()(),t.TgZ(46,"div",18),t._uU(47),t.qZA()()()(),t.TgZ(48,"label",19),t._uU(49,"Tanggal Barang Kembali "),t.TgZ(50,"span",20)(51,"b"),t._uU(52,"*"),t.qZA()()(),t.TgZ(53,"div",21)(54,"div",14)(55,"div",22)(56,"input",23),t.NdJ("ngModelChange",function(r){return a.tglTrima=r}),t.qZA(),t.TgZ(57,"span",24),t.NdJ("click",function(){return a.onFocus("tgl1")}),t._UZ(58,"i",25),t.qZA()(),t.YNc(59,ne,2,0,"p",26),t.qZA()(),t.TgZ(60,"label",19),t._uU(61,"Tanggal Faktur Barang Pengganti"),t.TgZ(62,"span",20)(63,"b"),t._uU(64,"*"),t.qZA()()(),t.TgZ(65,"div",21)(66,"div",14)(67,"div",22)(68,"input",27),t.NdJ("ngModelChange",function(r){return a.tglFaktur=r}),t.qZA(),t.TgZ(69,"span",24),t.NdJ("click",function(){return a.onFocus("tgl2")}),t._UZ(70,"i",25),t.qZA()(),t.YNc(71,ie,2,0,"p",26),t.qZA()(),t.TgZ(72,"label",19),t._uU(73,"Nomor Faktur Barang Pengganti"),t.TgZ(74,"span",20)(75,"b"),t._uU(76,"*"),t.qZA()()(),t.TgZ(77,"div",21)(78,"div",14)(79,"input",28),t.NdJ("ngModelChange",function(r){return a.noFaktur=r}),t.qZA(),t.YNc(80,re,2,0,"p",26),t.qZA()()(),t.TgZ(81,"div",11)(82,"h2")(83,"strong"),t._uU(84,"Obat Pengganti"),t.qZA()()(),t.TgZ(85,"div",18)(86,"table",29)(87,"thead")(88,"tr")(89,"th"),t._uU(90,"No"),t.qZA(),t.TgZ(91,"th"),t._uU(92,"Barang"),t.qZA(),t.TgZ(93,"th"),t._uU(94,"Jumlah"),t.qZA(),t.TgZ(95,"th"),t._uU(96,"Satuan"),t.qZA(),t.TgZ(97,"th"),t._uU(98,"Batch"),t.qZA(),t.TgZ(99,"th"),t._uU(100,"ED"),t.qZA()()(),t.YNc(101,ue,2,1,"tbody",30),t.YNc(102,de,5,0,"tbody",30),t.qZA()(),t.TgZ(103,"div",11)(104,"h2")(105,"strong"),t._uU(106,"Alat Kesehatan Pengganti"),t.qZA()()(),t.TgZ(107,"div",18)(108,"table",29)(109,"thead")(110,"tr")(111,"th"),t._uU(112,"No"),t.qZA(),t.TgZ(113,"th"),t._uU(114,"Barang"),t.qZA(),t.TgZ(115,"th"),t._uU(116,"Jumlah"),t.qZA(),t.TgZ(117,"th"),t._uU(118,"Satuan"),t.qZA(),t.TgZ(119,"th"),t._uU(120,"Batch"),t.qZA(),t.TgZ(121,"th"),t._uU(122,"ED"),t.qZA()()(),t.YNc(123,ge,2,1,"tbody",30),t.YNc(124,he,5,0,"tbody",30),t.qZA(),t._UZ(125,"br"),t.YNc(126,me,3,0,"div",31),t.qZA()()()(),t.TgZ(127,"jw-modal",32)(128,"div",33)(129,"h4",34),t._uU(130,"Informasi Pembelian"),t.qZA()(),t.YNc(131,be,40,6,"div",35),t.TgZ(132,"div",36)(133,"div",37)(134,"button",38),t.NdJ("click",function(){return a.close()}),t._uU(135," Close "),t.qZA()()()(),t.TgZ(136,"ngx-spinner",39)(137,"p",40),t._uU(138," Loading... "),t.qZA()()()),2&e&&(t.xp6(3),t.Q6J("title","Retur")("items",t.DdM(30,Ze))("active_item","Detail Retur Pembelian"),t.xp6(6),t.Q6J("virtualScroll",!0)("searchable",!0)("clearable",!0),t.xp6(1),t.Q6J("ngForOf",a.listRetur),t.xp6(13),t.hij(": ",a.detailRetur.kode_invoice_full,""),t.xp6(6),t.Q6J("ngIf",null!=a.detailRetur.pembelian),t.xp6(5),t.hij(": ",null!=a.detailRetur.created_at_unix?a.convertDate(a.detailRetur.created_at_unix):"",""),t.xp6(5),t.hij(": ",a.detailRetur.nama_lengkap,""),t.xp6(8),t.hij(" ",a.detailRetur.alasan_retur," "),t.xp6(9),t.Q6J("bsConfig",t.DdM(31,D))("outsideClick",!0)("ngModel",a.tglTrima),t.xp6(3),t.Q6J("ngIf",""==a.tglTrima&&a.submitted),t.xp6(9),t.Q6J("bsConfig",t.DdM(32,D))("outsideClick",!0)("ngModel",a.tglFaktur),t.xp6(3),t.Q6J("ngIf",""==a.tglFaktur&&a.submitted),t.xp6(8),t.Q6J("ngModel",a.noFaktur),t.xp6(1),t.Q6J("ngIf",""==a.noFaktur&&a.submitted),t.xp6(21),t.Q6J("ngIf",a.detailRetur.gudang_retur_obat),t.xp6(1),t.Q6J("ngIf",!a.detailRetur.gudang_retur_obat),t.xp6(21),t.Q6J("ngIf",a.detailRetur.gudang_retur_alat_kesehatan),t.xp6(1),t.Q6J("ngIf",!a.detailRetur.gudang_retur_alat_kesehatan),t.xp6(2),t.Q6J("ngIf",null!=a.detailRetur.gudang_retur_obat||null!=a.detailRetur.gudang_retur_alat_kesehatan),t.xp6(5),t.Q6J("ngIf",null!=a.info),t.xp6(5),t.Q6J("name","spinner1")("fullScreen",!0))},directives:[R.L,L.w9,m.sg,L.jq,m.O5,Z.Y5,u.Fj,Z.Np,u.JJ,u.On,X.z,_.Ro],styles:["th[_ngcontent-%COMP%]{font-weight:bolder!important}"]}),n})();const Te=function(){return[]},Ae=function(){return["../view"]};let ve=(()=>{class n{constructor(e,a,i,r,s,g){this.modalService=e,this.ModulFakturPembelianService=a,this.router=i,this.money=r,this.spinner=s,this.store=g,this.datatableElement=h.G,this.dtOptions={},this.getState=this.store.select("retur_gudang")}ngOnInit(){this.spinner.show("spinner1"),this.dtOptions=this.showDataTables(),this.getState.subscribe(e=>{this.reloadTable=e.reloadTable,!0===this.reloadTable&&this.reLoadData()}),setTimeout(()=>{this.spinner.hide("spinner1")},400)}reLoadData(){this.datatableElement.dtInstance.then(e=>{e.ajax.reload()})}showDataTables(){let e=this;return{pageLength:10,serverSide:!0,processing:!0,order:[],ajax:(a,i)=>{this.ModulFakturPembelianService.listDatatables(a).subscribe(r=>{i({draw:r.response.draw,recordsTotal:r.response.recordsTotal,recordsFiltered:r.response.recordsFiltered,data:r.response.data})})},columns:[{orderable:!1,searchable:!1,render:(a,i,r,s)=>s.row+1+s.settings._iDisplayStart},{data:"tgl_faktur"},{data:"nomor_faktur"},{data:"total_harga",render:(a,i,r,s)=>e.money.formatRupiah(parseInt(a))},{data:"pembayaran"},{orderable:!1,searchable:!1,render:(a,i,r,s)=>'<button class="btn btn-sm btn-ubah detail">Retur</button>'}],rowCallback:(a,i,r)=>{const s=this;return $("td .detail",a).on("click",()=>{s.detail(i)}),a}}}detail(e){this.router.navigate(["retur","retur-pbf","add",e.id_pembelian])}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(y.Z),t.Y36(G.V),t.Y36(A.F0),t.Y36(k.r),t.Y36(_.t2),t.Y36(d.yh))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-list-pembelian"]],viewQuery:function(e,a){if(1&e&&t.Gf(h.G,5),2&e){let i;t.iGM(i=t.CRH())&&(a.datatableElement=i.first)}},decls:36,vars:9,consts:[[1,"content"],[1,"content-block"],[1,"block-header"],[3,"title","items","active_item"],[1,"text-center","mb-3"],[1,"col-xs-12","col-sm-12","col-md-12","col-lg-12"],["type","button",1,"btn","btn-kembali","btn-lg","mb-3",3,"routerLink"],[1,"fas","fa-arrow-left"],[1,"card"],[1,"header"],[1,"body"],["width","100%","datatable","",1,"table","table-striped","table-bordered","table-sm",3,"dtOptions"],["bdColor","rgba(0, 0, 0, 0.8)","size","medium","color","#fff","type","ball-clip-rotate-multiple",3,"name","fullScreen"],[2,"color","white"]],template:function(e,a){1&e&&(t.TgZ(0,"section",0)(1,"div",1)(2,"div",2),t._UZ(3,"app-breadcrumb",3),t.qZA(),t.TgZ(4,"h3",4),t._uU(5,"Buat Retur"),t.qZA(),t.TgZ(6,"div",5)(7,"button",6),t._UZ(8,"i",7),t._uU(9," Kembali "),t.qZA(),t.TgZ(10,"div",8)(11,"div",9)(12,"h2")(13,"strong"),t._uU(14,"List Pembelian"),t.qZA()()(),t.TgZ(15,"div",10)(16,"table",11)(17,"thead")(18,"tr")(19,"th"),t._uU(20,"No"),t.qZA(),t.TgZ(21,"th"),t._uU(22,"Tanggal"),t.qZA(),t.TgZ(23,"th"),t._uU(24,"No Faktur"),t.qZA(),t.TgZ(25,"th"),t._uU(26,"Total"),t.qZA(),t.TgZ(27,"th"),t._uU(28,"Metode Pembayaran"),t.qZA(),t.TgZ(29,"th"),t._uU(30,"Aksi"),t.qZA()()(),t.TgZ(31,"tbody"),t._UZ(32,"tr"),t.qZA()()()()()(),t.TgZ(33,"ngx-spinner",12)(34,"p",13),t._uU(35," Loading... "),t.qZA()()()),2&e&&(t.xp6(3),t.Q6J("title","Retur")("items",t.DdM(7,Te))("active_item","Buat Retur"),t.xp6(4),t.Q6J("routerLink",t.DdM(8,Ae)),t.xp6(9),t.Q6J("dtOptions",a.dtOptions),t.xp6(17),t.Q6J("name","spinner1")("fullScreen",!0))},directives:[R.L,A.rH,h.G,_.Ro],styles:[""]}),n})();function qe(n,o){if(1&n&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.qZA(),t.TgZ(13,"td"),t._uU(14),t.qZA()()),2&n){const e=o.$implicit,a=o.index,i=t.oxw();t.xp6(2),t.Oqu(a+1),t.xp6(2),t.Oqu(e.nama_obat),t.xp6(2),t.Oqu(e.satuan_qty),t.xp6(2),t.Oqu(e.satuan),t.xp6(2),t.Oqu(i.Money(e.satuan_harga)),t.xp6(2),t.Oqu(i.Money(e.diskon_rupiah)),t.xp6(2),t.Oqu(i.Money(e.satuan_harga*e.satuan_qty-e.diskon_rupiah))}}function Ue(n,o){if(1&n&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.qZA(),t.TgZ(13,"td"),t._uU(14),t.qZA()()),2&n){const e=o.$implicit,a=o.index,i=t.oxw();t.xp6(2),t.Oqu(a+1),t.xp6(2),t.Oqu(e.nama_alat_kesehatan),t.xp6(2),t.Oqu(e.satuan_qty),t.xp6(2),t.Oqu(e.satuan),t.xp6(2),t.Oqu(i.Money(e.satuan_harga)),t.xp6(2),t.Oqu(i.Money(e.diskon_rupiah)),t.xp6(2),t.Oqu(i.Money(e.satuan_harga*e.satuan_qty-e.diskon_rupiah))}}const xe=function(){return[]},ye=function(){return["../../"]};let ke=(()=>{class n{constructor(e,a,i,r,s,g,O){this.modalService=e,this.ModulReturPbfService=a,this.router=i,this.MoneyService=r,this.activatedRoute=s,this.spinner=g,this.store=O,this.datatableElement=h.G,this.dtOptions={},this.dataBarang=new T,this.total_obat=0,this.total_alat=0,this.detailRetur=[],this.tglTrima="",this.id_retur=null,this.getState=this.store.select("retur_gudang")}ngOnInit(){this.activatedRoute.params.subscribe(e=>{e&&(this.spinner.show("spinner1"),this.ModulReturPbfService.show(e.id).subscribe(a=>{this.spinner.hide("spinner1"),this.setDetail(a.response,e.id)}))})}setDetail(e,a){setTimeout(()=>{this.id_retur=a,this.detailRetur=e,e.gudang_retur_obat.map(i=>{this.total_obat+=parseInt(i.satuan_qty)*parseInt(i.satuan_harga)-parseInt(i.diskon_rupiah)}),e.gudang_retur_alat_kesehatan.map(i=>{this.total_alat+=parseInt(i.satuan_qty)*parseInt(i.satuan_harga)-parseInt(i.diskon_rupiah)})},300)}ngOnDestroy(){document.body.classList.remove("jw-modal-open")}btnOpenModal(){this.modalService.open("modalFormContent")}Money(e){return this.MoneyService.formatRupiah(e)}selesai(){this.spinner.show("spinner1");let e={tgl_diterima:this.tglTrima,obat:[],alat_kesehatan:[]};this.detailRetur.gudang_retur_obat.map(a=>{e.obat.push({id_gudang_retur_obat:a.id_gudang_retur_obat,tanggal_ed:a.tanggal_ed,no_batch:a.no_batch,keterangan:a.keterangan})}),this.detailRetur.gudang_retur_alat_kesehatan.map(a=>{e.alat_kesehatan.push({id_gudang_retur_alat_kesehatan:a.id_gudang_retur_alat_kesehatan,tanggal_ed:a.tanggal_ed,no_batch:a.no_batch,keterangan:a.keterangan})}),this.ModulReturPbfService.update(this.id_retur,e).subscribe(a=>{this.spinner.hide("spinner1"),"0000"!=a.metaData.response_code?q().fire("Error",a.metaData.message,"error"):q().fire("Success","Data berhasil disimpan","success")},a=>{if(this.spinner.hide("spinner1"),"0000"!=a.metaData.response_code){let i="";a.response.map(r=>{i+=r.field+" "+r.message}),q().fire("Error",i,"error")}})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(y.Z),t.Y36(M),t.Y36(A.F0),t.Y36(k.r),t.Y36(A.gz),t.Y36(_.t2),t.Y36(d.yh))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-detail"]],viewQuery:function(e,a){if(1&e&&t.Gf(h.G,5),2&e){let i;t.iGM(i=t.CRH())&&(a.datatableElement=i.first)}},decls:89,vars:15,consts:[[1,"content"],[1,"content-block"],[1,"block-header"],[3,"title","items","active_item"],[1,"text-center","mb-3"],[1,"col-xs-12","col-sm-12","col-md-12","col-lg-12"],["type","button",1,"btn","btn-kembali","btn-lg","mb-3",3,"routerLink"],[1,"fas","fa-arrow-left"],[1,"card"],[1,"body"],[1,"row","mb-2"],[1,"col-2"],[1,"col-3"],[1,"header"],["width","100%",1,"table","table-striped","table-bordered","table-sm"],[4,"ngFor","ngForOf"],["colspan","6"],["bdColor","rgba(0, 0, 0, 0.8)","size","medium","color","#fff","type","ball-clip-rotate-multiple",3,"name","fullScreen"],[2,"color","white"]],template:function(e,a){1&e&&(t.TgZ(0,"section",0)(1,"div",1)(2,"div",2),t._UZ(3,"app-breadcrumb",3),t.qZA(),t.TgZ(4,"h3",4),t._uU(5,"Detail Retur Pembelian"),t.qZA(),t.TgZ(6,"div",5)(7,"button",6),t._UZ(8,"i",7),t._uU(9," Kembali "),t.qZA(),t.TgZ(10,"div",8)(11,"div",9)(12,"div",10)(13,"div",11),t._uU(14,"No Retur"),t.qZA(),t.TgZ(15,"div",12),t._uU(16),t.qZA()(),t.TgZ(17,"div",10)(18,"div",11),t._uU(19,"Retur Tujuan"),t.qZA(),t.TgZ(20,"div",12),t._uU(21),t.qZA()(),t.TgZ(22,"div",10)(23,"div",11),t._uU(24,"Alasan Retur"),t.qZA(),t.TgZ(25,"div",12),t._uU(26),t.qZA()()(),t.TgZ(27,"div",13)(28,"h2")(29,"strong"),t._uU(30,"Detail Retur Pembelian Obat"),t.qZA()()(),t.TgZ(31,"div",9)(32,"table",14)(33,"thead")(34,"tr")(35,"th"),t._uU(36,"No"),t.qZA(),t.TgZ(37,"th"),t._uU(38,"Nama Obat"),t.qZA(),t.TgZ(39,"th"),t._uU(40,"Jumlah"),t.qZA(),t.TgZ(41,"th"),t._uU(42,"Satuan"),t.qZA(),t.TgZ(43,"th"),t._uU(44,"Harga"),t.qZA(),t.TgZ(45,"th"),t._uU(46,"Dsikon"),t.qZA(),t.TgZ(47,"th"),t._uU(48,"Sub total"),t.qZA()()(),t.TgZ(49,"tbody"),t.YNc(50,qe,15,7,"tr",15),t.TgZ(51,"tr")(52,"td",16),t._uU(53,"Total"),t.qZA(),t.TgZ(54,"td"),t._uU(55),t.qZA()()()()(),t.TgZ(56,"div",13)(57,"h2")(58,"strong"),t._uU(59,"Detail Retur Pembelian Alat Kesehatan"),t.qZA()()(),t.TgZ(60,"div",9)(61,"table",14)(62,"thead")(63,"tr")(64,"th"),t._uU(65,"No"),t.qZA(),t.TgZ(66,"th"),t._uU(67,"Nama Alat Kesehatan"),t.qZA(),t.TgZ(68,"th"),t._uU(69,"Jumlah"),t.qZA(),t.TgZ(70,"th"),t._uU(71,"Satuan"),t.qZA(),t.TgZ(72,"th"),t._uU(73,"Harga"),t.qZA(),t.TgZ(74,"th"),t._uU(75,"Dsikon"),t.qZA(),t.TgZ(76,"th"),t._uU(77,"Sub total"),t.qZA()()(),t.TgZ(78,"tbody"),t.YNc(79,Ue,15,7,"tr",15),t.TgZ(80,"tr")(81,"td",16),t._uU(82,"Total"),t.qZA(),t.TgZ(83,"td"),t._uU(84),t.qZA()()()(),t._UZ(85,"br"),t.qZA()()()(),t.TgZ(86,"ngx-spinner",17)(87,"p",18),t._uU(88," Loading... "),t.qZA()()()),2&e&&(t.xp6(3),t.Q6J("title","Retur")("items",t.DdM(13,xe))("active_item","Detail Retur Pembelian"),t.xp6(4),t.Q6J("routerLink",t.DdM(14,ye)),t.xp6(9),t.hij(": ",a.detailRetur.kode_invoice_full,""),t.xp6(5),t.hij(": ",a.detailRetur.retur_tujuan,""),t.xp6(5),t.hij(": ",a.detailRetur.alasan_retur,""),t.xp6(24),t.Q6J("ngForOf",a.detailRetur.gudang_retur_obat),t.xp6(5),t.Oqu(a.Money(a.total_obat)),t.xp6(24),t.Q6J("ngForOf",a.detailRetur.gudang_retur_alat_kesehatan),t.xp6(5),t.Oqu(a.Money(a.total_alat)),t.xp6(2),t.Q6J("name","spinner1")("fullScreen",!0))},directives:[R.L,A.rH,m.sg,_.Ro],styles:["th[_ngcontent-%COMP%]{font-weight:bolder!important}"]}),n})();const Re=function(){return[]},Ce=function(){return["../finish"]},Me=[{path:"",redirectTo:"view",pathMatch:"full"},{path:"view",component:qt},{path:"finish",component:fe},{path:"penggantian",component:(()=>{class n{constructor(e,a,i,r,s,g){this.modalService=e,this.ModulReturPenggantianService=a,this.router=i,this.money=r,this.spinner=s,this.store=g,this.datatableElement=h.G,this.dtOptions={},this.getState=this.store.select("retur_gudang")}ngOnInit(){this.spinner.show("spinner1"),this.dtOptions=this.showDataTables(),this.getState.subscribe(e=>{this.reloadTable=e.reloadTable,!0===this.reloadTable&&this.reLoadData()}),setTimeout(()=>{this.spinner.hide("spinner1")},400)}reLoadData(){this.datatableElement.dtInstance.then(e=>{e.ajax.reload()})}showDataTables(){return{pageLength:10,serverSide:!0,processing:!0,order:[],ajax:(a,i)=>{this.ModulReturPenggantianService.listDatatables(a).subscribe(r=>{i({draw:r.response.draw,recordsTotal:r.response.recordsTotal,recordsFiltered:r.response.recordsFiltered,data:r.response.data})})},columns:[{orderable:!1,searchable:!1,render:(a,i,r,s)=>s.row+1+s.settings._iDisplayStart},{data:"kode_invoice_full"},{data:"tgl_faktur_unix",render:(a,i,r,s)=>x(a).format("DD-MM-YYYY")},{data:"tgl_diterima_unix",render:(a,i,r,s)=>x(a).format("DD-MM-YYYY")},{data:"nomor_faktur"}]}}detail(e){this.router.navigate(["retur","retur-pbf","add",e.id_pembelian])}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(y.Z),t.Y36(tt),t.Y36(A.F0),t.Y36(k.r),t.Y36(_.t2),t.Y36(d.yh))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-list-pengganti"]],viewQuery:function(e,a){if(1&e&&t.Gf(h.G,5),2&e){let i;t.iGM(i=t.CRH())&&(a.datatableElement=i.first)}},decls:35,vars:9,consts:[[1,"content"],[1,"content-block"],[1,"block-header"],[3,"title","items","active_item"],[1,"text-center","mb-3"],["type","button",1,"btn","btn-info","btn-lg","mb-3",3,"routerLink"],[1,"fas","fa-plus"],[1,"col-xs-12","col-sm-12","col-md-12","col-lg-12"],[1,"card"],[1,"header"],[1,"body"],["width","100%","datatable","",1,"table","table-striped","table-bordered","table-sm",3,"dtOptions"],["bdColor","rgba(0, 0, 0, 0.8)","size","medium","color","#fff","type","ball-clip-rotate-multiple",3,"name","fullScreen"],[2,"color","white"]],template:function(e,a){1&e&&(t.TgZ(0,"section",0)(1,"div",1)(2,"div",2),t._UZ(3,"app-breadcrumb",3),t.qZA(),t.TgZ(4,"h3",4),t._uU(5,"Penggantian Barang Retur"),t.qZA(),t._UZ(6,"br"),t.TgZ(7,"button",5),t._UZ(8,"i",6),t._uU(9," Tambah"),t.qZA(),t.TgZ(10,"div",7)(11,"div",8)(12,"div",9)(13,"h2")(14,"strong"),t._uU(15,"List Pembelian"),t.qZA()()(),t.TgZ(16,"div",10)(17,"table",11)(18,"thead")(19,"tr")(20,"th"),t._uU(21,"No"),t.qZA(),t.TgZ(22,"th"),t._uU(23,"No Retur"),t.qZA(),t.TgZ(24,"th"),t._uU(25,"Tanggal Retur"),t.qZA(),t.TgZ(26,"th"),t._uU(27,"Tanggal Barang Kembali"),t.qZA(),t.TgZ(28,"th"),t._uU(29,"No Faktur Barang Kembali"),t.qZA()()(),t.TgZ(30,"tbody"),t._UZ(31,"tr"),t.qZA()()()()()(),t.TgZ(32,"ngx-spinner",12)(33,"p",13),t._uU(34," Loading... "),t.qZA()()()),2&e&&(t.xp6(3),t.Q6J("title","Retur PBF")("items",t.DdM(7,Re))("active_item","Penggantian Barang Retur"),t.xp6(4),t.Q6J("routerLink",t.DdM(8,Ce)),t.xp6(10),t.Q6J("dtOptions",a.dtOptions),t.xp6(15),t.Q6J("name","spinner1")("fullScreen",!0))},directives:[R.L,A.rH,h.G,_.Ro],styles:[""]}),n})()},{path:"add/:id",component:te},{path:"list-pembelian",component:ve},{path:"detail/:id",component:ke}];let Oe=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[A.Bz.forChild(Me)],A.Bz]}),n})();var De=l(16270);let we=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[m.ez,p.K,_.ef,Oe,h.T,u.u5,De.z,b.Gs,u.UX,Z.kn.forRoot(),v.Ud,L.A0,d.Aw.forFeature("retur_gudang",bt),c.sQ.forFeature([ft])]]}),n})()},94554:(U,f,l)=>{l.d(f,{r:()=>c});var m=l(8202),d=l(5e3);let c=(()=>{class _{formatRupiah(u){if(""!=u&&null!=u&&null!=u&&0!=u){var b=(u=u.toString().replace(".00")).replace(/[^,\d]/g,"").toString().split(","),Z=b[0].length%3,v=b[0].substr(0,Z),T=b[0].substr(Z).match(/\d{3}/gi);return T&&(v+=(Z?".":"")+T.join(".")),(v=null!=b[1]?v+","+b[1]:v)?"Rp "+v+",00":""}return"Rp 0,00"}currency(){return{align:"left",allowNegative:!0,allowZero:!0,decimal:",",precision:2,prefix:"Rp ",suffix:"",thousands:".",nullable:!0,min:null,max:null,inputMode:m.fF.NATURAL}}}return _.\u0275fac=function(u){return new(u||_)},_.\u0275prov=d.Yz7({token:_,factory:_.\u0275fac,providedIn:"root"}),_})()},88544:(U,f,l)=>{l.d(f,{p:()=>d});var m=l(5e3);let d=(()=>{class c{isNumber(p){return p.match(/^[0-9]+$/)?p:p.replace(/[^0-9]/g,"")}isAlpha(p){return p.match(/^[A-Za-z]+$/)?p:p.replace(/[^A-Za-z]/g,"")}Number(p){const u=p.which?p.which:p.keyCode;return!(46!=u||p.target.value.indexOf(".")>-1)||!(u>31&&(u<48||u>57))}}return c.\u0275fac=function(p){return new(p||c)},c.\u0275prov=m.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c})()},51693:(U,f,l)=>{l.d(f,{z:()=>_});var m=l(5e3),d=l(44151);const c=["*"];let _=(()=>{class p{constructor(h,b){this.modalService=h,this.el=b,this.element=b.nativeElement}ngOnInit(){this.id?(document.body.appendChild(this.element),this.element.addEventListener("click",h=>{}),this.modalService.add(this)):console.error("modal must have an id")}ngOnDestroy(){this.modalService.remove(this.id),this.element.remove()}open(){this.element.style.display="block",document.body.classList.add("jw-modal-open")}close(){document.body.classList.remove("jw-modal-open"),this.element.classList.add("close"),setTimeout(()=>{this.element.classList.remove("close"),this.element.style.display="none"},900)}}return p.\u0275fac=function(h){return new(h||p)(m.Y36(d.Z),m.Y36(m.SBq))},p.\u0275cmp=m.Xpm({type:p,selectors:[["jw-modal"]],inputs:{id:"id"},ngContentSelectors:c,decls:4,vars:0,consts:[[1,"jw-modal"],[1,"jw-modal-body"],[1,"jw-modal-background"]],template:function(h,b){1&h&&(m.F$t(),m.TgZ(0,"div",0)(1,"div",1),m.Hsn(2),m.qZA()(),m._UZ(3,"div",2))},styles:["jw-modal{display:none}jw-modal .open{display:none}jw-modal .jw-modal{position:fixed;inset:0;background-color:#eeeeee8e;z-index:1000;overflow:auto}jw-modal .jw-modal .jw-modal-body{animation:fadein .5s;padding:10px 20px;background:#fff;margin:30px auto;width:650px;border-radius:2%;position:relative;z-index:1050}@media (max-width: 767px){jw-modal .jw-modal .jw-modal-body{margin:30px auto;width:calc(100% - 25px)}}jw-modal .jw-modal .jw-modal-body-lg{padding:20px;background:#fff;margin:40px auto;width:900px auto}jw-modal .jw-modal-background{position:fixed;inset:0;background-color:#eeeeee8e;opacity:.75;z-index:900}jw-modal.close .jw-modal .jw-modal-body{animation:unfoldOut .5s .3s cubic-bezier(.165,.84,.44,1) forwards}body.jw-modal-open{overflow:hidden}body.jw-modal-close{overflow:hidden;animation:unfoldOut .5s .3s cubic-bezier(.165,.84,.44,1) forwards}@keyframes fadein{0%{opacity:0}to{opacity:1}}@keyframes unfoldIn{0%{transform:scaleY(.005) scaleX(0)}50%{transform:scaleY(.005) scaleX(1)}to{transform:scaleY(1) scaleX(1)}}@keyframes unfoldOut{0%{transform:scaleY(1) scaleX(1)}50%{transform:scaleY(.005) scaleX(1)}to{transform:scaleY(.005) scaleX(0)}}\n"],encapsulation:2}),p})()},16270:(U,f,l)=>{l.d(f,{z:()=>c});var m=l(69808),d=l(5e3);let c=(()=>{class _{}return _.\u0275fac=function(u){return new(u||_)},_.\u0275mod=d.oAB({type:_}),_.\u0275inj=d.cJS({imports:[[m.ez]]}),_})()},44151:(U,f,l)=>{l.d(f,{Z:()=>d});var m=l(5e3);let d=(()=>{class c{constructor(){this.modals=[]}add(p){this.modals.push(p)}remove(p){this.modals=this.modals.filter(u=>u.id!==p)}open(p){this.modals.find(h=>h.id===p).open()}close(p){this.modals.find(h=>h.id===p).close()}}return c.\u0275fac=function(p){return new(p||c)},c.\u0275prov=m.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c})()},15861:(U,f,l)=>{function m(c,_,p,u,h,b,Z){try{var v=c[b](Z),T=v.value}catch(w){return void p(w)}v.done?_(T):Promise.resolve(T).then(u,h)}function d(c){return function(){var _=this,p=arguments;return new Promise(function(u,h){var b=c.apply(_,p);function Z(T){m(b,u,h,Z,v,"next",T)}function v(T){m(b,u,h,Z,v,"throw",T)}Z(void 0)})}}l.d(f,{Z:()=>d})}}]);