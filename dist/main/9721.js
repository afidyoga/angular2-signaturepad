"use strict";(self.webpackChunkangularlight=self.webpackChunkangularlight||[]).push([[9721],{29721:(vt,Q,d)=>{d.r(Q),d.d(Q,{DokterModule:()=>ht});var b=d(69808),v=d(23007),y=d(65415),p=d(15439),te=d(2454),k=d.n(te),o=d(65620);const j=(0,o.PH)("[JADWAL_DOKTER] add initial",(0,o.Ky)()),C=(0,o.PH)("[JADWAL_DOKTER] add success",(0,o.Ky)()),x=(0,o.PH)("[JADWAL_DOKTER] add failure ",(0,o.Ky)()),E=(0,o.PH)("[JADWAL_DOKTER] update initial",(0,o.Ky)()),I=(0,o.PH)("[JADWAL_DOKTER] update success",(0,o.Ky)()),L=(0,o.PH)("[JADWAL_DOKTER] update failure",(0,o.Ky)()),P=(0,o.PH)("[JADWAL_DOKTER] get byid initial",(0,o.Ky)()),G=(0,o.PH)("[JADWAL_DOKTER] get byid success",(0,o.Ky)()),q=(0,o.PH)("[JADWAL_DOKTER] get byid failure",(0,o.Ky)()),N=(0,o.PH)("[JADWAL_DOKTER] delete initial",(0,o.Ky)()),Y=(0,o.PH)("[JADWAL_DOKTER] delete success",(0,o.Ky)()),M=(0,o.PH)("[JADWAL_DOKTER] delete failure",(0,o.Ky)()),fe=(0,o.PH)("[JADWAL_DOKTER] clear data "),K=(0,o.PH)("[JADWAL_DOKTER] table data"),O=new Date,f=O.getDate(),g=O.getMonth(),_=O.getFullYear(),he=[{id:"event1",title:"All Day Event",start:new Date(_,g,1,0,0),end:new Date(_,g,1,23,59),className:"fc-event-success",groupId:"work",details:"Her extensive perceived may any sincerity extremity. Indeed add rather may pretty see."},{id:"event2",title:"Break",start:new Date(_,g,f+28,16,0),end:new Date(_,g,f+29,20,0),allDay:!1,className:"fc-event-primary",groupId:"important",details:"Her extensive perceived may any sincerity extremity. Indeed add rather may pretty see. "},{id:"event3",title:"Shopping",start:new Date(_,g,f+4,12,0),end:new Date(_,g,f+4,20,0),allDay:!1,className:"fc-event-warning",groupId:"personal",details:"Her extensive perceived may any sincerity extremity. Indeed add rather may pretty see. "},{id:"event4",title:"Meeting",start:new Date(_,g,f+14,10,30),end:new Date(_,g,f+16,20,0),allDay:!1,className:"fc-event-success",groupId:"work",details:"Her extensive perceived may any sincerity extremity. Indeed add rather may pretty see."},{id:"event5",title:"Lunch",start:new Date(_,g,f,11,0),end:new Date(_,g,f,14,0),allDay:!1,className:"fc-event-primary",groupId:"important",details:"Her extensive perceived may any sincerity extremity. Indeed add rather may pretty see."},{id:"event6",title:"Meeting",start:new Date(_,g,f+2,12,30),end:new Date(_,g,f+2,14,30),allDay:!1,className:"fc-event-success",groupId:"work",details:"Her extensive perceived may any sincerity extremity. Indeed add rather may pretty see."},{id:"event7",title:"Birthday Party",start:new Date(_,g,f+17,19,0),end:new Date(_,g,f+17,19,30),allDay:!1,className:"fc-event-warning",groupId:"personal",details:"Her extensive perceived may any sincerity extremity. Indeed add rather may pretty see."},{id:"event8",title:"Go to Delhi",start:new Date(_,g,f+-5,10,0),end:new Date(_,g,f+-4,10,30),allDay:!1,className:"fc-event-danger",groupId:"travel",details:"Her extensive perceived may any sincerity extremity. Indeed add rather may pretty see."},{id:"event9",title:"Get To Gather",start:new Date(_,g,f+6,10,0),end:new Date(_,g,f+7,10,30),allDay:!1,className:"fc-event-info",groupId:"friends",details:"Her extensive perceived may any sincerity extremity. Indeed add rather may pretty see."},{id:"event10",title:"Collage Party",start:new Date(_,g,f+20,10,0),end:new Date(_,g,f+20,10,30),allDay:!1,className:"fc-event-info",groupId:"friends",details:"Her extensive perceived may any sincerity extremity. Indeed add rather may pretty see."}];var e=d(5e3),be=d(44151),u=d(93075),ve=d(89955),ke=d(76334),De=d(40520);let R=(()=>{class n{constructor(a,t){this.generalService=a,this.http=t,this.urlBaseName="jadwal-dokter",this.URL_MODULE=this.generalService.getUrlModule(ve.s.url_module.master)}getDataTables(a){return this.http.post(this.URL_MODULE+"/"+this.urlBaseName+"/get-datatables",a)}getCalender(a,t){return this.http.get(this.URL_MODULE+"/"+this.urlBaseName+"/get-kalender?tahun="+a+"&bulan="+t)}insert(a){return this.http.post(this.URL_MODULE+"/"+this.urlBaseName,a)}addGenerate(a){return this.http.post(this.URL_MODULE+"/"+this.urlBaseName+"-generate",a)}update(a,t){return this.http.put(this.URL_MODULE+"/"+this.urlBaseName+"/"+a,t)}show(a){return this.http.get(this.URL_MODULE+"/"+this.urlBaseName+"/get-byid/"+a)}delete(a,t){return this.http.delete(this.URL_MODULE+"/"+this.urlBaseName+"/"+a,{headers:{"Content-Type":"application/json"},body:t})}}return n.\u0275fac=function(a){return new(a||n)(e.LFG(ke.m),e.LFG(De.eN))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var D=d(50072),B=d(33399),F=d(4566),we=d(51693);const Te=["calendar_ref"],Ze=function(){return["../add"]};function Ae(n,r){1&n&&(e.TgZ(0,"button",32),e._UZ(1,"i",33),e._uU(2," Tambah Baru"),e.qZA()),2&n&&e.Q6J("routerLink",e.DdM(1,Ze))}function ye(n,r){if(1&n&&(e.TgZ(0,"div",34)(1,"h4")(2,"b"),e._uU(3),e.qZA()(),e.TgZ(4,"div",35)(5,"div",36),e._uU(6," Event "),e.qZA(),e.TgZ(7,"div",37),e._uU(8),e.qZA()(),e.TgZ(9,"div",35)(10,"div",36),e._uU(11," Start Date "),e.qZA(),e.TgZ(12,"div",37),e._uU(13),e.qZA()(),e.TgZ(14,"div",35)(15,"div",36),e._uU(16," End Date "),e.qZA(),e.TgZ(17,"div",37),e._uU(18),e.qZA()()()),2&n){const a=e.oxw();e.xp6(3),e.Oqu("libur"==a.detailEvent.groupId?"Libur":"Buka Praktik"),e.xp6(5),e.hij(" : ",a.detailEvent.title," "),e.xp6(5),e.hij(" : ",a.setDate(a.detailEvent.start)," "),e.xp6(5),e.hij(" : ",a.setDate(a.detailEvent.end)," ")}}function Se(n,r){if(1&n){const a=e.EpF();e.TgZ(0,"button",38),e.NdJ("click",function(){e.CHM(a);const i=e.oxw();return i.edit(i.detailEvent.id)}),e._uU(1,"Edit"),e.qZA()}}const Je=function(){return[]};let Ue=(()=>{class n{constructor(a,t,i,s,l,c){this.modalService=a,this.fb=t,this.jadwalDokterService=i,this.router=s,this.spinner=l,this.store=c,this.datatableElement=y.G,this.dtOptions={},this.titleModal="",this.detailEvent=null,this.btnDetail=!1,this.btnDelete=!1,this.btnEdit=!1,this.btnSetting=!1,this.btnAdd=!1,this.view=!1,this.calendarOptions={headerToolbar:{left:"prev,next today",center:"title",right:null},customButtons:{createButton:{text:"Tambah Baru",click:()=>this.CreateNew()},next:{click:this.nextMonth.bind(this)},prev:{click:this.backMonth.bind(this)}},initialView:"dayGridMonth",weekends:!0,editable:!0,selectable:!0,selectMirror:!0,dayMaxEvents:!0,select:this.handleDateSelect.bind(this),eventClick:this.handleEventClick.bind(this)},this.getState=this.store.select("pengaturanJadwal_jadwalDokter")}ngOnInit(){this.spinner.show("spinner1");let a=JSON.parse(localStorage.getItem("currentUser"));a=a.menu_right,this.btnAdd=this.btnDelete=this.btnEdit=-1!=a.findIndex(t=>"MGPJJD2"==t.kode),this.btnDetail=this.view=-1!=a.findIndex(t=>"MGPJJD1"==t.kode),this.view||k().fire("Warning","Anda tidak mempunyai akses halaman ini","warning").then(()=>{window.location.href="/"}),this.dtOptions=this.showDataTables(this.btnEdit),this.calendarEvents=he,this.getState.subscribe(t=>{this.reloadTable=t.reloadTable,this.reloadTable&&this.reLoadData()}),this.loadCalender(),setTimeout(()=>{this.spinner.hide("spinner1")},600)}loadCalender(){const a=new Date;let t=parseInt(p(new Date(a)).format("M")),i=p(new Date(a)).format("YYYY");this.jadwalDokterService.getCalender(i,t).subscribe(s=>{if("0000"==s.metaData.response_code){let l=[];s.response.map((c,h)=>{l.push({id:c.id_jadwal_dokter,start:c.start,end:c.end,title:c.title,className:"libur"==c.groupId?"bg-danger":"bg-info"})}),this.calendarOptions.events=l}})}CreateNew(){this.calendarApi=this.calendar_ref.getApi(),this.calendarOptions.events=this.calendarEvents,this.calendarApi.render()}buttonToday(a){console.log(a)}nextMonth(){this.calendarApi=this.calendar_ref.getApi();const a=this.calendarApi.view.calendar.currentData.currentDate;let t=parseInt(p(new Date(a)).format("M"))+1,i=p(new Date(a)).format("YYYY");this.jadwalDokterService.getCalender(i,t).subscribe(s=>{if("0000"==s.metaData.response_code){let l=[];s.response.map((c,h)=>{l.push({id:c.id_jadwal_dokter,start:c.start,end:c.end,title:c.title,className:"libur"==c.groupId?"bg-danger":"bg-info"})}),this.calendarOptions.events=l}}),this.calendarApi.next()}backMonth(){this.calendarApi=this.calendar_ref.getApi();const a=this.calendarApi.view.calendar.currentData.currentDate;let t=parseInt(p(new Date(a)).format("M"))-1,i=p(new Date(a)).format("YYYY");this.jadwalDokterService.getCalender(i,t).subscribe(s=>{if("0000"==s.metaData.response_code){let l=[];s.response.map((c,h)=>{l.push({id:c.id_jadwal_dokter,start:c.start,end:c.end,title:c.title,className:"libur"==c.groupId?"bg-danger":"bg-info"})}),this.calendarOptions.events=l}}),this.calendarApi.prev()}handleDateSelect(a){this.addNewEvent(a)}addNewEvent(a){console.log("selectInfo",a.row)}setDate(a){return p(new Date(a)).format("DD-MM-YYYY")}handleEventClick(a){this.eventClick(a.event)}eventClick(a){this.detailEvent=a,this.OpenModal()}edit(a){this.router.navigate(["pengaturan-jadwal","pengaturan-jadwal-dokter","edit",a])}reLoadData(){this.datatableElement.dtInstance.then(a=>{a.ajax.reload()})}editData(a){this.router.navigate(["pengaturan-jadwal","pengaturan-jadwal-dokter","edit",a.id_jadwal_dokter])}nonAktif(a){k().fire({title:"Delete recurring event",html:'<div class=" mb-2 text-left"><input type="radio" checked value="this" name="eventOption" class="radio"> This event</div><div class=" mb-2 text-left"><input type="radio" value="this_after" name="eventOption" class="radio"> This and follow event</div><div class="w100 mb-2 text-left"><input type="radio" value="all" name="eventOption" class="radio"> All </div>',focusConfirm:!1,preConfirm:()=>$("[name='eventOption']").val(),showCancelButton:!0,allowOutsideClick:!1,confirmButtonText:"OK",cancelButtonText:"Cancel"}).then(t=>{if(t.isConfirmed){let i=t.value;k().fire({title:"Apakah anda yakin akan menghapus data ini ?",icon:"warning",showCancelButton:!0,allowOutsideClick:!1,confirmButtonText:"Ya, hapus saja!",cancelButtonText:"Tidak, Batalkan"}).then(s=>{s.isConfirmed&&(this.spinner.show("spinner1"),this.store.dispatch(N({id:a.id_jadwal_dokter,payload:{type_delete:i}})),setTimeout(()=>{this.loadCalender(),this.spinner.hide("spinner1")},400))})}})}showDataTables(a){return{pageLength:10,serverSide:!0,processing:!0,order:[],ajax:(t,i)=>{this.jadwalDokterService.getDataTables(t).subscribe(s=>{i({draw:s.response.draw,recordsTotal:s.response.recordsTotal,recordsFiltered:s.response.recordsFiltered,data:s.response.data})})},columns:[{orderable:!1,searchable:!1,render:(t,i,s,l)=>l.row+1+l.settings._iDisplayStart},{data:"nama_dokter"},{data:"kategori_jadwal"},{data:"nama_role"},{data:"tgl_kegiatan",render:(t,i,s,l)=>p(new Date(t)).format("DD-MM-YYYY")},{orderable:!1,searchable:!1,render:(t,i,s,l)=>a?'<div style="white-space: nowrap;">\n                      <button class="btn btn-sm btn-ubah update-data">Edit</button>\n                      <button class="btn nonaktif-data btn-hapus btn-sm">Hapus</button>\n                    <div>':""}],rowCallback:(t,i,s)=>{const l=this;return $("td .update-data",t).on("click",()=>{l.editData(i)}),$("td .nonaktif-data",t).on("click",()=>{l.nonAktif(i)}),t}}}OpenModal(){this.modalService.open("modalFormContent")}modalClose(){this.modalService.close("modalFormContent")}}return n.\u0275fac=function(a){return new(a||n)(e.Y36(be.Z),e.Y36(u.qu),e.Y36(R),e.Y36(v.F0),e.Y36(D.t2),e.Y36(o.yh))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-view"]],viewQuery:function(a,t){if(1&a&&(e.Gf(Te,5),e.Gf(y.G,5)),2&a){let i;e.iGM(i=e.CRH())&&(t.calendar_ref=i.first),e.iGM(i=e.CRH())&&(t.datatableElement=i.first)}},decls:76,vars:11,consts:[[1,"content"],[1,"content-block"],[1,"block-header"],[3,"title","items","active_item"],[1,"text-center","mb-4"],[1,"row","clearfix"],[1,"col-xs-12","col-sm-12","col-md-12","col-lg-12"],["type","button","class","btn btn-tambah btn-lg mb-3",3,"routerLink",4,"ngIf"],[1,"card"],[1,"header"],[1,"body"],[1,"row"],[1,"col-md-2","col-sm-12","p-l-30"],[1,"m-b-25"],[1,"filter-container","mb-3"],["type","checkbox","name","","id","","checked",""],[1,"label-color","bg-info"],[1,"label-color","bg-danger"],[1,"col-md-10","col-sm-12"],[3,"options"],["calendar_ref",""],["width","100%","datatable","",1,"table","table-striped","table-bordered","table-sm","table-sm",3,"dtOptions"],[1,"footer"],["id","modalFormContent"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["class","modal-body",4,"ngIf"],[1,"modal-footer"],["type","button",1,"btn","btn-danger",3,"click"],["class","btn btn-kembali","type","button",3,"click",4,"ngIf"],["bdColor","rgba(0, 0, 0, 0.8)","size","medium","color","#fff","type","ball-clip-rotate-multiple",3,"name","fullScreen"],[2,"color","white"],["type","button",1,"btn","btn-tambah","btn-lg","mb-3",3,"routerLink"],[1,"fas","fa-plus"],[1,"modal-body"],[1,"row","mb-2"],[1,"col-3"],[1,"col-9"],["type","button",1,"btn","btn-kembali",3,"click"]],template:function(a,t){1&a&&(e.TgZ(0,"section",0)(1,"div",1)(2,"div",2),e._UZ(3,"app-breadcrumb",3),e.qZA(),e.TgZ(4,"h3",4),e._uU(5,"Pengaturan Jadwal Dokter"),e.qZA(),e.TgZ(6,"div",5)(7,"div",6),e.YNc(8,Ae,3,2,"button",7),e.TgZ(9,"div",8),e._UZ(10,"div",9),e.TgZ(11,"div",10)(12,"div",11)(13,"div",12),e._UZ(14,"div",13),e.TgZ(15,"p")(16,"b"),e._uU(17,"Kategori"),e.qZA()(),e.TgZ(18,"div",14)(19,"ul")(20,"li"),e._UZ(21,"input",15),e._uU(22," Buka Praktik "),e.qZA(),e.TgZ(23,"li"),e._UZ(24,"input",15),e._uU(25," Libur "),e.qZA()()(),e.TgZ(26,"p")(27,"b"),e._uU(28,"Label"),e.qZA()(),e.TgZ(29,"div",14)(30,"ul")(31,"li"),e._UZ(32,"label",16),e._uU(33," Buka Praktik "),e.qZA(),e.TgZ(34,"li"),e._UZ(35,"label",17),e._uU(36," Libur "),e.qZA()()()(),e.TgZ(37,"div",18),e._UZ(38,"full-calendar",19,20),e.qZA()()()()()(),e.TgZ(40,"div",5)(41,"div",6)(42,"div",8)(43,"div",9)(44,"h4"),e._uU(45,"Daftar Jadwal"),e.qZA()(),e.TgZ(46,"div",10)(47,"table",21)(48,"thead")(49,"tr")(50,"th"),e._uU(51,"No"),e.qZA(),e.TgZ(52,"th"),e._uU(53,"Nama Akun Dokter"),e.qZA(),e.TgZ(54,"th"),e._uU(55,"Kategori"),e.qZA(),e.TgZ(56,"th"),e._uU(57,"Nama Ruang"),e.qZA(),e.TgZ(58,"th"),e._uU(59,"Tgl. Masuk"),e.qZA(),e.TgZ(60,"th"),e._uU(61,"Aksi"),e.qZA()()(),e._UZ(62,"tbody"),e.qZA()(),e._UZ(63,"div",22),e.qZA()()(),e.TgZ(64,"jw-modal",23)(65,"div",24)(66,"h4",25),e._uU(67,"Detail Event"),e.qZA()(),e.YNc(68,ye,19,4,"div",26),e.TgZ(69,"div",27)(70,"button",28),e.NdJ("click",function(){return t.modalClose()}),e._uU(71,"Close"),e.qZA(),e.YNc(72,Se,2,0,"button",29),e.qZA()()(),e.TgZ(73,"ngx-spinner",30)(74,"p",31),e._uU(75," Loading... "),e.qZA()()()),2&a&&(e.xp6(3),e.Q6J("title","Pengaturan Jadwal")("items",e.DdM(10,Je))("active_item","Pengaturan Jadwal Dokter"),e.xp6(5),e.Q6J("ngIf",t.btnAdd),e.xp6(30),e.Q6J("options",t.calendarOptions),e.xp6(9),e.Q6J("dtOptions",t.dtOptions),e.xp6(21),e.Q6J("ngIf",null!=t.detailEvent),e.xp6(4),e.Q6J("ngIf",null!=t.detailEvent),e.xp6(1),e.Q6J("name","spinner1")("fullScreen",!0))},directives:[B.L,b.O5,v.rH,F.woE,y.G,we.z,D.Ro],styles:[""]}),n})();class w{}var W=d(44194),V=d(72620),z=d(78568),je=d(88544),T=d(24376),Z=d(67236),H=d(53464);function Ce(n,r){if(1&n&&(e.TgZ(0,"ng-option",59),e._uU(1),e.qZA()),2&n){const a=r.$implicit;e.Q6J("value",a.id_akun),e.xp6(1),e.Oqu(a.nama_lengkap)}}function xe(n,r){1&n&&(e.TgZ(0,"div",60),e._uU(1," Akun Dokter tidak boleh kosong "),e.qZA())}function Ee(n,r){1&n&&(e.TgZ(0,"div",60),e._uU(1," Tanggal masuk tidak boleh kosong "),e.qZA())}function Ie(n,r){1&n&&(e.TgZ(0,"div",60),e._uU(1," Tanggal masuk tidak boleh kosong "),e.qZA())}function Le(n,r){1&n&&(e.TgZ(0,"div",13)(1,"label",14),e._uU(2,"Repeat On"),e.qZA(),e.TgZ(3,"div",61)(4,"div",62)(5,"div",63)(6,"label",64),e._UZ(7,"input",65),e._uU(8," Minggu "),e.qZA(),e.TgZ(9,"label",64),e._UZ(10,"input",66),e._uU(11," Senin "),e.qZA(),e.TgZ(12,"label",64),e._UZ(13,"input",67),e._uU(14," Selasa "),e.qZA(),e.TgZ(15,"label",64),e._UZ(16,"input",68),e._uU(17," Rabu "),e.qZA(),e.TgZ(18,"label",64),e._UZ(19,"input",69),e._uU(20," Kamis "),e.qZA(),e.TgZ(21,"label",64),e._UZ(22,"input",70),e._uU(23," Jumat "),e.qZA(),e.TgZ(24,"label",64),e._UZ(25,"input",71),e._uU(26," Sabtu "),e.qZA()()()()())}function qe(n,r){if(1&n&&(e.TgZ(0,"ng-option",59),e._uU(1),e.qZA()),2&n){const a=r.$implicit;e.Q6J("value",a.id_jadwal_sesi),e.xp6(1),e.Oqu(a.nama_sesi)}}function Ne(n,r){if(1&n&&(e.TgZ(0,"ng-option",59),e._uU(1),e.qZA()),2&n){const a=r.$implicit;e.Q6J("value",a.id_ruang),e.xp6(1),e.Oqu(a.nama_ruang)}}function Ye(n,r){if(1&n){const a=e.EpF();e.TgZ(0,"tr",72),e.ynx(1,73),e.TgZ(2,"td",74),e._uU(3),e.qZA(),e.TgZ(4,"td",74),e._uU(5),e.qZA(),e.TgZ(6,"td",74)(7,"ng-select",75),e.NdJ("search",function(i){return e.CHM(a),e.oxw().prosesSelectDaftarRuang(i,"search")})("scrollToEnd",function(i){return e.CHM(a),e.oxw().prosesSelectDaftarRuang(i,"last_page")})("open",function(i){return e.CHM(a),e.oxw().prosesSelectDaftarRuang(i,"open")}),e.YNc(8,Ne,2,2,"ng-option",17),e.qZA()(),e.TgZ(9,"td",74),e._UZ(10,"timepicker",76),e.qZA(),e.TgZ(11,"td",74),e._UZ(12,"timepicker",77),e.qZA(),e.TgZ(13,"td",78)(14,"button",79),e.NdJ("click",function(){const s=e.CHM(a).index;return e.oxw().deleteDetailSesi(s)}),e._uU(15,"Hapus"),e.qZA()(),e.BQk(),e.qZA()}if(2&n){const a=r.$implicit,t=r.index,i=e.oxw();e.xp6(1),e.Q6J("formGroupName",t),e.xp6(2),e.Oqu(t+1),e.xp6(2),e.Oqu(a.value.nama_sesi),e.xp6(2),e.Q6J("virtualScroll",!0)("searchable",!0)("loading",i.loadingListDaftarRuang)("clearable",!0),e.xp6(1),e.Q6J("ngForOf",i.listDaftarRuang),e.xp6(2),e.Q6J("minuteStep",1)("showMeridian",!1),e.xp6(2),e.Q6J("minuteStep",1)("showMeridian",!1)}}function Me(n,r){if(1&n&&(e.TgZ(0,"ul")(1,"li"),e._uU(2),e.qZA()()),2&n){const a=r.$implicit;e.xp6(2),e.AsE("",a.field," : ",a.message,"")}}function Oe(n,r){if(1&n&&(e.TgZ(0,"div",80),e._uU(1),e.YNc(2,Me,3,2,"ul",81),e.qZA()),2&n){const a=e.oxw();e.xp6(1),e.hij(" ",a.errorMessage.metaData.message," "),e.xp6(1),e.Q6J("ngForOf",a.errorMessage.response)}}const Re=function(){return["Pengaturan Jadwal Dokter"]},Be=function(){return["../view"]},X=function(){return{adaptivePosition:!0,dateInputFormat:"DD-MM-YYYY",returnFocusToInput:!0}},Fe=function(n,r){return{"fa-spin fa-spinner pulse":n,"fa-check":r}};let He=(()=>{class n{constructor(a,t,i,s,l,c,h){this.akunService=a,this.daftarRuangService=t,this.fb=i,this.jadwalSesiService=s,this.store=l,this.validate=c,this.spinner=h,this.listDokter=[],this.listDaftarRuang=[],this.listJadwalSesi=[],this.tglSekarang=new Date,this.minDate=new Date,this.loadingListDokter=!1,this.loadingListDaftarRuang=!1,this.loadingListJadwalSesi=!1,this.paramDokter={last_data:0,get_data:10,search:""},this.paramDaftarRuang={last_data:0,get_data:10,search:""},this.paramJadwalSesi={last_data:0,get_data:10,search:""},this.submitted=!1,this.jadwalDokter=new w,this.getState=this.store.select("pengaturanJadwal_jadwalDokter"),this.minDate.setDate(this.minDate.getDate()+1)}ngOnInit(){let a=p().add(1,"days").format("DD-MM-YYYY");this.formInput=this.fb.group({id_akun_dokter:[null,[u.kI.required]],tgl_masuk:[a,[u.kI.required]],id_jadwal_sesi:[null,[]],repeat:["none",[]],repeat_number:[1,[]],repeat_date:["day",[]],repeat_on:this.fb.group({senin:[null],selasa:[null],rabu:[null],kamis:[null],jumat:[null],sabtu:[null],minggu:[null]}),kategori:[null,[u.kI.required]],end:["on"],end_on_date:[a],end_occurrences:[1],detail:this.fb.array([])}),this.getState.subscribe(t=>{this.errorMessage=t.errorMessage,this.submitButton=t.submitButton,this.isLoadingButton=t.isLoadingButton})}isNumber(a){return this.validate.Number(a)}onFocus(a){document.getElementById(a).click()}SubmitForm(){if(this.submitted=!1,setTimeout(()=>{this.submitted=!0},200),this.formInput.invalid)return;this.spinner.show("spinner1");let a=new w;a.id_akun_dokter=this.formInput.value.id_akun_dokter,a.tgl_awal=p(this.formInput.value.tgl_masuk,"DD-MM-YYYY").format("YYYY-MM-DD"),a.tgl_end_type=this.formInput.value.end,a.repeat=this.formInput.value.repeat;let t=[];null!=this.formInput.value.repeat_on.minggu&&t.push(0),null!=this.formInput.value.repeat_on.senin&&t.push(1),null!=this.formInput.value.repeat_on.selasa&&t.push(2),null!=this.formInput.value.repeat_on.rabu&&t.push(3),null!=this.formInput.value.repeat_on.kamis&&t.push(4),null!=this.formInput.value.repeat_on.jumat&&t.push(5),null!=this.formInput.value.repeat_on.sabtu&&t.push(6),a.repeat_on_week=t,a.repeat_value=this.formInput.value.repeat_number,a.repeat_type=this.formInput.value.repeat_date,a.kategori_jadwal=this.formInput.value.kategori,a.tgl_end_on=p(this.formInput.value.end_on_date,"DD-MM-YYYY").format("YYYY-MM-DD");let i=Array();this.formInput.value.detail.forEach(s=>{i.push({id_jadwal_sesi:s.id_jadwal_sesi,jam_mulai:p(s.jam_mulai).format("HH:mm:ss"),jam_selesai:p(s.jam_selesai).format("HH:mm:ss"),id_ruang:s.id_ruang?s.id_ruang.toString():""})}),a.detail=i,this.store.dispatch(j({payload:a})),setTimeout(()=>{this.spinner.hide("spinner1")},400)}simpanDetailSesi(){let a=this.formInput.value.id_jadwal_sesi;if(a){let t=this.listJadwalSesi.findIndex(i=>i.id_jadwal_sesi==a);if(t>=0){let i=this.listJadwalSesi[t];this.formInput.controls.detail.push(this.fb.group({id_jadwal_sesi:[i.id_jadwal_sesi,[]],nama_sesi:[i.nama_sesi,[]],id_ruang:[null,[]],jam_mulai:[new Date("Tue Apr 26 2022 00:00:00"),[]],jam_selesai:[new Date("Tue Apr 26 2022 00:00:00"),[]]}))}}}deleteDetailSesi(a){this.formInput.get("detail").removeAt(a)}prosesSelectDokter(a,t){this.loadingListDokter=!0;let i=this.paramDokter;"search"==t?(this.listDaftarRuang=[],i.search=a.term,i.last_data=0):i.search="",i.last_data="last_page"==t?i.last_data+i.get_data:0,this.akunService.prosesSelectAkun(i,t,"dokter").subscribe(s=>{this.loadingListDokter=!1,s&&(0==this.listDokter.length?this.listDokter=s.response:s.response.map(l=>{this.listDokter.findIndex(h=>h.id_akun_dokter==l.id_akun_dokter)<0&&this.listDokter.push(l)}))},s=>{this.loadingListDokter=!1})}prosesSelectDaftarRuang(a,t){this.loadingListDaftarRuang=!0;let i=this.paramDaftarRuang;"search"==t?(this.listDaftarRuang=[],i.search=a.term,i.last_data=0):i.search="",i.last_data="last_page"==t?i.last_data+i.get_data:0,this.daftarRuangService.prosesSelectDaftarRuang(i,t).subscribe(s=>{this.loadingListDaftarRuang=!1,s&&(0==this.listDaftarRuang.length?this.listDaftarRuang=s.response:s.response.map(l=>{this.listDaftarRuang.findIndex(h=>h.id_ruang==l.id_ruang)<0&&this.listDaftarRuang.push(l)}))},s=>{this.loadingListDaftarRuang=!1})}parseTime(a){var t=new Date,i=a.match(/(\d+)(?::(\d\d))?\s*(p?)/);return t.setHours(parseInt(i[1])+(i[3]?12:0)),t.setMinutes(parseInt(i[2])||0),t}prosesSelectJadwalSesi(a,t){this.loadingListJadwalSesi=!0;let i=this.paramJadwalSesi;"search"==t?(this.listJadwalSesi=[],i.search=a.term,i.last_data=0):i.search="",i.last_data="last_page"==t?i.last_data+i.get_data:0,this.jadwalSesiService.prosesSelectJadwalSesi(i,t).subscribe(s=>{this.loadingListJadwalSesi=!1,this.listJadwalSesi=[],s&&(0==this.listJadwalSesi.length?s.response.forEach(l=>{this.listJadwalSesi.push({id_jadwal_sesi:l.id_jadwal_sesi,nama_sesi:l.nama_sesi+" ("+p(this.parseTime(l.jam_buka)).format("HH:mm")+" - "+p(this.parseTime(l.jam_tutup)).format("HH:mm")+")"})}):s.response.map(l=>{this.listJadwalSesi.findIndex(h=>h.id_jadwal_sesi==l.id_jadwal_sesi)<0&&this.listJadwalSesi.push({id_jadwal_sesi:l.id_jadwal_sesi,nama_sesi:l.nama_sesi+" ("+p(this.parseTime(l.jam_buka)).format("HH:mm")+" - "+p(this.parseTime(l.jam_tutup)).format("HH:mm")+")"})}))},s=>{this.loadingListJadwalSesi=!1})}}return n.\u0275fac=function(a){return new(a||n)(e.Y36(W.f),e.Y36(V.d),e.Y36(u.qu),e.Y36(z.l),e.Y36(o.yh),e.Y36(je.p),e.Y36(D.t2))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-add"]],decls:125,vars:45,consts:[[1,"content"],[1,"content-block"],[1,"block-header"],[3,"title","items","active_item"],[1,"text-center","mb-4"],[1,"row","clearfix"],[1,"col-xs-12","col-sm-12","col-md-12","col-lg-12"],["type","button",1,"btn","btn-kembali","btn-lg","mb-3",3,"routerLink"],[1,"fas","fa-arrow-left"],[1,"card"],[3,"formGroup","submit"],[1,"header"],[1,"body"],[1,"row","mb-3"],[1,"col-sm-2","col-form-label","fw-bold"],[1,"col-sm-9"],["bindLabel","nama_lengkap","bindValue","id_akun","placeholder","Pilih akun dokter","formControlName","id_akun_dokter",2,"flex","1 1 auto",3,"virtualScroll","searchable","loading","clearable","search","scrollToEnd","open"],[3,"value",4,"ngFor","ngForOf"],["class","form-text text-danger",4,"ngIf"],["placeholder","Pilih kategori","formControlName","kategori",1,"form-control"],["value","buka_praktik"],["value","libur"],[1,"input-group"],["type","text","bsDatepicker","","formControlName","tgl_masuk","placeholder","Tanggal Masuk","id","tgl2",1,"form-control",3,"bsConfig","outsideClick","minDate"],[1,"input-group-text",2,"cursor","pointer","background","white","border-left","0px",3,"click"],[1,"fa","fa-calendar"],[1,"row"],[1,"col-sm-2"],[1,"form-check","pt-2"],["type","radio","name","repeat","formControlName","repeat","value","none","id","flexRadioDefault2",1,"form-check-input"],["for","flexRadioDefault2",1,"form-check-label"],[1,"form-check"],["type","radio","name","repeat","formControlName","repeat","value","every",1,"form-check-input"],[1,"form-check-label"],["type","text","formControlName","repeat_number",1,"form-control",3,"keypress"],["formControlName","repeat_date",1,"form-select"],["value","day"],["value","week"],["value","month"],["class","row mb-3",4,"ngIf"],["type","radio","formControlName","end","value","on",1,"form-check-input"],["type","text","bsDatepicker","","formControlName","end_on_date","placeholder","Pilih tanggal","id","tgl1",1,"form-control",3,"readonly","bsConfig","outsideClick","minDate"],[1,"col-sm-3"],["type","radio","formControlName","end","value","never",1,"form-check-input"],[1,"col-sm-4"],["bindLabel","nama_sesi","bindValue","id_jadwal_sesi","placeholder","Pilih jadwal sesi","formControlName","id_jadwal_sesi",2,"flex","1 1 auto",3,"virtualScroll","searchable","loading","clearable","search","scrollToEnd","open"],["type","button",1,"btn","btn-simpan",3,"click"],[1,"fa","fa-plus"],[1,"m-3","row"],[1,"table","tabl-sm","table-striped","table-bordered","table-sm"],[1,"pb-3"],["formArrayName","detail",4,"ngFor","ngForOf"],["class","alert alert-danger","role","alert",4,"ngIf"],[1,"footer"],[1,"text-center","mb-3"],["type","submit","color","primary",1,"btn","btn-simpan","btn-lg",3,"disabled"],[1,"fa",3,"ngClass"],["bdColor","rgba(0, 0, 0, 0.8)","size","medium","color","#fff","type","ball-clip-rotate-multiple",3,"name","fullScreen"],[2,"color","white"],[3,"value"],[1,"form-text","text-danger"],[1,"col-sm-8"],[1,"control-group","pt-2"],["formGroupName","repeat_on",1,"controls","span2"],[1,"checkbox","pe-3"],["type","checkbox","formControlName","minggu","value","0"],["type","checkbox","formControlName","senin","value","1"],["type","checkbox","formControlName","selasa","value","2"],["type","checkbox","formControlName","rabu","value","3"],["type","checkbox","formControlName","kamis","value","4"],["type","checkbox","formControlName","jumat","value","5"],["type","checkbox","formControlName","sabtu","value","6"],["formArrayName","detail"],[3,"formGroupName"],[1,"p-3",2,"vertical-align","top"],["bindLabel","nama_ruang","bindValue","id_ruang","placeholder","Pilih daftar ruang","formControlName","id_ruang",2,"flex","1 1 auto",3,"virtualScroll","searchable","loading","clearable","search","scrollToEnd","open"],["formControlName","jam_mulai",3,"minuteStep","showMeridian"],["formControlName","jam_selesai",3,"minuteStep","showMeridian"],[1,"p-3"],["type","button",1,"btn","btn-hapus",3,"click"],["role","alert",1,"alert","alert-danger"],[4,"ngFor","ngForOf"]],template:function(a,t){1&a&&(e.TgZ(0,"section",0)(1,"div",1)(2,"div",2),e._UZ(3,"app-breadcrumb",3),e.qZA(),e.TgZ(4,"h3",4),e._uU(5,"Tambah Pengaturan Jadwal Dokter"),e.qZA(),e.TgZ(6,"div",5)(7,"div",6)(8,"button",7),e._UZ(9,"i",8),e._uU(10," Kembali"),e.qZA(),e.TgZ(11,"div",9)(12,"form",10),e.NdJ("submit",function(){return t.SubmitForm()}),e._UZ(13,"div",11),e.TgZ(14,"div",12)(15,"div",13)(16,"label",14),e._uU(17,"Dokter *"),e.qZA(),e.TgZ(18,"div",15)(19,"ng-select",16),e.NdJ("search",function(s){return t.prosesSelectDokter(s,"search")})("scrollToEnd",function(s){return t.prosesSelectDokter(s,"last_page")})("open",function(s){return t.prosesSelectDokter(s,"open")}),e.YNc(20,Ce,2,2,"ng-option",17),e.qZA(),e.YNc(21,xe,2,0,"div",18),e.qZA()(),e.TgZ(22,"div",13)(23,"label",14),e._uU(24,"Kategori *"),e.qZA(),e.TgZ(25,"div",15)(26,"select",19)(27,"option",20),e._uU(28,"Masuk"),e.qZA(),e.TgZ(29,"option",21),e._uU(30,"Libur"),e.qZA()(),e.YNc(31,Ee,2,0,"div",18),e.qZA()(),e.TgZ(32,"div",13)(33,"label",14),e._uU(34,"Tgl Awal *"),e.qZA(),e.TgZ(35,"div",15)(36,"div",22),e._UZ(37,"input",23),e.TgZ(38,"span",24),e.NdJ("click",function(){return t.onFocus("tgl2")}),e._UZ(39,"i",25),e.qZA()(),e.YNc(40,Ie,2,0,"div",18),e.qZA()(),e.TgZ(41,"div",26)(42,"label",14),e._uU(43,"Repeat"),e.qZA(),e.TgZ(44,"div",27)(45,"div",28),e._UZ(46,"input",29),e.TgZ(47,"label",30),e._uU(48," None "),e.qZA()()()(),e.TgZ(49,"div",13),e._UZ(50,"div",27),e.TgZ(51,"div",27)(52,"div",31),e._UZ(53,"input",32),e.TgZ(54,"label",33),e._uU(55," Every "),e.qZA()()(),e.TgZ(56,"div",27)(57,"input",34),e.NdJ("keypress",function(s){return t.isNumber(s)}),e.qZA()(),e.TgZ(58,"div",27)(59,"select",35)(60,"option",36),e._uU(61,"Day"),e.qZA(),e.TgZ(62,"option",37),e._uU(63,"Week"),e.qZA(),e.TgZ(64,"option",38),e._uU(65,"Month"),e.qZA()()()(),e.YNc(66,Le,27,0,"div",39),e.TgZ(67,"div",26)(68,"div",14),e._uU(69,"End"),e.qZA(),e.TgZ(70,"div",27)(71,"div",31),e._UZ(72,"input",40),e.TgZ(73,"label",33),e._uU(74," On "),e.qZA()()(),e.TgZ(75,"div",27)(76,"div",22),e._UZ(77,"input",41),e.TgZ(78,"span",24),e.NdJ("click",function(){return t.onFocus("tgl1")}),e._UZ(79,"i",25),e.qZA()()()(),e.TgZ(80,"div",13),e._UZ(81,"label",27),e.TgZ(82,"div",42)(83,"div",31),e._UZ(84,"input",43),e.TgZ(85,"label",33),e._uU(86," Never (Max. 1 years) "),e.qZA()()()(),e.TgZ(87,"div",13)(88,"label",14),e._uU(89,"Jadwal Sesi"),e.qZA(),e.TgZ(90,"div",44)(91,"ng-select",45),e.NdJ("search",function(s){return t.prosesSelectJadwalSesi(s,"search")})("scrollToEnd",function(s){return t.prosesSelectJadwalSesi(s,"last_page")})("open",function(s){return t.prosesSelectJadwalSesi(s,"open")}),e.YNc(92,qe,2,2,"ng-option",17),e.qZA()(),e.TgZ(93,"div",27)(94,"button",46),e.NdJ("click",function(){return t.simpanDetailSesi()}),e._UZ(95,"i",47),e._uU(96," Tambah"),e.qZA()()(),e.TgZ(97,"div",48)(98,"table",49)(99,"thead",50)(100,"tr")(101,"th"),e._uU(102,"No"),e.qZA(),e.TgZ(103,"th"),e._uU(104,"Nama Jadwal Sesi"),e.qZA(),e.TgZ(105,"th"),e._uU(106,"Ruangan"),e.qZA(),e.TgZ(107,"th"),e._uU(108,"Jam Mulai"),e.qZA(),e.TgZ(109,"th"),e._uU(110,"Jam Selesai"),e.qZA(),e.TgZ(111,"th"),e._uU(112,"Aksi"),e.qZA()()(),e.TgZ(113,"tbody"),e.YNc(114,Ye,16,12,"tr",51),e.qZA()()(),e.TgZ(115,"div",13),e.YNc(116,Oe,3,2,"div",52),e.qZA()(),e.TgZ(117,"div",53)(118,"div",54)(119,"button",55),e._UZ(120,"i",56),e._uU(121," Simpan "),e.qZA()()()()()()(),e.TgZ(122,"ngx-spinner",57)(123,"p",58),e._uU(124," Loading... "),e.qZA()()()()),2&a&&(e.xp6(3),e.Q6J("title","Pengaturan Jadwal")("items",e.DdM(38,Re))("active_item","Tambah Baru"),e.xp6(5),e.Q6J("routerLink",e.DdM(39,Be)),e.xp6(4),e.Q6J("formGroup",t.formInput),e.xp6(7),e.ekj("border-danger",t.formInput.controls.id_akun_dokter.hasError("required")&&t.submitted),e.Q6J("virtualScroll",!0)("searchable",!0)("loading",t.loadingListDokter)("clearable",!0),e.xp6(1),e.Q6J("ngForOf",t.listDokter),e.xp6(1),e.Q6J("ngIf",t.formInput.controls.id_akun_dokter.hasError("required")&&t.submitted),e.xp6(5),e.ekj("border-danger",t.formInput.controls.kategori.hasError("required")&&t.submitted),e.xp6(5),e.Q6J("ngIf",t.formInput.controls.kategori.hasError("required")&&t.submitted),e.xp6(6),e.ekj("border-danger",t.formInput.controls.tgl_masuk.hasError("required")&&t.submitted),e.Q6J("bsConfig",e.DdM(40,X))("outsideClick",!0)("minDate",t.minDate),e.xp6(3),e.Q6J("ngIf",t.formInput.controls.tgl_masuk.hasError("required")&&t.submitted),e.xp6(26),e.Q6J("ngIf","week"==t.formInput.value.repeat_date&&"every"==t.formInput.value.repeat),e.xp6(11),e.Q6J("readonly","on"!=t.formInput.value.end)("bsConfig",e.DdM(41,X))("outsideClick",!0)("minDate",t.minDate),e.xp6(14),e.Q6J("virtualScroll",!0)("searchable",!0)("loading",t.loadingListJadwalSesi)("clearable",!0),e.xp6(1),e.Q6J("ngForOf",t.listJadwalSesi),e.xp6(22),e.Q6J("ngForOf",t.formInput.get("detail").controls),e.xp6(2),e.Q6J("ngIf",null!=t.errorMessage),e.xp6(3),e.Q6J("disabled",t.isLoadingButton),e.xp6(1),e.Q6J("ngClass",e.WLB(42,Fe,t.isLoadingButton,!t.isLoadingButton)),e.xp6(2),e.Q6J("name","spinner1")("fullScreen",!0))},directives:[B.L,v.rH,u._Y,u.JL,u.sg,T.w9,u.JJ,u.u,b.sg,T.jq,b.O5,u.EJ,u.YN,u.Kr,Z.Y5,u.Fj,Z.Np,u._,u.x0,u.Wl,u.CE,H.EV,b.mk,D.Ro],styles:[".col-sm-3[_ngcontent-%COMP%], .col-sm-2[_ngcontent-%COMP%]{margin-bottom:5px!important}"]}),n})();var Qe=d(15861);function Pe(n,r){if(1&n&&(e.TgZ(0,"ng-option",43),e._uU(1),e.qZA()),2&n){const a=r.$implicit;e.Q6J("value",a.id_akun),e.xp6(1),e.Oqu(a.nama_lengkap)}}function Ge(n,r){1&n&&(e.TgZ(0,"div",44),e._uU(1," Akun Dokter tidak boleh kosong "),e.qZA())}function Ke(n,r){1&n&&(e.TgZ(0,"div",44),e._uU(1," Kategori masuk tidak boleh kosong "),e.qZA())}function $e(n,r){1&n&&(e.TgZ(0,"div",44),e._uU(1," Tanggal masuk tidak boleh kosong "),e.qZA())}function We(n,r){if(1&n&&(e.TgZ(0,"ng-option",43),e._uU(1),e.qZA()),2&n){const a=r.$implicit;e.Q6J("value",a.id_jadwal_sesi),e.xp6(1),e.Oqu(a.nama_sesi)}}function Ve(n,r){if(1&n&&(e.TgZ(0,"ng-option",43),e._uU(1),e.qZA()),2&n){const a=r.$implicit;e.Q6J("value",a.id_ruang),e.xp6(1),e.Oqu(a.nama_ruang)}}function ze(n,r){if(1&n){const a=e.EpF();e.TgZ(0,"tr",45),e.ynx(1,46),e.TgZ(2,"td",47),e._uU(3),e.qZA(),e.TgZ(4,"td",47),e._uU(5),e.qZA(),e.TgZ(6,"td",47)(7,"ng-select",48),e.NdJ("search",function(i){return e.CHM(a),e.oxw().prosesSelectDaftarRuang(i,"search")})("scrollToEnd",function(i){return e.CHM(a),e.oxw().prosesSelectDaftarRuang(i,"last_page")}),e.YNc(8,Ve,2,2,"ng-option",17),e.qZA()(),e.TgZ(9,"td",47),e._UZ(10,"timepicker",49),e.qZA(),e.TgZ(11,"td",47),e._UZ(12,"timepicker",50),e.qZA(),e.TgZ(13,"td",51)(14,"button",52),e.NdJ("click",function(){const s=e.CHM(a).index;return e.oxw().deleteDetailSesi(s)}),e._uU(15,"Hapus"),e.qZA()(),e.BQk(),e.qZA()}if(2&n){const a=r.$implicit,t=r.index,i=e.oxw();e.xp6(1),e.Q6J("formGroupName",t),e.xp6(2),e.Oqu(t+1),e.xp6(2),e.Oqu(a.value.nama_sesi),e.xp6(2),e.Q6J("virtualScroll",!0)("searchable",!0)("loading",i.loadingListDaftarRuang)("clearable",!0),e.xp6(1),e.Q6J("ngForOf",i.listDaftarRuang),e.xp6(2),e.Q6J("minuteStep",1)("showMeridian",!1),e.xp6(2),e.Q6J("minuteStep",1)("showMeridian",!1)}}function Xe(n,r){if(1&n&&(e.TgZ(0,"ul")(1,"li"),e._uU(2),e.qZA()()),2&n){const a=r.$implicit;e.xp6(2),e.AsE("",a.field," : ",a.message,"")}}function et(n,r){if(1&n&&(e.TgZ(0,"div",53),e._uU(1),e.YNc(2,Xe,3,2,"ul",54),e.qZA()),2&n){const a=e.oxw();e.xp6(1),e.hij(" ",a.errorMessage.metaData.message," "),e.xp6(1),e.Q6J("ngForOf",a.errorMessage.response)}}const tt=function(){return["Pengaturan Jadwal Dokter"]},at=function(){return["../../view"]},it=function(){return{adaptivePosition:!0,dateInputFormat:"DD-MM-YYYY",returnFocusToInput:!0}},nt=function(n,r){return{"fa-spin fa-spinner pulse":n,"fa-check":r}},st=[{path:"",redirectTo:"view",pathMatch:"full"},{path:"view",component:Ue},{path:"add",component:He},{path:"edit/:id",component:(()=>{class n{constructor(a,t,i,s,l,c,h,bt){this.akunService=a,this.daftarRuangService=t,this.fb=i,this.jadwalSesiService=s,this.store=l,this.activatedRoute=c,this.JadwalDokterService=h,this.spinner=bt,this.listDokter=[],this.listDaftarRuang=[],this.listJadwalSesi=[],this.tglSekarang=new Date,this.minDate=new Date,this.loadingListDokter=!1,this.loadingListDaftarRuang=!1,this.loadingListJadwalSesi=!1,this.paramDokter={last_data:0,get_data:10,search:""},this.paramDaftarRuang={last_data:0,get_data:10,search:""},this.paramJadwalSesi={last_data:0,get_data:10,search:""},this.submitted=!1,this.id_jadwal_dokter=null,this.getState=this.store.select("pengaturanJadwal_jadwalDokter")}ngOnInit(){let a=p().add(1,"days").format("DD-MM-YYYY");this.formInput=this.fb.group({id_akun_dokter:[null,[u.kI.required]],tgl_masuk:[a,[u.kI.required]],kategori:[null,[u.kI.required]],id_jadwal_sesi:[null,[]],detail:this.fb.array([])}),this.spinner.show("spinner1"),this.prosesSelectDokter("","open"),this.prosesSelectDaftarRuang("","open"),setTimeout(()=>{this.activatedRoute.params.subscribe(t=>{t&&(this.id_jadwal_dokter=t.id,this.JadwalDokterService.show(t.id).subscribe(i=>{"0000"==i.metaData.response_code&&(this.jadwalDokter=i.response,this.formInput.patchValue({id_akun_dokter:this.jadwalDokter.id_akun_dokter,kategori:this.jadwalDokter.kategori_jadwal,tgl_masuk:p(this.jadwalDokter.tgl_kegiatan,"YYYY-MM-DD").format("DD-MM-YYYY")}),null!=this.jadwalDokter.detail&&this.jadwalDokter.detail.length>0&&this.jadwalDokter.detail.forEach(s=>{this.formInput.controls.detail.push(this.fb.group({id_jadwal_dokter_detail:[s.id_jadwal_dokter_detail,[]],id_jadwal_sesi:[s.id_jadwal_sesi,[]],nama_sesi:[s.nama_sesi,[]],id_ruang:[s.id_ruang,[]],jam_mulai:[this.parseTime(s.jam_mulai),[]],jam_selesai:[this.parseTime(s.jam_selesai),[]]}))})),this.spinner.hide("spinner1")}))})},400)}SubmitForm(){var a=this;return(0,Qe.Z)(function*(){if(a.submitted=!1,setTimeout(()=>{a.submitted=!0},200),a.formInput.invalid)return!1;a.spinner.show("spinner1");let t=Array();a.formInput.value.detail.forEach(s=>{t.push({id_jadwal_dokter_detail:s.id_jadwal_dokter_detail,id_jadwal_sesi:s.id_jadwal_sesi,jam_mulai:p(s.jam_mulai).format("HH:mm:ss"),jam_selesai:p(s.jam_selesai).format("HH:mm:ss"),id_ruang:s.id_ruang.toString()})});let i={tgl_kegiatan:p(a.formInput.value.tgl_masuk,"DD-MM-YYYY").format("YYYY-MM-DD"),detail:t,id_jadwal_dokter:a.id_jadwal_dokter};a.store.dispatch(E({payload:i})),setTimeout(()=>{a.spinner.hide("spinner1")},400)})()}onFocus(a){document.getElementById(a).click()}simpanDetailSesi(){let a=this.formInput.value.id_jadwal_sesi;if(a){let t=this.listJadwalSesi.findIndex(i=>i.id_jadwal_sesi==a);if(t>=0){let i=this.listJadwalSesi[t];this.formInput.controls.detail.push(this.fb.group({id_jadwal_sesi:[i.id_jadwal_sesi,[]],nama_sesi:[i.nama_sesi,[]],id_ruang:[i.id_ruang,[]],jam_mulai:[new Date(""),[]],jam_selesai:[new Date(""),[]]}))}}}deleteDetailSesi(a){this.formInput.controls.detail.controls.splice(a,1)}prosesSelectDokter(a,t){this.loadingListDokter=!0;let i=this.paramDokter;"search"==t?(this.listDaftarRuang=[],i.search=a.term,i.last_data=0):i.search="",i.last_data="last_page"==t?i.last_data+i.get_data:0,this.akunService.prosesSelectAkun(i,t,"dokter").subscribe(s=>{this.loadingListDokter=!1,s&&(0==this.listDokter.length?this.listDokter=s.response:s.response.map(l=>{this.listDokter.findIndex(h=>h.id_akun_dokter==l.id_akun_dokter)<0&&this.listDokter.push(l)}))},s=>{this.loadingListDokter=!1})}prosesSelectDaftarRuang(a,t){this.loadingListDaftarRuang=!0;let i=this.paramDaftarRuang;"search"==t?(this.listDaftarRuang=[],i.search=a.term,i.last_data=0):i.search="",i.last_data="last_page"==t?i.last_data+i.get_data:0,this.daftarRuangService.prosesSelectDaftarRuang(i,t).subscribe(s=>{this.loadingListDaftarRuang=!1,s&&(0==this.listDaftarRuang.length?this.listDaftarRuang=s.response:s.response.map(l=>{this.listDaftarRuang.findIndex(h=>h.id_ruang==l.id_ruang)<0&&this.listDaftarRuang.push(l)}))},s=>{this.loadingListDaftarRuang=!1})}parseTime(a){var t=new Date,i=a.match(/(\d+)(?::(\d\d))?\s*(p?)/);return t.setHours(parseInt(i[1])+(i[3]?12:0)),t.setMinutes(parseInt(i[2])||0),t}prosesSelectJadwalSesi(a,t){this.loadingListJadwalSesi=!0;let i=this.paramJadwalSesi;"search"==t?(this.listJadwalSesi=[],i.search=a.term,i.last_data=0):i.search="",i.last_data="last_page"==t?i.last_data+i.get_data:0,this.jadwalSesiService.prosesSelectJadwalSesi(i,t).subscribe(s=>{this.loadingListJadwalSesi=!1,this.listJadwalSesi=[],s&&(0==this.listJadwalSesi.length?s.response.forEach(l=>{this.listJadwalSesi.push({id_jadwal_sesi:l.id_jadwal_sesi,nama_sesi:l.nama_sesi+" ("+p(this.parseTime(l.jam_buka)).format("HH:mm")+" - "+p(this.parseTime(l.jam_tutup)).format("HH:mm")+")"})}):s.response.map(l=>{this.listJadwalSesi.findIndex(h=>h.id_jadwal_sesi==l.id_jadwal_sesi)<0&&this.listJadwalSesi.push({id_jadwal_sesi:l.id_jadwal_sesi,nama_sesi:l.nama_sesi+" ("+p(this.parseTime(l.jam_buka)).format("HH:mm")+" - "+p(this.parseTime(l.jam_tutup)).format("HH:mm")+")"})}))},s=>{this.loadingListJadwalSesi=!1})}}return n.\u0275fac=function(a){return new(a||n)(e.Y36(W.f),e.Y36(V.d),e.Y36(u.qu),e.Y36(z.l),e.Y36(o.yh),e.Y36(v.gz),e.Y36(R),e.Y36(D.t2))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-edit"]],decls:79,vars:39,consts:[[1,"content"],[1,"content-block"],[1,"block-header"],[3,"title","items","active_item"],[1,"text-center","mb-4"],[1,"row","clearfix"],[1,"col-xs-12","col-sm-12","col-md-12","col-lg-12"],["type","button",1,"btn","btn-kembali","btn-lg","mb-3",3,"routerLink"],[1,"fas","fa-arrow-left"],[1,"card"],[3,"formGroup","submit"],[1,"header"],[1,"body"],[1,"row","mb-3"],[1,"col-sm-2","col-form-label","fw-bold"],[1,"col-sm-9"],["bindLabel","nama_lengkap","bindValue","id_akun","placeholder","Pilih akun dokter","formControlName","id_akun_dokter",2,"flex","1 1 auto",3,"virtualScroll","searchable","loading","clearable","search","scrollToEnd"],[3,"value",4,"ngFor","ngForOf"],["class","form-text text-danger",4,"ngIf"],["placeholder","Pilih kategori","formControlName","kategori",1,"form-control"],["value","buka_praktik"],["value","libur"],[1,"input-group"],["type","text","bsDatepicker","","formControlName","tgl_masuk","placeholder","Tanggal Masuk","id","tgl1",1,"form-control",3,"bsConfig","outsideClick","minDate"],[1,"input-group-text",2,"cursor","pointer","background","white","border-left","0px",3,"click"],[1,"fa","fa-calendar"],[1,"col-sm-4"],["bindLabel","nama_sesi","bindValue","id_jadwal_sesi","placeholder","Pilih jadwal sesi","formControlName","id_jadwal_sesi",2,"flex","1 1 auto",3,"virtualScroll","searchable","loading","clearable","search","scrollToEnd","open"],[1,"col-sm-2"],["type","button",1,"btn","btn-simpan",3,"click"],[1,"fa","fa-plus"],[1,"m-3","row"],[1,"table","tabl-sm","table-striped","table-bordered","table-sm"],[1,"pb-3"],["width","150"],["formArrayName","detail",4,"ngFor","ngForOf"],["class","alert alert-danger","role","alert",4,"ngIf"],[1,"footer"],[1,"text-center","mb-3"],["type","submit","color","primary",1,"btn","btn-simpan","btn-lg",3,"disabled"],[1,"fa",3,"ngClass"],["bdColor","rgba(0, 0, 0, 0.8)","size","medium","color","#fff","type","ball-clip-rotate-multiple",3,"name","fullScreen"],[2,"color","white"],[3,"value"],[1,"form-text","text-danger"],["formArrayName","detail"],[3,"formGroupName"],[1,"p-3",2,"vertical-align","top"],["bindLabel","nama_ruang","bindValue","id_ruang","placeholder","Pilih daftar ruang","formControlName","id_ruang",2,"flex","1 1 auto",3,"virtualScroll","searchable","loading","clearable","search","scrollToEnd"],["formControlName","jam_mulai",3,"minuteStep","showMeridian"],["formControlName","jam_selesai",3,"minuteStep","showMeridian"],[1,"p-3"],["type","button",1,"btn","btn-hapus",3,"click"],["role","alert",1,"alert","alert-danger"],[4,"ngFor","ngForOf"]],template:function(a,t){1&a&&(e.TgZ(0,"section",0)(1,"div",1)(2,"div",2),e._UZ(3,"app-breadcrumb",3),e.qZA(),e.TgZ(4,"h3",4),e._uU(5,"Edit Pengaturan Jadwal Dokter"),e.qZA(),e.TgZ(6,"div",5)(7,"div",6)(8,"button",7),e._UZ(9,"i",8),e._uU(10," Kembali"),e.qZA(),e.TgZ(11,"div",9)(12,"form",10),e.NdJ("submit",function(){return t.SubmitForm()}),e._UZ(13,"div",11),e.TgZ(14,"div",12)(15,"div",13)(16,"label",14),e._uU(17,"Dokter *"),e.qZA(),e.TgZ(18,"div",15)(19,"ng-select",16),e.NdJ("search",function(s){return t.prosesSelectDokter(s,"search")})("scrollToEnd",function(s){return t.prosesSelectDokter(s,"last_page")}),e.YNc(20,Pe,2,2,"ng-option",17),e.qZA(),e.YNc(21,Ge,2,0,"div",18),e.qZA()(),e.TgZ(22,"div",13)(23,"label",14),e._uU(24,"Kategori *"),e.qZA(),e.TgZ(25,"div",15)(26,"select",19)(27,"option",20),e._uU(28,"Masuk"),e.qZA(),e.TgZ(29,"option",21),e._uU(30,"Libur"),e.qZA()(),e.YNc(31,Ke,2,0,"div",18),e.qZA()(),e.TgZ(32,"div",13)(33,"label",14),e._uU(34,"Tgl Awal *"),e.qZA(),e.TgZ(35,"div",15)(36,"div",22),e._UZ(37,"input",23),e.TgZ(38,"span",24),e.NdJ("click",function(){return t.onFocus("tgl1")}),e._UZ(39,"i",25),e.qZA()(),e.YNc(40,$e,2,0,"div",18),e.qZA()(),e.TgZ(41,"div",13)(42,"label",14),e._uU(43,"Jadwal Sesi"),e.qZA(),e.TgZ(44,"div",26)(45,"ng-select",27),e.NdJ("search",function(s){return t.prosesSelectJadwalSesi(s,"search")})("scrollToEnd",function(s){return t.prosesSelectJadwalSesi(s,"last_page")})("open",function(s){return t.prosesSelectJadwalSesi(s,"open")}),e.YNc(46,We,2,2,"ng-option",17),e.qZA()(),e.TgZ(47,"div",28)(48,"button",29),e.NdJ("click",function(){return t.simpanDetailSesi()}),e._UZ(49,"i",30),e._uU(50," Tambah"),e.qZA()()(),e.TgZ(51,"div",31)(52,"table",32)(53,"thead",33)(54,"tr")(55,"th"),e._uU(56,"No"),e.qZA(),e.TgZ(57,"th"),e._uU(58,"Nama Jadwal Sesi"),e.qZA(),e.TgZ(59,"th",34),e._uU(60,"Ruangan"),e.qZA(),e.TgZ(61,"th"),e._uU(62,"Jam Mulai"),e.qZA(),e.TgZ(63,"th"),e._uU(64,"Jam Selesai"),e.qZA(),e.TgZ(65,"th"),e._uU(66,"Aksi"),e.qZA()()(),e.TgZ(67,"tbody"),e.YNc(68,ze,16,12,"tr",35),e.qZA()()(),e.TgZ(69,"div",13),e.YNc(70,et,3,2,"div",36),e.qZA()(),e.TgZ(71,"div",37)(72,"div",38)(73,"button",39),e._UZ(74,"i",40),e._uU(75," Simpan "),e.qZA()()()()()()(),e.TgZ(76,"ngx-spinner",41)(77,"p",42),e._uU(78," Loading... "),e.qZA()()()()),2&a&&(e.xp6(3),e.Q6J("title","Pengaturan Jadwal")("items",e.DdM(33,tt))("active_item","Edit Pengaturan Jadwal Dokter"),e.xp6(5),e.Q6J("routerLink",e.DdM(34,at)),e.xp6(4),e.Q6J("formGroup",t.formInput),e.xp6(7),e.ekj("border-danger",t.formInput.controls.id_akun_dokter.hasError("required")&&t.submitted),e.Q6J("virtualScroll",!0)("searchable",!0)("loading",t.loadingListDokter)("clearable",!0),e.xp6(1),e.Q6J("ngForOf",t.listDokter),e.xp6(1),e.Q6J("ngIf",t.formInput.controls.id_akun_dokter.hasError("required")&&t.submitted),e.xp6(5),e.ekj("border-danger",t.formInput.controls.kategori.hasError("required")&&t.submitted),e.xp6(5),e.Q6J("ngIf",t.formInput.controls.kategori.hasError("required")&&t.submitted),e.xp6(6),e.ekj("border-danger",t.formInput.controls.tgl_masuk.hasError("required")&&t.submitted),e.Q6J("bsConfig",e.DdM(35,it))("outsideClick",!0)("minDate",t.minDate),e.xp6(3),e.Q6J("ngIf",t.formInput.controls.tgl_masuk.hasError("required")&&t.submitted),e.xp6(5),e.Q6J("virtualScroll",!0)("searchable",!0)("loading",t.loadingListJadwalSesi)("clearable",!0),e.xp6(1),e.Q6J("ngForOf",t.listJadwalSesi),e.xp6(22),e.Q6J("ngForOf",t.formInput.get("detail").controls),e.xp6(2),e.Q6J("ngIf",null!=t.errorMessage),e.xp6(3),e.Q6J("disabled",t.isLoadingButton),e.xp6(1),e.Q6J("ngClass",e.WLB(36,nt,t.isLoadingButton,!t.isLoadingButton)),e.xp6(2),e.Q6J("name","spinner1")("fullScreen",!0))},directives:[B.L,v.rH,u._Y,u.JL,u.sg,T.w9,u.JJ,u.u,b.sg,T.jq,b.O5,u.EJ,u.YN,u.Kr,Z.Y5,u.Fj,Z.Np,u.CE,u.x0,H.EV,b.mk,D.Ro],styles:[""]}),n})()}];let rt=(()=>{class n{}return n.\u0275fac=function(a){return new(a||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[v.Bz.forChild(st)],v.Bz]}),n})();var lt=d(60795),ot=d(16270),m=d(36642),S=d(63900),A=d(54004),J=d(70262),ee=d(18505),U=d(39646);let dt=(()=>{class n{constructor(a,t,i){this.actions$=a,this.jadwalDokterService=t,this.router=i,this.urlBacktoView=["pengaturan-jadwal","pengaturan-jadwal-dokter","view"],this.Toast=k().mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:s=>{s.addEventListener("mouseenter",k().stopTimer),s.addEventListener("mouseleave",k().resumeTimer)}}),this.addInitial$=(0,m.GW)(()=>this.actions$.pipe((0,m.l4)(j),(0,S.w)(s=>this.jadwalDokterService.insert(s.payload).pipe((0,A.U)(l=>C({payload:l.response})),(0,J.K)(l=>(0,U.of)(x({message:l}))))))),this.addSuccess$=(0,m.GW)(()=>this.actions$.pipe((0,m.l4)(C),(0,ee.b)(s=>{k().fire({title:"Data berhasil disimpan",icon:"success",showCancelButton:!1,allowOutsideClick:!1,confirmButtonText:"Ya, lanjutkan!"}).then(l=>{this.router.navigate(this.urlBacktoView)})})),{dispatch:!1}),this.addFailure$=(0,m.GW)(()=>this.actions$.pipe((0,m.l4)(x)),{dispatch:!1}),this.updateInitial$=(0,m.GW)(()=>this.actions$.pipe((0,m.l4)(E),(0,S.w)(s=>this.jadwalDokterService.update(s.payload.id_jadwal_dokter,s.payload).pipe((0,A.U)(l=>I({payload:l.response})),(0,J.K)(l=>(0,U.of)(L({message:l}))))))),this.updateSuccess$=(0,m.GW)(()=>this.actions$.pipe((0,m.l4)(I),(0,ee.b)(s=>{k().fire({title:"Data berhasil disimpan",icon:"success",showCancelButton:!1,allowOutsideClick:!1,confirmButtonText:"Ya, lanjutkan!"}).then(l=>{this.router.navigate(this.urlBacktoView)})})),{dispatch:!1}),this.updateFailure$=(0,m.GW)(()=>this.actions$.pipe((0,m.l4)(L)),{dispatch:!1}),this.getByIdInitial$=(0,m.GW)(()=>this.actions$.pipe((0,m.l4)(P),(0,S.w)(s=>this.jadwalDokterService.show(s.payload.id).pipe((0,A.U)(l=>G({payload:l.response})),(0,J.K)(l=>(0,U.of)(q({message:l}))))))),this.getByIdFailure$=(0,m.GW)(()=>this.actions$.pipe((0,m.l4)(q)),{dispatch:!1}),this.deleteInitial$=(0,m.GW)(()=>this.actions$.pipe((0,m.l4)(N),(0,S.w)(s=>this.jadwalDokterService.delete(s.id,s.payload).pipe((0,A.U)(l=>Y({payload:l.response})),(0,J.K)(l=>(0,U.of)(M({message:l}))))))),this.deleteSuccess$=(0,m.GW)(()=>this.actions$.pipe((0,m.l4)(Y),(0,A.U)(s=>(this.Toast.fire({icon:"success",title:"Data berhasil dihapus"}),K())))),this.deleteFailure$=(0,m.GW)(()=>this.actions$.pipe((0,m.l4)(M)),{dispatch:!1})}}return n.\u0275fac=function(a){return new(a||n)(e.LFG(m.eX),e.LFG(R),e.LFG(v.F0))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac}),n})();const ct=(0,o.Lq)({jadwalDokter:null,isLoadingButton:!1,errorMessage:null,reloadTable:!1,submitButton:!1,isEdit:!1},(0,o.on)(j,(n,r)=>Object.assign(Object.assign({},n),{isLoadingButton:!0,isEdit:!1,reloadTable:!1})),(0,o.on)(C,(n,r)=>Object.assign(Object.assign({},n),{isLoadingButton:!1,jadwalDokter:r.payload,errorMessage:null})),(0,o.on)(x,(n,r)=>Object.assign(Object.assign({},n),{isLoadingButton:!1,errorMessage:r.message,isEdit:!1,reloadTable:!1})),(0,o.on)(E,(n,r)=>Object.assign(Object.assign({},n),{isLoadingButton:!0,errorMessage:null,isEdit:!1,reloadTable:!1})),(0,o.on)(I,(n,r)=>Object.assign(Object.assign({},n),{isLoadingButton:!1,jadwalDokter:r.payload,isEdit:!1,reloadTable:!1})),(0,o.on)(L,(n,r)=>Object.assign(Object.assign({},n),{isLoadingButton:!1,errorMessage:r.message,isEdit:!1,reloadTable:!1})),(0,o.on)(P,(n,r)=>Object.assign(Object.assign({},n),{isLoadingButton:!1,errorMessage:null,jadwalDokter:new w})),(0,o.on)(G,(n,r)=>Object.assign(Object.assign({},n),{isLoadingButton:!1,errorMessage:null,isEdit:!0,jadwalDokter:r.payload,reloadTable:!1})),(0,o.on)(q,(n,r)=>Object.assign(Object.assign({},n),{isLoadingButton:!1,errorMessage:r.message,isEdit:!1,reloadTable:!1})),(0,o.on)(N,(n,r)=>Object.assign(Object.assign({},n),{isLoadingButton:!1,errorMessage:null,isEdit:!1,reloadTable:!1,jadwalDokter:new w})),(0,o.on)(Y,(n,r)=>Object.assign(Object.assign({},n),{isLoadingButton:!1,errorMessage:null,isEdit:!1,reloadTable:!0})),(0,o.on)(M,(n,r)=>Object.assign(Object.assign({},n),{isLoadingButton:!1,errorMessage:r.message,isEdit:!1,reloadTable:!1})),(0,o.on)(K,(n,r)=>Object.assign(Object.assign({},n),{reloadTable:!0})),(0,o.on)(fe,(n,r)=>Object.assign(Object.assign({},n),{jadwalDokter:new w,errorMessage:null,isEdit:!1,reloadTable:!1,isLoadingButton:!1})));function pt(n,r){return ct(n,r)}var mt=d(13559),gt=d(21178),_t=d(37183),ft=d(24130);F.z1U.registerPlugins([mt.ZP,gt.ZP,_t.Z,ft.ZP]);let ht=(()=>{class n{}return n.\u0275fac=function(a){return new(a||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[b.ez,rt,lt.K,D.ef,u.u5,u.UX,F.z1U,y.T,ot.z,T.A0,Z.kn.forRoot(),H.Db.forRoot(),o.Aw.forFeature("pengaturanJadwal_jadwalDokter",pt),m.sQ.forFeature([dt])]]}),n})()}}]);