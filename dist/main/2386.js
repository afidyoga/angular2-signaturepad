"use strict";(self.webpackChunkangularlight=self.webpackChunkangularlight||[]).push([[2386],{62386:(q,g,o)=>{o.r(g),o.d(g,{PemasukanKlinikModule:()=>J});var k=o(69808),m=o(50072),u=o(93075),c=o(23007),p=o(65415),e=o(5e3),b=o(89955),v=o(86307),h=o(40520);let Z=(()=>{class r{constructor(t,a){this.generalService=t,this.http=a,this.urlBase="pemasukan-klinik",this.urlModule=this.generalService.getUrlModule(b.s.url_module.modulLaporan)}getData(t){return this.http.post(this.urlModule+"/"+this.urlBase,t)}getDetail(t){return this.http.post(this.urlModule+"/"+this.urlBase+"/detail",t)}}return r.\u0275fac=function(t){return new(t||r)(e.LFG(v.m),e.LFG(h.eN))},r.\u0275prov=e.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();var T=o(95305);let U=(()=>{class r{constructor(t,a,n){this.generalService=t,this.http=a,this.authenticationService=n,this.urlBase="pemasukan-klinik",this.currentUser=this.authenticationService.currentUserValue,this.header=new h.WM({Accept:"application/octet-stream","Content-Type":"blob",Authorization:`Bearer ${this.currentUser.token}`}),this.urlModule=this.generalService.getUrlModule(b.s.url_module.modulLaporan)}getDataExport(t){return this.http.post(this.urlModule+"/"+this.urlBase+"/export",t,{responseType:"arraybuffer",headers:this.header})}getDetailExport(t){return this.http.post(this.urlModule+"/"+this.urlBase+"/detail/export",t,{responseType:"arraybuffer",headers:this.header})}}return r.\u0275fac=function(t){return new(t||r)(e.LFG(v.m),e.LFG(h.eN),e.LFG(T.e))},r.\u0275prov=e.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();var w=o(94554),y=o(33399),f=o(67236);function x(r,l){1&r&&(e.TgZ(0,"p",28),e._uU(1,"Tanggal transaksi tidak boleh kosong"),e.qZA())}const _=function(){return[]},A=function(){return{dateInputFormat:"MM-YYYY"}};let D=(()=>{class r{constructor(t,a,n,s,i,d){this.spinner=t,this.router=a,this.pemasukan=n,this.pemasukanExport=s,this.money=i,this.fb=d,this.datatableElement=p.G,this.dtOptions={},this.search=!1,this.currentUser=localStorage.getItem("currentUser")}ngOnInit(){this.currentUser=null!=this.currentUser?JSON.parse(this.currentUser):null,this.params={Authorization:this.currentUser.token,x_api_key:this.currentUser.key,search:{value:"",regex:!1},transaksi_jenis:"masuk",start:"",end:"",expired_in:0},this.formInput=this.fb.group({date_from:[new Date,[u.kI.required]]}),this.dtOptions=this.showDataTables()}reLoadData(){this.search=!0,!this.formInput.invalid&&(this.datatableElement.dtInstance.then(t=>{t.ajax.reload()}),this.search=!1)}detail(t){this.router.navigate(["laporan/pemasukan-klinik/detail/"+t.id_poliklinik])}download(t){const a=window.URL.createObjectURL(new Blob([t],{type:"application/ms-excel"})),n=document.createElement("a");n.href=a,n.setAttribute("download","Laporan Pemasukan Klinik.xlsx"),document.body.appendChild(n),n.click()}export(){this.search=!0,!this.formInput.invalid&&(this.spinner.show("spinner1"),this.params.month=new Date(this.formInput.value.date_from).getTime(),this.pemasukanExport.getDataExport(this.params).subscribe(t=>{this.download(t),this.search=!1,this.spinner.hide("spinner1")}))}showDataTables(){let t=this;return this.spinner.show("spinner1"),{searching:!1,pageLength:10,serverSide:!0,processing:!0,order:[],ajax:(a,n)=>{a.month=new Date(this.formInput.value.date_from).getTime(),this.pemasukan.getData(a).subscribe(s=>{n({draw:s.response.draw,recordsTotal:s.response.recordsTotal,recordsFiltered:s.response.recordsFiltered,data:s.response.data}),this.spinner.hide("spinner1")})},columns:[{orderable:!1,searchable:!1,render:(a,n,s,i)=>i.row+1+i.settings._iDisplayStart},{data:"nama_poliklinik"},{data:"pasien_bpjs"},{data:"pemasukan_bpjs",render:(a,n,s,i)=>t.money.formatRupiah(parseInt(a.replace(".",",")))},{data:"pasien_reguler"},{data:"pemasukan_reguler",render:(a,n,s,i)=>t.money.formatRupiah(parseInt(a.replace(".",",")))},{data:"total_pemasukan",render:(a,n,s,i)=>t.money.formatRupiah(null==a?0:parseInt(a.replace(".",",")))},{orderable:!1,searchable:!1,render:(a,n,s,i)=>'<button class="btn btn-sm btn-info detail">Detail</button>'}],rowCallback:(a,n,s)=>{const i=this;return $("td .detail",a).on("click",()=>{i.detail(n)}),a}}}onOpenCalendar(t){t.monthSelectHandler=a=>{t._store.dispatch(t._actions.select(a.date))},t.setViewMode("month")}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(m.t2),e.Y36(c.F0),e.Y36(Z),e.Y36(U),e.Y36(w.r),e.Y36(u.qu))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-view"]],viewQuery:function(t,a){if(1&t&&e.Gf(p.G,5),2&t){let n;e.iGM(n=e.CRH())&&(a.datatableElement=n.first)}},decls:58,vars:11,consts:[[1,"content"],[1,"content-block"],[1,"block-header"],[3,"title","items","active_item"],[1,"text-center","mb-4"],[1,"row","clearfix"],[1,"col-xs-12","col-sm-12","col-md-12","col-lg-12"],[1,"card"],[1,"header"],[1,"body"],[3,"formGroup"],[1,"row"],[1,"col-sm-2","col-form-label","fw-bold"],[1,"col-sm-8"],["type","text","formControlName","date_from","bsDatepicker","",1,"form-control",3,"bsConfig"],["class","text-danger",4,"ngIf"],[1,"col-sm-9","offset-md-2"],["type","button",1,"btn","btn-md","btn-tampilkan-cari",3,"click"],[1,"fa","fa-download"],["type","button",1,"btn","btn-md","btn-primary",3,"click"],[1,"fa","fa-search"],["datatable","","width","100%",1,"table","table-striped","table-bordered","table-sm","table-sm",3,"dtOptions"],["rowspan","2"],["rowspan","2",1,"text-center"],["colspan","4",1,"text-center"],[1,"text-center"],["bdColor","rgba(0, 0, 0, 0.8)","size","medium","color","#fff","type","ball-clip-rotate-multiple",3,"name","fullScreen"],[2,"color","white"],[1,"text-danger"]],template:function(t,a){1&t&&(e.TgZ(0,"section",0)(1,"div",1)(2,"div",2),e._UZ(3,"app-breadcrumb",3),e.qZA(),e.TgZ(4,"h3",4),e._uU(5,"Laporan Pemasukan Klinik"),e.qZA(),e.TgZ(6,"div",5)(7,"div",6)(8,"div",7)(9,"div",8)(10,"h2")(11,"strong"),e._uU(12,"Pencarian"),e.qZA()()(),e.TgZ(13,"div",9)(14,"form",10)(15,"div",11)(16,"label",12),e._uU(17,"Tanggal Transaksi"),e.qZA(),e.TgZ(18,"div",13),e._UZ(19,"input",14),e.YNc(20,x,2,0,"p",15),e.qZA()(),e.TgZ(21,"div",11)(22,"div",16)(23,"button",17),e.NdJ("click",function(){return a.export()}),e._UZ(24,"i",18),e._uU(25," Excel"),e.qZA(),e.TgZ(26,"button",19),e.NdJ("click",function(){return a.reLoadData()}),e._UZ(27,"i",20),e._uU(28," Cari"),e.qZA()()()()()(),e.TgZ(29,"div",7),e._UZ(30,"div",8),e.TgZ(31,"div",9)(32,"table",21)(33,"thead")(34,"tr")(35,"th",22),e._uU(36,"No"),e.qZA(),e.TgZ(37,"th",23),e._uU(38,"Poliklinik"),e.qZA(),e.TgZ(39,"th",24),e._uU(40,"Jumlah Pasien"),e.qZA(),e.TgZ(41,"th",23),e._uU(42,"Total Pemasukan"),e.qZA(),e.TgZ(43,"th",22),e._uU(44,"Action"),e.qZA()(),e.TgZ(45,"tr")(46,"th",25),e._uU(47,"Pasien BPJS"),e.qZA(),e.TgZ(48,"th",25),e._uU(49,"Pemasukan"),e.qZA(),e.TgZ(50,"th",25),e._uU(51,"Pasien Reguler"),e.qZA(),e.TgZ(52,"th",25),e._uU(53,"Pemasukan"),e.qZA()()(),e._UZ(54,"tbody"),e.qZA()()()()()(),e.TgZ(55,"ngx-spinner",26)(56,"p",27),e._uU(57," Loading... "),e.qZA()()()),2&t&&(e.xp6(3),e.Q6J("title","Laporan")("items",e.DdM(9,_))("active_item","Laporan Pemasukan Klinik"),e.xp6(11),e.Q6J("formGroup",a.formInput),e.xp6(5),e.Q6J("bsConfig",e.DdM(10,A)),e.xp6(1),e.Q6J("ngIf",""==a.formInput.value.date_from&&a.search),e.xp6(12),e.Q6J("dtOptions",a.dtOptions),e.xp6(23),e.Q6J("name","spinner1")("fullScreen",!0))},directives:[y.L,u._Y,u.JL,u.sg,u.Fj,f.Y5,u.JJ,u.u,f.Np,k.O5,p.G,m.Ro],styles:[""]}),r})();var P=o(15439);const M=function(){return["Pemasukan Klinik"]},C=function(){return["../../view"]},S=[{path:"",redirectTo:"view",pathMatch:"full"},{path:"view",component:D},{path:"detail/:id",component:(()=>{class r{constructor(t,a,n,s,i,d,Y){this.spinner=t,this.router=a,this.pemasukanExport=n,this.pemasukan=s,this.money=i,this.fb=d,this.activatedRoute=Y,this.datatableElement=p.G,this.dtOptions={},this.currentUser=localStorage.getItem("currentUser")}ngOnInit(){this.currentUser=null!=this.currentUser?JSON.parse(this.currentUser):null,this.params={Authorization:this.currentUser.token,x_api_key:this.currentUser.key,search:{value:"",regex:!1},transaksi_jenis:"masuk",start:"",end:"",expired_in:0},this.formInput=this.fb.group({date_from:[new Date,[u.kI.required]]}),this.activatedRoute.params.subscribe(t=>{t&&(this.dtOptions=this.showDataTables(t.id),this.params.id_poliklinik=t.id)})}reLoadData(){this.datatableElement.dtInstance.then(t=>{t.ajax.reload()})}download(t){const a=window.URL.createObjectURL(new Blob([t],{type:"application/ms-excel"})),n=document.createElement("a");n.href=a,n.setAttribute("download","Detail Laporan Pemasukan Klinik.xlsx"),document.body.appendChild(n),n.click()}export(){this.spinner.show("spinner1"),this.pemasukanExport.getDetailExport(this.params).subscribe(t=>{this.download(t),this.spinner.hide("spinner1")})}showDataTables(t){let a=this;return this.spinner.show("spinner1"),{searching:!1,pageLength:10,serverSide:!0,processing:!0,order:[],ajax:(n,s)=>{n.id_poliklinik=t,this.pemasukan.getDetail(n).subscribe(i=>{s({draw:i.response.draw,recordsTotal:i.response.recordsTotal,recordsFiltered:i.response.recordsFiltered,data:i.response.data}),this.spinner.hide("spinner1")})},columns:[{orderable:!1,searchable:!1,render:(n,s,i,d)=>d.row+1+d.settings._iDisplayStart},{data:"tanggal",render:(n,s,i,d)=>P(n).format("DD-MM-YYYY")},{data:"pasien_bpjs"},{data:"pemasukan_bpjs",render:(n,s,i,d)=>a.money.formatRupiah(parseInt(n.replace(".",",")))},{data:"pasien_reguler"},{data:"pemasukan_reguler",render:(n,s,i,d)=>a.money.formatRupiah(parseInt(n.replace(".",",")))},{data:"total_pemasukan",render:(n,s,i,d)=>a.money.formatRupiah(null==n?0:parseInt(n.replace(".",",")))}]}}onOpenCalendar(t){t.monthSelectHandler=a=>{t._store.dispatch(t._actions.select(a.date))},t.setViewMode("month")}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(m.t2),e.Y36(c.F0),e.Y36(U),e.Y36(Z),e.Y36(w.r),e.Y36(u.qu),e.Y36(c.gz))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-detail"]],viewQuery:function(t,a){if(1&t&&e.Gf(p.G,5),2&t){let n;e.iGM(n=e.CRH())&&(a.datatableElement=n.first)}},decls:53,vars:9,consts:[[1,"content"],[1,"content-block"],[1,"block-header"],[3,"title","items","active_item"],[1,"text-center","mb-4"],[1,"row","clearfix"],[1,"col-xs-12","col-sm-12","col-md-12","col-lg-12"],["type","button",1,"btn","btn-kembali","btn-lg","mb-3",3,"routerLink"],[1,"fas","fa-arrow-left"],[1,"card"],[1,"body"],[1,"row","mb-4"],[1,"col-sm-8"],[1,"row","mb-2"],[1,"col-md-3"],[1,"col-sm-9"],[1,"col-sm-4","text-right"],[1,"btn","btn-md","btn-tampilkan-cari",3,"click"],[1,"fa","fa-download"],["width","100%","datatable","",1,"table","table-striped","table-bordered","table-sm","table-sm",3,"dtOptions"],["rowspan","2"],["rowspan","2",1,"text-center"],["colspan","4",1,"text-center"],[1,"text-center"],["bdColor","rgba(0, 0, 0, 0.8)","size","medium","color","#fff","type","ball-clip-rotate-multiple",3,"name","fullScreen"],[2,"color","white"]],template:function(t,a){1&t&&(e.TgZ(0,"section",0)(1,"div",1)(2,"div",2),e._UZ(3,"app-breadcrumb",3),e.qZA(),e.TgZ(4,"h3",4),e._uU(5,"Detail Pemasukan Klinik"),e.qZA(),e.TgZ(6,"div",5)(7,"div",6)(8,"button",7),e._UZ(9,"i",8),e._uU(10," Kembali"),e.qZA(),e.TgZ(11,"div",9)(12,"div",10)(13,"div",11)(14,"div",12)(15,"div",13)(16,"div",14),e._uU(17,"Nama Poli"),e.qZA(),e.TgZ(18,"div",15),e._uU(19,": Poliklinik Umum"),e.qZA()(),e.TgZ(20,"div",13)(21,"div",14),e._uU(22,"Periode Transaksi"),e.qZA(),e.TgZ(23,"div",15),e._uU(24,": 1 Januari - 31 Januari 2023"),e.qZA()()(),e.TgZ(25,"div",16)(26,"button",17),e.NdJ("click",function(){return a.export()}),e._UZ(27,"i",18),e._uU(28," Excel"),e.qZA()()(),e.TgZ(29,"table",19)(30,"thead")(31,"tr")(32,"th",20),e._uU(33,"No"),e.qZA(),e.TgZ(34,"th",21),e._uU(35,"Tanggl Transaksi"),e.qZA(),e.TgZ(36,"th",22),e._uU(37,"Jumlah Pasien"),e.qZA(),e.TgZ(38,"th",21),e._uU(39,"Total Pemasukan"),e.qZA()(),e.TgZ(40,"tr")(41,"th",23),e._uU(42,"Pasien BPJS"),e.qZA(),e.TgZ(43,"th",23),e._uU(44,"Pemasukan"),e.qZA(),e.TgZ(45,"th",23),e._uU(46,"Pasien Reguler"),e.qZA(),e.TgZ(47,"th",23),e._uU(48,"Pemasukan"),e.qZA()()(),e._UZ(49,"tbody"),e.qZA()()()()()(),e.TgZ(50,"ngx-spinner",24)(51,"p",25),e._uU(52," Loading... "),e.qZA()()()),2&t&&(e.xp6(3),e.Q6J("title","Laporan")("items",e.DdM(7,M))("active_item","Detail Pemasukan Klinik"),e.xp6(5),e.Q6J("routerLink",e.DdM(8,C)),e.xp6(21),e.Q6J("dtOptions",a.dtOptions),e.xp6(21),e.Q6J("name","spinner1")("fullScreen",!0))},directives:[y.L,c.rH,p.G,m.Ro],styles:[""]}),r})()}];let L=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[[c.Bz.forChild(S)],c.Bz]}),r})();var I=o(60795);let J=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[[k.ez,L,I.K,m.ef,u.u5,u.UX,p.T,f.kn.forRoot()]]}),r})()}}]);