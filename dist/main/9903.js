"use strict";(self.webpackChunkangularlight=self.webpackChunkangularlight||[]).push([[9903],{86307:(C,A,d)=>{d.d(A,{m:()=>g});var b=d(5e3),Z=d(95305);let g=(()=>{class m{constructor(c){this.authService=c}getUrlModule(c){return this.authService.currentUserValue.repo.find(t=>t.key_repo==c).url_repo}}return m.\u0275fac=function(c){return new(c||m)(b.LFG(Z.e))},m.\u0275prov=b.Yz7({token:m,factory:m.\u0275fac,providedIn:"root"}),m})()},55648:(C,A,d)=>{d.d(A,{O:()=>h});var b=d(89955),Z=d(5e3),g=d(86307),m=d(40520);let h=(()=>{class c{constructor(p,t){this.generalService=p,this.http=t,this.urlBase="stok-obat",this.urlModule=this.generalService.getUrlModule(b.s.url_module.gudangTransaksi)}show(p){return this.http.get(this.urlModule+"/"+this.urlBase+"/get-byid/"+p)}getRiwayat(p,t){return this.http.post(this.urlModule+"/"+this.urlBase+"/get-riwayat-stok/"+p,t)}listDatatables(p){return this.http.post(this.urlModule+"/"+this.urlBase+"/get-datatables",p)}add(p){return this.http.post(this.urlModule+"/"+this.urlBase+"/create",p)}update(p,t){return this.http.put(this.urlModule+"/"+this.urlBase+"/update/"+p,t)}delete(p){return this.http.delete(this.urlModule+"/"+this.urlBase+"/delete/"+p)}getRiwayatBatch(p,t){return this.http.post(this.urlModule+"/"+this.urlBase+"/get-riwayat-batch/"+p,t)}getBatch(p){return this.http.post(this.urlModule+"/"+this.urlBase+"/get-batch",p)}getBatchStockOpname(p){return this.http.post(this.urlModule+"/"+this.urlBase+"/get-batch-stok-opname",p)}getSelectBatch(p,t){return this.http.post(this.urlModule+"/"+this.urlBase+"/get-select-option-batch/"+p,t)}getSelectBatchStockOpname(p,t){return this.http.post(this.urlModule+"/"+this.urlBase+"/get-select-option-batch-stock-opname/"+p,t)}}return c.\u0275fac=function(p){return new(p||c)(Z.LFG(g.m),Z.LFG(m.eN))},c.\u0275prov=Z.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c})()},39903:(C,A,d)=>{d.r(A),d.d(A,{PenjualanKasirModule:()=>Wt});var b=d(69808),Z=d(50072),g=d(23007),m=d(65415),h=d(2454),c=d.n(h),r=d(75424),p=d(35605),t=d(5e3),k=d(44151),y=d(8242),E=d(94554),f=d(65620),D=d(33399);function I(e,l){if(1&e){const a=t.EpF();t.TgZ(0,"button",16),t.NdJ("click",function(){return t.CHM(a),t.oxw().buat_transaksi()}),t._UZ(1,"i",17),t._uU(2," Buat Nota "),t.qZA()}}const J=function(){return[]};let L=(()=>{class e{constructor(a,n,s,i,o,_){this.ModalService=a,this.ModulPenjualanService=n,this.router=s,this.money=i,this.spinner=o,this.store=_,this.datatableElement=m.G,this.dtOptions={},this.dataPenjualan=new p.pF,this.btnDetail=!1,this.btnDelete=!1,this.btnEdit=!1,this.btnSetting=!1,this.btnAdd=!1,this.view=!1,this.getState=this.store.select("penjualan")}ngOnInit(){this.spinner.show("spinner1");let a=JSON.parse(localStorage.getItem("currentUser"));a=a.menu_right,this.btnAdd=this.btnDelete=this.btnEdit=-1!=a.findIndex(n=>"ATPJPJ2"==n.kode),this.btnDetail=this.view=-1!=a.findIndex(n=>"ATPJPJ1"==n.kode),this.view||c().fire("Warning","Anda tidak mempunyai akses halaman ini","warning").then(()=>{window.location.href="/"}),this.dtOptions=this.showDataTables(this.btnDetail),this.getState.subscribe(n=>{this.reloadTable=n.reloadTable,!0===this.reloadTable&&this.reLoadData()}),setTimeout(()=>{this.spinner.hide("spinner1")},400)}addData(a){this.router.navigate(["penjualan/penjualan-kasir/add/"+a.id_penjualan])}nonAktif(a){c().fire({title:"Apakah anda yakin akan menghapus data ini ?",icon:"warning",showCancelButton:!0,allowOutsideClick:!1,confirmButtonText:"Ya, hapus saja!",cancelButtonText:"Tidak, Batalkan"}).then(n=>{n.value&&(this.spinner.show("spinner1"),this.store.dispatch(r.Fi({payload:{id:a.id_penjualan}})),setTimeout(()=>{this.spinner.hide("spinner1")},400))})}buat_transaksi(){this.store.dispatch(r.sq()),setTimeout(()=>{this.reLoadData()},400)}reLoadData(){this.datatableElement.dtInstance.then(a=>{a.ajax.reload()})}showDataTables(a){this.spinner.show("spinner1");let n=this;return{pageLength:10,serverSide:!0,processing:!0,order:[],ajax:(s,i)=>{this.ModulPenjualanService.listDatatables(s).subscribe(o=>{i({draw:o.response.draw,recordsTotal:o.response.recordsTotal,recordsFiltered:o.response.recordsFiltered,data:o.response.data}),this.spinner.hide("spinner1")})},columns:[{orderable:!1,searchable:!1,render:(s,i,o,_)=>_.row+1+_.settings._iDisplayStart},{data:"total_harga",render:(s,i,o,_)=>n.money.formatRupiah(parseInt(s.replace(".",",")))},{data:"diskon_rupiah",render:(s,i,o,_)=>null==s?0:s},{data:"total_harga",render:(s,i,o,_)=>n.money.formatRupiah(s-o.diskon_rupiah)},{data:"nama_lengkap"},{orderable:!1,searchable:!1,render:(s,i,o,_)=>a?'<button class="btn btn-sm btn-info update-data">Add</button>\n                    <button class="btn nonaktif-data btn-hapus btn-sm">Hapus</button>':""}],rowCallback:(s,i,o)=>{const _=this;return $("td .update-data",s).on("click",()=>{_.addData(i)}),$("td .nonaktif-data",s).on("click",()=>{_.nonAktif(i)}),s}}}ngOnDestroy(){document.body.classList.remove("jw-modal-open")}btnOpenModal(){this.ModalService.open("modalFormContent")}modalClose(){this.ModalService.close("modalFormContent")}}return e.\u0275fac=function(a){return new(a||e)(t.Y36(k.Z),t.Y36(y.Y),t.Y36(g.F0),t.Y36(E.r),t.Y36(Z.t2),t.Y36(f.yh))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-view"]],viewQuery:function(a,n){if(1&a&&t.Gf(m.G,5),2&a){let s;t.iGM(s=t.CRH())&&(n.datatableElement=s.first)}},decls:31,vars:8,consts:[[1,"content"],[1,"content-block"],[1,"block-header"],[3,"title","items","active_item"],[1,"text-center","mb-4"],[1,"row","clearfix"],[1,"col-xs-12","col-sm-12","col-md-12","col-lg-12"],["type","button","class","btn btn-tambah btn-lg mb-3",3,"click",4,"ngIf"],[1,"card"],[1,"header"],[1,"body"],["width","100%","datatable","",1,"table","table-striped","table-bordered","table-sm",3,"dtOptions"],["width","30"],["width","100"],["bdColor","rgba(0, 0, 0, 0.8)","size","medium","color","#fff","type","ball-clip-rotate-multiple",3,"name","fullScreen"],[2,"color","white"],["type","button",1,"btn","btn-tambah","btn-lg","mb-3",3,"click"],[1,"fas","fa-plus"]],template:function(a,n){1&a&&(t.TgZ(0,"section",0)(1,"div",1)(2,"div",2),t._UZ(3,"app-breadcrumb",3),t.qZA(),t.TgZ(4,"h3",4),t._uU(5,"Penjualan"),t.qZA(),t.TgZ(6,"div",5)(7,"div",6),t.YNc(8,I,3,0,"button",7),t.TgZ(9,"div",8),t._UZ(10,"div",9),t.TgZ(11,"div",10)(12,"table",11)(13,"thead")(14,"tr")(15,"th",12),t._uU(16,"No"),t.qZA(),t.TgZ(17,"th"),t._uU(18,"Total Harga"),t.qZA(),t.TgZ(19,"th"),t._uU(20,"Diskon"),t.qZA(),t.TgZ(21,"th"),t._uU(22,"Sub Ttotal"),t.qZA(),t.TgZ(23,"th"),t._uU(24,"User Kasir"),t.qZA(),t.TgZ(25,"th",13),t._uU(26,"Aksi"),t.qZA()()(),t._UZ(27,"tbody"),t.qZA()()()()()(),t.TgZ(28,"ngx-spinner",14)(29,"p",15),t._uU(30," Loading... "),t.qZA()()()),2&a&&(t.xp6(3),t.Q6J("title","Penjualan")("items",t.DdM(7,J))("active_item","Penjualan"),t.xp6(5),t.Q6J("ngIf",n.btnAdd),t.xp6(4),t.Q6J("dtOptions",n.dtOptions),t.xp6(16),t.Q6J("name","spinner1")("fullScreen",!0))},directives:[D.L,b.O5,m.G,Z.Ro],styles:[""]}),e})();var O=d(15861),T=d(93075),Y=d(88544),F=d(51531),K=d(22346),Q=d(55648),W=d(23560),G=d(45819),R=d(51693),P=d(24376);function H(e,l){if(1&e){const a=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td",51),t._uU(6),t.qZA(),t.TgZ(7,"td",51),t._uU(8),t.qZA(),t.TgZ(9,"td",51),t._uU(10),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.qZA(),t.TgZ(13,"td",51),t._uU(14),t.qZA(),t.TgZ(15,"td",52)(16,"button",53),t.NdJ("click",function(){const s=t.CHM(a),i=s.$implicit,o=s.index;return t.oxw().edit(i,o,"obat")}),t._uU(17,"Edit"),t.qZA(),t.TgZ(18,"button",54),t.NdJ("click",function(){const s=t.CHM(a),i=s.$implicit,o=s.index;return t.oxw().hapus(i,o,"obat")}),t._uU(19,"Hapus"),t.qZA()()()}if(2&e){const a=l.$implicit,n=l.index,s=t.oxw();t.xp6(2),t.Oqu(n+1),t.xp6(2),t.Oqu(a.nama_obat),t.xp6(2),t.hij(" ",s.Money(a.satuan_harga)," "),t.xp6(2),t.hij(" ",a.satuan_qty+" "+a.satuan," "),t.xp6(2),t.hij(" ",a.total_qty," "),t.xp6(2),t.hij(" ","persen"==a.jenis_diskon?a.diskon_value+"%":"Rp."+a.diskon_value," "),t.xp6(2),t.hij(" ",s.Money(s.getSub(a.jenis_diskon,a.target_kemasan,a.satuan_harga,a.diskon_value))," ")}}function V(e,l){if(1&e){const a=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td",51),t._uU(6),t.qZA(),t.TgZ(7,"td",51),t._uU(8),t.qZA(),t.TgZ(9,"td",51),t._uU(10),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.qZA(),t.TgZ(13,"td",51),t._uU(14),t.qZA(),t.TgZ(15,"td",52)(16,"button",53),t.NdJ("click",function(){const s=t.CHM(a),i=s.$implicit,o=s.index;return t.oxw().edit(i,o,"alat")}),t._uU(17,"Edit"),t.qZA(),t.TgZ(18,"button",54),t.NdJ("click",function(){const s=t.CHM(a),i=s.$implicit,o=s.index;return t.oxw().hapus(i,o,"alat")}),t._uU(19,"Hapus"),t.qZA()()()}if(2&e){const a=l.$implicit,n=l.index,s=t.oxw();t.xp6(2),t.Oqu(n+1),t.xp6(2),t.Oqu(a.nama_alat_kesehatan),t.xp6(2),t.hij(" ",s.Money(a.satuan_harga)," "),t.xp6(2),t.hij(" ",a.satuan_qty+" "+a.satuan," "),t.xp6(2),t.hij(" ",a.total_qty," "),t.xp6(2),t.hij(" ","persen"==a.jenis_diskon?a.diskon_value+"%":"Rp."+a.diskon_value," "),t.xp6(2),t.hij(" ",s.Money(s.getSub(a.jenis_diskon,a.target_kemasan,a.satuan_harga,a.diskon_value))," ")}}function z(e,l){1&e&&(t.TgZ(0,"div",55),t._uU(1," Jenis Pembayaran tidak boleh kosong "),t.qZA())}function X(e,l){1&e&&(t.TgZ(0,"div",55),t._uU(1," Metode Pembayaran tidak boleh kosong "),t.qZA())}function tt(e,l){if(1&e){const a=t.EpF();t.TgZ(0,"div",31)(1,"label",32),t._uU(2,"Metode Pembayaran"),t.qZA(),t.TgZ(3,"div",33)(4,"ng-select",56),t.NdJ("search",function(s){return t.CHM(a),t.oxw().prosesSelectMetodeBayar(s,"search")})("scrollToEnd",function(s){return t.CHM(a),t.oxw().prosesSelectMetodeBayar(s,"last_page")})("open",function(s){return t.CHM(a),t.oxw().prosesSelectMetodeBayar(s,"open")}),t.qZA(),t.YNc(5,X,2,0,"div",38),t.qZA()()}if(2&e){const a=t.oxw();t.xp6(4),t.ekj("border-danger",a.formBayar.controls.id_metode_bayar.hasError("required")&&a.submitted),t.Q6J("virtualScroll",!0)("items",a.optionMetodeBayar)("searchable",!0)("clearable",!0),t.xp6(1),t.Q6J("ngIf",a.formBayar.controls.id_metode_bayar.hasError("required")&&a.submitted)}}function at(e,l){if(1&e&&(t.TgZ(0,"ng-option",59),t._uU(1),t.qZA()),2&e){const a=l.$implicit;t.Q6J("value",a),t.xp6(1),t.Oqu(a.nama_obat)}}function et(e,l){if(1&e){const a=t.EpF();t.TgZ(0,"ng-select",57),t.NdJ("ngModelChange",function(s){return t.CHM(a),t.oxw().id_obat=s})("change",function(s){return t.CHM(a),t.oxw().setKemasan(s)})("search",function(s){return t.CHM(a),t.oxw().prosesSelectObat(s,"search")})("scrollToEnd",function(s){return t.CHM(a),t.oxw().prosesSelectObat(s,"last_page")})("open",function(s){return t.CHM(a),t.oxw().prosesSelectObat(s,"open")}),t.YNc(1,at,2,2,"ng-option",58),t.qZA()}if(2&e){const a=t.oxw();t.Q6J("ngModel",a.id_obat)("virtualScroll",!0)("searchable",!0)("clearable",!0),t.xp6(1),t.Q6J("ngForOf",a.optionObat)}}function nt(e,l){if(1&e&&(t.TgZ(0,"ng-option",59),t._uU(1),t.qZA()),2&e){const a=l.$implicit;t.Q6J("value",a),t.xp6(1),t.Oqu(a.nama_alat_kesehatan)}}function st(e,l){if(1&e){const a=t.EpF();t.TgZ(0,"ng-select",60),t.NdJ("ngModelChange",function(s){return t.CHM(a),t.oxw().id_alat_kesehatan=s})("change",function(s){return t.CHM(a),t.oxw().setKemasan(s)})("search",function(s){return t.CHM(a),t.oxw().prosesSelectAlat(s,"search")})("scrollToEnd",function(s){return t.CHM(a),t.oxw().prosesSelectAlat(s,"last_page")})("open",function(s){return t.CHM(a),t.oxw().prosesSelectAlat(s,"open")}),t.YNc(1,nt,2,2,"ng-option",58),t.qZA()}if(2&e){const a=t.oxw();t.Q6J("ngModel",a.id_alat_kesehatan)("virtualScroll",!0)("searchable",!0)("clearable",!0),t.xp6(1),t.Q6J("ngForOf",a.optionAlat)}}function it(e,l){if(1&e&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA()()),2&e){const a=l.$implicit,n=l.index;t.xp6(2),t.Oqu(n+1),t.xp6(2),t.Oqu(a.no_batch),t.xp6(2),t.Oqu(a.jumlah)}}function ot(e,l){if(1&e&&(t.TgZ(0,"table",76)(1,"thead")(2,"tr")(3,"th",77),t._uU(4,"No"),t.qZA(),t.TgZ(5,"th"),t._uU(6,"No Batch"),t.qZA(),t.TgZ(7,"th"),t._uU(8,"Stok Diambil"),t.qZA()()(),t.TgZ(9,"tbody"),t.YNc(10,it,7,3,"tr",22),t.qZA()()),2&e){const a=t.oxw(2);t.xp6(10),t.Q6J("ngForOf",a.listBatchObat)}}function lt(e,l){if(1&e&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA()()),2&e){const a=l.$implicit,n=l.index;t.xp6(2),t.Oqu(n+1),t.xp6(2),t.Oqu(a.no_batch),t.xp6(2),t.Oqu(a.jumlah)}}function rt(e,l){if(1&e&&(t.TgZ(0,"table",76)(1,"thead")(2,"tr")(3,"th",77),t._uU(4,"No"),t.qZA(),t.TgZ(5,"th"),t._uU(6,"No Batch"),t.qZA(),t.TgZ(7,"th"),t._uU(8,"Stok Diambil"),t.qZA()()(),t.TgZ(9,"tbody"),t.YNc(10,lt,7,3,"tr",22),t.qZA()()),2&e){const a=t.oxw(2);t.xp6(10),t.Q6J("ngForOf",a.listBatchAlat)}}function dt(e,l){1&e&&(t.TgZ(0,"div",55),t._uU(1," Jumlah tidak boleh kosong "),t.qZA())}function ut(e,l){if(1&e&&(t.TgZ(0,"div",55),t._uU(1),t.qZA()),2&e){const a=t.oxw(2);t.xp6(1),t.hij(" Stok tidak mencukupi dari permintaan, maksimal stok:",a.totalStok," ")}}function ct(e,l){if(1&e&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&e){const a=l.item;t.xp6(1),t.Oqu(a?a.nama_kemasan+" ("+a.target_qty+" "+a.target_kemasan+")":"")}}function _t(e,l){1&e&&t.YNc(0,ct,2,1,"ng-template",80)}function pt(e,l){if(1&e&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&e){const a=l.item;t.xp6(1),t.Oqu(a.nama_kemasan?a.nama_kemasan+" ("+a.target_qty+" "+a.target_kemasan+")":"")}}function ht(e,l){1&e&&t.YNc(0,pt,2,1,"ng-template",81)}function mt(e,l){if(1&e){const a=t.EpF();t.TgZ(0,"ng-select",78),t.NdJ("change",function(s){return t.CHM(a),t.oxw(2).setSatuan(s)}),t.YNc(1,_t,1,0,null,79),t.YNc(2,ht,1,0,null,79),t.qZA()}if(2&e){const a=t.oxw(2);t.ekj("border-danger",a.formBarang.controls.satuan.hasError("required")&&a.submitted),t.Q6J("virtualScroll",!0)("items",a.dataBarang.obat_kemasan)("searchable",!0)("clearable",!0),t.xp6(1),t.Q6J("ngIf",a.dataBarang.obat_kemasan.length>0),t.xp6(1),t.Q6J("ngIf",a.dataBarang.obat_kemasan.length>0)}}function gt(e,l){if(1&e&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&e){const a=l.item;t.xp6(1),t.Oqu(a.nama_kemasan?a.nama_kemasan+" ("+a.target_qty+" "+a.target_kemasan+")":"")}}function ft(e,l){if(1&e&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&e){const a=l.item;t.xp6(1),t.Oqu(a.nama_kemasan?a.nama_kemasan+" ("+a.target_qty+" "+a.target_kemasan+")":"")}}function bt(e,l){if(1&e){const a=t.EpF();t.TgZ(0,"ng-select",82),t.NdJ("change",function(s){return t.CHM(a),t.oxw(2).setSatuan(s)}),t.YNc(1,gt,2,1,"ng-template",80),t.YNc(2,ft,2,1,"ng-template",81),t.qZA()}if(2&e){const a=t.oxw(2);t.ekj("border-danger",a.formBarang.controls.satuan.hasError("required")&&a.submitted),t.Q6J("virtualScroll",!0)("items",a.dataBarang.alat_kesehatan_kemasan)("searchable",!0)("clearable",!0)}}function vt(e,l){1&e&&(t.TgZ(0,"div",55),t._uU(1," Satuan tidak boleh kosong "),t.qZA())}function kt(e,l){1&e&&(t.TgZ(0,"div",55),t._uU(1," Jenis diskon tidak boleh kosong "),t.qZA())}function Zt(e,l){1&e&&(t.TgZ(0,"div",55),t._uU(1," Diskon tidak boleh kosong "),t.qZA())}function Tt(e,l){if(1&e){const a=t.EpF();t.TgZ(0,"div",61)(1,"div",62)(2,"b"),t._UZ(3,"i",63),t._uU(4),t.qZA()(),t.YNc(5,ot,11,1,"table",64),t.YNc(6,rt,11,1,"table",64),t.TgZ(7,"div",65)(8,"label",66),t._uU(9,"Jumlah"),t.qZA(),t.TgZ(10,"div",67)(11,"input",68),t.NdJ("keypress",function(s){return t.CHM(a),t.oxw().isNumber(s)})("change",function(){t.CHM(a);const s=t.oxw();return s.setSatuan_qty(s.isAddObat?s.dataBarang.obat_kemasan:s.dataBarang.alat_kesehatan_kemasan),s.isAddObat?s.getBatchObat():s.getBatchAlat()}),t.qZA(),t.YNc(12,dt,2,0,"div",38),t.YNc(13,ut,2,1,"div",38),t.qZA(),t.TgZ(14,"div",69),t.YNc(15,mt,3,8,"ng-select",70),t.YNc(16,bt,3,6,"ng-select",71),t.YNc(17,vt,2,0,"div",38),t.qZA()(),t.TgZ(18,"div",65)(19,"label",66),t._uU(20,"Diskon"),t.qZA(),t.TgZ(21,"div",67)(22,"select",72)(23,"option",73),t._uU(24,"%"),t.qZA(),t.TgZ(25,"option",74),t._uU(26,"Rp"),t.qZA()(),t.YNc(27,kt,2,0,"div",38),t.qZA(),t.TgZ(28,"div",67)(29,"input",75),t.NdJ("keypress",function(s){return t.CHM(a),t.oxw().isNumber(s)}),t.qZA(),t.YNc(30,Zt,2,0,"div",38),t.qZA()()()}if(2&e){const a=t.oxw();t.xp6(4),t.AsE(" Info Stok: ",a.dataBarang.stok," ",a.isAddObat?a.dataBarang.obat_kemasan[0].nama_kemasan:a.dataBarang.alat_kesehatan_kemasan[0].nama_kemasan,""),t.xp6(1),t.Q6J("ngIf",a.isAddObat&&a.formBarang.value.satuan_qty>0&&null!=a.listBatchObat),t.xp6(1),t.Q6J("ngIf",a.isAddAlat&&a.formBarang.value.satuan_qty>0&&null!=a.listBatchAlat),t.xp6(5),t.ekj("border-danger",a.formBarang.controls.satuan_qty.hasError("required")&&a.submitted),t.Q6J("max",a.dataBarang.stok),t.xp6(1),t.Q6J("ngIf",(a.formBarang.controls.satuan_qty.hasError("required")||0==a.formBarang.value.satuan_qty)&&a.submitted),t.xp6(1),t.Q6J("ngIf",a.satuan_qty>a.totalStok&&a.submitted),t.xp6(2),t.Q6J("ngIf",a.isAddObat),t.xp6(1),t.Q6J("ngIf",a.isAddAlat),t.xp6(1),t.Q6J("ngIf",a.formBarang.controls.satuan.hasError("required")&&a.submitted),t.xp6(5),t.ekj("border-danger",a.formBarang.controls.jenis_diskon.hasError("required")&&a.submitted),t.xp6(5),t.Q6J("ngIf",a.formBarang.controls.jenis_diskon.hasError("required")&&a.submitted),t.xp6(2),t.ekj("border-danger",a.formBarang.controls.diskon_value.hasError("required")&&a.submitted),t.xp6(1),t.Q6J("ngIf",a.formBarang.controls.diskon_value.hasError("required")&&a.submitted)}}function At(e,l){if(1&e){const a=t.EpF();t.TgZ(0,"div",40)(1,"div",41)(2,"button",42),t.NdJ("click",function(){return t.CHM(a),t.oxw().modalClose()}),t._uU(3,"Batal"),t.qZA(),t.TgZ(4,"button",43),t._uU(5,"Simpan"),t.qZA()()()}}function xt(e,l){if(1&e){const a=t.EpF();t.TgZ(0,"div",40)(1,"div",41)(2,"button",42),t.NdJ("click",function(){return t.CHM(a),t.oxw().modalClose()}),t._uU(3,"Batal"),t.qZA()()()}}const yt=function(){return[]},jt=function(){return["/penjualan/penjualan-kasir/view"]};let Ot=(()=>{class e{constructor(a,n,s,i,o,_,x,v,N,S,U,Gt,Rt,Ht){this.ModalService=a,this.ModulPenjualanService=n,this.router=s,this.validate=i,this.fb=o,this.money=_,this.store=x,this.obatService=v,this.alatService=N,this.activatedRoute=S,this.spinner=U,this.StokObat=Gt,this.StokAlat=Rt,this.metodeBayar=Ht,this.datatableElement=m.G,this.dataPenjualan=new p.pF,this.dtOptionsObat={},this.dtOptionsAlat={},this.cekBatch=null,this.totalStok=0,this.title="",this.isAddObat=!1,this.isAddAlat=!1,this.vbFormInputModal=!1,this.optionObat=[],this.optionAlat=[],this.optionKemasan=[],this.listObat=[],this.listBarang=[],this.sub_total=0,this.diskon=0,this.total=0,this.satuan_qty=0,this.jenis_diskon_penjualan="persen",this.diskon_penjualan=0,this.id_penjualan_detail=null,this.id_penjualan_alat_kesehatan=null,this.id_penjualan=null,this.pembayaran="kredit",this.submitted=!1,this.isSave=!1,this.sub_total_all=0,this.indexEdit=null,this.target_qty=[],this.params_get={last_data:"0",get_data:"10",search:""},this.id_obat=null,this.id_alat_kesehatan=null,this.level_satuan=0,this.getState=this.store.select("penjualan")}ngOnInit(){this.loadData(),this.formBarang=this.fb.group({id_obat:"",id_alat_kesehatan:"",satuan_harga:[null,[T.kI.required]],satuan:[null,[T.kI.required]],satuan_qty:[null,[T.kI.required]],jenis_diskon:[null,[T.kI.required]],diskon_value:[0,[T.kI.required]],obat_kemasan:null,alat_kesehatan_kemasan:null}),this.formBayar=this.fb.group({jenis_pembayaran:[null,[T.kI.required]],id_metode_bayar:"",jumlah_pembayaran:[null,[T.kI.required]]})}Money(a){return this.money.formatRupiah(parseInt(a))}isNumber(a){return this.validate.Number(a)}prosesSelectObat(a,n){if("search"==n?(this.optionObat=[],this.params_get.search=a.term,this.params_get.last_data="0"):this.params_get.search="","last_page"==n){let s=parseInt(this.params_get.last_data)+parseInt(this.params_get.get_data);this.params_get.last_data=s.toString()}else this.params_get.last_data="0";this.obatService.get(this.params_get).subscribe(s=>{s&&(0==this.optionObat.length?this.optionObat=s.response:s.response.map(i=>{this.optionObat.findIndex(_=>_.id_obat==i.id_obat)<0&&this.optionObat.push(i)}))})}prosesSelectAlat(a,n){if("search"==n?(this.optionAlat=[],this.params_get.search=a.term,this.params_get.last_data="0"):this.params_get.search="","last_page"==n){let s=parseInt(this.params_get.last_data)+parseInt(this.params_get.get_data);this.params_get.last_data=s.toString()}else this.params_get.last_data="0";this.alatService.get(this.params_get).subscribe(s=>{s&&(0==this.optionAlat.length?this.optionAlat=s.response:s.response.map(i=>{this.optionAlat.findIndex(_=>_.id_alat_kesehatan==i.id_alat_kesehatan)<0&&this.optionAlat.push(i)}))})}prosesSelectMetodeBayar(a,n){this.params_get.search="search"==n?a.term:"",this.metodeBayar.get(this.params_get).subscribe(s=>{this.optionMetodeBayar=s.response})}loadData(){var a=this;this.activatedRoute.params.subscribe(n=>{n&&(this.spinner.show("spinner1"),this.id_penjualan=n.id,this.ModulPenjualanService.show(n.id).subscribe(function(){var s=(0,O.Z)(function*(i){i.metaData.response_code&&(a.jenis_diskon_penjualan=(i=i.response).jenis_diskon,yield a.obatService.get(a.params_get).subscribe(o=>{if(o){a.optionObat=o.response;let _=[];for(let x=0;x<i.penjualan_detail.length;x++){let v=i.penjualan_detail[x],S=[];a.optionObat.map(U=>{U.id_obat==v.id_obat&&(S=U.obat_kemasan)}),_.push({id_obat:v.id_obat,id_penjualan_detail:v.id_penjualan_detail,nama_obat:v.nama_obat,satuan_harga:v.satuan_harga,satuan:v.satuan,satuan_qty:v.satuan_qty,jenis_diskon:v.jenis_diskon,diskon_value:"persen"==v.jenis_diskon?v.diskon_persen:v.diskon_rupiah,kemasan_konversi:v.satuan_konversi,obat_kemasan:S,target_kemasan:v.total_qty,sub_total:v.total_harga})}a.listObat=_}}),yield a.alatService.get(a.params_get).subscribe(o=>{if(o){a.optionAlat=o.response;let _=[];for(let x=0;x<i.penjualan_alat_kesehatan.length;x++){let v=i.penjualan_alat_kesehatan[x],S=[];a.optionAlat.map(U=>{U.id_alat_kesehatan==v.id_alat_kesehatan&&(S=U.alat_kesehatan_kemasan)}),_.push({id_alat_kesehatan:v.id_alat_kesehatan,nama_alat_kesehatan:v.nama_alat_kesehatan,id_penjualan_alat_kesehatan:v.id_penjualan_alat_kesehatan,satuan_harga:v.satuan_harga,satuan:v.satuan,satuan_qty:v.satuan_qty,jenis_diskon:v.jenis_diskon,diskon_value:"persen"==v.jenis_diskon?v.diskon_persen:v.diskon_rupiah,kemasan_konversi:v.satuan_konversi,alat_kesehatan_kemasan:S,target_kemasan:v.total_qty,sub_total:v.total_harga})}a.listBarang=_}}),a.spinner.hide("spinner1")),a.spinner.hide("spinner1")});return function(i){return s.apply(this,arguments)}}()))})}setKemasan(a){this.totalStok=0,this.formBarang.patchValue({satuan:null}),this.level_satuan=0,null!=a?(this.dataBarang=a,this.formBarang.patchValue({satuan_harga:a.harga_jual}),this.vbFormInputModal=!0,this.isAddObat?(this.formBarang.id_obat=a.id_obat,this.dataBarang.obat_kemasan=this.dataBarang.obat_kemasan.sort((n,s)=>n.kemasan_level-s.kemasan_level)):(this.formBarang.id_alat_kesehatan=a.id_alat_kesehatan,this.dataBarang.alat_kesehatan_kemasan=this.dataBarang.alat_kesehatan_kemasan.sort((n,s)=>n.kemasan_level-s.kemasan_level))):(this.id_alat_kesehatan=null,this.id_obat=null)}edit(a,n,s){this.indexEdit=n,"obat"==s?(this.isAddObat=!0,this.isAddAlat=!1,this.formBarang.id_obat=a.id_obat,this.id_obat=a.id_obat,this.title="Edit Obat",this.optionObat.map(i=>{i.id_obat==a.id_obat&&(i.obat_kemasan=i.obat_kemasan.sort((o,_)=>o.kemasan_level-_.kemasan_level),this.dataBarang=i,this.dataBarang.obat_kemasan.map(o=>{o.nama_kemasan==a.satuan&&(this.setSatuan(o),this.dataSatuan=o)}))}),this.listBatchObat=null,this.id_penjualan_detail=a.id_penjualan_detail,this.formBarang.patchValue({id_alat_kesehatan:"",id_obat:a.id_obat,satuan:a.satuan,satuan_harga:a.satuan_harga,satuan_qty:a.satuan_qty,jenis_diskon:a.jenis_diskon,diskon_value:a.diskon_value}),this.getBatchObat()):(this.title="Edit Alat Kesehatan",this.listBatchAlat=null,this.formBarang.id_alat_kesehatan=a.id_alat_kesehatan,this.id_alat_kesehatan=a.id_alat_kesehatan,this.optionAlat.map(i=>{i.id_alat_kesehatan==a.id_alat_kesehatan&&(this.setSatuan(i),i.alat_kesehatan_kemasan=i.alat_kesehatan_kemasan.sort((o,_)=>o.kemasan_level-_.kemasan_level),this.dataBarang=i)}),this.id_penjualan_alat_kesehatan=a.id_penjualan_alat_kesehatan,this.formBarang.patchValue({id_alat_kesehatan:a.id_alat_kesehatan,id_obat:"",satuan:a.satuan,satuan_harga:a.satuan_harga,satuan_qty:a.satuan_qty,jenis_diskon:a.jenis_diskon,diskon_value:a.diskon_value}),this.isAddObat=!1,this.isAddAlat=!0,this.getBatchAlat()),this.modalOpen(),this.vbFormInputModal=!0,this.submitted=!1}add(a){this.formBarang.reset(),"obat"==a?(this.isAddObat=!0,this.isAddAlat=!1,this.title="Add Obat",this.listBatchObat=null):(this.listBatchAlat=null,this.isAddObat=!1,this.isAddAlat=!0,this.title="Add Alat Kesehatan"),this.formBarang.patchValue({jenis_diskon:"persen",diskon_value:0}),this.id_obat=null,this.satuan_qty=0,this.id_alat_kesehatan=null,this.vbFormInputModal=!1,this.submitted=!1,this.indexEdit=null,this.modalOpen()}getBatchObat(){var a=this;return(0,O.Z)(function*(){let n=a.satuan_qty;a.totalStok=0,n>0&&(a.spinner.show("spinner1"),yield a.StokObat.getBatch({id_obat:a.id_obat,jumlah:n}).subscribe(function(){var s=(0,O.Z)(function*(i){a.listBatchObat=i.response,a.listBatchObat.map(o=>{a.totalStok+=o.jumlah}),a.spinner.hide("spinner1")});return function(i){return s.apply(this,arguments)}}()))})()}getBatchAlat(){var a=this;return(0,O.Z)(function*(){let n=a.satuan_qty;n>0&&(a.spinner.show("spinner1"),a.totalStok=0,yield a.StokAlat.getBatch({id_alat_kesehatan:a.id_alat_kesehatan,jumlah:n}).subscribe(function(){var s=(0,O.Z)(function*(i){a.listBatchAlat=i.response,a.listBatchAlat.map(o=>{a.totalStok+=o.jumlah}),a.spinner.hide("spinner1")});return function(i){return s.apply(this,arguments)}}()))})()}cekBatchObat(a,n){return(0,O.Z)(function*(){})()}cekBatchAlat(a,n){var s=this;return(0,O.Z)(function*(){return yield s.StokAlat.getBatch({id_alat_kesehatan:a,jumlah:n}).subscribe(function(){var o=(0,O.Z)(function*(_){s.cekBatch="0000"==_.metaData.response_code?_.response.data:null});return function(_){return o.apply(this,arguments)}}()),null})()}modalOpen(){this.ModalService.open("modalFormContent")}modalClose(){this.ModalService.close("modalFormContent")}modalBayarOpen(){this.ModalService.open("modalBayar")}modalBayarClose(){this.ModalService.close("modalBayar")}setSatuan_qty(a){a&&(this.satuan_qty=1,a.map(n=>{n.kemasan_level<=this.level_satuan&&(this.satuan_qty*=n.total_qty)}),this.satuan_qty*=this.formBarang.value.satuan_qty)}setSatuan(a){a&&(this.level_satuan=a.kemasan_level,1==this.level_satuan?this.satuan_qty=a.target_qty*this.formBarang.value.satuan_qty:this.setSatuan_qty(this.isAddObat?this.dataBarang.obat_kemasan:this.dataBarang.alat_kesehatan_kemasan),this.isAddObat?this.getBatchObat():this.getBatchAlat())}bayar(){this.submitted=!1;let a=0;this.listBarang.forEach(n=>{a+=this.getSub(n.jenis_diskon,n.target_kemasan,n.satuan_harga,n.diskon_value)}),this.listObat.forEach(n=>{a+=this.getSub(n.jenis_diskon,n.target_kemasan,n.satuan_harga,n.diskon_value)}),this.formBayar.patchValue({jenis_pembayaran:"",id_metode_bayar:null,jumlah_pembayaran:a}),this.modalBayarOpen()}submitBayar(){var a=this;if(this.submitted=!1,setTimeout(()=>{this.submitted=!0},300),this.formBayar.invalid)return!1;c().fire({title:"Apa anda yakin?",icon:"warning",showCancelButton:!0,allowOutsideClick:!1,confirmButtonText:"Ya, lanjutkan!",cancelButtonText:"Batal"}).then(n=>{n.isConfirmed?(this.spinner.show("spinner1"),this.ModulPenjualanService.update(this.id_penjualan,this.formBayar.value).subscribe(function(){var s=(0,O.Z)(function*(i){"0000"==i.metaData.response_code&&(setTimeout(()=>{a.spinner.hide("spinner1")},400),a.modalBayarClose(),a.router.navigate(["penjualan/penjualan-kasir/struk/"+a.id_penjualan]))});return function(i){return s.apply(this,arguments)}}())):(this.modalBayarClose(),this.router.navigate(["penjualan/penjualan-kasir"]))})}submitBarang(){var a=this;return(0,O.Z)(function*(){var n,s;if(a.submitted=!1,setTimeout(()=>{a.submitted=!0},300),a.formBarang.invalid)return!1;if(a.satuan_qty<=a.totalStok){if(a.spinner.show("spinner1"),a.isAddObat){let i={satuan_harga:a.formBarang.value.satuan_harga,satuan:a.formBarang.value.satuan,satuan_qty:a.formBarang.value.satuan_qty,jenis_diskon:a.formBarang.value.jenis_diskon,diskon_value:a.formBarang.value.diskon_value,id_obat:a.dataBarang.id_obat,nama_obat:a.dataBarang.nama_obat,obat_kemasan:a.dataBarang.obat_kemasan,kemasan_konversi:null===(n=a.dataSatuan)||void 0===n?void 0:n.kemasan_konversi,target_kemasan:a.formBarang.value.satuan_qty,sub_total:a.getSub(a.formBarang.value.jenis_diskon,a.formBarang.value.satuan_qty,a.formBarang.value.satuan_harga,a.formBarang.value.diskon_value)};null==a.indexEdit?a.ModulPenjualanService.addObat(i,a.id_penjualan).subscribe(o=>{"0000"==o.metaData.response_code?(a.loadData(),a.modalClose(),a.spinner.hide("spinner1")):c().fire({title:"Error",text:o.metaData.message,icon:"error",showCancelButton:!1,allowOutsideClick:!1,confirmButtonText:"OK"})},o=>{c().fire({title:"Error",text:o.metaData.message,icon:"error",showCancelButton:!1,allowOutsideClick:!1,confirmButtonText:"OK"})}):a.ModulPenjualanService.updateObat({id_obat:i.id_obat,satuan:i.satuan,satuan_qty:i.satuan_qty,jenis_diskon:i.jenis_diskon,diskon_value:i.diskon_value},a.id_penjualan_detail).subscribe(_=>{"0000"==_.metaData.response_code?(a.loadData(),a.listBatchObat=[],a.modalClose(),a.spinner.hide("spinner1")):(a.spinner.hide("spinner1"),c().fire({title:"Error",text:_.metaData.message,icon:"error",showCancelButton:!1,allowOutsideClick:!1,confirmButtonText:"OK"}))},_=>{a.spinner.hide("spinner1"),c().fire({title:"Error",text:_.metaData.message,icon:"error",showCancelButton:!1,allowOutsideClick:!1,confirmButtonText:"OK"})})}else{let i={satuan_harga:a.formBarang.value.satuan_harga,satuan:a.formBarang.value.satuan,satuan_qty:a.formBarang.value.satuan_qty,jenis_diskon:a.formBarang.value.jenis_diskon,diskon_value:a.formBarang.value.diskon_value,id_alat_kesehatan:a.dataBarang.id_alat_kesehatan,nama_alat_kesehatan:a.dataBarang.nama_alat_kesehatan,alat_kesehatan_kemasan:a.dataBarang.alat_kesehatan_kemasan,kemasan_konversi:null===(s=a.dataSatuan)||void 0===s?void 0:s.kemasan_konversi,target_kemasan:a.formBarang.value.satuan_qty,sub_total:a.getSub(a.formBarang.value.jenis_diskon,a.formBarang.value.satuan_qty,a.formBarang.value.satuan_harga,a.formBarang.value.diskon_value)};null==a.indexEdit?a.ModulPenjualanService.addAlat(i,a.id_penjualan).subscribe(o=>{"0000"==o.metaData.response_code?(a.loadData(),a.modalClose(),a.spinner.hide("spinner1")):(a.spinner.hide("spinner1"),c().fire({title:"Error",text:o.metaData.message,icon:"error",showCancelButton:!1,allowOutsideClick:!1,confirmButtonText:"OK"}))},o=>{a.spinner.hide("spinner1"),c().fire({title:"Error",text:o.metaData.message,icon:"error",showCancelButton:!1,allowOutsideClick:!1,confirmButtonText:"OK"})}):a.ModulPenjualanService.updateAlat({id_alat_kesehatan:i.id_alat_kesehatan,satuan:i.satuan,satuan_qty:i.satuan_qty,jenis_diskon:i.jenis_diskon,diskon_value:i.diskon_value},a.id_penjualan_alat_kesehatan).subscribe(_=>{(_.metaData.response_code="0000")?(a.loadData(),a.listBatchAlat=[],a.modalClose(),a.spinner.hide("spinner1")):(a.spinner.hide("spinner1"),c().fire({title:"Error",text:_.metaData.message,icon:"error",showCancelButton:!1,allowOutsideClick:!1,confirmButtonText:"OK"}))},_=>{a.spinner.hide("spinner1"),c().fire({title:"Error",text:_.metaData.message,icon:"error",showCancelButton:!1,allowOutsideClick:!1,confirmButtonText:"OK"})})}a.indexEdit=null}})()}updateItem(a,n){}hapus(a,n,s){c().fire({title:"Apa anda yakin?",icon:"warning",showCancelButton:!0,allowOutsideClick:!1,confirmButtonText:"Ya, lanjutkan!",cancelButtonText:"Batal"}).then(i=>{i.isConfirmed&&(this.spinner.show("spinner1"),"obat"==s?(this.listObat=this.listObat.filter(o=>o!==this.listObat[n]),null!=this.id_penjualan&&(this.store.dispatch(r.Lp({id:a.id_penjualan_detail})),setTimeout(()=>{this.spinner.hide("spinner1")},400))):(this.listBarang=this.listBarang.filter(o=>o!==this.listBarang[n]),null!=this.id_penjualan&&(this.store.dispatch(r.yR({id:a.id_penjualan_alat_kesehatan})),setTimeout(()=>{this.spinner.hide("spinner1")},400))))})}toString(a){return JSON.stringify(a)}getSub(a,n,s,i){let o=0;return o="persen"==a?n*s-n*s*(i/100):n*s-i,o}getDiskon(a,n,s,i){let o=0;return o="persen"==a?n*s*(i/100):n*s-i,o}hitungAction(a,n,s,i){this.hitungSub(),this.hitungTotal()}hitungTotal(){let a,n=0;null!=this.jenis_diskon_penjualan?(this.diskon_penjualan=null!=this.diskon_penjualan?this.diskon_penjualan:0,"persen"==this.jenis_diskon_penjualan?(a=this.sub_total_all-this.sub_total_all*(this.diskon_penjualan/100),n=this.sub_total_all*(this.diskon_penjualan/100)):(a=this.sub_total_all-this.diskon_penjualan,n=this.diskon_penjualan)):a=this.sub_total_all,this.total=a,this.diskon=n}setJenisDiskon(a){this.jenis_diskon_penjualan=a.target.value,this.hitungTotal()}setPembayaran(a){this.pembayaran=a.target.value}setDiskon(a){this.diskon_penjualan=a.target.value,this.hitungTotal()}hitungSub(){let a=0;this.listObat.forEach(n=>{a+=n}),this.listBarang.forEach(n=>{a+=n}),this.sub_total_all=a}}return e.\u0275fac=function(a){return new(a||e)(t.Y36(k.Z),t.Y36(y.Y),t.Y36(g.F0),t.Y36(Y.p),t.Y36(T.qu),t.Y36(E.r),t.Y36(f.yh),t.Y36(F.g),t.Y36(K.W),t.Y36(g.gz),t.Y36(Z.t2),t.Y36(Q.O),t.Y36(W.O),t.Y36(G.Z))},e.\u0275cmp=t.Xpm({type:e,selectors:[["add-app"]],viewQuery:function(a,n){if(1&a&&t.Gf(m.G,5),2&a){let s;t.iGM(s=t.CRH())&&(n.datatableElement=s.first)}},decls:116,vars:23,consts:[[1,"content"],[1,"content-block"],[1,"block-header"],[3,"title","items","active_item"],[1,"text-center","mb-4"],[1,"row","clearfix"],[1,"col-xs-12","col-sm-12","col-md-12","col-lg-12"],["type","button",1,"btn","btn-kembali","btn-lg","mb-3",3,"routerLink"],[1,"fas","fa-arrow-left"],["type","button",1,"btn","btn-info","btn-lg","mb-3","pull-right",3,"click"],[1,"fas","fa-plus"],[1,"card"],[1,"body"],["width","100%",1,"table","table-striped","table-bordered","table-sm","mb-3"],[1,"text-center",2,"width","20px"],[1,"col-2","text-center"],[1,"col-1","text-center"],[1,"col-3","text-center",2,"width","50px"],[1,"col-3","text-center",2,"width","30px"],[1,"col-2","text-center",2,"width","30px"],[1,"col-1","text-center",2,"width","70px"],[1,"col-3","text-center"],[4,"ngFor","ngForOf"],[1,"",2,"width","20px"],[1,"my-3","text-center"],[1,"btn","btn-simpan","btn-lg",3,"click"],["id","modalBayar"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],[1,"mt-3",3,"formGroup","submit"],[1,"modal-body"],[1,"row","mb-2"],[1,"col-sm-4","col-form-label","fw-bold"],[1,"col-sm-8"],["type","text","formControlName","jenis_pembayaran",1,"form-control",3,"keypress"],["value",""],["value","tunai"],["value","transfer"],["class","form-text text-danger",4,"ngIf"],["class","row mb-2",4,"ngIf"],[1,"row"],[1,"col-sm-12","text-end"],["type","button",1,"btn","btn-kembali",3,"click"],["type","submit",1,"btn","btn-simpan"],["id","modalFormContent"],["style","flex: 1 1 auto;","name","id_obat","bindLabel","nama_obat","bindValue","id_obat","placeholder","Pilih Obat",3,"ngModel","virtualScroll","searchable","clearable","ngModelChange","change","search","scrollToEnd","open",4,"ngIf"],["style","flex: 1 1 auto;","name","id_alat_kesehatan","bindLabel","nama_alat_kesehatan","bindValue","id_alat_kesehatan","placeholder","Pilih Alat kesehatan",3,"ngModel","virtualScroll","searchable","clearable","ngModelChange","change","search","scrollToEnd","open",4,"ngIf"],["class","",4,"ngIf"],["class","row",4,"ngIf"],["bdColor","rgba(0, 0, 0, 0.8)","size","medium","color","#fff","type","ball-clip-rotate-multiple",3,"name","fullScreen"],[2,"color","white"],[1,"text-end"],[1,"text-center"],[1,"btn","btn-warning",3,"click"],[1,"btn","btn-hapus",3,"click"],[1,"form-text","text-danger"],["formControlName","id_metode_bayar","bindLabel","nama_bank","bindValue","id_metode_bayar","placeholder","Pilih Metode Pembayaran",2,"flex","1 1 auto",3,"virtualScroll","items","searchable","clearable","search","scrollToEnd","open"],["name","id_obat","bindLabel","nama_obat","bindValue","id_obat","placeholder","Pilih Obat",2,"flex","1 1 auto",3,"ngModel","virtualScroll","searchable","clearable","ngModelChange","change","search","scrollToEnd","open"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["name","id_alat_kesehatan","bindLabel","nama_alat_kesehatan","bindValue","id_alat_kesehatan","placeholder","Pilih Alat kesehatan",2,"flex","1 1 auto",3,"ngModel","virtualScroll","searchable","clearable","ngModelChange","change","search","scrollToEnd","open"],[1,""],[1,"alert","alert-info","mb-2"],[1,"fa","fa-info-circle"],["class","table table-striped table-bordered table-sm","width","100%",4,"ngIf"],[1,"row","mb-3"],[1,"col-sm-2","col-form-label","fw-bold"],[1,"col-sm-4"],["type","text","min","0","formControlName","satuan_qty",1,"form-control",3,"max","keypress","change"],[1,"col-sm-6"],["style","flex: 1 1 auto;","formControlName","satuan","bindLabel","nama_kemasan","bindValue","nama_kemasan","placeholder","Pilih Satuan",3,"border-danger","virtualScroll","items","searchable","clearable","change",4,"ngIf"],["style","flex: 1 1 auto;","name","satuan","formControlName","satuan","bindLabel","nama_kemasan","bindValue","nama_kemasan","placeholder","Pilih Satuan",3,"border-danger","virtualScroll","items","searchable","clearable","change",4,"ngIf"],["formControlName","jenis_diskon",1,"form-select"],["value","persen"],["value","rupiah"],["type","text","formControlName","diskon_value",1,"form-control",3,"keypress"],["width","100%",1,"table","table-striped","table-bordered","table-sm"],["width","30"],["formControlName","satuan","bindLabel","nama_kemasan","bindValue","nama_kemasan","placeholder","Pilih Satuan",2,"flex","1 1 auto",3,"virtualScroll","items","searchable","clearable","change"],[4,"ngIf"],["ng-label-tmp",""],["ng-option-tmp",""],["name","satuan","formControlName","satuan","bindLabel","nama_kemasan","bindValue","nama_kemasan","placeholder","Pilih Satuan",2,"flex","1 1 auto",3,"virtualScroll","items","searchable","clearable","change"]],template:function(a,n){1&a&&(t.TgZ(0,"section",0)(1,"div",1)(2,"div",2),t._UZ(3,"app-breadcrumb",3),t.qZA(),t.TgZ(4,"h3",4),t._uU(5,"Buat Penjualan Baru"),t.qZA(),t.TgZ(6,"div",5)(7,"div",6)(8,"button",7),t._UZ(9,"i",8),t._uU(10," Kembali "),t.qZA(),t.TgZ(11,"button",9),t.NdJ("click",function(){return n.add("alat")}),t._UZ(12,"i",10),t._uU(13," AddAlat Kesehatan "),t.qZA(),t.TgZ(14,"button",9),t.NdJ("click",function(){return n.add("obat")}),t._UZ(15,"i",10),t._uU(16," Add Obat "),t.qZA(),t.TgZ(17,"div",6)(18,"div",11)(19,"div",12)(20,"h4")(21,"strong"),t._uU(22,"Obat yang sudah dipilih"),t.qZA()(),t.TgZ(23,"table",13)(24,"thead")(25,"tr")(26,"th",14),t._uU(27,"No"),t.qZA(),t.TgZ(28,"th",15),t._uU(29,"Barang"),t.qZA(),t.TgZ(30,"th",16),t._uU(31,"Harga @"),t.qZA(),t.TgZ(32,"th",17),t._uU(33,"Jumlah Satuan"),t.qZA(),t.TgZ(34,"th",18),t._uU(35,"Satuan Terkecil"),t.qZA(),t.TgZ(36,"th",19),t._uU(37,"Diskon"),t.qZA(),t.TgZ(38,"th",20),t._uU(39,"Subtotal"),t.qZA(),t.TgZ(40,"th",21),t._uU(41,"Aksi"),t.qZA()()(),t.TgZ(42,"tbody"),t.YNc(43,H,20,7,"tr",22),t.qZA()(),t.TgZ(44,"h4")(45,"strong"),t._uU(46,"Barang yang sudah dipilih"),t.qZA()(),t.TgZ(47,"table",13)(48,"thead")(49,"tr")(50,"th",23),t._uU(51,"No"),t.qZA(),t.TgZ(52,"th",15),t._uU(53,"Barang"),t.qZA(),t.TgZ(54,"th",16),t._uU(55,"Harga @"),t.qZA(),t.TgZ(56,"th",17),t._uU(57,"Jumlah Satuan"),t.qZA(),t.TgZ(58,"th",19),t._uU(59,"Satuan Terkecil"),t.qZA(),t.TgZ(60,"th",19),t._uU(61,"Diskon"),t.qZA(),t.TgZ(62,"th",20),t._uU(63,"Subtotal"),t.qZA(),t.TgZ(64,"th",21),t._uU(65,"Aksi"),t.qZA()()(),t.TgZ(66,"tbody"),t.YNc(67,V,20,7,"tr",22),t.qZA()(),t.TgZ(68,"div",24)(69,"button",25),t.NdJ("click",function(){return n.bayar()}),t._uU(70,"Bayar"),t.qZA()()()()()(),t.TgZ(71,"jw-modal",26)(72,"div",27)(73,"h4",28),t._uU(74,"Form Pembayaran"),t.qZA()(),t.TgZ(75,"form",29),t.NdJ("submit",function(){return n.submitBayar()}),t.TgZ(76,"div",30)(77,"div",31)(78,"label",32),t._uU(79,"Jenis Pembayaran"),t.qZA(),t.TgZ(80,"div",33)(81,"select",34),t.NdJ("keypress",function(i){return n.isNumber(i)}),t.TgZ(82,"option",35),t._uU(83,"--- Pilih Jenis Pembayaran ---"),t.qZA(),t.TgZ(84,"option",36),t._uU(85,"Tunai"),t.qZA(),t.TgZ(86,"option",37),t._uU(87,"Transfer"),t.qZA()(),t.YNc(88,z,2,0,"div",38),t.qZA()(),t.YNc(89,tt,6,7,"div",39),t.TgZ(90,"div",31)(91,"label",32),t._uU(92,"Total Pembayaran"),t.qZA(),t.TgZ(93,"div",33)(94,"b"),t._uU(95),t.qZA()()()(),t.TgZ(96,"div",40)(97,"div",41)(98,"button",42),t.NdJ("click",function(){return n.modalBayarClose()}),t._uU(99,"Batal"),t.qZA(),t.TgZ(100,"button",43),t._uU(101,"Simpan"),t.qZA()()()()(),t.TgZ(102,"jw-modal",44)(103,"div",27)(104,"h4",28),t._uU(105),t.qZA()(),t.TgZ(106,"div",30),t.YNc(107,et,2,5,"ng-select",45),t.YNc(108,st,2,5,"ng-select",46),t.TgZ(109,"form",29),t.NdJ("submit",function(){return n.submitBarang()}),t.YNc(110,Tt,31,18,"div",47),t.YNc(111,At,6,0,"div",48),t.YNc(112,xt,4,0,"div",48),t.qZA()()()()(),t.TgZ(113,"ngx-spinner",49)(114,"p",50),t._uU(115," Loading... "),t.qZA()()()),2&a&&(t.xp6(3),t.Q6J("title","Penjualan")("items",t.DdM(21,yt))("active_item","Buat Penjualan Baru"),t.xp6(5),t.Q6J("routerLink",t.DdM(22,jt)),t.xp6(35),t.Q6J("ngForOf",n.listObat),t.xp6(24),t.Q6J("ngForOf",n.listBarang),t.xp6(8),t.Q6J("formGroup",n.formBayar),t.xp6(6),t.ekj("border-danger",n.formBayar.controls.jenis_pembayaran.hasError("required")&&n.submitted),t.xp6(7),t.Q6J("ngIf",n.formBayar.controls.jenis_pembayaran.hasError("required")&&n.submitted),t.xp6(1),t.Q6J("ngIf","transfer"==n.formBayar.value.jenis_pembayaran),t.xp6(6),t.Oqu(n.Money(n.formBayar.value.jumlah_pembayaran)),t.xp6(10),t.Oqu(n.title),t.xp6(2),t.Q6J("ngIf",n.isAddObat),t.xp6(1),t.Q6J("ngIf",n.isAddAlat),t.xp6(1),t.Q6J("formGroup",n.formBarang),t.xp6(1),t.Q6J("ngIf",1==n.vbFormInputModal),t.xp6(1),t.Q6J("ngIf",1==n.vbFormInputModal),t.xp6(1),t.Q6J("ngIf",1!=n.vbFormInputModal),t.xp6(1),t.Q6J("name","spinner1")("fullScreen",!0))},directives:[D.L,g.rH,b.sg,R.z,T._Y,T.JL,T.sg,T.EJ,T.JJ,T.u,T.YN,T.Kr,b.O5,P.w9,T.On,P.jq,T.Fj,P.mR,P.ir,Z.Ro],styles:[""]}),e})();var Bt=d(15439);function qt(e,l){if(1&e&&(t.TgZ(0,"div",14)(1,"div",21)(2,"div",22)(3,"div",23)(4,"div",24),t._uU(5,"No Faktur"),t.qZA(),t.TgZ(6,"div",24),t._uU(7),t.qZA()(),t.TgZ(8,"div",23)(9,"div",24),t._uU(10,"Metode Pembayaran"),t.qZA(),t.TgZ(11,"div",24),t._uU(12),t.qZA()(),t.TgZ(13,"div",23)(14,"div",24),t._uU(15,"Diskon"),t.qZA(),t.TgZ(16,"div",24),t._uU(17),t.qZA()()(),t.TgZ(18,"div",22)(19,"h3")(20,"b"),t._uU(21),t.qZA()()()()()),2&e){const a=t.oxw();t.xp6(7),t.hij(": ",a.dataDetail.kode_invoice_full,""),t.xp6(5),t.hij(": ",a.dataDetail.metode_pembayaran,""),t.xp6(5),t.hij(": ",a.Money(a.totalDiskon),""),t.xp6(4),t.hij("TOTAL BAYAR:",a.Money(a.dataDetail.total_bayar),"")}}function Mt(e,l){if(1&e&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.qZA(),t.TgZ(13,"td"),t._uU(14),t.qZA()()),2&e){const a=l.$implicit,n=l.index,s=t.oxw(2);t.xp6(2),t.Oqu(n+1),t.xp6(2),t.Oqu(a.nama_obat),t.xp6(2),t.Oqu(s.Money(a.satuan_harga)),t.xp6(2),t.Oqu(a.satuan_qty),t.xp6(2),t.Oqu(a.satuan),t.xp6(2),t.Oqu(s.Money(a.diskon_rupiah)),t.xp6(2),t.Oqu(s.Money(a.sub_total))}}function Ct(e,l){if(1&e&&(t.TgZ(0,"tbody"),t.YNc(1,Mt,15,7,"tr",25),t.qZA()),2&e){const a=t.oxw();t.xp6(1),t.Q6J("ngForOf",a.dataDetail.penjualan_detail)}}function wt(e,l){if(1&e&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.qZA(),t.TgZ(13,"td"),t._uU(14),t.qZA()()),2&e){const a=l.$implicit,n=l.index,s=t.oxw(2);t.xp6(2),t.Oqu(n+1),t.xp6(2),t.Oqu(a.nama_alat_kesehatan),t.xp6(2),t.Oqu(s.Money(a.satuan_harga)),t.xp6(2),t.Oqu(a.satuan_qty),t.xp6(2),t.Oqu(a.satuan),t.xp6(2),t.Oqu(s.Money(a.diskon_rupiah)),t.xp6(2),t.Oqu(s.Money(a.sub_total))}}function St(e,l){if(1&e&&(t.TgZ(0,"tbody"),t.YNc(1,wt,15,7,"tr",25),t.qZA()),2&e){const a=t.oxw();t.xp6(1),t.Q6J("ngForOf",a.dataDetail.penjualan_alat_kesehatan)}}function Ut(e,l){if(1&e&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td",30),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td",30),t._uU(10),t.qZA()()),2&e){const a=l.$implicit,n=l.index,s=t.oxw(2);t.xp6(2),t.Oqu(n+1),t.xp6(2),t.Oqu(a.nama_obat),t.xp6(2),t.Oqu(s.Money(a.satuan_harga)),t.xp6(2),t.Oqu(a.satuan_qty),t.xp6(2),t.Oqu(s.Money(a.sub_total))}}function Et(e,l){if(1&e&&(t.TgZ(0,"div",26)(1,"div",13)(2,"h2"),t._uU(3,"KWITANSI PEMBELIAN OBAT"),t.qZA(),t.TgZ(4,"p"),t._uU(5),t.qZA()(),t.TgZ(6,"div",27)(7,"p"),t._uU(8),t.qZA(),t.TgZ(9,"p"),t._uU(10),t.qZA(),t.TgZ(11,"p"),t._uU(12),t.qZA()(),t.TgZ(13,"div",28)(14,"table")(15,"tr")(16,"th"),t._uU(17,"No"),t.qZA(),t.TgZ(18,"th"),t._uU(19,"Nama Obat"),t.qZA(),t.TgZ(20,"th"),t._uU(21,"Harga"),t.qZA(),t.TgZ(22,"th"),t._uU(23,"Qty"),t.qZA(),t.TgZ(24,"th"),t._uU(25,"Total"),t.qZA()(),t.TgZ(26,"tbody"),t.YNc(27,Ut,11,5,"tr",25),t.qZA()()(),t.TgZ(28,"div",29)(29,"p"),t._uU(30),t.qZA(),t._UZ(31,"p"),t.TgZ(32,"p"),t._uU(33),t.qZA(),t.TgZ(34,"p"),t._uU(35),t.qZA()(),t.TgZ(36,"div",27)(37,"p"),t._uU(38,"Terima kasih atas kunjungan Anda!"),t.qZA()()()),2&e){const a=t.oxw();t.xp6(5),t.hij("Apotek ",a.klinik,""),t.xp6(3),t.hij("Tanggal: ",a.convertDate(a.dataDetail.created_at_unix),""),t.xp6(2),t.hij("No. Kwitansi: ",a.dataDetail.kode_invoice_full,""),t.xp6(2),t.hij("Kasir: ",a.dataDetail.akun.nama_lengkap,""),t.xp6(15),t.Q6J("ngForOf",a.dataDetail.penjualan_detail),t.xp6(3),t.hij("Subtotal: ",a.Money(a.dataDetail.total_bayar),""),t.xp6(3),t.hij("PPN (11%): ",a.Money(a.ppn),""),t.xp6(2),t.hij("Total: ",a.Money(a.total),"")}}const Pt=function(){return["Penjualan Kasir"]},Dt=function(){return["/penjualan/data-penjualan/view"]},Nt=[{path:"",redirectTo:"view",pathMatch:"full"},{path:"view",component:L},{path:"add/:id",component:Ot},{path:"struk/:id",component:(()=>{class e{constructor(a,n,s,i,o,_){this.ModalService=a,this.ModulPenjualanService=n,this.router=s,this.money=i,this.activatedRoute=o,this.store=_,this.dataPenjualan=new p.pF,this.total=0,this.totalDiskon=0,this.klinik="",this.ppn=0,this.getState=this.store.select("penjualan")}ngOnInit(){$("#contentPrint").hide(),this.session=localStorage.getItem("currentUser"),this.session=this.session?JSON.parse(this.session):null,this.session&&this.session.plant.map(a=>{1==a.status&&(this.klinik=a.nama)}),this.activatedRoute.params.subscribe(a=>{a&&this.ModulPenjualanService.show(a.id).subscribe(n=>{setTimeout(()=>{this.dataDetail=n.response,this.dataDetail.penjualan_detail.map(s=>{this.totalDiskon+=Number(s.diskon_rupiah)}),this.dataDetail.penjualan_alat_kesehatan.map(s=>{this.totalDiskon+=Number(s.diskon_rupiah)}),this.ppn=.11*parseInt(this.dataDetail.total_bayar),this.total=parseInt(this.dataDetail.total_bayar)-this.ppn},400)})})}convertDate(a){return Bt(new Date(a)).format("DD-MM-YYYY")}Money(a){return this.money.formatRupiah(parseInt(a))}print(){let a=$("#contentPrint").show().html();$("body").html(a),window.print(),location.reload()}}return e.\u0275fac=function(a){return new(a||e)(t.Y36(k.Z),t.Y36(y.Y),t.Y36(g.F0),t.Y36(E.r),t.Y36(g.gz),t.Y36(f.yh))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-struk"]],decls:65,vars:12,consts:[[1,"content"],[1,"content-block"],[1,"block-header"],[3,"title","items","active_item"],[1,"text-center","mb-4"],[1,"row","clearfix"],[1,"col-xs-12","col-sm-12","col-md-12","col-lg-12"],["type","button","id","kembali",1,"btn","btn-kembali","btn-lg","mb-3",3,"routerLink"],[1,"fas","fa-arrow-left"],["type","button","id","print",1,"btn","btn-tambah","btn-lg","mb-3","pull-right",3,"click"],[1,"fas","fa-print"],[1,"card"],["class","body",4,"ngIf"],[1,"header"],[1,"body"],["width","100%",1,"table","table-striped","table-bordered","table-sm"],[4,"ngIf"],["id","contentPrint"],["class","container","style","font-family: 'Courier New', monospace;\n            font-size: 10pt; ",4,"ngIf"],["bdColor","rgba(0, 0, 0, 0.8)","size","medium","color","#fff","type","ball-clip-rotate-multiple",3,"name","fullScreen"],[2,"color","white"],[1,"row"],[1,"col-md-6"],[1,"row","mb-2"],[1,"col-6"],[4,"ngFor","ngForOf"],[1,"container",2,"font-family","'Courier New', monospace","font-size","10pt"],[1,"info"],[1,"items"],[1,"total"],["align","right"]],template:function(a,n){1&a&&(t.TgZ(0,"section",0)(1,"div",1)(2,"div",2),t._UZ(3,"app-breadcrumb",3),t.qZA(),t.TgZ(4,"h3",4),t._uU(5,"Struk Penjualan"),t.qZA(),t.TgZ(6,"div",5)(7,"div",6)(8,"button",7),t._UZ(9,"i",8),t._uU(10," Kembali "),t.qZA(),t.TgZ(11,"button",9),t.NdJ("click",function(){return n.print()}),t._UZ(12,"i",10),t._uU(13," Print"),t.qZA(),t.TgZ(14,"div",11),t.YNc(15,qt,22,4,"div",12),t.TgZ(16,"div",13)(17,"b"),t._uU(18,"Penjualan Obat"),t.qZA()(),t.TgZ(19,"div",14)(20,"table",15)(21,"thead")(22,"tr")(23,"th"),t._uU(24,"No"),t.qZA(),t.TgZ(25,"th"),t._uU(26,"Nama Barang"),t.qZA(),t.TgZ(27,"th"),t._uU(28,"Harga"),t.qZA(),t.TgZ(29,"th"),t._uU(30,"Jumlah"),t.qZA(),t.TgZ(31,"th"),t._uU(32,"Satuan"),t.qZA(),t.TgZ(33,"th"),t._uU(34,"Diskon"),t.qZA(),t.TgZ(35,"th"),t._uU(36,"Sub Total"),t.qZA()()(),t.YNc(37,Ct,2,1,"tbody",16),t.qZA()(),t.TgZ(38,"div",13)(39,"b"),t._uU(40,"Penjualan Alat Kesehatan"),t.qZA()(),t.TgZ(41,"div",14)(42,"table",15)(43,"thead")(44,"tr")(45,"th"),t._uU(46,"No"),t.qZA(),t.TgZ(47,"th"),t._uU(48,"Nama Barang"),t.qZA(),t.TgZ(49,"th"),t._uU(50,"Harga"),t.qZA(),t.TgZ(51,"th"),t._uU(52,"Jumlah"),t.qZA(),t.TgZ(53,"th"),t._uU(54,"Satuan"),t.qZA(),t.TgZ(55,"th"),t._uU(56,"Diskon"),t.qZA(),t.TgZ(57,"th"),t._uU(58,"Sub Total"),t.qZA()()(),t.YNc(59,St,2,1,"tbody",16),t.qZA()()(),t.TgZ(60,"div",17),t.YNc(61,Et,39,8,"div",18),t.qZA()()()(),t.TgZ(62,"ngx-spinner",19)(63,"p",20),t._uU(64," Loading... "),t.qZA()()()),2&a&&(t.xp6(3),t.Q6J("title","Struk Penjualan")("items",t.DdM(10,Pt))("active_item","Struk Penjualan"),t.xp6(5),t.Q6J("routerLink",t.DdM(11,Dt)),t.xp6(7),t.Q6J("ngIf",null!=n.dataDetail),t.xp6(22),t.Q6J("ngIf",null!=n.dataDetail),t.xp6(22),t.Q6J("ngIf",null!=n.dataDetail),t.xp6(2),t.Q6J("ngIf",null!=n.dataDetail),t.xp6(1),t.Q6J("name","spinner1")("fullScreen",!0))},directives:[D.L,g.rH,b.O5,b.sg,Z.Ro],styles:["",".container[_ngcontent-%COMP%] {\n\t\t\t\t\tmax-width: 400px;\n\t\t\t\t\tmargin: 0 auto;\n\t\t\t\t\tpadding: 10px;\n\t\t\t\t\tborder: 1px solid #ccc;\n\t\t\t\t\tbox-shadow: 0 0 5px rgba(0, 0, 0, 0.2);\n\t\t\t\t}\n\t\t\t\t.header[_ngcontent-%COMP%] {\n\t\t\t\t\ttext-align: center;\n\t\t\t\t\tborder-bottom: 2px solid #ccc;\n\t\t\t\t\tpadding-bottom: 5px;\n\t\t\t\t\tmargin-bottom: 5px;\n\t\t\t\t}\n\t\t\t\t.info[_ngcontent-%COMP%] {\n\t\t\t\t\tfont-size: 8pt;\n\t\t\t\t\ttext-align: center;\n\t\t\t\t\tmargin-top: 5px;\n\t\t\t\t}\n\t\t\t\t.items[_ngcontent-%COMP%] {\n\t\t\t\t\tmargin-top: 5px;\n\t\t\t\t\tborder-top: 1px solid #ccc;\n\t\t\t\t\tborder-bottom: 1px solid #ccc;\n\t\t\t\t\tpadding: 5px 0;\n\t\t\t\t}\n\t\t\t\ttable[_ngcontent-%COMP%] {\n\t\t\t\t\twidth: 100%;\n\t\t\t\t\tborder-collapse: collapse;\n\t\t\t\t}\n\t\t\t\tth[_ngcontent-%COMP%], td[_ngcontent-%COMP%] {\n\t\t\t\t\tborder: none;\n\t\t\t\t\tborder-bottom: 1px solid #ccc;\n\t\t\t\t\tpadding: 5px;\n\t\t\t\t\ttext-align: left;\n\t\t\t\t}\n\t\t\t\tth[_ngcontent-%COMP%] {\n\t\t\t\t\tfont-weight: bold;\n\t\t\t\t\tborder-top: 1px solid #ccc;\n\t\t\t\t}\n\t\t\t\t.total[_ngcontent-%COMP%] {\n\t\t\t\t\tmargin-top: 5px;\n\t\t\t\t\ttext-align: right;\n\t\t\t\t\tfont-weight: bold;\n\t\t\t\t\tborder-top: 2px solid #ccc;\n\t\t\t\t\tpadding-top: 5px;\n\t\t\t\t}"]}),e})()}];let It=(()=>{class e{}return e.\u0275fac=function(a){return new(a||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[g.Bz.forChild(Nt)],g.Bz]}),e})();var Jt=d(60795),u=d(36642),Lt=d(8202),Yt=d(16270);const Ft=(0,f.Lq)({PenjualanPayload:null,ObatPayload:null,AlatPayload:null,isLoadingButton:!1,errorMessage:null,reloadTable:!1,submitButton:!1,isEdit:!1},(0,f.on)(r.sq,(e,l)=>Object.assign(Object.assign({},e),{isLoadingButton:!0,errorMessage:null,isEdit:!1,reloadTable:!1})),(0,f.on)(r.$E,(e,l)=>Object.assign(Object.assign({},e),{isLoadingButton:!0,PenjualanPayload:l.payload,reloadTable:!1})),(0,f.on)(r.wk,(e,l)=>Object.assign(Object.assign({},e),{isLoadingButton:!1,errorMessage:l.message,isEdit:!1,reloadTable:!1})),(0,f.on)(r.KK,(e,l)=>Object.assign(Object.assign({},e),{isLoadingButton:!0,errorMessage:null,isEdit:!1,reloadTable:!1})),(0,f.on)(r.qN,(e,l)=>Object.assign(Object.assign({},e),{isLoadingButton:!0,PenjualanPayload:l.payload,reloadTable:!1})),(0,f.on)(r.LC,(e,l)=>Object.assign(Object.assign({},e),{isLoadingButton:!1,errorMessage:l.message,isEdit:!1,reloadTable:!1})),(0,f.on)(r.HW,(e,l)=>Object.assign(Object.assign({},e),{isLoadingButton:!1,errorMessage:null,isEdit:!1,PenjualanPayload:new p.pF,reloadTable:!1})),(0,f.on)(r.q1,(e,l)=>Object.assign(Object.assign({},e),{isLoadingButton:!1,errorMessage:null,isEdit:!0,PenjualanPayload:l.payload,reloadTable:!1})),(0,f.on)(r.aV,(e,l)=>Object.assign(Object.assign({},e),{isLoadingButton:!1,errorMessage:l.message,isEdit:!1,reloadTable:!1})),(0,f.on)(r.Fi,(e,l)=>Object.assign(Object.assign({},e),{isLoadingButton:!1,errorMessage:null,isEdit:!1,reloadTable:!1,PenjualanPayload:new p.pF})),(0,f.on)(r.Vi,(e,l)=>Object.assign(Object.assign({},e),{isLoadingButton:!1,errorMessage:null,isEdit:!1,reloadTable:!1})),(0,f.on)(r.Wb,(e,l)=>Object.assign(Object.assign({},e),{isLoadingButton:!1,errorMessage:l.message,isEdit:!1,reloadTable:!1})),(0,f.on)(r.dQ,(e,l)=>Object.assign(Object.assign({},e),{reloadTable:!0})),(0,f.on)(r.Kt,(e,l)=>Object.assign(Object.assign({},e),{PenjualanPayload:new p.pF,errorMessage:null,isEdit:!1,reloadTable:!1,isLoadingButton:!1})),(0,f.on)(r.Nk,(e,l)=>Object.assign(Object.assign({},e),{isLoadingButton:!0,errorMessage:null,isEdit:!1,reloadTable:!1})),(0,f.on)(r.w$,(e,l)=>Object.assign(Object.assign({},e),{isLoadingButton:!0,ObatPayload:l.payload,reloadTable:!1})),(0,f.on)(r.Wo,(e,l)=>Object.assign(Object.assign({},e),{isLoadingButton:!1,errorMessage:l.message,isEdit:!1,reloadTable:!1})),(0,f.on)(r.aM,(e,l)=>Object.assign(Object.assign({},e),{isLoadingButton:!0,errorMessage:null,isEdit:!1,reloadTable:!1})),(0,f.on)(r.m2,(e,l)=>Object.assign(Object.assign({},e),{isLoadingButton:!0,ObatPayload:l.payload,reloadTable:!1})),(0,f.on)(r.O2,(e,l)=>Object.assign(Object.assign({},e),{isLoadingButton:!1,errorMessage:l.message,isEdit:!1,reloadTable:!1})),(0,f.on)(r.Lp,(e,l)=>Object.assign(Object.assign({},e),{isLoadingButton:!1,errorMessage:null,isEdit:!1,reloadTable:!1,ObatPayload:new p.qn})),(0,f.on)(r.zN,(e,l)=>Object.assign(Object.assign({},e),{isLoadingButton:!1,errorMessage:null,isEdit:!1,reloadTable:!1})),(0,f.on)(r.MB,(e,l)=>Object.assign(Object.assign({},e),{isLoadingButton:!1,errorMessage:l.message,isEdit:!1,reloadTable:!1})),(0,f.on)(r.uG,(e,l)=>Object.assign(Object.assign({},e),{isLoadingButton:!0,errorMessage:null,isEdit:!1,reloadTable:!1})),(0,f.on)(r.$W,(e,l)=>Object.assign(Object.assign({},e),{isLoadingButton:!0,AlatPayload:l.payload,reloadTable:!1})),(0,f.on)(r.i4,(e,l)=>Object.assign(Object.assign({},e),{isLoadingButton:!1,errorMessage:l.message,isEdit:!1,reloadTable:!1})),(0,f.on)(r.CM,(e,l)=>Object.assign(Object.assign({},e),{isLoadingButton:!0,errorMessage:null,isEdit:!1,reloadTable:!1})),(0,f.on)(r.Td,(e,l)=>Object.assign(Object.assign({},e),{isLoadingButton:!0,AlatPayload:l.payload,reloadTable:!1})),(0,f.on)(r.oI,(e,l)=>Object.assign(Object.assign({},e),{isLoadingButton:!1,errorMessage:l.message,isEdit:!1,reloadTable:!1})),(0,f.on)(r.yR,(e,l)=>Object.assign(Object.assign({},e),{isLoadingButton:!1,errorMessage:null,isEdit:!1,reloadTable:!1,AlatPayload:new p.X6})),(0,f.on)(r.K7,(e,l)=>Object.assign(Object.assign({},e),{isLoadingButton:!1,errorMessage:null,isEdit:!1,reloadTable:!1})),(0,f.on)(r.VL,(e,l)=>Object.assign(Object.assign({},e),{isLoadingButton:!1,errorMessage:l.message,isEdit:!1,reloadTable:!1})));function Kt(e,l){return Ft(e,l)}var B=d(63900),j=d(54004),q=d(70262),w=d(18505),M=d(39646);let Qt=(()=>{class e{constructor(a,n,s){this.actions$=a,this.ModulPenjualanService=n,this.router=s,this.urlBacktoView=["penjualan","penjualan-kasir"],this.addInitial$=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(r.sq),(0,B.w)(i=>this.ModulPenjualanService.add().pipe((0,j.U)(o=>r.$E({payload:o.response})),(0,q.K)(o=>(0,M.of)(r.wk({message:o}))))))),this.addSuccess$=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(r.$E),(0,w.b)(i=>{c().fire({title:"Data berhasil disimpan",icon:"success",showCancelButton:!1,allowOutsideClick:!1,confirmButtonText:"Ya, lanjutkan!"}).then(o=>r.dQ())})),{dispatch:!1}),this.addFailure$=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(r.wk)),{dispatch:!1}),this.updateInitial$=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(r.KK),(0,B.w)(i=>this.ModulPenjualanService.update(i.id,i.payload).pipe((0,j.U)(o=>{if("0000"==o.metaData.response_code)return r.qN({payload:o.response,id:i.id});this.Toast.fire({icon:"error",title:o.metaData.message})}),(0,q.K)(o=>(this.Toast.fire({icon:"error",title:o.metaData.message}),(0,M.of)(r.LC({message:o})))))))),this.updateSuccess$=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(r.qN),(0,w.b)(i=>{c().fire({title:"Data berhasil disimpan",icon:"success",showCancelButton:!1,allowOutsideClick:!1,confirmButtonText:"Ya, lanjutkan!"}).then(o=>{this.router.navigate(["penjualan","penjualan-kasir","view"])})})),{dispatch:!1}),this.updateFailure$=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(r.LC)),{dispatch:!1}),this.getByIdInitial$=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(r.HW),(0,B.w)(i=>this.ModulPenjualanService.show(i.payload.id).pipe((0,j.U)(o=>r.q1({payload:o.response})),(0,q.K)(o=>(0,M.of)(r.aV({message:o}))))))),this.getByIdFailure$=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(r.aV)),{dispatch:!1}),this.delete$=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(r.Fi),(0,B.w)(i=>this.ModulPenjualanService.delete(i.payload.id).pipe((0,j.U)(o=>r.Vi({payload:o.response})),(0,q.K)(o=>(0,M.of)(r.Wb({message:o}))))))),this.deleteSuccess$=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(r.Vi),(0,j.U)(i=>(this.Toast.fire({icon:"success",title:"Data berhasil dihapus"}),r.dQ())))),this.deleteFailure$=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(r.Wb)),{dispatch:!1}),this.addObatInitial$=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(r.Nk),(0,B.w)(i=>this.ModulPenjualanService.addObat(i.payload,i.id).pipe((0,j.U)(o=>r.w$({payload:o.response})),(0,q.K)(o=>{if(o.response.length>0){let _="";o.response.map(x=>{_+=x.message}),this.Toast.fire({icon:"error",title:_})}else this.Toast.fire({icon:"error",title:o.metaData.message});return(0,M.of)(r.Wo({message:o}))}))))),this.addObatSuccess$=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(r.w$),(0,w.b)(i=>{this.Toast.fire({icon:"success",title:"Data berhasil disimpan"})})),{dispatch:!1}),this.addObatFailure$=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(r.Wo)),{dispatch:!1}),this.updateObatInitial$=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(r.aM),(0,B.w)(i=>this.ModulPenjualanService.updateObat(i.payload,i.id).pipe((0,j.U)(o=>"0000"!=o.metaData.response_code?r.O2({message:o.metaData.message}):r.m2({payload:o.response,id:i.id})),(0,q.K)(o=>(this.Toast.fire({icon:"error",title:o.metaData.message}),(0,M.of)(r.O2({message:o})))))))),this.updateObatSuccess$=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(r.m2),(0,w.b)(i=>{(0,u.l4)(r.$W),(0,w.b)(o=>{this.Toast.fire({icon:"success",title:"Data berhasil disimpan"})})})),{dispatch:!1}),this.updateObatFailure$=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(r.O2)),{dispatch:!1}),this.deleteObat$=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(r.Lp),(0,B.w)(i=>this.ModulPenjualanService.deleteObat(i.id).pipe((0,j.U)(o=>r.zN({payload:o.response})),(0,q.K)(o=>(0,M.of)(r.MB({message:o}))))))),this.deleteObatSuccess$=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(r.zN),(0,j.U)(i=>{this.Toast.fire({icon:"success",title:"Data berhasil dihapus"})})),{dispatch:!1}),this.deleteObatFailure$=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(r.MB)),{dispatch:!1}),this.addAlatInitial$=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(r.uG),(0,B.w)(i=>this.ModulPenjualanService.addAlat(i.payload,i.id).pipe((0,j.U)(o=>r.$W({payload:o.response})),(0,q.K)(o=>{if(o.response.length>0){let _="";o.response.map(x=>{_+=x.field+" "+x.message}),this.Toast.fire({icon:"error",title:_})}else this.Toast.fire({icon:"error",title:o.metaData.message});return(0,M.of)(r.i4({message:o}))}))))),this.addAlatSuccess$=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(r.$W),(0,w.b)(i=>{this.Toast.fire({icon:"success",title:"Data berhasil disimpan"})})),{dispatch:!1}),this.addAlatFailure$=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(r.i4)),{dispatch:!1}),this.updateAlatInitial$=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(r.CM),(0,B.w)(i=>this.ModulPenjualanService.updateAlat(i.payload,i.id).pipe((0,j.U)(o=>r.Td({payload:o.response,id:i.id})),(0,q.K)(o=>(0,M.of)(r.oI({message:o}))))))),this.updateAlatSuccess$=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(r.Td),(0,w.b)(i=>{(0,u.l4)(r.$W),(0,w.b)(o=>{this.Toast.fire({icon:"success",title:"Data berhasil disimpan"})})})),{dispatch:!1}),this.updateAlatFailure$=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(r.oI)),{dispatch:!1}),this.deleteAlat$=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(r.yR),(0,B.w)(i=>this.ModulPenjualanService.deleteAlat(i.id).pipe((0,j.U)(o=>r.K7({payload:o.response})),(0,q.K)(o=>(0,M.of)(r.VL({message:o}))))))),this.deleteAlatSuccess$=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(r.K7),(0,j.U)(i=>{this.Toast.fire({icon:"success",title:"Data berhasil dihapus"})})),{dispatch:!1}),this.deleteAlatFailure$=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(r.VL)),{dispatch:!1}),this.Toast=c().mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:i=>{i.addEventListener("mouseenter",c().stopTimer),i.addEventListener("mouseleave",c().resumeTimer)}})}}return e.\u0275fac=function(a){return new(a||e)(t.LFG(u.eX),t.LFG(y.Y),t.LFG(g.F0))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac}),e})(),Wt=(()=>{class e{}return e.\u0275fac=function(a){return new(a||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[b.ez,It,Jt.K,m.T,Z.ef,T.u5,T.UX,Yt.z,m.T,T.u5,T.UX,Lt.Ud,P.A0,f.Aw.forFeature("penjualan",Kt),u.sQ.forFeature([Qt])]]}),e})()},94554:(C,A,d)=>{d.d(A,{r:()=>g});var b=d(8202),Z=d(5e3);let g=(()=>{class m{formatRupiah(c){if(""!=c&&null!=c&&null!=c&&0!=c){var p=(c=c.toString().replace(".00")).replace(/[^,\d]/g,"").toString().split(","),t=p[0].length%3,k=p[0].substr(0,t),y=p[0].substr(t).match(/\d{3}/gi);return y&&(k+=(t?".":"")+y.join(".")),(k=null!=p[1]?k+","+p[1]:k)?"Rp "+k+",00":""}return"Rp 0,00"}currency(){return{align:"left",allowNegative:!0,allowZero:!0,decimal:",",precision:2,prefix:"Rp ",suffix:"",thousands:".",nullable:!0,min:null,max:null,inputMode:b.fF.NATURAL}}}return m.\u0275fac=function(c){return new(c||m)},m.\u0275prov=Z.Yz7({token:m,factory:m.\u0275fac,providedIn:"root"}),m})()},88544:(C,A,d)=>{d.d(A,{p:()=>Z});var b=d(5e3);let Z=(()=>{class g{isNumber(h){return h.match(/^[0-9]+$/)?h:h.replace(/[^0-9]/g,"")}isAlpha(h){return h.match(/^[A-Za-z]+$/)?h:h.replace(/[^A-Za-z]/g,"")}Number(h){const c=h.which?h.which:h.keyCode;return!(46!=c||h.target.value.indexOf(".")>-1)||!(c>31&&(c<48||c>57))}}return g.\u0275fac=function(h){return new(h||g)},g.\u0275prov=b.Yz7({token:g,factory:g.\u0275fac,providedIn:"root"}),g})()},51693:(C,A,d)=>{d.d(A,{z:()=>m});var b=d(5e3),Z=d(44151);const g=["*"];let m=(()=>{class h{constructor(r,p){this.modalService=r,this.el=p,this.element=p.nativeElement}ngOnInit(){this.id?(document.body.appendChild(this.element),this.element.addEventListener("click",r=>{}),this.modalService.add(this)):console.error("modal must have an id")}ngOnDestroy(){this.modalService.remove(this.id),this.element.remove()}open(){this.element.style.display="block",document.body.classList.add("jw-modal-open")}close(){document.body.classList.remove("jw-modal-open"),this.element.classList.add("close"),setTimeout(()=>{this.element.classList.remove("close"),this.element.style.display="none"},900)}}return h.\u0275fac=function(r){return new(r||h)(b.Y36(Z.Z),b.Y36(b.SBq))},h.\u0275cmp=b.Xpm({type:h,selectors:[["jw-modal"]],inputs:{id:"id"},ngContentSelectors:g,decls:4,vars:0,consts:[[1,"jw-modal"],[1,"jw-modal-body"],[1,"jw-modal-background"]],template:function(r,p){1&r&&(b.F$t(),b.TgZ(0,"div",0)(1,"div",1),b.Hsn(2),b.qZA()(),b._UZ(3,"div",2))},styles:["jw-modal{display:none}jw-modal .open{display:none}jw-modal .jw-modal{position:fixed;inset:0;background-color:#eeeeee8e;z-index:1000;overflow:auto}jw-modal .jw-modal .jw-modal-body{animation:fadein .5s;padding:10px 20px;background:#fff;margin:30px auto;width:650px;border-radius:2%;position:relative;z-index:1050}@media (max-width: 767px){jw-modal .jw-modal .jw-modal-body{margin:30px auto;width:calc(100% - 25px)}}jw-modal .jw-modal .jw-modal-body-lg{padding:20px;background:#fff;margin:40px auto;width:900px auto}jw-modal .jw-modal-background{position:fixed;inset:0;background-color:#eeeeee8e;opacity:.75;z-index:900}jw-modal.close .jw-modal .jw-modal-body{animation:unfoldOut .5s .3s cubic-bezier(.165,.84,.44,1) forwards}body.jw-modal-open{overflow:hidden}body.jw-modal-close{overflow:hidden;animation:unfoldOut .5s .3s cubic-bezier(.165,.84,.44,1) forwards}@keyframes fadein{0%{opacity:0}to{opacity:1}}@keyframes unfoldIn{0%{transform:scaleY(.005) scaleX(0)}50%{transform:scaleY(.005) scaleX(1)}to{transform:scaleY(1) scaleX(1)}}@keyframes unfoldOut{0%{transform:scaleY(1) scaleX(1)}50%{transform:scaleY(.005) scaleX(1)}to{transform:scaleY(.005) scaleX(0)}}\n"],encapsulation:2}),h})()},16270:(C,A,d)=>{d.d(A,{z:()=>g});var b=d(69808),Z=d(5e3);let g=(()=>{class m{}return m.\u0275fac=function(c){return new(c||m)},m.\u0275mod=Z.oAB({type:m}),m.\u0275inj=Z.cJS({imports:[[b.ez]]}),m})()},44151:(C,A,d)=>{d.d(A,{Z:()=>Z});var b=d(5e3);let Z=(()=>{class g{constructor(){this.modals=[]}add(h){this.modals.push(h)}remove(h){this.modals=this.modals.filter(c=>c.id!==h)}open(h){this.modals.find(r=>r.id===h).open()}close(h){this.modals.find(r=>r.id===h).close()}}return g.\u0275fac=function(h){return new(h||g)},g.\u0275prov=b.Yz7({token:g,factory:g.\u0275fac,providedIn:"root"}),g})()},15861:(C,A,d)=>{function b(g,m,h,c,r,p,t){try{var k=g[p](t),y=k.value}catch(E){return void h(E)}k.done?m(y):Promise.resolve(y).then(c,r)}function Z(g){return function(){var m=this,h=arguments;return new Promise(function(c,r){var p=g.apply(m,h);function t(y){b(p,c,r,t,k,"next",y)}function k(y){b(p,c,r,t,k,"throw",y)}t(void 0)})}}d.d(A,{Z:()=>Z})}}]);