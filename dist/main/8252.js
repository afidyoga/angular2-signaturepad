"use strict";(self.webpackChunkangularlight=self.webpackChunkangularlight||[]).push([[8252],{88252:(Y,c,r)=>{r.r(c),r.d(c,{PembelianAlatModule:()=>U});var p=r(69808),d=r(65415),f=r(23007),i=r(93075),h=r(15439),t=r(5e3),g=r(6598),b=r(44986),v=r(94554),T=r(33399),m=r(67236);function Z(o,s){1&o&&(t.TgZ(0,"p",23),t._uU(1,"Tanggal transaksi tidak boleh kosong"),t.qZA())}const w=function(){return["Alat"]},A=function(){return{dateInputFormat:"DD/MM/YYYY",rangeInputFormat:"DD/MM/YYYY"}},D=[{path:"",redirectTo:"view",pathMatch:"full"},{path:"view",component:(()=>{class o{constructor(a,e,n,l){this.modulExport=a,this.ModulPembelian=e,this.money=n,this.fb=l,this.datatableElement=d.G,this.dtOptions={},this.search=!1,this.minDate=new Date,this.maxDate=new Date}ngOnInit(){var a=new Date,e=a.getFullYear(),n=a.getMonth();this.minDate=new Date(e,n,1),this.maxDate=new Date(e,n+1,0),this.formInput=this.fb.group({date_from:[[new Date(e,n,1),new Date],[i.kI.required]],pengguna:["all",[i.kI.required]]}),this.dtOptions=this.showDataTables(),this.getState.subscribe(l=>{this.reloadTable=l.reloadTable,!0===this.reloadTable&&this.reLoadData()})}reLoadData(){this.search=!0,!this.formInput.invalid&&this.datatableElement.dtInstance.then(a=>{a.ajax.reload(),this.search=!1})}download(a){const e=window.URL.createObjectURL(new Blob([a],{type:"application/ms-excel"})),n=document.createElement("a");n.href=e,n.setAttribute("download","Laporan Pembelian Alat.xlsx"),document.body.appendChild(n),n.click()}convertTime(a){let e=h(new Date(a)).format("YYYY-MM-DD")+" 00:00:00";return new Date(e).getTime()}export(){if(this.search=!0,this.formInput.invalid)return;let a=localStorage.getItem("currentUser");a=null!=a?JSON.parse(a):null;let e={Authorization:a.token,x_api_key:a.key,search:{value:"",regex:!1},date_from:0,date_to:0,pengguna:""};e.date_from=new Date(this.convertTime(this.formInput.value.date_from[0])).getTime(),e.date_to=new Date(this.convertTime(this.formInput.value.date_from[1])).getTime(),e.pengguna=this.formInput.value.pengguna,this.modulExport.exportAlat(e).subscribe(n=>{this.download(n),this.search=!1})}showDataTables(){let a=this;return{pageLength:10,serverSide:!0,processing:!0,order:[],ajax:(e,n)=>{e.date_from=new Date(this.convertTime(this.formInput.value.date_from[0])).getTime(),e.date_to=new Date(this.convertTime(this.formInput.value.date_from[1])).getTime(),e.pengguna=this.formInput.value.pengguna,this.ModulPembelian.getAlat(e).subscribe(l=>{n({draw:l.response.draw,recordsTotal:l.response.recordsTotal,recordsFiltered:l.response.recordsFiltered,data:l.response.data})})},columns:[{orderable:!1,searchable:!1,render:(e,n,l,u)=>u.row+1+u.settings._iDisplayStart},{data:"tgl_faktur_unix",render:(e,n,l,u)=>h(e).format("DD-MM-YYYY")},{data:"nomor_faktur"},{data:"nama_supplier"},{data:"nama_creator"},{data:"pembayaran"},{data:"total",render:(e,n,l,u)=>a.money.formatRupiah(parseInt(e.replace(".",",")))}]}}}return o.\u0275fac=function(a){return new(a||o)(t.Y36(g.z),t.Y36(b.L),t.Y36(v.r),t.Y36(i.qu))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-view"]],viewQuery:function(a,e){if(1&a&&t.Gf(d.G,5),2&a){let n;t.iGM(n=t.CRH())&&(e.datatableElement=n.first)}},decls:51,vars:9,consts:[[1,"content"],[1,"content-block"],[1,"block-header"],[3,"title","items","active_item"],[1,"text-center","mb-4"],[1,"row","clearfix"],[1,"col-xs-12","col-sm-12","col-md-12","col-lg-12"],[1,"card"],[1,"header"],[1,"body"],[3,"formGroup"],[1,"row"],[1,"col-sm-2","col-form-label","fw-bold"],[1,"col-sm-8"],["type","text","formControlName","date_from","bsDaterangepicker","",1,"form-control",3,"bsConfig"],["class","text-danger",4,"ngIf"],[1,"col-sm-9","offset-md-2"],["type","button",1,"btn","btn-md","btn-tampilkan-cari",3,"click"],[1,"fa","fa-download"],["type","button",1,"btn","btn-md","btn-primary",3,"click"],[1,"fa","fa-search"],[1,"table-responsive"],["width","100%","datatable","",1,"table","table-striped","table-bordered","table-sm","table-sm",3,"dtOptions"],[1,"text-danger"]],template:function(a,e){1&a&&(t.TgZ(0,"section",0)(1,"div",1)(2,"div",2),t._UZ(3,"app-breadcrumb",3),t.qZA(),t.TgZ(4,"h3",4),t._uU(5,"Laporan Pembelian Alat"),t.qZA(),t.TgZ(6,"div",5)(7,"div",6)(8,"div",7)(9,"div",8)(10,"h2")(11,"strong"),t._uU(12,"Laporan Pembelian Alat"),t.qZA()()(),t.TgZ(13,"div",9)(14,"form",10)(15,"div",11)(16,"label",12),t._uU(17,"Tanggal Transaksi"),t.qZA(),t.TgZ(18,"div",13),t._UZ(19,"input",14),t.YNc(20,Z,2,0,"p",15),t.qZA()(),t.TgZ(21,"div",11)(22,"div",16)(23,"button",17),t.NdJ("click",function(){return e.export()}),t._UZ(24,"i",18),t._uU(25," Excel"),t.qZA(),t.TgZ(26,"button",19),t.NdJ("click",function(){return e.reLoadData()}),t._UZ(27,"i",20),t._uU(28," Cari"),t.qZA()()()()()(),t.TgZ(29,"div",7),t._UZ(30,"div",8),t.TgZ(31,"div",9)(32,"div",21)(33,"table",22)(34,"thead")(35,"tr")(36,"th"),t._uU(37,"No"),t.qZA(),t.TgZ(38,"th"),t._uU(39,"Tgl. Faktur"),t.qZA(),t.TgZ(40,"th"),t._uU(41,"No. Faktur"),t.qZA(),t.TgZ(42,"th"),t._uU(43,"PBF/Supplier"),t.qZA(),t.TgZ(44,"th"),t._uU(45,"Pencatat"),t.qZA(),t.TgZ(46,"th"),t._uU(47,"Pembayaran"),t.qZA(),t.TgZ(48,"th"),t._uU(49,"Total"),t.qZA()()(),t._UZ(50,"tbody"),t.qZA()()()()()()()()),2&a&&(t.xp6(3),t.Q6J("title","Laporan")("items",t.DdM(7,w))("active_item","Laporan Pembelian Alat"),t.xp6(11),t.Q6J("formGroup",e.formInput),t.xp6(5),t.Q6J("bsConfig",t.DdM(8,A)),t.xp6(1),t.Q6J("ngIf",""==e.formInput.value.date_from&&e.search),t.xp6(13),t.Q6J("dtOptions",e.dtOptions))},directives:[T.L,i._Y,i.JL,i.sg,i.Fj,m.TB,i.JJ,i.u,m.FR,p.O5,d.G],styles:[""]}),o})()}];let y=(()=>{class o{}return o.\u0275fac=function(a){return new(a||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[f.Bz.forChild(D)],f.Bz]}),o})();var x=r(60795);let U=(()=>{class o{}return o.\u0275fac=function(a){return new(a||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[p.ez,y,x.K,d.T,i.u5,i.UX,m.kn.forRoot()]]}),o})()}}]);