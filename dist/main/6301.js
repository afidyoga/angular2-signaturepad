"use strict";(self.webpackChunkangularlight=self.webpackChunkangularlight||[]).push([[6301],{86307:(M,_,s)=>{s.d(_,{m:()=>d});var f=s(5e3),D=s(95305);let d=(()=>{class l{constructor(m){this.authService=m}getUrlModule(m){return this.authService.currentUserValue.repo.find(h=>h.key_repo==m).url_repo}}return l.\u0275fac=function(m){return new(m||l)(f.LFG(D.e))},l.\u0275prov=f.Yz7({token:l,factory:l.\u0275fac,providedIn:"root"}),l})()},6301:(M,_,s)=>{s.r(_),s.d(_,{SuratModule:()=>B});var f=s(69808),D=s(60795),d=s(65415),l=s(93075),v=s(16270),m=s(23007),c=s(15439),t=s(5e3),h=s(50072),Y=s(89955),S=s(86307),T=s(40520);let b=(()=>{class o{constructor(r,e){this.generalService=r,this.http=e,this.urlBase="laporan-surat",this.urlModule=this.generalService.getUrlModule(Y.s.url_module.modulLaporan)}getSuratSehat(r){return this.http.post(this.urlModule+"/"+this.urlBase+"/list-surat-sehat",r)}getSuratSakit(r){return this.http.post(this.urlModule+"/"+this.urlBase+"/list-surat-sakit",r)}getSuratRujukan(r){return this.http.post(this.urlModule+"/"+this.urlBase+"/list-surat-rujukan",r)}getSuratDiagnosa(r){return this.http.post(this.urlModule+"/"+this.urlBase+"/list-surat-diagnosis",r)}}return o.\u0275fac=function(r){return new(r||o)(t.LFG(S.m),t.LFG(T.eN))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var w=s(95305);let k=(()=>{class o{constructor(r,e,n){this.generalService=r,this.http=e,this.authenticationService=n,this.urlBase="surat-dokter",this.currentUser=this.authenticationService.currentUserValue,this.header=new T.WM({Accept:"application/octet-stream","Content-Type":"blob",Authorization:`Bearer ${this.currentUser.token}`}),this.urlModule=this.generalService.getUrlModule(Y.s.url_module.export)}exportSuratSehat(r,e){return this.http.post(this.urlModule+"/"+this.urlBase+"/sehat/"+e,r,{responseType:"arraybuffer",headers:this.header})}exportSuratSakit(r,e){return this.http.post(this.urlModule+"/"+this.urlBase+"/sakit/"+e,r,{responseType:"arraybuffer",headers:this.header})}exportSuratRujukan(r,e){return this.http.post(this.urlModule+"/"+this.urlBase+"/rujukan/"+e,r,{responseType:"arraybuffer",headers:this.header})}exportSuratDiagnosa(r,e){return this.http.post(this.urlModule+"/"+this.urlBase+"/keterangan-diagnosis/"+e,r,{responseType:"arraybuffer",headers:this.header})}}return o.\u0275fac=function(r){return new(r||o)(t.LFG(S.m),t.LFG(T.eN),t.LFG(w.e))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var y=s(98711),Z=s(33399),g=s(67236);const x=function(){return[]},A=function(){return{dateInputFormat:"DD/MM/YYYY",rangeInputFormat:"DD/MM/YYYY"}};let U=(()=>{class o{constructor(r,e,n,a,i){this.spinner=r,this.surat=e,this.suratExport=n,this.auth=a,this.aes=i,this.datatableElement=d.G,this.dtOptions={},this.tgl=[new Date,new Date],this.minDate=new Date,this.maxDate=new Date}ngOnInit(){let r=localStorage.getItem("currentUser")?JSON.parse(localStorage.getItem("currentUser")):null;this.keyGen=r?this.aes.getKeyLogin(r):"";var e=new Date,n=e.getFullYear(),a=e.getMonth();this.minDate=new Date(n,a,1),this.maxDate=new Date(n,a+1,0),this.dtOptions=this.showDataTables(),this.tgl=[new Date(n,a,1),new Date]}download(r,e){const n=window.URL.createObjectURL(new Blob([r],{type:"application/ms-excel"})),a=document.createElement("a");a.href=n,a.setAttribute("download",e),document.body.appendChild(a),a.click()}convertTime(r){let e=c(new Date(r)).format("YYYY-MM-DD")+" 00:00:00";return new Date(e).getTime()}dekryp(r){try{return this.aes.decrypt(r,this.keyGen.key,this.keyGen.iv,256)}catch(e){return r}}exportAll(){this.spinner.show("spinner1");let r=localStorage.getItem("currentUser");r=null!=r?JSON.parse(r):null;let e={Authorization:r.token,x_api_key:r.key,date_from:0,date_to:0};null!=this.tgl&&(e.date_from=this.convertTime(this.tgl[0]),e.date_to=this.convertTime(this.tgl[1]),this.suratExport.exportSuratSakit(e,"").subscribe(n=>{this.spinner.hide("spinner1"),this.download(n,"Surat Sakit.xlsx")}))}export(r){this.spinner.show("spinner1");let e=localStorage.getItem("currentUser");e=null!=e?JSON.parse(e):null;let n={Authorization:e.token,x_api_key:e.key,date_from:0,date_to:0};null!=this.tgl&&(n.date_from=this.convertTime(this.tgl[0]),n.date_to=this.convertTime(this.tgl[1]),this.suratExport.exportSuratSakit(n,r.id_diagnosa_surat_sakit).subscribe(a=>{this.spinner.hide("spinner1");let i=c(new Date(r.tgl_antrian_unix)).format("DD/MM/YYYY");this.download(a,`Surat Sakit-${r.nama}-${i}-${r.full_rm}.pdf`)}))}convertDate(r){return c(new Date(r)).format("DD/MM/YYYY")}getAge(r){var e=new Date;let n=this.dekryp(r);var a=new Date(""!=n?n:r),i=e.getFullYear()-a.getFullYear(),p=e.getMonth()-a.getMonth();return(p<0||0===p&&e.getDate()<a.getDate())&&i--,i}showDataTables(){let r=this;return this.spinner.show("spinner1"),{pageLength:10,serverSide:!0,processing:!0,order:[],ajax:(e,n)=>{e.date_from=this.convertTime(this.tgl[0]),e.date_to=this.convertTime(this.tgl[1]),this.surat.getSuratSakit(e).subscribe(a=>{this.spinner.hide("spinner1"),n({draw:a.response.draw,recordsTotal:a.response.recordsTotal,recordsFiltered:a.response.recordsFiltered,data:a.response.data})})},columns:[{orderable:!1,searchable:!1,render:(e,n,a,i)=>i.row+1+i.settings._iDisplayStart},{data:"full_rm"},{data:"nama"},{data:"tipe_pasien"},{data:"jenis_kelamin"},{data:"tgl_lahir",render:(e,n,a,i)=>r.getAge(e)},{data:"tgl_antrian_unix",render:(e,n,a,i)=>c(new Date(e)).format("DD-MM-YYYY")},{orderable:!1,searchable:!1,render:(e,n,a,i)=>"<button class=\"btn btn-sm btn-info cetak mb-2\" ><i class='fa fa-print'></i> Cetak</button>"}],rowCallback:(e,n,a)=>{const i=this;return $("td .cetak",e).on("click",()=>{i.cetak(n)}),e}}}reLoadData(){this.datatableElement.dtInstance.then(r=>{r.ajax.reload()})}cetak(r){this.export(r)}}return o.\u0275fac=function(r){return new(r||o)(t.Y36(h.t2),t.Y36(b),t.Y36(k),t.Y36(w.e),t.Y36(y.g))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-view"]],viewQuery:function(r,e){if(1&r&&t.Gf(d.G,5),2&r){let n;t.iGM(n=t.CRH())&&(e.datatableElement=n.first)}},decls:51,vars:11,consts:[[1,"content"],[1,"content-block"],[1,"block-header"],[3,"title","items","active_item"],[1,"text-center","mb-4"],[1,"row","clearfix"],[1,"col-xs-12","col-sm-12","col-md-12","col-lg-12"],[1,"card","mb-3"],[1,"row","mt-3","mx-2"],[1,"col-md-4"],[1,"row","mb-2"],[1,"col-md-4","mt-2"],[1,"col-md-8"],["type","text","bsDaterangepicker","",1,"form-control",3,"ngModel","bsConfig","ngModelChange"],[1,"col-md-2"],[1,"btn","btn-info","text-white",3,"click"],[1,"card"],[1,"body"],[1,"alert","alert-secondary","mb-3"],[1,"row","w100"],[1,"col-md-10"],[1,"col-md-2","text-right"],["width","100%","datatable","",1,"table","table-sm","table-bordered","table-striped","table-sm",3,"dtOptions"],["bdColor","rgba(0, 0, 0, 0.8)","size","medium","color","#fff","type","ball-clip-rotate-multiple",3,"name","fullScreen"],[2,"color","white"]],template:function(r,e){1&r&&(t.TgZ(0,"section",0)(1,"div",1)(2,"div",2),t._UZ(3,"app-breadcrumb",3),t.qZA(),t.TgZ(4,"h3",4),t._uU(5,"Surat Sakit"),t.qZA(),t.TgZ(6,"div",5)(7,"div",6)(8,"div",7)(9,"div",8)(10,"div",9)(11,"div",10)(12,"div",11),t._uU(13," Tgl Kunjungan "),t.qZA(),t.TgZ(14,"div",12)(15,"input",13),t.NdJ("ngModelChange",function(a){return e.tgl=a}),t.qZA()()()(),t.TgZ(16,"div",14)(17,"button",15),t.NdJ("click",function(){return e.reLoadData()}),t._uU(18,"Lihat Data"),t.qZA()()()(),t.TgZ(19,"div",16)(20,"div",17)(21,"div",18)(22,"div",19)(23,"div",20),t._uU(24),t.qZA(),t.TgZ(25,"div",21)(26,"button",15),t.NdJ("click",function(){return e.exportAll()}),t._uU(27,"Export Excel"),t.qZA()()()(),t.TgZ(28,"table",22)(29,"thead")(30,"tr")(31,"td"),t._uU(32,"No"),t.qZA(),t.TgZ(33,"td"),t._uU(34,"No RM"),t.qZA(),t.TgZ(35,"td"),t._uU(36,"Nama"),t.qZA(),t.TgZ(37,"td"),t._uU(38,"Asuransi"),t.qZA(),t.TgZ(39,"td"),t._uU(40,"JK"),t.qZA(),t.TgZ(41,"td"),t._uU(42,"Usia"),t.qZA(),t.TgZ(43,"td"),t._uU(44,"Waktu Registrasi"),t.qZA(),t.TgZ(45,"td"),t._uU(46,"Aksi"),t.qZA()()(),t._UZ(47,"tbody"),t.qZA()()()()()(),t.TgZ(48,"ngx-spinner",23)(49,"p",24),t._uU(50," Loading... "),t.qZA()()()),2&r&&(t.xp6(3),t.Q6J("title","Surat Dokter")("items",t.DdM(9,x))("active_item","Surat Sakit"),t.xp6(12),t.Q6J("ngModel",e.tgl)("bsConfig",t.DdM(10,A)),t.xp6(9),t.hij(" Daftar Pasien Per ",e.convertDate(e.tgl[0])+" - "+e.convertDate(e.tgl[1])," "),t.xp6(4),t.Q6J("dtOptions",e.dtOptions),t.xp6(20),t.Q6J("name","spinner1")("fullScreen",!0))},directives:[Z.L,g.TB,l.Fj,g.FR,l.JJ,l.On,d.G,h.Ro],styles:[""]}),o})();const C=function(){return[]},J=function(){return{dateInputFormat:"DD/MM/YYYY",rangeInputFormat:"DD/MM/YYYY"}};let F=(()=>{class o{constructor(r,e,n,a,i){this.spinner=r,this.surat=e,this.suratExport=n,this.auth=a,this.aes=i,this.datatableElement=d.G,this.dtOptions={},this.tgl=[new Date,new Date],this.minDate=new Date,this.maxDate=new Date}ngOnInit(){let r=localStorage.getItem("currentUser")?JSON.parse(localStorage.getItem("currentUser")):null;this.keyGen=r?this.aes.getKeyLogin(r):"";var e=new Date,n=e.getFullYear(),a=e.getMonth();this.minDate=new Date(n,a,1),this.maxDate=new Date(n,a+1,0),this.dtOptions=this.showDataTables(),this.tgl=[new Date(n,a,1),new Date]}download(r,e){const n=window.URL.createObjectURL(new Blob([r],{type:"application/ms-excel"})),a=document.createElement("a");a.href=n,a.setAttribute("download",e),document.body.appendChild(a),a.click()}dekryp(r){try{return this.aes.decrypt(r,this.keyGen.key,this.keyGen.iv,256)}catch(e){return r}}convertTime(r){let e=c(new Date(r)).format("YYYY-MM-DD")+" 00:00:00";return new Date(e).getTime()}exportAll(){this.spinner.show("spinner1");let r=localStorage.getItem("currentUser");r=null!=r?JSON.parse(r):null;let e={Authorization:r.token,x_api_key:r.key,date_from:0,date_to:0};null!=this.tgl&&(e.date_from=this.convertTime(this.tgl[0]),e.date_to=this.convertTime(this.tgl[1]),this.suratExport.exportSuratDiagnosa(e,"").subscribe(n=>{this.spinner.hide("spinner1"),this.download(n,"Surat Diagnosa.xlsx")}))}export(r){this.spinner.show("spinner1");let e=localStorage.getItem("currentUser");e=null!=e?JSON.parse(e):null;let n={Authorization:e.token,x_api_key:e.key,date_from:0,date_to:0};null!=this.tgl&&(n.date_from=this.convertTime(this.tgl[0]),n.date_to=this.convertTime(this.tgl[1]),this.suratExport.exportSuratDiagnosa(n,r.id_diagnosa_surat_diagnosis).subscribe(a=>{let i=c(new Date(r.tgl_antrian_unix)).format("DD/MM/YYYY");this.spinner.hide("spinner1"),this.download(a,`Surat Diagnosa-${r.nama}-${i}-${r.full_rm}.pdf`)}))}convertDate(r){return c(new Date(r)).format("DD/MM/YYYY")}getAge(r){var e=new Date;let n=this.dekryp(r);var a=new Date(""!=n?n:r),i=e.getFullYear()-a.getFullYear(),p=e.getMonth()-a.getMonth();return(p<0||0===p&&e.getDate()<a.getDate())&&i--,i}showDataTables(){let r=this;return this.spinner.show("spinner1"),{pageLength:10,serverSide:!0,processing:!0,order:[],ajax:(e,n)=>{e.date_from=this.convertTime(this.tgl[0]),e.date_to=this.convertTime(this.tgl[1]),this.surat.getSuratDiagnosa(e).subscribe(a=>{this.spinner.hide("spinner1"),n({draw:a.response.draw,recordsTotal:a.response.recordsTotal,recordsFiltered:a.response.recordsFiltered,data:a.response.data})})},columns:[{orderable:!1,searchable:!1,render:(e,n,a,i)=>i.row+1+i.settings._iDisplayStart},{data:"full_rm"},{data:"nama"},{data:"tipe_pasien"},{data:"jenis_kelamin"},{data:"tgl_lahir",render:(e,n,a,i)=>r.getAge(e)},{data:"tgl_antrian_unix",render:(e,n,a,i)=>c(new Date(e)).format("DD-MM-YYYY")},{orderable:!1,searchable:!1,render:(e,n,a,i)=>"<button class=\"btn btn-sm btn-info cetak mb-2\" ><i class='fa fa-print'></i> Cetak</button>"}],rowCallback:(e,n,a)=>{const i=this;return $("td .cetak",e).on("click",()=>{i.cetak(n)}),e}}}reLoadData(){this.datatableElement.dtInstance.then(r=>{r.ajax.reload()})}cetak(r){this.export(r)}}return o.\u0275fac=function(r){return new(r||o)(t.Y36(h.t2),t.Y36(b),t.Y36(k),t.Y36(w.e),t.Y36(y.g))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-view"]],viewQuery:function(r,e){if(1&r&&t.Gf(d.G,5),2&r){let n;t.iGM(n=t.CRH())&&(e.datatableElement=n.first)}},decls:51,vars:11,consts:[[1,"content"],[1,"content-block"],[1,"block-header"],[3,"title","items","active_item"],[1,"text-center","mb-4"],[1,"row","clearfix"],[1,"col-xs-12","col-sm-12","col-md-12","col-lg-12"],[1,"card","mb-3"],[1,"row","mt-3","mx-2"],[1,"col-md-4"],[1,"row","mb-2"],[1,"col-md-4","mt-2"],[1,"col-md-8"],["type","text","bsDaterangepicker","",1,"form-control",3,"ngModel","bsConfig","ngModelChange"],[1,"col-md-2"],[1,"btn","btn-info","text-white",3,"click"],[1,"card"],[1,"body"],[1,"alert","alert-secondary","mb-3"],[1,"row","w100"],[1,"col-md-10"],[1,"col-md-2","text-right"],["width","100%","datatable","",1,"table","table-sm","table-bordered","table-striped","table-sm",3,"dtOptions"],["bdColor","rgba(0, 0, 0, 0.8)","size","medium","color","#fff","type","ball-clip-rotate-multiple",3,"name","fullScreen"],[2,"color","white"]],template:function(r,e){1&r&&(t.TgZ(0,"section",0)(1,"div",1)(2,"div",2),t._UZ(3,"app-breadcrumb",3),t.qZA(),t.TgZ(4,"h3",4),t._uU(5,"Surat Diagnosa"),t.qZA(),t.TgZ(6,"div",5)(7,"div",6)(8,"div",7)(9,"div",8)(10,"div",9)(11,"div",10)(12,"div",11),t._uU(13," Tgl Kunjungan "),t.qZA(),t.TgZ(14,"div",12)(15,"input",13),t.NdJ("ngModelChange",function(a){return e.tgl=a}),t.qZA()()()(),t.TgZ(16,"div",14)(17,"button",15),t.NdJ("click",function(){return e.reLoadData()}),t._uU(18,"Lihat Data"),t.qZA()()()(),t.TgZ(19,"div",16)(20,"div",17)(21,"div",18)(22,"div",19)(23,"div",20),t._uU(24),t.qZA(),t.TgZ(25,"div",21)(26,"button",15),t.NdJ("click",function(){return e.exportAll()}),t._uU(27,"Export Excel"),t.qZA()()()(),t.TgZ(28,"table",22)(29,"thead")(30,"tr")(31,"td"),t._uU(32,"No"),t.qZA(),t.TgZ(33,"td"),t._uU(34,"No RM"),t.qZA(),t.TgZ(35,"td"),t._uU(36,"Nama"),t.qZA(),t.TgZ(37,"td"),t._uU(38,"Asuransi"),t.qZA(),t.TgZ(39,"td"),t._uU(40,"JK"),t.qZA(),t.TgZ(41,"td"),t._uU(42,"Usia"),t.qZA(),t.TgZ(43,"td"),t._uU(44,"Waktu Registrasi"),t.qZA(),t.TgZ(45,"td"),t._uU(46,"Aksi"),t.qZA()()(),t._UZ(47,"tbody"),t.qZA()()()()()(),t.TgZ(48,"ngx-spinner",23)(49,"p",24),t._uU(50," Loading... "),t.qZA()()()),2&r&&(t.xp6(3),t.Q6J("title","Surat Dokter")("items",t.DdM(9,C))("active_item","Surat Diagnosa"),t.xp6(12),t.Q6J("ngModel",e.tgl)("bsConfig",t.DdM(10,J)),t.xp6(9),t.hij(" Daftar Pasien Per ",e.convertDate(e.tgl[0])+" - "+e.convertDate(e.tgl[1])," "),t.xp6(4),t.Q6J("dtOptions",e.dtOptions),t.xp6(20),t.Q6J("name","spinner1")("fullScreen",!0))},directives:[Z.L,g.TB,l.Fj,g.FR,l.JJ,l.On,d.G,h.Ro],styles:[""]}),o})();const O=function(){return[]},E=function(){return{dateInputFormat:"DD/MM/YYYY",rangeInputFormat:"DD/MM/YYYY"}},L=function(){return[]},q=function(){return{dateInputFormat:"DD/MM/YYYY",rangeInputFormat:"DD/MM/YYYY"}},R=[{path:"",redirectTo:"sakit",pathMatch:"full"},{path:"sakit",component:U},{path:"kesehatan",component:(()=>{class o{constructor(r,e,n,a,i){this.spinner=r,this.surat=e,this.suratExport=n,this.auth=a,this.aes=i,this.datatableElement=d.G,this.dtOptions={},this.tgl=[new Date,new Date],this.minDate=new Date,this.maxDate=new Date}ngOnInit(){let r=localStorage.getItem("currentUser")?JSON.parse(localStorage.getItem("currentUser")):null;this.keyGen=r?this.aes.getKeyLogin(r):"";var e=new Date,n=e.getFullYear(),a=e.getMonth();this.minDate=new Date(n,a,1),this.maxDate=new Date(n,a+1,0),this.dtOptions=this.showDataTables(),this.tgl=[new Date(n,a,1),new Date]}download(r,e){const n=window.URL.createObjectURL(new Blob([r],{type:"application/ms-excel"})),a=document.createElement("a");a.href=n,a.setAttribute("download",e),document.body.appendChild(a),a.click()}convertTime(r){let e=c(new Date(r)).format("YYYY-MM-DD")+" 00:00:00";return new Date(e).getTime()}dekryp(r){try{return this.aes.decrypt(r,this.keyGen.key,this.keyGen.iv,256)}catch(e){return r}}exportAll(){this.spinner.show("spinner1");let r=localStorage.getItem("currentUser");r=null!=r?JSON.parse(r):null;let e={Authorization:r.token,x_api_key:r.key,date_from:0,date_to:0};null!=this.tgl&&(e.date_from=this.convertTime(this.tgl[0]),e.date_to=this.convertTime(this.tgl[1]),this.suratExport.exportSuratSehat(e,"").subscribe(n=>{this.spinner.hide("spinner1"),this.download(n,"Surat Kesehatan.xlsx")}))}export(r){this.spinner.show("spinner1");let e=localStorage.getItem("currentUser");e=null!=e?JSON.parse(e):null;let n={Authorization:e.token,x_api_key:e.key,date_from:0,date_to:0};null!=this.tgl&&(n.date_from=this.convertTime(this.tgl[0]),n.date_to=this.convertTime(this.tgl[1]),this.suratExport.exportSuratSehat(n,r.id_diagnosa_surat_sehat).subscribe(a=>{this.spinner.hide("spinner1");let i=c(new Date(r.tgl_antrian_unix)).format("DD/MM/YYYY");this.download(a,`Surat Kesehatan-${r.nama}-${i}-${r.full_rm}.pdf`)}))}convertDate(r){return c(new Date(r)).format("DD/MM/YYYY")}getAge(r){var e=new Date;let n=this.dekryp(r);var a=new Date(""!=n?n:r),i=e.getFullYear()-a.getFullYear(),p=e.getMonth()-a.getMonth();return(p<0||0===p&&e.getDate()<a.getDate())&&i--,i}showDataTables(){let r=this;return this.spinner.show("spinner1"),{pageLength:10,serverSide:!0,processing:!0,order:[],ajax:(e,n)=>{e.date_from=this.convertTime(this.tgl[0]),e.date_to=this.convertTime(this.tgl[1]),this.surat.getSuratSehat(e).subscribe(a=>{this.spinner.hide("spinner1"),n({draw:a.response.draw,recordsTotal:a.response.recordsTotal,recordsFiltered:a.response.recordsFiltered,data:a.response.data})})},columns:[{orderable:!1,searchable:!1,render:(e,n,a,i)=>i.row+1+i.settings._iDisplayStart},{data:"full_rm"},{data:"nama"},{data:"tipe_pasien"},{data:"jenis_kelamin"},{data:"tgl_lahir",render:(e,n,a,i)=>r.getAge(e)},{data:"tgl_antrian_unix",render:(e,n,a,i)=>c(new Date(e)).format("DD-MM-YYYY")},{orderable:!1,searchable:!1,render:(e,n,a,i)=>"<button class=\"btn btn-sm btn-info cetak mb-2\" ><i class='fa fa-print'></i> Cetak</button>"}],rowCallback:(e,n,a)=>{const i=this;return $("td .cetak",e).on("click",()=>{i.cetak(n)}),e}}}reLoadData(){this.datatableElement.dtInstance.then(r=>{r.ajax.reload()})}cetak(r){this.export(r)}}return o.\u0275fac=function(r){return new(r||o)(t.Y36(h.t2),t.Y36(b),t.Y36(k),t.Y36(w.e),t.Y36(y.g))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-view"]],viewQuery:function(r,e){if(1&r&&t.Gf(d.G,5),2&r){let n;t.iGM(n=t.CRH())&&(e.datatableElement=n.first)}},decls:51,vars:11,consts:[[1,"content"],[1,"content-block"],[1,"block-header"],[3,"title","items","active_item"],[1,"text-center","mb-4"],[1,"row","clearfix"],[1,"col-xs-12","col-sm-12","col-md-12","col-lg-12"],[1,"card","mb-3"],[1,"row","mt-3","mx-2"],[1,"col-md-4"],[1,"row","mb-2"],[1,"col-md-4","mt-2"],[1,"col-md-8"],["type","text","bsDaterangepicker","",1,"form-control",3,"ngModel","bsConfig","ngModelChange"],[1,"col-md-2"],[1,"btn","btn-info","text-white",3,"click"],[1,"card"],[1,"body"],[1,"alert","alert-secondary","mb-3"],[1,"row","w100"],[1,"col-md-10"],[1,"col-md-2","text-right"],["width","100%","datatable","",1,"table","table-sm","table-bordered","table-striped","table-sm",3,"dtOptions"],["bdColor","rgba(0, 0, 0, 0.8)","size","medium","color","#fff","type","ball-clip-rotate-multiple",3,"name","fullScreen"],[2,"color","white"]],template:function(r,e){1&r&&(t.TgZ(0,"section",0)(1,"div",1)(2,"div",2),t._UZ(3,"app-breadcrumb",3),t.qZA(),t.TgZ(4,"h3",4),t._uU(5,"Surat Sehat"),t.qZA(),t.TgZ(6,"div",5)(7,"div",6)(8,"div",7)(9,"div",8)(10,"div",9)(11,"div",10)(12,"div",11),t._uU(13," Tgl Kunjungan "),t.qZA(),t.TgZ(14,"div",12)(15,"input",13),t.NdJ("ngModelChange",function(a){return e.tgl=a}),t.qZA()()()(),t.TgZ(16,"div",14)(17,"button",15),t.NdJ("click",function(){return e.reLoadData()}),t._uU(18,"Lihat Data"),t.qZA()()()(),t.TgZ(19,"div",16)(20,"div",17)(21,"div",18)(22,"div",19)(23,"div",20),t._uU(24),t.qZA(),t.TgZ(25,"div",21)(26,"button",15),t.NdJ("click",function(){return e.exportAll()}),t._uU(27,"Export Excel"),t.qZA()()()(),t.TgZ(28,"table",22)(29,"thead")(30,"tr")(31,"td"),t._uU(32,"No"),t.qZA(),t.TgZ(33,"td"),t._uU(34,"No RM"),t.qZA(),t.TgZ(35,"td"),t._uU(36,"Nama"),t.qZA(),t.TgZ(37,"td"),t._uU(38,"Asuransi"),t.qZA(),t.TgZ(39,"td"),t._uU(40,"JK"),t.qZA(),t.TgZ(41,"td"),t._uU(42,"Usia"),t.qZA(),t.TgZ(43,"td"),t._uU(44,"Waktu Registrasi"),t.qZA(),t.TgZ(45,"td"),t._uU(46,"Aksi"),t.qZA()()(),t._UZ(47,"tbody"),t.qZA()()()()()(),t.TgZ(48,"ngx-spinner",23)(49,"p",24),t._uU(50," Loading... "),t.qZA()()()),2&r&&(t.xp6(3),t.Q6J("title","Surat Dokter")("items",t.DdM(9,O))("active_item","Surat Sehat"),t.xp6(12),t.Q6J("ngModel",e.tgl)("bsConfig",t.DdM(10,E)),t.xp6(9),t.hij(" Daftar Pasien Per ",e.convertDate(e.tgl[0])+" - "+e.convertDate(e.tgl[1])," "),t.xp6(4),t.Q6J("dtOptions",e.dtOptions),t.xp6(20),t.Q6J("name","spinner1")("fullScreen",!0))},directives:[Z.L,g.TB,l.Fj,g.FR,l.JJ,l.On,d.G,h.Ro],styles:[""]}),o})()},{path:"rujukan",component:(()=>{class o{constructor(r,e,n,a,i){this.spinner=r,this.surat=e,this.suratExport=n,this.auth=a,this.aes=i,this.datatableElement=d.G,this.dtOptions={},this.tgl=[new Date,new Date],this.minDate=new Date,this.maxDate=new Date}ngOnInit(){let r=localStorage.getItem("currentUser")?JSON.parse(localStorage.getItem("currentUser")):null;this.keyGen=r?this.aes.getKeyLogin(r):"";var e=new Date,n=e.getFullYear(),a=e.getMonth();this.minDate=new Date(n,a,1),this.maxDate=new Date(n,a+1,0),this.dtOptions=this.showDataTables(),this.tgl=[new Date(n,a,1),new Date]}download(r,e){const n=window.URL.createObjectURL(new Blob([r],{type:"application/ms-excel"})),a=document.createElement("a");a.href=n,a.setAttribute("download",e),document.body.appendChild(a),a.click()}convertTime(r){let e=c(new Date(r)).format("YYYY-MM-DD")+" 00:00:00";return new Date(e).getTime()}dekryp(r){try{return this.aes.decrypt(r,this.keyGen.key,this.keyGen.iv,256)}catch(e){return r}}exportAll(){this.spinner.show("spinner1");let r=localStorage.getItem("currentUser");r=null!=r?JSON.parse(r):null;let e={Authorization:r.token,x_api_key:r.key,date_from:0,date_to:0};null!=this.tgl&&(e.date_from=this.convertTime(this.tgl[0]),e.date_to=this.convertTime(this.tgl[1]),this.suratExport.exportSuratRujukan(e,"").subscribe(n=>{this.spinner.hide("spinner1"),this.download(n,"Surat Rujukan.xlsx")}))}export(r){this.spinner.show("spinner1");let e=localStorage.getItem("currentUser");e=null!=e?JSON.parse(e):null;let n={Authorization:e.token,x_api_key:e.key,date_from:0,date_to:0};null!=this.tgl&&(n.date_from=this.convertTime(this.tgl[0]),n.date_to=this.convertTime(this.tgl[1]),this.suratExport.exportSuratRujukan(n,r.id_diagnosa_surat_rujukan).subscribe(a=>{this.spinner.hide("spinner1");let i=c(new Date(r.tgl_antrian_unix)).format("DD/MM/YYYY");this.download(a,`Surat Rujukan-${r.nama}-${i}-${r.full_rm}.pdf`)}))}convertDate(r){return c(new Date(r)).format("DD/MM/YYYY")}getAge(r){var e=new Date;let n=this.dekryp(r);var a=new Date(""!=n?n:r),i=e.getFullYear()-a.getFullYear(),p=e.getMonth()-a.getMonth();return(p<0||0===p&&e.getDate()<a.getDate())&&i--,i}showDataTables(){let r=this;return this.spinner.show("spinner1"),{pageLength:10,serverSide:!0,processing:!0,order:[],ajax:(e,n)=>{e.date_from=this.convertTime(this.tgl[0]),e.date_to=this.convertTime(this.tgl[1]),this.surat.getSuratRujukan(e).subscribe(a=>{this.spinner.hide("spinner1"),n({draw:a.response.draw,recordsTotal:a.response.recordsTotal,recordsFiltered:a.response.recordsFiltered,data:a.response.data})})},columns:[{orderable:!1,searchable:!1,render:(e,n,a,i)=>i.row+1+i.settings._iDisplayStart},{data:"full_rm"},{data:"nama"},{data:"tipe_pasien"},{data:"jenis_kelamin"},{data:"tgl_lahir",render:(e,n,a,i)=>r.getAge(e)},{data:"tgl_antrian_unix",render:(e,n,a,i)=>c(new Date(e)).format("DD-MM-YYYY")},{orderable:!1,searchable:!1,render:(e,n,a,i)=>"<button class=\"btn btn-sm btn-info cetak mb-2\" ><i class='fa fa-print'></i> Cetak</button>"}],rowCallback:(e,n,a)=>{const i=this;return $("td .cetak",e).on("click",()=>{i.cetak(n)}),e}}}reLoadData(){this.datatableElement.dtInstance.then(r=>{r.ajax.reload()})}cetak(r){this.export(r)}}return o.\u0275fac=function(r){return new(r||o)(t.Y36(h.t2),t.Y36(b),t.Y36(k),t.Y36(w.e),t.Y36(y.g))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-view"]],viewQuery:function(r,e){if(1&r&&t.Gf(d.G,5),2&r){let n;t.iGM(n=t.CRH())&&(e.datatableElement=n.first)}},decls:51,vars:11,consts:[[1,"content"],[1,"content-block"],[1,"block-header"],[3,"title","items","active_item"],[1,"text-center","mb-4"],[1,"row","clearfix"],[1,"col-xs-12","col-sm-12","col-md-12","col-lg-12"],[1,"card","mb-3"],[1,"row","mt-3","mx-2"],[1,"col-md-4"],[1,"row","mb-2"],[1,"col-md-4","mt-2"],[1,"col-md-8"],["type","text","bsDaterangepicker","",1,"form-control",3,"ngModel","bsConfig","ngModelChange"],[1,"col-md-2"],[1,"btn","btn-info","text-white",3,"click"],[1,"card"],[1,"body"],[1,"alert","alert-secondary","mb-3"],[1,"row","w100"],[1,"col-md-10"],[1,"col-md-2","text-right"],["width","100%","datatable","",1,"table","table-sm","table-bordered","table-striped","table-sm",3,"dtOptions"],["bdColor","rgba(0, 0, 0, 0.8)","size","medium","color","#fff","type","ball-clip-rotate-multiple",3,"name","fullScreen"],[2,"color","white"]],template:function(r,e){1&r&&(t.TgZ(0,"section",0)(1,"div",1)(2,"div",2),t._UZ(3,"app-breadcrumb",3),t.qZA(),t.TgZ(4,"h3",4),t._uU(5,"Surat Rujukan"),t.qZA(),t.TgZ(6,"div",5)(7,"div",6)(8,"div",7)(9,"div",8)(10,"div",9)(11,"div",10)(12,"div",11),t._uU(13," Tgl Kunjungan "),t.qZA(),t.TgZ(14,"div",12)(15,"input",13),t.NdJ("ngModelChange",function(a){return e.tgl=a}),t.qZA()()()(),t.TgZ(16,"div",14)(17,"button",15),t.NdJ("click",function(){return e.reLoadData()}),t._uU(18,"Lihat Data"),t.qZA()()()(),t.TgZ(19,"div",16)(20,"div",17)(21,"div",18)(22,"div",19)(23,"div",20),t._uU(24),t.qZA(),t.TgZ(25,"div",21)(26,"button",15),t.NdJ("click",function(){return e.exportAll()}),t._uU(27,"Export Excel"),t.qZA()()()(),t.TgZ(28,"table",22)(29,"thead")(30,"tr")(31,"td"),t._uU(32,"No"),t.qZA(),t.TgZ(33,"td"),t._uU(34,"No RM"),t.qZA(),t.TgZ(35,"td"),t._uU(36,"Nama"),t.qZA(),t.TgZ(37,"td"),t._uU(38,"Asuransi"),t.qZA(),t.TgZ(39,"td"),t._uU(40,"JK"),t.qZA(),t.TgZ(41,"td"),t._uU(42,"Usia"),t.qZA(),t.TgZ(43,"td"),t._uU(44,"Waktu Registrasi"),t.qZA(),t.TgZ(45,"td"),t._uU(46,"Aksi"),t.qZA()()(),t._UZ(47,"tbody"),t.qZA()()()()()(),t.TgZ(48,"ngx-spinner",23)(49,"p",24),t._uU(50," Loading... "),t.qZA()()()),2&r&&(t.xp6(3),t.Q6J("title","Surat Dokter")("items",t.DdM(9,L))("active_item","Surat Rujukan"),t.xp6(12),t.Q6J("ngModel",e.tgl)("bsConfig",t.DdM(10,q)),t.xp6(9),t.hij(" Daftar Pasien Per ",e.convertDate(e.tgl[0])+" - "+e.convertDate(e.tgl[1])," "),t.xp6(4),t.Q6J("dtOptions",e.dtOptions),t.xp6(20),t.Q6J("name","spinner1")("fullScreen",!0))},directives:[Z.L,g.TB,l.Fj,g.FR,l.JJ,l.On,d.G,h.Ro],styles:[""]}),o})()},{path:"diagnosa",component:F}];let G=(()=>{class o{}return o.\u0275fac=function(r){return new(r||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[m.Bz.forChild(R)],m.Bz]}),o})();var I=s(8202),N=s(83918),V=s(24376);let B=(()=>{class o{}return o.\u0275fac=function(r){return new(r||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[f.ez,h.ef,N.IJ,V.A0,v.z,G,D.K,d.T,g.kn,l.u5,l.UX,v.z,I.Ud]]}),o})()},16270:(M,_,s)=>{s.d(_,{z:()=>d});var f=s(69808),D=s(5e3);let d=(()=>{class l{}return l.\u0275fac=function(m){return new(m||l)},l.\u0275mod=D.oAB({type:l}),l.\u0275inj=D.cJS({imports:[[f.ez]]}),l})()}}]);