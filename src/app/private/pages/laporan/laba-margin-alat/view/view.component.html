<section class="content">
  <div class="content-block">
    <div class="block-header">
      <!-- breadcrumb -->
      <app-breadcrumb [title]="'Laporan'" [items]="[]" [active_item]="'Laporan Laba Margin Alat Kesehatan'"></app-breadcrumb>
    </div>
    <h3 class="text-center mb-4">Laporan Laba Margin Alat Kesehatan</h3>
    <div class="row clearfix">
		<div class="card">
			<div class="header">
			  <h2><strong>Pencarian</strong> </h2>
			</div>
			<div class="body">
			  <form [formGroup]="formInput">
				<div class="row">
				  <label class="col-sm-2 col-form-label fw-bold">Periode</label>
				  <div class="col-sm-8">
					<input type="text" [class.border-danger]="formInput.value.date_from==null && search" 
					formControlName="date_from" placeholder="Periode" bsDaterangepicker autocomplete="off"
					(onShown)="onOpenCalendar($event)"
					[bsConfig]="{ dateInputFormat: 'YYYY', rangeInputFormat : 'YYYY' }" class="form-control">
					<div class="form-text text-danger"
						*ngIf="formInput.value.date_from==null && search">
						Tahun mulai dan selesai tidak boleh kosong
					  </div>
				  </div>
				</div>
  
				<div class="row">
				  <div class="col-sm-9 offset-md-2">
					<!-- <button class="btn btn-md btn-tampilkan-cari" type="button" (click)="export()"><i class="fa fa-download"></i> Excel</button> -->
					<button class="btn btn-md btn-primary" (click)="reLoadData()" type="button"><i class="fa fa-search"></i> Cari</button>
				  </div>
				</div>
			  </form>
			</div>
		  </div>
		<div class="row mb-2">
			<div class="col-md-4 mb-2">
				<div class="card bg-success text-center text-light py-3">
					<h5 class="w100"><b>{{total}}</b></h5>
					<span>Total Penjualan</span>
				</div>
			</div>
			<div class="col-md-4 mb-2">
				<div class="card bg-primary text-center text-light py-3">
					<h5 class="w100"><b>{{jml}}</b></h5>
					<span>Jumlah Penjualan</span>
				</div>
			</div>
			<div class="col-md-4 mb-2">
				<div class="card bg-warning text-center text-light py-3">
					<h5 class="w100"><b>{{avg}}</b></h5>
					<span>Rata-rata Penjualan</span>
				</div>
			</div>
		</div>
		<div class="row mb-2">
			<div class="col-md-6 mb-2">
				<div class="card">
					<div class="header">
						<h5 class="w100">
							<b class="left">50 orang dengen profit tertinggi</b>
							<span class="right">
								<button class="btn btn-secondary" (click)="exportProfit1()"><i class="fas fa-download"></i> Download</button>
							</span>
						</h5>
					</div>
					<div class="card-body">
						<table class="table table-striped table-bordered table-sm table-sm" width="100%" datatable [dtOptions]="dtOptionsProfit1">
						<thead>
						<tr>
							<th>No</th>
							<th>Produk</th>
							<th>Jumlah Terjual</th>
							<th>Satuan</th>
							<th>Total Profit</th>
						</tr>
						</thead>
						<tbody>
						</tbody>
					</table>
					</div>
				</div>
			</div>
			<div class="col-md-6 mb-2">
				<div class="card">
					<div class="header">
						<h5 class="w100">
							<b class="left">50 orang dengen profit terendah</b>
							<span class="right">
								<button class="btn btn-secondary" (click)="exportProfit2()"><i class="fas fa-download"></i> Download</button>
							</span>
						</h5>
					</div>
					<div class="card-body">
						<table class="table table-striped table-bordered table-sm table-sm" width="100%" datatable [dtOptions]="dtOptionsProfit2">
						<thead>
						<tr>
							<th>No</th>
							<th>Produk</th>
							<th>Jumlah Terjual</th>
							<th>Satuan</th>
							<th>Total Profit</th>
						</tr>
						</thead>
						<tbody>
						</tbody>
					</table>
					</div>
				</div>
			</div>
		</div>
		<div class="row mb-2">
			<div class="col-md-6 mb-2">
				<div class="card">
					<div class="header flex">
						<h5 class="w100">
							<b class="left">Barang dengan margin < 10%</b>
							<span class="right">
								<button class="btn btn-secondary" (click)="exportMargin1()"><i class="fas fa-download"></i> Download</button>
							</span>
						</h5>
					</div>
					<div class="card-body">
						<table class="table table-striped table-bordered table-sm table-sm" width="100%" datatable [dtOptions]="dtOptionsMargin1">
						<thead>
						<tr>
							<th>No</th>
							<th>Produk</th>
							<th>Harga Jual</th>
							<th>Harga Pokok</th>
							<th>Margin</th>
						</tr>
						</thead>
						<tbody>
						</tbody>
					</table>
					</div>
				</div>
			</div>
			<div class="col-md-6 mb-2">
				<div class="card">
					<div class="header">
						<h5 class="w100">
							<b class="left">Barang dengan margin > 10%</b>
							<span class="right">
								<button class="btn btn-secondary" (click)="exportMargin2()"><i class="fas fa-download"></i> Download</button>
							</span>
						</h5>
					</div>
					<div class="card-body">
						<table class="table table-striped table-bordered table-sm table-sm" width="100%" datatable [dtOptions]="dtOptionsMargin2">
						<thead>
						<tr>
							<th>No</th>
							<th>Produk</th>
							<th>Harga Jual</th>
							<th>Harga Pokok</th>
							<th>Margin</th>
						</tr>
						</thead>
						<tbody>
						</tbody>
					</table>
					</div>
				</div>
			</div>
		</div>
    </div>
  </div>
  <ngx-spinner
[name]="'spinner1'"
bdColor = "rgba(0, 0, 0, 0.8)"
size = "medium"
color = "#fff"
type = "ball-clip-rotate-multiple"
[fullScreen] = "true">
<p style="color: white" > Loading... </p>
</ngx-spinner>
</section>
